(self.webpackChunknotes_app=self.webpackChunknotes_app||[]).push([[179],{8255:lt=>{function ke($){return Promise.resolve().then(()=>{var _=new Error("Cannot find module '"+$+"'");throw _.code="MODULE_NOT_FOUND",_})}ke.keys=()=>[],ke.resolve=ke,ke.id=8255,lt.exports=ke},7716:(lt,ke,$)=>{"use strict";$.d(ke,{deG:()=>V,tb:()=>vC,AFp:()=>vS,ip1:()=>mC,CZH:()=>hh,hGG:()=>Lm,z2F:()=>xm,sBO:()=>mx,Sil:()=>Rm,_Vd:()=>rh,EJc:()=>EC,SBq:()=>so,qLn:()=>Ku,vpe:()=>pu,gxx:()=>ru,tBr:()=>Fo,XFs:()=>ot,OlP:()=>cn,zs3:()=>jn,ZZ4:()=>lm,aQg:()=>ih,soG:()=>yv,YKP:()=>_D,v3s:()=>nn,h0i:()=>sh,PXZ:()=>zP,R0b:()=>Fs,FiY:()=>Zs,Lbi:()=>wS,g9A:()=>ES,Qsj:()=>bc,FYo:()=>wc,JOm:()=>ga,Tiy:()=>Sb,q3G:()=>ar,tp0:()=>Lo,EAV:()=>JP,Rgc:()=>gl,dDg:()=>IC,DyG:()=>Ln,q4F:()=>Ab,GfV:()=>aD,s_b:()=>By,ifc:()=>qe,eFA:()=>DC,G48:()=>$n,Gpc:()=>G,X6Q:()=>vl,_c5:()=>$S,VLi:()=>NS,c2e:()=>bS,zSh:()=>Tf,wAp:()=>It,vHH:()=>Ne,EiD:()=>ug,mCW:()=>Qs,qzn:()=>T,JVY:()=>w,pB0:()=>fe,eBb:()=>M,L6k:()=>D,LAX:()=>H,cg1:()=>Jg,Tjo:()=>tM,kL8:()=>Ay,yhl:()=>v,dqk:()=>fn,sIi:()=>Sf,CqO:()=>dy,QGY:()=>Iw,F4k:()=>pI,RDi:()=>$p,AaK:()=>re,z3N:()=>Ys,qOj:()=>tw,TTD:()=>hi,_Bn:()=>nD,xp6:()=>NE,uIk:()=>ow,Tol:()=>Ey,ekj:()=>Zg,Suo:()=>rC,Xpm:()=>dr,lG2:()=>Xt,Yz7:()=>wt,cJS:()=>Mn,oAB:()=>Ke,Yjl:()=>Gn,Y36:()=>zd,_UZ:()=>uy,BQk:()=>Tw,ynx:()=>cy,qZA:()=>kf,TgZ:()=>Kd,EpF:()=>fI,n5z:()=>zs,Ikx:()=>Qg,LFG:()=>tn,$8M:()=>fd,NdJ:()=>Ff,CRH:()=>XD,oxw:()=>mI,ALo:()=>Zb,lcZ:()=>lp,xi3:()=>uP,Q6J:()=>ay,DdM:()=>HD,iGM:()=>JD,MAs:()=>YT,CHM:()=>xl,oJD:()=>j0,LSH:()=>Gu,kYT:()=>Rt,Udp:()=>kw,d8E:()=>rb,YNc:()=>cw,W1O:()=>eS,_uU:()=>jw,Oqu:()=>$w,hij:()=>Yg});var _=$(9765),z=$(5319),L=$(7574),_e=$(6682),de=$(8819);function ie(o){for(let l in o)if(o[l]===ie)return l;throw Error("Could not find renamed property on target object.")}function Re(o,l){for(const u in l)l.hasOwnProperty(u)&&!o.hasOwnProperty(u)&&(o[u]=l[u])}function re(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(re).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const l=o.toString();if(null==l)return""+l;const u=l.indexOf("\n");return-1===u?l:l.substring(0,u)}function ne(o,l){return null==o||""===o?null===l?"":l:null==l||""===l?o:o+" "+l}const j=ie({__forward_ref__:ie});function G(o){return o.__forward_ref__=G,o.toString=function(){return re(this())},o}function K(o){return ce(o)?o():o}function ce(o){return"function"==typeof o&&o.hasOwnProperty(j)&&o.__forward_ref__===G}class Ne extends Error{constructor(l,u){super(function(o,l){return`${o?`NG0${o}: `:""}${l}`}(l,u)),this.code=l}}function se(o){return"string"==typeof o?o:null==o?"":String(o)}function me(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():se(o)}function Ct(o,l){const u=l?` in ${l}`:"";throw new Ne("201",`No provider for ${me(o)} found${u}`)}function Dt(o,l){null==o&&function(o,l,u,d){throw new Error(`ASSERTION ERROR: ${o}`+(null==d?"":` [Expected=> ${u} ${d} ${l} <=Actual]`))}(l,o,null,"!=")}function wt(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function Mn(o){return{providers:o.providers||[],imports:o.imports||[]}}function _r(o){return ir(o,ki)||ir(o,es)}function ir(o,l){return o.hasOwnProperty(l)?o[l]:null}function ws(o){return o&&(o.hasOwnProperty(Xn)||o.hasOwnProperty(Ti))?o[Xn]:null}const ki=ie({\u0275prov:ie}),Xn=ie({\u0275inj:ie}),es=ie({ngInjectableDef:ie}),Ti=ie({ngInjectorDef:ie});var ot=(()=>((ot=ot||{})[ot.Default=0]="Default",ot[ot.Host=1]="Host",ot[ot.Self=2]="Self",ot[ot.SkipSelf=4]="SkipSelf",ot[ot.Optional=8]="Optional",ot))();let Yt;function lr(o){const l=Yt;return Yt=o,l}function ht(o,l,u){const d=_r(o);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:u&ot.Optional?null:void 0!==l?l:void Ct(re(o),"Injector")}function Ut(o){return{toString:o}.toString()}var Lt=(()=>((Lt=Lt||{})[Lt.OnPush=0]="OnPush",Lt[Lt.Default=1]="Default",Lt))(),qe=(()=>((qe=qe||{})[qe.Emulated=0]="Emulated",qe[qe.None=2]="None",qe[qe.ShadowDom=3]="ShadowDom",qe))();const st="undefined"!=typeof globalThis&&globalThis,Yo="undefined"!=typeof window&&window,bs="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,fn=st||"undefined"!=typeof global&&global||Yo||bs,Q={},Y=[],X=ie({\u0275cmp:ie}),Me=ie({\u0275dir:ie}),pe=ie({\u0275pipe:ie}),et=ie({\u0275mod:ie}),vt=ie({\u0275loc:ie}),Bt=ie({\u0275fac:ie}),Cn=ie({__NG_ELEMENT_ID__:ie});let cr=0;function dr(o){return Ut(()=>{const u={},d={type:o.type,providersResolver:null,decls:o.decls,vars:o.vars,factory:null,template:o.template||null,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:o.exportAs||null,onPush:o.changeDetection===Lt.OnPush,directiveDefs:null,pipeDefs:null,selectors:o.selectors||Y,viewQuery:o.viewQuery||null,features:o.features||null,data:o.data||{},encapsulation:o.encapsulation||qe.Emulated,id:"c",styles:o.styles||Y,_:null,setInput:null,schemas:o.schemas||null,tView:null},f=o.directives,g=o.features,y=o.pipes;return d.id+=cr++,d.inputs=Wt(o.inputs,u),d.outputs=Wt(o.outputs),g&&g.forEach(b=>b(d)),d.directiveDefs=f?()=>("function"==typeof f?f():f).map(J):null,d.pipeDefs=y?()=>("function"==typeof y?y():y).map(ee):null,d})}function J(o){return vn(o)||function(o){return o[Me]||null}(o)}function ee(o){return function(o){return o[pe]||null}(o)}const Le={};function Ke(o){return Ut(()=>{const l={type:o.type,bootstrap:o.bootstrap||Y,declarations:o.declarations||Y,imports:o.imports||Y,exports:o.exports||Y,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null};return null!=o.id&&(Le[o.id]=o.type),l})}function Rt(o,l){return Ut(()=>{const u=sr(o,!0);u.declarations=l.declarations||Y,u.imports=l.imports||Y,u.exports=l.exports||Y})}function Wt(o,l){if(null==o)return Q;const u={};for(const d in o)if(o.hasOwnProperty(d)){let f=o[d],g=f;Array.isArray(f)&&(g=f[1],f=f[0]),u[f]=d,l&&(l[f]=g)}return u}const Xt=dr;function Gn(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,onDestroy:o.type.prototype.ngOnDestroy||null}}function vn(o){return o[X]||null}function sr(o,l){const u=o[et]||null;if(!u&&!0===l)throw new Error(`Type ${re(o)} does not have '\u0275mod' property.`);return u}function yo(o){return Array.isArray(o)&&"object"==typeof o[1]}function Nr(o){return Array.isArray(o)&&!0===o[1]}function Mh(o){return 0!=(8&o.flags)}function La(o){return 2==(2&o.flags)}function vo(o){return 1==(1&o.flags)}function vr(o){return null!==o.template}function Si(o){return 0!=(512&o[2])}function bo(o,l){return o.hasOwnProperty(Bt)?o[Bt]:null}class Bp{constructor(l,u,d){this.previousValue=l,this.currentValue=u,this.firstChange=d}isFirstChange(){return this.firstChange}}function hi(){return Wc}function Wc(o){return o.type.prototype.ngOnChanges&&(o.setInput=Ua),Uh}function Uh(){const o=zc(this),l=null==o?void 0:o.current;if(l){const u=o.previous;if(u===Q)o.previous=l;else for(let d in l)u[d]=l[d];o.current=null,this.ngOnChanges(l)}}function Ua(o,l,u,d){const f=zc(o)||function(o,l){return o[rs]=l}(o,{previous:Q,current:null}),g=f.current||(f.current={}),y=f.previous,b=this.declaredInputs[u],I=y[b];g[b]=new Bp(I&&I.currentValue,l,y===Q),o[d]=l}hi.ngInherit=!0;const rs="__ngSimpleChanges__";function zc(o){return o[rs]||null}let Sl;function $p(o){Sl=o}function Ds(){return void 0!==Sl?Sl:"undefined"!=typeof document?document:void 0}function On(o){return!!o.listen}const Ss={createRenderer:(o,l)=>Ds()};function An(o){for(;Array.isArray(o);)o=o[0];return o}function Hs(o,l){return An(l[o])}function fi(o,l){return An(l[o.index])}function Rl(o,l){return o.data[l]}function Gs(o,l){return o[l]}function Kr(o,l){const u=l[o];return yo(u)?u:u[0]}function Yc(o){return 4==(4&o[2])}function Nl(o){return 128==(128&o[2])}function is(o,l){return null==l?null:o[l]}function ta(o){o[18]=0}function na(o,l){o[5]+=l;let u=o,d=o[3];for(;null!==d&&(1===l&&1===u[5]||-1===l&&0===u[5]);)d[5]+=l,u=d,d=d[3]}const bt={lFrame:Gh(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Xc(){return bt.bindingsEnabled}function Ve(){return bt.lFrame.lView}function zt(){return bt.lFrame.tView}function xl(o){return bt.lFrame.contextLView=o,o[8]}function Fn(){let o=Pl();for(;null!==o&&64===o.type;)o=o.parent;return o}function Pl(){return bt.lFrame.currentTNode}function Fi(o,l){const u=bt.lFrame;u.currentTNode=o,u.isParent=l}function $a(){return bt.lFrame.isParent}function Au(){bt.lFrame.isParent=!1}function Nu(){return bt.isInCheckNoChangesMode}function Do(o){bt.isInCheckNoChangesMode=o}function Er(){const o=bt.lFrame;let l=o.bindingRootIndex;return-1===l&&(l=o.bindingRootIndex=o.tView.bindingStartIndex),l}function ss(){return bt.lFrame.bindingIndex++}function Ri(o){const l=bt.lFrame,u=l.bindingIndex;return l.bindingIndex=l.bindingIndex+o,u}function Ml(o,l){const u=bt.lFrame;u.bindingIndex=u.bindingRootIndex=o,Ol(l)}function Ol(o){bt.lFrame.currentDirectiveIndex=o}function kl(o){const l=bt.lFrame.currentDirectiveIndex;return-1===l?null:o[l]}function $h(){return bt.lFrame.currentQueryIndex}function Ha(o){bt.lFrame.currentQueryIndex=o}function Ga(o){const l=o[1];return 2===l.type?l.declTNode:1===l.type?o[6]:null}function Hh(o,l,u){if(u&ot.SkipSelf){let f=l,g=o;for(;!(f=f.parent,null!==f||u&ot.Host||(f=Ga(g),null===f||(g=g[15],10&f.type))););if(null===f)return!1;l=f,o=g}const d=bt.lFrame=rd();return d.currentTNode=l,d.lView=o,!0}function qs(o){const l=rd(),u=o[1];bt.lFrame=l,l.currentTNode=u.firstChild,l.lView=o,l.tView=u,l.contextLView=o,l.bindingIndex=u.bindingStartIndex,l.inI18n=!1}function rd(){const o=bt.lFrame,l=null===o?null:o.child;return null===l?Gh(o):l}function Gh(o){const l={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=l),l}function Pu(){const o=bt.lFrame;return bt.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const Gp=Pu;function ra(){const o=Pu();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function gi(){return bt.lFrame.selectedIndex}function So(o){bt.lFrame.selectedIndex=o}function hr(){const o=bt.lFrame;return Rl(o.tView,o.selectedIndex)}function Fl(o,l){for(let u=l.directiveStart,d=l.directiveEnd;u<d;u++){const g=o.data[u].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:b,ngAfterViewInit:I,ngAfterViewChecked:R,ngOnDestroy:P}=g;y&&(o.contentHooks||(o.contentHooks=[])).push(-u,y),b&&((o.contentHooks||(o.contentHooks=[])).push(u,b),(o.contentCheckHooks||(o.contentCheckHooks=[])).push(u,b)),I&&(o.viewHooks||(o.viewHooks=[])).push(-u,I),R&&((o.viewHooks||(o.viewHooks=[])).push(u,R),(o.viewCheckHooks||(o.viewCheckHooks=[])).push(u,R)),null!=P&&(o.destroyHooks||(o.destroyHooks=[])).push(u,P)}}function qn(o,l,u){Mu(o,l,3,u)}function Ll(o,l,u,d){(3&o[2])===u&&Mu(o,l,u,d)}function sd(o,l){let u=o[2];(3&u)===l&&(u&=2047,u+=1,o[2]=u)}function Mu(o,l,u,d){const g=null!=d?d:-1,y=l.length-1;let b=0;for(let I=void 0!==d?65535&o[18]:0;I<y;I++)if("number"==typeof l[I+1]){if(b=l[I],null!=d&&b>=d)break}else l[I]<0&&(o[18]+=65536),(b<g||-1==g)&&(od(o,u,l,I),o[18]=(4294901760&o[18])+I+2),I++}function od(o,l,u,d){const f=u[d]<0,g=u[d+1],b=o[f?-u[d]:u[d]];if(f){if(o[2]>>11<o[18]>>16&&(3&o[2])===l){o[2]+=2048;try{g.call(b)}finally{}}}else try{g.call(b)}finally{}}class oa{constructor(l,u,d){this.factory=l,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=d}}function ud(o,l,u){const d=On(o);let f=0;for(;f<u.length;){const g=u[f];if("number"==typeof g){if(0!==g)break;f++;const y=u[f++],b=u[f++],I=u[f++];d?o.setAttribute(l,b,I,y):l.setAttributeNS(y,b,I)}else{const y=g,b=u[++f];mi(y)?d&&o.setProperty(l,y,b):d?o.setAttribute(l,y,b):l.setAttribute(y,b),f++}}return f}function cd(o){return 3===o||4===o||6===o}function mi(o){return 64===o.charCodeAt(0)}function Ou(o,l){if(null!==l&&0!==l.length)if(null===o||0===o.length)o=l.slice();else{let u=-1;for(let d=0;d<l.length;d++){const f=l[d];"number"==typeof f?u=f:0===u||Wn(o,u,f,null,-1===u||2===u?l[++d]:null)}}return o}function Wn(o,l,u,d,f){let g=0,y=o.length;if(-1===l)y=-1;else for(;g<o.length;){const b=o[g++];if("number"==typeof b){if(b===l){y=-1;break}if(b>l){y=g-1;break}}}for(;g<o.length;){const b=o[g];if("number"==typeof b)break;if(b===u){if(null===d)return void(null!==f&&(o[g+1]=f));if(d===o[g+1])return void(o[g+2]=f)}g++,null!==d&&g++,null!==f&&g++}-1!==y&&(o.splice(y,0,l),g=y+1),o.splice(g++,0,u),null!==d&&o.splice(g++,0,d),null!==f&&o.splice(g++,0,f)}function ku(o){return-1!==o}function os(o){return 32767&o}function Ws(o,l){let u=function(o){return o>>16}(o),d=l;for(;u>0;)d=d[15],u--;return d}let zh=!0;function Fu(o){const l=zh;return zh=o,l}let Zp=0;function Ao(o,l){const u=Un(o,l);if(-1!==u)return u;const d=l[1];d.firstCreatePass&&(o.injectorIndex=l.length,Rs(d.data,o),Rs(l,null),Rs(d.blueprint,null));const f=Ro(o,l),g=o.injectorIndex;if(ku(f)){const y=os(f),b=Ws(f,l),I=b[1].data;for(let R=0;R<8;R++)l[g+R]=b[y+R]|I[y+R]}return l[g+8]=f,g}function Rs(o,l){o.push(0,0,0,0,0,0,0,0,l)}function Un(o,l){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===l[o.injectorIndex+8]?-1:o.injectorIndex}function Ro(o,l){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let u=0,d=null,f=l;for(;null!==f;){const g=f[1],y=g.type;if(d=2===y?g.declTNode:1===y?f[6]:null,null===d)return-1;if(u++,f=f[15],-1!==d.injectorIndex)return d.injectorIndex|u<<16}return-1}function tr(o,l,u){!function(o,l,u){let d;"string"==typeof u?d=u.charCodeAt(0)||0:u.hasOwnProperty(Cn)&&(d=u[Cn]),null==d&&(d=u[Cn]=Zp++);const f=255&d;l.data[o+(f>>5)]|=1<<f}(o,l,u)}function gt(o,l,u){if(u&ot.Optional)return o;Ct(l,"NodeInjector")}function Kt(o,l,u,d){if(u&ot.Optional&&void 0===d&&(d=null),0==(u&(ot.Self|ot.Host))){const f=o[9],g=lr(void 0);try{return f?f.get(l,d,u&ot.Optional):ht(l,d,u&ot.Optional)}finally{lr(g)}}return gt(d,l,u)}function aa(o,l,u,d=ot.Default,f){if(null!==o){const g=function(o){if("string"==typeof o)return o.charCodeAt(0)||0;const l=o.hasOwnProperty(Cn)?o[Cn]:void 0;return"number"==typeof l?l>=0?255&l:Zh:l}(u);if("function"==typeof g){if(!Hh(l,o,d))return d&ot.Host?gt(f,u,d):Kt(l,u,d,f);try{const y=g(d);if(null!=y||d&ot.Optional)return y;Ct(u)}finally{Gp()}}else if("number"==typeof g){let y=null,b=Un(o,l),I=-1,R=d&ot.Host?l[16][6]:null;for((-1===b||d&ot.SkipSelf)&&(I=-1===b?Ro(o,l):l[b+8],-1!==I&&Yh(d,!1)?(y=l[1],b=os(I),l=Ws(I,l)):b=-1);-1!==b;){const P=l[1];if(za(g,b,P.data)){const F=dd(b,l,u,y,d,R);if(F!==Yp)return F}I=l[b+8],-1!==I&&Yh(d,l[1].data[b+8]===R)&&za(g,b,l)?(y=P,b=os(I),l=Ws(I,l)):b=-1}}}return Kt(l,u,d,f)}const Yp={};function Zh(){return new mt(Fn(),Ve())}function dd(o,l,u,d,f,g){const y=l[1],b=y.data[o+8],P=la(b,y,u,null==d?La(b)&&zh:d!=y&&0!=(3&b.type),f&ot.Host&&g===b);return null!==P?fr(l,y,P,b):Yp}function la(o,l,u,d,f){const g=o.providerIndexes,y=l.data,b=1048575&g,I=o.directiveStart,P=g>>20,U=f?b+P:o.directiveEnd;for(let Z=d?b:b+P;Z<U;Z++){const te=y[Z];if(Z<I&&u===te||Z>=I&&te.type===u)return Z}if(f){const Z=y[I];if(Z&&vr(Z)&&Z.type===u)return I}return null}function fr(o,l,u,d){let f=o[u];const g=l.data;if(function(o){return o instanceof oa}(f)){const y=f;y.resolving&&function(o,l){throw new Ne("200",`Circular dependency in DI detected for ${o}`)}(me(g[u]));const b=Fu(y.canSeeViewProviders);y.resolving=!0;const I=y.injectImpl?lr(y.injectImpl):null;Hh(o,d,ot.Default);try{f=o[u]=y.factory(void 0,g,o,d),l.firstCreatePass&&u>=d.directiveStart&&function(o,l,u){const{ngOnChanges:d,ngOnInit:f,ngDoCheck:g}=l.type.prototype;if(d){const y=Wc(l);(u.preOrderHooks||(u.preOrderHooks=[])).push(o,y),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(o,y)}f&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-o,f),g&&((u.preOrderHooks||(u.preOrderHooks=[])).push(o,g),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(o,g))}(u,g[u],l)}finally{null!==I&&lr(I),Fu(b),y.resolving=!1,Gp()}}return f}function za(o,l,u){return!!(u[l+(o>>5)]&1<<o)}function Yh(o,l){return!(o&ot.Self||o&ot.Host&&l)}class mt{constructor(l,u){this._tNode=l,this._lView=u}get(l,u){return aa(this._tNode,this._lView,l,void 0,u)}}function zs(o){return Ut(()=>{const l=o.prototype.constructor,u=l[Bt]||Ul(l),d=Object.prototype;let f=Object.getPrototypeOf(o.prototype).constructor;for(;f&&f!==d;){const g=f[Bt]||Ul(f);if(g&&g!==u)return g;f=Object.getPrototypeOf(f)}return g=>new g})}function Ul(o){return ce(o)?()=>{const l=Ul(K(o));return l&&l()}:bo(o)}function fd(o){return function(o,l){if("class"===l)return o.classes;if("style"===l)return o.styles;const u=o.attrs;if(u){const d=u.length;let f=0;for(;f<d;){const g=u[f];if(cd(g))break;if(0===g)f+=2;else if("number"==typeof g)for(f++;f<d&&"string"==typeof u[f];)f++;else{if(g===l)return u[f+1];f+=2}}}return null}(Fn(),o)}const Bl="__parameters__";function Za(o,l,u){return Ut(()=>{const d=function(o){return function(...u){if(o){const d=o(...u);for(const f in d)this[f]=d[f]}}}(l);function f(...g){if(this instanceof f)return d.apply(this,g),this;const y=new f(...g);return b.annotation=y,b;function b(I,R,P){const F=I.hasOwnProperty(Bl)?I[Bl]:Object.defineProperty(I,Bl,{value:[]})[Bl];for(;F.length<=P;)F.push(null);return(F[P]=F[P]||[]).push(y),I}}return u&&(f.prototype=Object.create(u.prototype)),f.prototype.ngMetadataName=o,f.annotationCls=f,f})}class cn{constructor(l,u){this._desc=l,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=wt({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}toString(){return`InjectionToken ${this._desc}`}}const V=new cn("AnalyzeForEntryComponents"),Ln=Function;function Ui(o,l){void 0===l&&(l=o);for(let u=0;u<o.length;u++){let d=o[u];Array.isArray(d)?(l===o&&(l=o.slice(0,u)),Ui(d,l)):l!==o&&l.push(d)}return l}function xr(o,l){o.forEach(u=>Array.isArray(u)?xr(u,l):l(u))}function ca(o,l,u){l>=o.length?o.push(u):o.splice(l,0,u)}function Mo(o,l){return l>=o.length-1?o.pop():o.splice(l,1)[0]}function Nn(o,l,u){let d=Xa(o,l);return d>=0?o[1|d]=u:(d=~d,function(o,l,u,d){let f=o.length;if(f==l)o.push(u,d);else if(1===f)o.push(d,o[0]),o[0]=u;else{for(f--,o.push(o[f-1],o[f]);f>l;)o[f]=o[f-2],f--;o[l]=u,o[l+1]=d}}(o,d,l,u)),d}function Ja(o,l){const u=Xa(o,l);if(u>=0)return o[1|u]}function Xa(o,l){return function(o,l,u){let d=0,f=o.length>>u;for(;f!==d;){const g=d+(f-d>>1),y=o[g<<u];if(l===y)return g<<u;y>l?f=g:d=g+1}return~(f<<u)}(o,l,1)}const Pr={},Mr="__NG_DI_FLAG__",Vn="ngTempTokenPath",ha=/\n/gm,us="__source",ko=ie({provide:String,useValue:ie});let Hl;function tl(o){const l=Hl;return Hl=o,l}function oE(o,l=ot.Default){if(void 0===Hl)throw new Error("inject() must be called from an injection context");return null===Hl?ht(o,void 0,l):Hl.get(o,l&ot.Optional?null:void 0,l)}function tn(o,l=ot.Default){return(Yt||oE)(K(o),l)}function Ks(o){const l=[];for(let u=0;u<o.length;u++){const d=K(o[u]);if(Array.isArray(d)){if(0===d.length)throw new Error("Arguments array must have arguments.");let f,g=ot.Default;for(let y=0;y<d.length;y++){const b=d[y],I=Xp(b);"number"==typeof I?-1===I?f=b.token:g|=I:f=b}l.push(tn(f,g))}else l.push(tn(d))}return l}function Uu(o,l){return o[Mr]=l,o.prototype[Mr]=l,o}function Xp(o){return o[Mr]}function md(o,l,u,d){const f=o[Vn];throw l[us]&&f.unshift(l[us]),o.message=function(o,l,u,d=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.substr(2):o;let f=re(l);if(Array.isArray(l))f=l.map(re).join(" -> ");else if("object"==typeof l){let g=[];for(let y in l)if(l.hasOwnProperty(y)){let b=l[y];g.push(y+":"+("string"==typeof b?JSON.stringify(b):re(b)))}f=`{${g.join(", ")}}`}return`${u}${d?"("+d+")":""}[${f}]: ${o.replace(ha,"\n  ")}`}("\n"+o.message,f,u,d),o.ngTokenPath=f,o[Vn]=null,o}const Fo=Uu(Za("Inject",o=>({token:o})),-1),Zs=Uu(Za("Optional"),8),Lo=Uu(Za("SkipSelf"),4);let tf,Wl;function rl(o){var l;return(null===(l=function(){if(void 0===tf&&(tf=null,fn.trustedTypes))try{tf=fn.trustedTypes.createPolicy("angular",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch(o){}return tf}())||void 0===l?void 0:l.createHTML(o))||o}function ju(o){var l;return(null===(l=function(){if(void 0===Wl&&(Wl=null,fn.trustedTypes))try{Wl=fn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch(o){}return Wl}())||void 0===l?void 0:l.createHTML(o))||o}class il{constructor(l){this.changingThisBreaksApplicationSecurity=l}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class dE extends il{getTypeName(){return"HTML"}}class Ed extends il{getTypeName(){return"Style"}}class y_ extends il{getTypeName(){return"Script"}}class v_ extends il{getTypeName(){return"URL"}}class E_ extends il{getTypeName(){return"ResourceURL"}}function Ys(o){return o instanceof il?o.changingThisBreaksApplicationSecurity:o}function T(o,l){const u=v(o);if(null!=u&&u!==l){if("ResourceURL"===u&&"URL"===l)return!0;throw new Error(`Required a safe ${l}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===l}function v(o){return o instanceof il&&o.getTypeName()||null}function w(o){return new dE(o)}function D(o){return new Ed(o)}function M(o){return new y_(o)}function H(o){return new v_(o)}function fe(o){return new E_(o)}class at{constructor(l){this.inertDocumentHelper=l}getInertBodyElement(l){l="<body><remove></remove>"+l;try{const u=(new window.DOMParser).parseFromString(rl(l),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(l):(u.removeChild(u.firstChild),u)}catch(u){return null}}}class Et{constructor(l){if(this.defaultDoc=l,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const u=this.inertDocument.createElement("html");this.inertDocument.appendChild(u);const d=this.inertDocument.createElement("body");u.appendChild(d)}}getInertBodyElement(l){const u=this.inertDocument.createElement("template");if("content"in u)return u.innerHTML=rl(l),u;const d=this.inertDocument.createElement("body");return d.innerHTML=rl(l),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(d),d}stripCustomNsAttrs(l){const u=l.attributes;for(let f=u.length-1;0<f;f--){const y=u.item(f).name;("xmlns:ns1"===y||0===y.indexOf("ns1:"))&&l.removeAttribute(y)}let d=l.firstChild;for(;d;)d.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(d),d=d.nextSibling}}const rn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,xs=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Qs(o){return(o=String(o)).match(rn)||o.match(xs)?o:"unsafe:"+o}function ji(o){const l={};for(const u of o.split(","))l[u]=!0;return l}function zl(...o){const l={};for(const u of o)for(const d in u)u.hasOwnProperty(d)&&(l[d]=!0);return l}const sf=ji("area,br,col,hr,img,wbr"),sl=ji("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),wd=ji("rp,rt"),Kl=zl(sf,zl(sl,ji("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),zl(wd,ji("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),zl(wd,sl)),Hu=ji("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ag=ji("srcset"),w_=zl(Hu,ag,ji("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ji("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),V0=ji("script,style,template");class U0{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(l){let u=l.firstChild,d=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?d=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,d&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let f=this.checkClobberedElement(u,u.nextSibling);if(f){u=f;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(l){const u=l.nodeName.toLowerCase();if(!Kl.hasOwnProperty(u))return this.sanitizedSomething=!0,!V0.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const d=l.attributes;for(let f=0;f<d.length;f++){const g=d.item(f),y=g.name,b=y.toLowerCase();if(!w_.hasOwnProperty(b)){this.sanitizedSomething=!0;continue}let I=g.value;Hu[b]&&(I=Qs(I)),ag[b]&&(o=I,I=(o=String(o)).split(",").map(l=>Qs(l.trim())).join(", ")),this.buf.push(" ",y,'="',uf(I),'"')}var o;return this.buf.push(">"),!0}endElement(l){const u=l.nodeName.toLowerCase();Kl.hasOwnProperty(u)&&!sf.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(l){this.buf.push(uf(l))}checkClobberedElement(l,u){if(u&&(l.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${l.outerHTML}`);return u}}const B0=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,SR=/([^\#-~ |!])/g;function uf(o){return o.replace(/&/g,"&amp;").replace(B0,function(l){return"&#"+(1024*(l.charCodeAt(0)-55296)+(l.charCodeAt(1)-56320)+65536)+";"}).replace(SR,function(l){return"&#"+l.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let lg;function ug(o,l){let u=null;try{lg=lg||function(o){const l=new Et(o);return function(){try{return!!(new window.DOMParser).parseFromString(rl(""),"text/html")}catch(o){return!1}}()?new at(l):l}(o);let d=l?String(l):"";u=lg.getInertBodyElement(d);let f=5,g=d;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,d=g,g=u.innerHTML,u=lg.getInertBodyElement(d)}while(d!==g);return rl((new U0).sanitizeChildren(bd(u)||u))}finally{if(u){const d=bd(u)||u;for(;d.firstChild;)d.removeChild(d.firstChild)}}}function bd(o){return"content"in o&&function(o){return o.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===o.nodeName}(o)?o.content:null}var ar=(()=>((ar=ar||{})[ar.NONE=0]="NONE",ar[ar.HTML=1]="HTML",ar[ar.STYLE=2]="STYLE",ar[ar.SCRIPT=3]="SCRIPT",ar[ar.URL=4]="URL",ar[ar.RESOURCE_URL=5]="RESOURCE_URL",ar))();function j0(o){const l=qu();return l?ju(l.sanitize(ar.HTML,o)||""):T(o,"HTML")?ju(Ys(o)):ug(Ds(),se(o))}function Gu(o){const l=qu();return l?l.sanitize(ar.URL,o)||"":T(o,"URL")?Ys(o):Qs(se(o))}function qu(){const o=Ve();return o&&o[12]}const H0="__ngContext__";function Hi(o,l){o[H0]=l}function Dd(o){const l=function(o){return o[H0]||null}(o);return l?Array.isArray(l)?l:l.lView:null}function dg(o){return o.ngOriginalError}function _E(o,...l){o.error(...l)}class Ku{constructor(){this._console=console}handleError(l){const u=this._findOriginalError(l),d=this._findContext(l),f=(o=l)&&o.ngErrorLogger||_E;var o;f(this._console,"ERROR",l),u&&f(this._console,"ORIGINAL ERROR",u),d&&f(this._console,"ERROR CONTEXT",d)}_findContext(l){return l?l.ngDebugContext||this._findContext(dg(l)):null}_findOriginalError(l){let u=l&&dg(l);for(;u&&dg(u);)u=dg(u);return u||null}}const hf=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(fn))();function ol(o){return o instanceof Function?o():o}var ga=(()=>((ga=ga||{})[ga.Important=1]="Important",ga[ga.DashCase=2]="DashCase",ga))();function D_(o,l){return undefined(o,l)}function hg(o){const l=o[3];return Nr(l)?l[3]:l}function A_(o){return pg(o[13])}function fg(o){return pg(o[4])}function pg(o){for(;null!==o&&!Nr(o);)o=o[4];return o}function Zu(o,l,u,d,f){if(null!=d){let g,y=!1;Nr(d)?g=d:yo(d)&&(y=!0,d=d[0]);const b=An(d);0===o&&null!==u?null==f?SE(l,u,b):Qr(l,u,b,f||null,!0):1===o&&null!==u?Qr(l,u,b,f||null,!0):2===o?function(o,l,u){const d=P_(o,l);d&&function(o,l,u,d){On(o)?o.removeChild(l,u,d):l.removeChild(u)}(o,d,l,u)}(l,b,y):3===o&&l.destroyNode(b),null!=g&&function(o,l,u,d,f){const g=u[7];g!==An(u)&&Zu(l,o,d,g,f);for(let b=10;b<u.length;b++){const I=u[b];_g(I[1],I,o,l,d,g)}}(l,o,g,u,f)}}function Sd(o,l,u){return On(o)?o.createElement(l,u):null===u?o.createElement(l):o.createElementNS(u,l)}function IE(o,l){const u=o[9],d=u.indexOf(l),f=l[3];1024&l[2]&&(l[2]&=-1025,na(f,-1)),u.splice(d,1)}function N_(o,l){if(o.length<=10)return;const u=10+l,d=o[u];if(d){const f=d[17];null!==f&&f!==o&&IE(f,d),l>0&&(o[u-1][4]=d[4]);const g=Mo(o,10+l);!function(o,l){_g(o,l,l[11],2,null,null),l[0]=null,l[6]=null}(d[1],d);const y=g[19];null!==y&&y.detachView(g[1]),d[3]=null,d[4]=null,d[2]&=-129}return d}function Yu(o,l){if(!(256&l[2])){const u=l[11];On(u)&&u.destroyNode&&_g(o,l,u,3,null,null),function(o){let l=o[13];if(!l)return x_(o[1],o);for(;l;){let u=null;if(yo(l))u=l[13];else{const d=l[10];d&&(u=d)}if(!u){for(;l&&!l[4]&&l!==o;)yo(l)&&x_(l[1],l),l=l[3];null===l&&(l=o),yo(l)&&x_(l[1],l),u=l&&l[4]}l=u}}(l)}}function x_(o,l){if(!(256&l[2])){l[2]&=-129,l[2]|=256,function(o,l){let u;if(null!=o&&null!=(u=o.destroyHooks))for(let d=0;d<u.length;d+=2){const f=l[u[d]];if(!(f instanceof oa)){const g=u[d+1];if(Array.isArray(g))for(let y=0;y<g.length;y+=2){const b=f[g[y]],I=g[y+1];try{I.call(b)}finally{}}else try{g.call(f)}finally{}}}}(o,l),function(o,l){const u=o.cleanup,d=l[7];let f=-1;if(null!==u)for(let g=0;g<u.length-1;g+=2)if("string"==typeof u[g]){const y=u[g+1],b="function"==typeof y?y(l):An(l[y]),I=d[f=u[g+2]],R=u[g+3];"boolean"==typeof R?b.removeEventListener(u[g],I,R):R>=0?d[f=R]():d[f=-R].unsubscribe(),g+=2}else{const y=d[f=u[g+1]];u[g].call(y)}if(null!==d){for(let g=f+1;g<d.length;g++)d[g]();l[7]=null}}(o,l),1===l[1].type&&On(l[11])&&l[11].destroy();const u=l[17];if(null!==u&&Nr(l[3])){u!==l[3]&&IE(u,l);const d=l[19];null!==d&&d.detachView(o)}}}function DE(o,l,u){return function(o,l,u){let d=l;for(;null!==d&&40&d.type;)d=(l=d).parent;if(null===d)return u[0];if(2&d.flags){const f=o.data[d.directiveStart].encapsulation;if(f===qe.None||f===qe.Emulated)return null}return fi(d,u)}(o,l.parent,u)}function Qr(o,l,u,d,f){On(o)?o.insertBefore(l,u,d,f):l.insertBefore(u,d,f)}function SE(o,l,u){On(o)?o.appendChild(l,u):l.appendChild(u)}function AE(o,l,u,d,f){null!==d?Qr(o,l,u,d,f):SE(o,l,u)}function P_(o,l){return On(o)?o.parentNode(l):l.parentNode}let uT=function(o,l,u){return 40&o.type?fi(o,u):null};function Ad(o,l,u,d){const f=DE(o,d,l),g=l[11],b=function(o,l,u){return uT(o,l,u)}(d.parent||l[6],d,l);if(null!=f)if(Array.isArray(u))for(let I=0;I<u.length;I++)AE(g,f,u[I],b,!1);else AE(g,f,u,b,!1)}function k_(o,l){if(null!==l){const u=l.type;if(3&u)return fi(l,o);if(4&u)return Qu(-1,o[l.index]);if(8&u){const d=l.child;if(null!==d)return k_(o,d);{const f=o[l.index];return Nr(f)?Qu(-1,f):An(f)}}if(32&u)return D_(l,o)()||An(o[l.index]);{const d=_i(o,l);return null!==d?Array.isArray(d)?d[0]:k_(hg(o[16]),d):k_(o,l.next)}}return null}function _i(o,l){return null!==l?o[16][6].projection[l.projection]:null}function Qu(o,l){const u=10+o+1;if(u<l.length){const d=l[u],f=d[1].firstChild;if(null!==f)return k_(d,f)}return l[7]}function mg(o,l,u,d,f,g,y){for(;null!=u;){const b=d[u.index],I=u.type;if(y&&0===l&&(b&&Hi(An(b),d),u.flags|=4),64!=(64&u.flags))if(8&I)mg(o,l,u.child,d,f,g,!1),Zu(l,o,f,b,g);else if(32&I){const R=D_(u,d);let P;for(;P=R();)Zu(l,o,f,P,g);Zu(l,o,f,b,g)}else 16&I?kr(o,l,d,u,f,g):Zu(l,o,f,b,g);u=y?u.projectionNext:u.next}}function _g(o,l,u,d,f,g){mg(u,d,o.firstChild,l,f,g,!1)}function kr(o,l,u,d,f,g){const y=u[16],I=y[6].projection[d.projection];if(Array.isArray(I))for(let R=0;R<I.length;R++)Zu(l,o,f,I[R],g);else mg(o,l,I,y[3],f,g,!0)}function ft(o,l,u){On(o)?o.setAttribute(l,"style",u):l.style.cssText=u}function Nt(o,l,u){On(o)?""===u?o.removeAttribute(l,"class"):o.setAttribute(l,"class",u):l.className=u}function dT(o,l,u){let d=o.length;for(;;){const f=o.indexOf(l,u);if(-1===f)return f;if(0===f||o.charCodeAt(f-1)<=32){const g=l.length;if(f+g===d||o.charCodeAt(f+g)<=32)return f}u=f+1}}const De="ng-template";function $e(o,l,u){let d=0;for(;d<o.length;){let f=o[d++];if(u&&"class"===f){if(f=o[d],-1!==dT(f.toLowerCase(),l,0))return!0}else if(1===f){for(;d<o.length&&"string"==typeof(f=o[d++]);)if(f.toLowerCase()===l)return!0;return!1}}return!1}function Jr(o){return 4===o.type&&o.value!==De}function hT(o,l,u){return l===(4!==o.type||u?o.value:De)}function BR(o,l,u){let d=4;const f=o.attrs||[],g=function(o){for(let l=0;l<o.length;l++)if(cd(o[l]))return l;return o.length}(f);let y=!1;for(let b=0;b<l.length;b++){const I=l[b];if("number"!=typeof I){if(!y)if(4&d){if(d=2|1&d,""!==I&&!hT(o,I,u)||""===I&&1===l.length){if(ma(d))return!1;y=!0}}else{const R=8&d?I:l[++b];if(8&d&&null!==o.attrs){if(!$e(o.attrs,R,u)){if(ma(d))return!1;y=!0}continue}const F=jR(8&d?"class":I,f,Jr(o),u);if(-1===F){if(ma(d))return!1;y=!0;continue}if(""!==R){let U;U=F>g?"":f[F+1].toLowerCase();const Z=8&d?U:null;if(Z&&-1!==dT(Z,R,0)||2&d&&R!==U){if(ma(d))return!1;y=!0}}}}else{if(!y&&!ma(d)&&!ma(I))return!1;if(y&&ma(I))continue;y=!1,d=I|1&d}}return ma(d)||y}function ma(o){return 0==(1&o)}function jR(o,l,u,d){if(null===l)return-1;let f=0;if(d||!u){let g=!1;for(;f<l.length;){const y=l[f];if(y===o)return f;if(3===y||6===y)g=!0;else{if(1===y||2===y){let b=l[++f];for(;"string"==typeof b;)b=l[++f];continue}if(4===y)break;if(0===y){f+=4;continue}}f+=g?1:2}return-1}return function(o,l){let u=o.indexOf(4);if(u>-1)for(u++;u<o.length;){const d=o[u];if("number"==typeof d)return-1;if(d===l)return u;u++}return-1}(l,o)}function fT(o,l,u=!1){for(let d=0;d<l.length;d++)if(BR(o,l[d],u))return!0;return!1}function sn(o,l){return o?":not("+l.trim()+")":l}function yf(o){let l=o[0],u=1,d=2,f="",g=!1;for(;u<o.length;){let y=o[u];if("string"==typeof y)if(2&d){const b=o[++u];f+="["+y+(b.length>0?'="'+b+'"':"")+"]"}else 8&d?f+="."+y:4&d&&(f+=" "+y);else""!==f&&!ma(y)&&(l+=sn(g,f),f=""),d=y,g=g||!ma(d);u++}return""!==f&&(l+=sn(g,f)),l}const We={};function NE(o){Ju(zt(),Ve(),gi()+o,Nu())}function Ju(o,l,u,d){if(!d)if(3==(3&l[2])){const g=o.preOrderCheckHooks;null!==g&&qn(l,g,u)}else{const g=o.preOrderHooks;null!==g&&Ll(l,g,0,u)}So(u)}function vg(o,l){return o<<17|l<<2}function ds(o){return o>>17&32767}function Xr(o){return 2|o}function Ps(o){return(131068&o)>>2}function xE(o,l){return-131069&o|l<<2}function PE(o){return 1|o}function wT(o,l){const u=o.contentQueries;if(null!==u)for(let d=0;d<u.length;d+=2){const f=u[d],g=u[d+1];if(-1!==g){const y=o.data[g];Ha(f),y.contentQueries(2,l[g],g)}}}function ll(o,l,u,d,f,g,y,b,I,R){const P=l.blueprint.slice();return P[0]=f,P[2]=140|d,ta(P),P[3]=P[15]=o,P[8]=u,P[10]=y||o&&o[10],P[11]=b||o&&o[11],P[12]=I||o&&o[12]||null,P[9]=R||o&&o[9]||null,P[6]=g,P[16]=2==l.type?o[16]:P,P}function wf(o,l,u,d,f){let g=o.data[l];if(null===g)g=function(o,l,u,d,f){const g=Pl(),y=$a(),I=o.data[l]=function(o,l,u,d,f,g){return{type:u,index:d,insertBeforeIndex:null,injectorIndex:l?l.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:l,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?g:g&&g.parent,u,l,d,f);return null===o.firstChild&&(o.firstChild=I),null!==g&&(y?null==g.child&&null!==I.parent&&(g.child=I):null===g.next&&(g.next=I)),I}(o,l,u,d,f),bt.lFrame.inI18n&&(g.flags|=64);else if(64&g.type){g.type=u,g.value=d,g.attrs=f;const y=function(){const o=bt.lFrame,l=o.currentTNode;return o.isParent?l:l.parent}();g.injectorIndex=null===y?-1:y.injectorIndex}return Fi(g,!0),g}function Pd(o,l,u,d){if(0===u)return-1;const f=l.length;for(let g=0;g<u;g++)l.push(d),o.blueprint.push(d),o.data.push(null);return f}function Xs(o,l,u){qs(l);try{const d=o.viewQuery;null!==d&&z_(1,d,u);const f=o.template;null!==f&&Ig(o,l,f,1,u),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&wT(o,l),o.staticViewQueries&&z_(2,o.viewQuery,u);const g=o.components;null!==g&&function(o,l){for(let u=0;u<l.length;u++)WE(o,l[u])}(l,g)}catch(d){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),d}finally{l[2]&=-5,ra()}}function Md(o,l,u,d){const f=l[2];if(256==(256&f))return;qs(l);const g=Nu();try{ta(l),function(o){bt.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==u&&Ig(o,l,u,2,d);const y=3==(3&f);if(!g)if(y){const R=o.preOrderCheckHooks;null!==R&&qn(l,R,null)}else{const R=o.preOrderHooks;null!==R&&Ll(l,R,0,null),sd(l,0)}if(function(o){for(let l=A_(o);null!==l;l=fg(l)){if(!l[2])continue;const u=l[9];for(let d=0;d<u.length;d++){const f=u[d],g=f[3];0==(1024&f[2])&&na(g,1),f[2]|=1024}}}(l),function(o){for(let l=A_(o);null!==l;l=fg(l))for(let u=10;u<l.length;u++){const d=l[u],f=d[1];Nl(d)&&Md(f,d,f.template,d[8])}}(l),null!==o.contentQueries&&wT(o,l),!g)if(y){const R=o.contentCheckHooks;null!==R&&qn(l,R)}else{const R=o.contentHooks;null!==R&&Ll(l,R,1),sd(l,1)}!function(o,l){const u=o.hostBindingOpCodes;if(null!==u)try{for(let d=0;d<u.length;d++){const f=u[d];if(f<0)So(~f);else{const g=f,y=u[++d],b=u[++d];Ml(y,g),b(2,l[g])}}}finally{So(-1)}}(o,l);const b=o.components;null!==b&&function(o,l){for(let u=0;u<l.length;u++)xT(o,l[u])}(l,b);const I=o.viewQuery;if(null!==I&&z_(2,I,d),!g)if(y){const R=o.viewCheckHooks;null!==R&&qn(l,R)}else{const R=o.viewHooks;null!==R&&Ll(l,R,2),sd(l,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),g||(l[2]&=-73),1024&l[2]&&(l[2]&=-1025,na(l[3],-1))}finally{ra()}}function bf(o,l,u,d){const f=l[10],g=!Nu(),y=Yc(l);try{g&&!y&&f.begin&&f.begin(),y&&Xs(o,l,d),Md(o,l,u,d)}finally{g&&!y&&f.end&&f.end()}}function Ig(o,l,u,d,f){const g=gi(),y=2&d;try{So(-1),y&&l.length>20&&Ju(o,l,20,Nu()),u(d,f)}finally{So(g)}}function Dg(o,l,u){if(Mh(l)){const f=l.directiveEnd;for(let g=l.directiveStart;g<f;g++){const y=o.data[g];y.contentQueries&&y.contentQueries(1,u[g],g)}}}function Sg(o,l,u){!Xc()||(function(o,l,u,d){const f=u.directiveStart,g=u.directiveEnd;o.firstCreatePass||Ao(u,l),Hi(d,l);const y=u.initialInputs;for(let b=f;b<g;b++){const I=o.data[b],R=vr(I);R&&XR(l,u,I);const P=fr(l,o,b,u);Hi(P,l),null!==y&&ST(0,b-f,P,I,0,y),R&&(Kr(u.index,l)[8]=P)}}(o,l,u,fi(u,l)),128==(128&u.flags)&&function(o,l,u){const d=u.directiveStart,f=u.directiveEnd,y=u.index,b=bt.lFrame.currentDirectiveIndex;try{So(y);for(let I=d;I<f;I++){const R=o.data[I],P=l[I];Ol(I),(null!==R.hostBindings||0!==R.hostVars||null!==R.hostAttrs)&&GE(R,P)}}finally{So(-1),Ol(b)}}(o,l,u))}function Ag(o,l,u=fi){const d=l.localNames;if(null!==d){let f=l.index+1;for(let g=0;g<d.length;g+=2){const y=d[g+1],b=-1===y?u(l,o):o[y];o[f++]=b}}}function B_(o){const l=o.tView;return null===l||l.incompleteFirstPass?o.tView=tu(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):l}function tu(o,l,u,d,f,g,y,b,I,R){const P=20+d,F=P+f,U=function(o,l){const u=[];for(let d=0;d<l;d++)u.push(d<o?null:We);return u}(P,F),Z="function"==typeof R?R():R;return U[1]={type:o,blueprint:U,template:u,queries:null,viewQuery:b,declTNode:l,data:U.slice().fill(null,P),bindingStartIndex:P,expandoStartIndex:F,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:I,consts:Z,incompleteFirstPass:!1}}function $_(o,l,u,d){const f=MT(l);null===u?f.push(d):(f.push(u),o.firstCreatePass&&K_(o).push(d,f.length-1))}function $E(o,l,u){for(let d in o)if(o.hasOwnProperty(d)){const f=o[d];(u=null===u?{}:u).hasOwnProperty(d)?u[d].push(l,f):u[d]=[l,f]}return u}function Ms(o,l,u,d,f,g,y,b){const I=fi(l,u);let P,R=l.inputs;!b&&null!=R&&(P=R[d])?(kT(o,u,P,d,f),La(l)&&function(o,l){const u=Kr(l,o);16&u[2]||(u[2]|=64)}(u,l.index)):3&l.type&&(d=function(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(d),f=null!=y?y(f,l.value||"",d):f,On(g)?g.setProperty(I,d,f):mi(d)||(I.setProperty?I.setProperty(d,f):I[d]=f))}function G_(o,l,u,d){let f=!1;if(Xc()){const g=function(o,l,u){const d=o.directiveRegistry;let f=null;if(d)for(let g=0;g<d.length;g++){const y=d[g];fT(u,y.selectors,!1)&&(f||(f=[]),tr(Ao(u,l),o,y.type),vr(y)?(DT(o,u),f.unshift(y)):f.push(y))}return f}(o,l,u),y=null===d?null:{"":-1};if(null!==g){f=!0,Pg(u,o.data.length,g.length);for(let P=0;P<g.length;P++){const F=g[P];F.providersResolver&&F.providersResolver(F)}let b=!1,I=!1,R=Pd(o,l,g.length,null);for(let P=0;P<g.length;P++){const F=g[P];u.mergedAttrs=Ou(u.mergedAttrs,F.hostAttrs),Mg(o,u,l,R,F),$r(R,F,y),null!==F.contentQueries&&(u.flags|=8),(null!==F.hostBindings||null!==F.hostAttrs||0!==F.hostVars)&&(u.flags|=128);const U=F.type.prototype;!b&&(U.ngOnChanges||U.ngOnInit||U.ngDoCheck)&&((o.preOrderHooks||(o.preOrderHooks=[])).push(u.index),b=!0),!I&&(U.ngOnChanges||U.ngDoCheck)&&((o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(u.index),I=!0),R++}!function(o,l){const d=l.directiveEnd,f=o.data,g=l.attrs,y=[];let b=null,I=null;for(let R=l.directiveStart;R<d;R++){const P=f[R],F=P.inputs,U=null===g||Jr(l)?null:AT(F,g);y.push(U),b=$E(F,R,b),I=$E(P.outputs,R,I)}null!==b&&(b.hasOwnProperty("class")&&(l.flags|=16),b.hasOwnProperty("style")&&(l.flags|=32)),l.initialInputs=y,l.inputs=b,l.outputs=I}(o,u)}y&&function(o,l,u){if(l){const d=o.localNames=[];for(let f=0;f<l.length;f+=2){const g=u[l[f+1]];if(null==g)throw new Ne("301",`Export of name '${l[f+1]}' not found!`);d.push(l[f],g)}}}(u,d,y)}return u.mergedAttrs=Ou(u.mergedAttrs,u.attrs),f}function tc(o,l,u,d,f,g){const y=g.hostBindings;if(y){let b=o.hostBindingOpCodes;null===b&&(b=o.hostBindingOpCodes=[]);const I=~l.index;(function(o){let l=o.length;for(;l>0;){const u=o[--l];if("number"==typeof u&&u<0)return u}return 0})(b)!=I&&b.push(I),b.push(d,f,y)}}function GE(o,l){null!==o.hostBindings&&o.hostBindings(1,l)}function DT(o,l){l.flags|=2,(o.components||(o.components=[])).push(l.index)}function $r(o,l,u){if(u){if(l.exportAs)for(let d=0;d<l.exportAs.length;d++)u[l.exportAs[d]]=o;vr(l)&&(u[""]=o)}}function Pg(o,l,u){o.flags|=1,o.directiveStart=l,o.directiveEnd=l+u,o.providerIndexes=l}function Mg(o,l,u,d,f){o.data[d]=f;const g=f.factory||(f.factory=bo(f.type)),y=new oa(g,vr(f),null);o.blueprint[d]=y,u[d]=y,tc(o,l,0,d,Pd(o,u,f.hostVars,We),f)}function XR(o,l,u){const d=fi(l,o),f=B_(u),g=o[10],y=gr(o,ll(o,f,null,u.onPush?64:16,d,l,g,g.createRenderer(d,u),null,null));o[l.index]=y}function Bo(o,l,u,d,f,g){const y=fi(o,l);!function(o,l,u,d,f,g,y){if(null==g)On(o)?o.removeAttribute(l,f,u):l.removeAttribute(f);else{const b=null==y?se(g):y(g,d||"",f);On(o)?o.setAttribute(l,f,b,u):u?l.setAttributeNS(u,f,b):l.setAttribute(f,b)}}(l[11],y,g,o.value,u,d,f)}function ST(o,l,u,d,f,g){const y=g[l];if(null!==y){const b=d.setInput;for(let I=0;I<y.length;){const R=y[I++],P=y[I++],F=y[I++];null!==b?d.setInput(u,F,R,P):u[P]=F}}}function AT(o,l){let u=null,d=0;for(;d<l.length;){const f=l[d];if(0!==f)if(5!==f){if("number"==typeof f)break;o.hasOwnProperty(f)&&(null===u&&(u=[]),u.push(f,o[f],l[d+1])),d+=2}else d+=2;else d+=4}return u}function nu(o,l,u,d){return new Array(o,!0,!1,l,null,0,d,u,null,null)}function xT(o,l){const u=Kr(l,o);if(Nl(u)){const d=u[1];80&u[2]?Md(d,u,d.template,u[8]):u[5]>0&&kd(u)}}function kd(o){for(let d=A_(o);null!==d;d=fg(d))for(let f=10;f<d.length;f++){const g=d[f];if(1024&g[2]){const y=g[1];Md(y,g,y.template,g[8])}else g[5]>0&&kd(g)}const u=o[1].components;if(null!==u)for(let d=0;d<u.length;d++){const f=Kr(u[d],o);Nl(f)&&f[5]>0&&kd(f)}}function WE(o,l){const u=Kr(l,o),d=u[1];(function(o,l){for(let u=l.length;u<o.blueprint.length;u++)l.push(o.blueprint[u])})(d,u),Xs(d,u,u[8])}function gr(o,l){return o[13]?o[14][4]=l:o[13]=l,o[14]=l,l}function dn(o){for(;o;){o[2]|=64;const l=hg(o);if(Si(o)&&!l)return o;o=l}return null}function Lr(o,l,u){const d=l[10];d.begin&&d.begin();try{Md(o,l,o.template,u)}catch(f){throw zE(l,f),f}finally{d.end&&d.end()}}function Og(o){!function(o){for(let l=0;l<o.components.length;l++){const u=o.components[l],d=Dd(u),f=d[1];bf(f,d,f.template,u)}}(o[8])}function z_(o,l,u){Ha(0),l(o,u)}const jo=(()=>Promise.resolve(null))();function MT(o){return o[7]||(o[7]=[])}function K_(o){return o.cleanup||(o.cleanup=[])}function zE(o,l){const u=o[9],d=u?u.get(Ku,null):null;d&&d.handleError(l)}function kT(o,l,u,d,f){for(let g=0;g<u.length;){const y=u[g++],b=u[g++],I=l[y],R=o.data[y];null!==R.setInput?R.setInput(I,f,d,b):I[b]=f}}function on(o,l,u){const d=Hs(l,o);!function(o,l,u){On(o)?o.setValue(l,u):l.textContent=u}(o[11],d,u)}function Z_(o,l,u){let d=u?o.styles:null,f=u?o.classes:null,g=0;if(null!==l)for(let y=0;y<l.length;y++){const b=l[y];"number"==typeof b?g=b:1==g?f=ne(f,b):2==g&&(d=ne(d,b+": "+l[++y]+";"))}u?o.styles=d:o.stylesWithoutHost=d,u?o.classes=f:o.classesWithoutHost=f}const ru=new cn("INJECTOR",-1);class KE{get(l,u=Pr){if(u===Pr){const d=new Error(`NullInjectorError: No provider for ${re(l)}!`);throw d.name="NullInjectorError",d}return u}}const Tf=new cn("Set Injector scope."),If={},tN={};let J_;function ZE(){return void 0===J_&&(J_=new KE),J_}function FT(o,l=null,u=null,d){return new rN(o,u,l||ZE(),d)}class rN{constructor(l,u,d,f=null){this.parent=d,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const g=[];u&&xr(u,b=>this.processProvider(b,l,u)),xr([l],b=>this.processInjectorType(b,[],g)),this.records.set(ru,nc(void 0,this));const y=this.records.get(Tf);this.scope=null!=y?y.value:null,this.source=f||("object"==typeof l?null:re(l))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(l=>l.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(l,u=Pr,d=ot.Default){this.assertNotDestroyed();const f=tl(this),g=lr(void 0);try{if(!(d&ot.SkipSelf)){let b=this.records.get(l);if(void 0===b){const I=("function"==typeof(o=l)||"object"==typeof o&&o instanceof cn)&&_r(l);b=I&&this.injectableDefInScope(I)?nc(Fd(l),If):null,this.records.set(l,b)}if(null!=b)return this.hydrate(l,b)}return(d&ot.Self?ZE():this.parent).get(l,u=d&ot.Optional&&u===Pr?null:u)}catch(y){if("NullInjectorError"===y.name){if((y[Vn]=y[Vn]||[]).unshift(re(l)),f)throw y;return md(y,l,"R3InjectorError",this.source)}throw y}finally{lr(g),tl(f)}var o}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(l=>this.get(l))}toString(){const l=[];return this.records.forEach((d,f)=>l.push(re(f))),`R3Injector[${l.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(l,u,d){if(!(l=K(l)))return!1;let f=ws(l);const g=null==f&&l.ngModule||void 0,y=void 0===g?l:g,b=-1!==d.indexOf(y);if(void 0!==g&&(f=ws(g)),null==f)return!1;if(null!=f.imports&&!b){let P;d.push(y);try{xr(f.imports,F=>{this.processInjectorType(F,u,d)&&(void 0===P&&(P=[]),P.push(F))})}finally{}if(void 0!==P)for(let F=0;F<P.length;F++){const{ngModule:U,providers:Z}=P[F];xr(Z,te=>this.processProvider(te,U,Z||Y))}}this.injectorDefTypes.add(y);const I=bo(y)||(()=>new y);this.records.set(y,nc(I,If));const R=f.providers;if(null!=R&&!b){const P=l;xr(R,F=>this.processProvider(F,P,R))}return void 0!==g&&void 0!==l.providers}processProvider(l,u,d){let f=rc(l=K(l))?l:K(l&&l.provide);const g=YE(o=l)?nc(void 0,o.useValue):nc(ti(o),If);var o;if(rc(l)||!0!==l.multi)this.records.get(f);else{let y=this.records.get(f);y||(y=nc(void 0,If,!0),y.factory=()=>Ks(y.multi),this.records.set(f,y)),f=l,y.multi.push(l)}this.records.set(f,g)}hydrate(l,u){return u.value===If&&(u.value=tN,u.value=u.factory()),"object"==typeof u.value&&u.value&&null!==(o=u.value)&&"object"==typeof o&&"function"==typeof o.ngOnDestroy&&this.onDestroy.add(u.value),u.value;var o}injectableDefInScope(l){if(!l.providedIn)return!1;const u=K(l.providedIn);return"string"==typeof u?"any"===u||u===this.scope:this.injectorDefTypes.has(u)}}function Fd(o){const l=_r(o),u=null!==l?l.factory:bo(o);if(null!==u)return u;if(o instanceof cn)throw new Error(`Token ${re(o)} is missing a \u0275prov definition.`);if(o instanceof Function)return function(o){const l=o.length;if(l>0){const d=function(o,l){const u=[];for(let d=0;d<o;d++)u.push(l);return u}(l,"?");throw new Error(`Can't resolve all parameters for ${re(o)}: (${d.join(", ")}).`)}const u=function(o){const l=o&&(o[ki]||o[es]);if(l){const u=function(o){if(o.hasOwnProperty("name"))return o.name;const l=(""+o).match(/^function\s*([^\s(]+)/);return null===l?"":l[1]}(o);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),l}return null}(o);return null!==u?()=>u.factory(o):()=>new o}(o);throw new Error("unreachable")}function ti(o,l,u){let d;if(rc(o)){const f=K(o);return bo(f)||Fd(f)}if(YE(o))d=()=>K(o.useValue);else if(function(o){return!(!o||!o.useFactory)}(o))d=()=>o.useFactory(...Ks(o.deps||[]));else if(function(o){return!(!o||!o.useExisting)}(o))d=()=>tn(K(o.useExisting));else{const f=K(o&&(o.useClass||o.provide));if(!function(o){return!!o.deps}(o))return bo(f)||Fd(f);d=()=>new f(...Ks(o.deps))}return d}function nc(o,l,u=!1){return{factory:o,value:l,multi:u?[]:void 0}}function YE(o){return null!==o&&"object"==typeof o&&ko in o}function rc(o){return"function"==typeof o}const jT=function(o,l,u){return function(o,l=null,u=null,d){const f=FT(o,l,u,d);return f._resolveInjectorDefTypes(),f}({name:u},l,o,u)};let jn=(()=>{class o{static create(u,d){return Array.isArray(u)?jT(u,d,""):jT(u.providers,u.parent,u.name||"")}}return o.THROW_IF_NOT_FOUND=Pr,o.NULL=new KE,o.\u0275prov=wt({token:o,providedIn:"any",factory:()=>tn(ru)}),o.__NG_ELEMENT_ID__=-1,o})();function hN(o,l){Fl(Dd(o)[1],Fn())}function tw(o){let l=function(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),u=!0;const d=[o];for(;l;){let f;if(vr(o))f=l.\u0275cmp||l.\u0275dir;else{if(l.\u0275cmp)throw new Error("Directives cannot inherit Components");f=l.\u0275dir}if(f){if(u){d.push(f);const y=o;y.inputs=ry(o.inputs),y.declaredInputs=ry(o.declaredInputs),y.outputs=ry(o.outputs);const b=f.hostBindings;b&&Os(o,b);const I=f.viewQuery,R=f.contentQueries;if(I&&nw(o,I),R&&KT(o,R),Re(o.inputs,f.inputs),Re(o.declaredInputs,f.declaredInputs),Re(o.outputs,f.outputs),vr(f)&&f.data.animation){const P=o.data;P.animation=(P.animation||[]).concat(f.data.animation)}}const g=f.features;if(g)for(let y=0;y<g.length;y++){const b=g[y];b&&b.ngInherit&&b(o),b===tw&&(u=!1)}}l=Object.getPrototypeOf(l)}!function(o){let l=0,u=null;for(let d=o.length-1;d>=0;d--){const f=o[d];f.hostVars=l+=f.hostVars,f.hostAttrs=Ou(f.hostAttrs,u=Ou(u,f.hostAttrs))}}(d)}function ry(o){return o===Q?{}:o===Y?[]:o}function nw(o,l){const u=o.viewQuery;o.viewQuery=u?(d,f)=>{l(d,f),u(d,f)}:l}function KT(o,l){const u=o.contentQueries;o.contentQueries=u?(d,f,g)=>{l(d,f,g),u(d,f,g)}:l}function Os(o,l){const u=o.hostBindings;o.hostBindings=u?(d,f)=>{l(d,f),u(d,f)}:l}let jg=null;function lc(){if(!jg){const o=fn.Symbol;if(o&&o.iterator)jg=o.iterator;else{const l=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<l.length;++u){const d=l[u];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(jg=d)}}}return jg}class ro{constructor(l){this.wrapped=l}static wrap(l){return new ro(l)}static unwrap(l){return ro.isWrapped(l)?l.wrapped:l}static isWrapped(l){return l instanceof ro}}function Sf(o){return!!uc(o)&&(Array.isArray(o)||!(o instanceof Map)&&lc()in o)}function uc(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function ks(o,l,u){return o[l]=u}function vi(o,l,u){return!Object.is(o[l],u)&&(o[l]=u,!0)}function ow(o,l,u,d){const f=Ve();return vi(f,ss(),l)&&(zt(),Bo(hr(),f,o,l,u,d)),ow}function cw(o,l,u,d,f,g,y,b){const I=Ve(),R=zt(),P=o+20,F=R.firstCreatePass?function(o,l,u,d,f,g,y,b,I){const R=l.consts,P=wf(l,o,4,y||null,is(R,b));G_(l,u,P,is(R,I)),Fl(l,P);const F=P.tViews=tu(2,P,d,f,g,l.directiveRegistry,l.pipeRegistry,null,l.schemas,R);return null!==l.queries&&(l.queries.template(l,P),F.queries=l.queries.embeddedTView(P)),P}(P,R,I,l,u,d,f,g,y):R.data[P];Fi(F,!1);const U=I[11].createComment("");Ad(R,I,U,F),Hi(U,I),gr(I,I[P]=nu(U,I,U,F)),vo(F)&&Sg(R,I,F),null!=y&&Ag(I,F,b)}function YT(o){return Gs(bt.lFrame.contextLView,20+o)}function zd(o,l=ot.Default){const u=Ve();return null===u?tn(o,l):aa(Fn(),u,K(o),l)}function ay(o,l,u){const d=Ve();return vi(d,ss(),l)&&Ms(zt(),hr(),d,o,l,d[11],u,!1),ay}function Wg(o,l,u,d,f){const y=f?"class":"style";kT(o,u,l.inputs[y],y,d)}function Kd(o,l,u,d){const f=Ve(),g=zt(),y=20+o,b=f[11],I=f[y]=Sd(b,l,bt.lFrame.currentNamespace),R=g.firstCreatePass?function(o,l,u,d,f,g,y){const b=l.consts,R=wf(l,o,2,f,is(b,g));return G_(l,u,R,is(b,y)),null!==R.attrs&&Z_(R,R.attrs,!1),null!==R.mergedAttrs&&Z_(R,R.mergedAttrs,!0),null!==l.queries&&l.queries.elementStart(l,R),R}(y,g,f,0,l,u,d):g.data[y];Fi(R,!0);const P=R.mergedAttrs;null!==P&&ud(b,I,P);const F=R.classes;null!==F&&Nt(b,I,F);const U=R.styles;null!==U&&ft(b,I,U),64!=(64&R.flags)&&Ad(g,f,I,R),0===bt.lFrame.elementDepthCount&&Hi(I,f),bt.lFrame.elementDepthCount++,vo(R)&&(Sg(g,f,R),Dg(g,R,f)),null!==d&&Ag(f,R)}function kf(){let o=Fn();$a()?Au():(o=o.parent,Fi(o,!1));const l=o;bt.lFrame.elementDepthCount--;const u=zt();u.firstCreatePass&&(Fl(u,o),Mh(o)&&u.queries.elementEnd(o)),null!=l.classesWithoutHost&&function(o){return 0!=(16&o.flags)}(l)&&Wg(u,l,Ve(),l.classesWithoutHost,!0),null!=l.stylesWithoutHost&&function(o){return 0!=(32&o.flags)}(l)&&Wg(u,l,Ve(),l.stylesWithoutHost,!1)}function uy(o,l,u,d){Kd(o,l,u,d),kf()}function cy(o,l,u){const d=Ve(),f=zt(),g=o+20,y=f.firstCreatePass?function(o,l,u,d,f){const g=l.consts,y=is(g,d),b=wf(l,o,8,"ng-container",y);return null!==y&&Z_(b,y,!0),G_(l,u,b,is(g,f)),null!==l.queries&&l.queries.elementStart(l,b),b}(g,f,d,l,u):f.data[g];Fi(y,!0);const b=d[g]=d[11].createComment("");Ad(f,d,b,y),Hi(b,d),vo(y)&&(Sg(f,d,y),Dg(f,y,d)),null!=u&&Ag(d,y)}function Tw(){let o=Fn();const l=zt();$a()?Au():(o=o.parent,Fi(o,!1)),l.firstCreatePass&&(Fl(l,o),Mh(o)&&l.queries.elementEnd(o))}function fI(){return Ve()}function Iw(o){return!!o&&"function"==typeof o.then}function pI(o){return!!o&&"function"==typeof o.subscribe}const dy=pI;function Ff(o,l,u,d){const f=Ve(),g=zt(),y=Fn();return function(o,l,u,d,f,g,y,b){const I=vo(d),P=o.firstCreatePass&&K_(o),F=l[8],U=MT(l);let Z=!0;if(3&d.type||b){const le=fi(d,l),Ge=b?b(le):le,Oe=U.length,ct=b?Pt=>b(An(Pt[d.index])):d.index;if(On(u)){let Pt=null;if(!b&&I&&(Pt=function(o,l,u,d){const f=o.cleanup;if(null!=f)for(let g=0;g<f.length-1;g+=2){const y=f[g];if(y===u&&f[g+1]===d){const b=l[7],I=f[g+2];return b.length>I?b[I]:null}"string"==typeof y&&(g+=2)}return null}(o,l,f,d.index)),null!==Pt)(Pt.__ngLastListenerFn__||Pt).__ngNextListenerFn__=g,Pt.__ngLastListenerFn__=g,Z=!1;else{g=Aw(d,l,F,g,!1);const an=u.listen(Ge,f,g);U.push(g,an),P&&P.push(f,ct,Oe,Oe+1)}}else g=Aw(d,l,F,g,!0),Ge.addEventListener(f,g,y),U.push(g),P&&P.push(f,ct,Oe,y)}else g=Aw(d,l,F,g,!1);const te=d.outputs;let ve;if(Z&&null!==te&&(ve=te[f])){const le=ve.length;if(le)for(let Ge=0;Ge<le;Ge+=2){const Hr=l[ve[Ge]][ve[Ge+1]].subscribe(g),_s=U.length;U.push(g,Hr),P&&P.push(f,d.index,_s,-(_s+1))}}}(g,f,f[11],y,o,l,!!u,d),Ff}function gI(o,l,u,d){try{return!1!==u(d)}catch(f){return zE(o,f),!1}}function Aw(o,l,u,d,f){return function g(y){if(y===Function)return d;const b=2&o.flags?Kr(o.index,l):l;0==(32&l[2])&&dn(b);let I=gI(l,0,d,y),R=g.__ngNextListenerFn__;for(;R;)I=gI(l,0,R,y)&&I,R=R.__ngNextListenerFn__;return f&&!1===I&&(y.preventDefault(),y.returnValue=!1),I}}function mI(o=1){return function(o){return(bt.lFrame.contextLView=function(o,l){for(;o>0;)l=l[15],o--;return l}(o,bt.lFrame.contextLView))[8]}(o)}function _I(o,l,u,d,f){const g=o[u+1],y=null===l;let b=d?ds(g):Ps(g),I=!1;for(;0!==b&&(!1===I||y);){const P=o[b+1];xw(o[b],l)&&(I=!0,o[b+1]=d?PE(P):Xr(P)),b=d?ds(P):Ps(P)}I&&(o[u+1]=d?Xr(g):PE(g))}function xw(o,l){return null===o||null==l||(Array.isArray(o)?o[1]:o)===l||!(!Array.isArray(o)||"string"!=typeof l)&&Xa(o,l)>=0}const si={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function _y(o){return o.substring(si.key,si.keyEnd)}function Mw(o,l){const u=si.textEnd;return u===l?-1:(l=si.keyEnd=function(o,l,u){for(;l<u&&o.charCodeAt(l)>32;)l++;return l}(o,si.key=l,u),Bf(o,l,u))}function Bf(o,l,u){for(;l<u&&o.charCodeAt(l)<=32;)l++;return l}function kw(o,l,u){return Wi(o,l,u,!1),kw}function Zg(o,l){return Wi(o,l,null,!0),Zg}function Ey(o){!function(o,l,u,d){const f=zt(),g=Ri(2);f.firstUpdatePass&&Zd(f,null,g,d);const y=Ve();if(u!==We&&vi(y,g,u)){const b=f.data[gi()];if(SI(b,d)&&!wy(f,g)){let I=d?b.classesWithoutHost:b.stylesWithoutHost;null!==I&&(u=ne(I,u||"")),Wg(f,b,y,u,d)}else!function(o,l,u,d,f,g,y,b){f===We&&(f=Y);let I=0,R=0,P=0<f.length?f[0]:null,F=0<g.length?g[0]:null;for(;null!==P||null!==F;){const U=I<f.length?f[I+1]:void 0,Z=R<g.length?g[R+1]:void 0;let ve,te=null;P===F?(I+=2,R+=2,U!==Z&&(te=F,ve=Z)):null===F||null!==P&&P<F?(I+=2,te=P):(R+=2,te=F,ve=Z),null!==te&&II(o,l,u,d,te,ve,y,b),P=I<f.length?f[I]:null,F=R<g.length?g[R]:null}}(f,b,y,y[11],y[g+1],y[g+1]=function(o,l,u){if(null==u||""===u)return Y;const d=[],f=Ys(u);if(Array.isArray(f))for(let g=0;g<f.length;g++)o(d,f[g],!0);else if("object"==typeof f)for(const g in f)f.hasOwnProperty(g)&&o(d,g,f[g]);else"string"==typeof f&&l(d,f);return d}(o,l,u),d,g)}}(Nn,Go,o,!0)}function Go(o,l){for(let u=function(o){return function(o){si.key=0,si.keyEnd=0,si.value=0,si.valueEnd=0,si.textEnd=o.length}(o),Mw(o,Bf(o,0,si.textEnd))}(l);u>=0;u=Mw(l,u))Nn(o,_y(l),!0)}function Wi(o,l,u,d){const f=Ve(),g=zt(),y=Ri(2);g.firstUpdatePass&&Zd(g,o,y,d),l!==We&&vi(f,y,l)&&II(g,g.data[gi()],f,f[11],o,f[y+1]=function(o,l){return null==o||("string"==typeof l?o+=l:"object"==typeof o&&(o=re(Ys(o)))),o}(l,u),d,y)}function wy(o,l){return l>=o.expandoStartIndex}function Zd(o,l,u,d){const f=o.data;if(null===f[u+1]){const g=f[gi()],y=wy(o,u);SI(g,d)&&null===l&&!y&&(l=!1),l=function(o,l,u,d){const f=kl(o);let g=d?l.residualClasses:l.residualStyles;if(null===f)0===(d?l.classBindings:l.styleBindings)&&(u=Yd(u=Lw(null,o,l,u,d),l.attrs,d),g=null);else{const y=l.directiveStylingLast;if(-1===y||o[y]!==f)if(u=Lw(f,o,l,u,d),null===g){let I=function(o,l,u){const d=u?l.classBindings:l.styleBindings;if(0!==Ps(d))return o[ds(d)]}(o,l,d);void 0!==I&&Array.isArray(I)&&(I=Lw(null,o,l,I[1],d),I=Yd(I,l.attrs,d),function(o,l,u,d){o[ds(u?l.classBindings:l.styleBindings)]=d}(o,l,d,I))}else g=function(o,l,u){let d;const f=l.directiveEnd;for(let g=1+l.directiveStylingLast;g<f;g++)d=Yd(d,o[g].hostAttrs,u);return Yd(d,l.attrs,u)}(o,l,d)}return void 0!==g&&(d?l.residualClasses=g:l.residualStyles=g),u}(f,g,l,d),function(o,l,u,d,f,g){let y=g?l.classBindings:l.styleBindings,b=ds(y),I=Ps(y);o[d]=u;let P,R=!1;if(Array.isArray(u)){const F=u;P=F[1],(null===P||Xa(F,P)>0)&&(R=!0)}else P=u;if(f)if(0!==I){const U=ds(o[b+1]);o[d+1]=vg(U,b),0!==U&&(o[U+1]=xE(o[U+1],d)),o[b+1]=function(o,l){return 131071&o|l<<17}(o[b+1],d)}else o[d+1]=vg(b,0),0!==b&&(o[b+1]=xE(o[b+1],d)),b=d;else o[d+1]=vg(I,0),0===b?b=d:o[I+1]=xE(o[I+1],d),I=d;R&&(o[d+1]=Xr(o[d+1])),_I(o,P,d,!0),_I(o,P,d,!1),function(o,l,u,d,f){const g=f?o.residualClasses:o.residualStyles;null!=g&&"string"==typeof l&&Xa(g,l)>=0&&(u[d+1]=PE(u[d+1]))}(l,P,o,d,g),y=vg(b,I),g?l.classBindings=y:l.styleBindings=y}(f,g,l,u,y,d)}}function Lw(o,l,u,d,f){let g=null;const y=u.directiveEnd;let b=u.directiveStylingLast;for(-1===b?b=u.directiveStart:b++;b<y&&(g=l[b],d=Yd(d,g.hostAttrs,f),g!==o);)b++;return null!==o&&(u.directiveStylingLast=b),d}function Yd(o,l,u){const d=u?1:2;let f=-1;if(null!==l)for(let g=0;g<l.length;g++){const y=l[g];"number"==typeof y?f=y:f===d&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),Nn(o,y,!!u||l[++g]))}return void 0===o?null:o}function II(o,l,u,d,f,g,y,b){if(!(3&l.type))return;const I=o.data,R=I[b+1];Hf(function(o){return 1==(1&o)}(R)?DI(I,l,u,f,Ps(R),y):void 0)||(Hf(g)||function(o){return 2==(2&o)}(R)&&(g=DI(I,null,u,f,b,y)),function(o,l,u,d,f){const g=On(o);if(l)f?g?o.addClass(u,d):u.classList.add(d):g?o.removeClass(u,d):u.classList.remove(d);else{let y=-1===d.indexOf("-")?void 0:ga.DashCase;if(null==f)g?o.removeStyle(u,d,y):u.style.removeProperty(d);else{const b="string"==typeof f&&f.endsWith("!important");b&&(f=f.slice(0,-10),y|=ga.Important),g?o.setStyle(u,d,f,y):u.style.setProperty(d,f,b?"important":"")}}}(d,y,Hs(gi(),u),f,g))}function DI(o,l,u,d,f,g){const y=null===l;let b;for(;f>0;){const I=o[f],R=Array.isArray(I),P=R?I[1]:I,F=null===P;let U=u[f+1];U===We&&(U=F?Y:void 0);let Z=F?Ja(U,d):P===d?U:void 0;if(R&&!Hf(Z)&&(Z=Ja(I,d)),Hf(Z)&&(b=Z,y))return b;const te=o[f+1];f=y?ds(te):Ps(te)}if(null!==l){let I=g?l.residualClasses:l.residualStyles;null!=I&&(b=Ja(I,d))}return b}function Hf(o){return void 0!==o}function SI(o,l){return 0!=(o.flags&(l?16:32))}function jw(o,l=""){const u=Ve(),d=zt(),f=o+20,g=d.firstCreatePass?wf(d,f,1,l,null):d.data[f],y=u[f]=function(o,l){return On(o)?o.createText(l):o.createTextNode(l)}(u[11],l);Ad(d,u,y,g),Fi(g,!1)}function $w(o){return Yg("",o,""),$w}function Yg(o,l,u){const d=Ve(),f=function(o,l,u,d){return vi(o,ss(),u)?l+se(u)+d:We}(d,o,l,u);return f!==We&&on(d,gi(),f),Yg}function Qg(o,l,u){const d=Ve();return vi(d,ss(),l)&&Ms(zt(),hr(),d,o,l,d[11],u,!0),Qg}function rb(o,l,u){const d=Ve();if(vi(d,ss(),l)){const g=zt(),y=hr();Ms(g,y,d,o,l,function(o,l,u){return(null===o||vr(o))&&(u=function(o){for(;Array.isArray(o);){if("object"==typeof o[1])return o;o=o[0]}return null}(u[l.index])),u[11]}(kl(g.data),y,d),u,!0)}return rb}const Jd=void 0;var FN=["en",[["a","p"],["AM","PM"],Jd],[["AM","PM"],Jd,Jd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Jd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Jd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Jd,"{1} 'at' {0}",Jd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(o){const l=Math.floor(Math.abs(o)),u=o.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===u?1:5}];let mc={};function Jg(o){const l=function(o){return o.toLowerCase().replace(/_/g,"-")}(o);let u=sb(l);if(u)return u;const d=l.split("-")[0];if(u=sb(d),u)return u;if("en"===d)return FN;throw new Error(`Missing locale data for the locale "${o}".`)}function Ay(o){return Jg(o)[It.PluralCase]}function sb(o){return o in mc||(mc[o]=fn.ng&&fn.ng.common&&fn.ng.common.locales&&fn.ng.common.locales[o]),mc[o]}var It=(()=>((It=It||{})[It.LocaleId=0]="LocaleId",It[It.DayPeriodsFormat=1]="DayPeriodsFormat",It[It.DayPeriodsStandalone=2]="DayPeriodsStandalone",It[It.DaysFormat=3]="DaysFormat",It[It.DaysStandalone=4]="DaysStandalone",It[It.MonthsFormat=5]="MonthsFormat",It[It.MonthsStandalone=6]="MonthsStandalone",It[It.Eras=7]="Eras",It[It.FirstDayOfWeek=8]="FirstDayOfWeek",It[It.WeekendRange=9]="WeekendRange",It[It.DateFormat=10]="DateFormat",It[It.TimeFormat=11]="TimeFormat",It[It.DateTimeFormat=12]="DateTimeFormat",It[It.NumberSymbols=13]="NumberSymbols",It[It.NumberFormats=14]="NumberFormats",It[It.CurrencyCode=15]="CurrencyCode",It[It.CurrencySymbol=16]="CurrencySymbol",It[It.CurrencyName=17]="CurrencyName",It[It.Currencies=18]="Currencies",It[It.Directionality=19]="Directionality",It[It.PluralCase=20]="PluralCase",It[It.ExtraData=21]="ExtraData",It))();const Ry="en-US";let lb=Ry;function ub(o){Dt(o,"Expected localeId to be defined"),"string"==typeof o&&(lb=o.toLowerCase().replace(/_/g,"-"))}function Yf(o,l,u,d,f){if(o=K(o),Array.isArray(o))for(let g=0;g<o.length;g++)Yf(o[g],l,u,d,f);else{const g=zt(),y=Ve();let b=rc(o)?o:K(o.provide),I=ti(o);const R=Fn(),P=1048575&R.providerIndexes,F=R.directiveStart,U=R.providerIndexes>>20;if(rc(o)||!o.multi){const Z=new oa(I,f,zd),te=Qf(b,l,f?P:P+U,F);-1===te?(tr(Ao(R,y),g,b),Tb(g,o,l.length),l.push(b),R.directiveStart++,R.directiveEnd++,f&&(R.providerIndexes+=1048576),u.push(Z),y.push(Z)):(u[te]=Z,y[te]=Z)}else{const Z=Qf(b,l,P+U,F),te=Qf(b,l,P,P+U),ve=Z>=0&&u[Z],le=te>=0&&u[te];if(f&&!le||!f&&!ve){tr(Ao(R,y),g,b);const Ge=function(o,l,u,d,f){const g=new oa(o,u,zd);return g.multi=[],g.index=l,g.componentProviders=0,yc(g,f,d&&!u),g}(f?tD:im,u.length,f,d,I);!f&&le&&(u[te].providerFactory=Ge),Tb(g,o,l.length,0),l.push(b),R.directiveStart++,R.directiveEnd++,f&&(R.providerIndexes+=1048576),u.push(Ge),y.push(Ge)}else Tb(g,o,Z>-1?Z:te,yc(u[f?te:Z],I,!f&&d));!f&&d&&le&&u[te].componentProviders++}}}function Tb(o,l,u,d){const f=rc(l);if(f||function(o){return!!o.useClass}(l)){const y=(l.useClass||l).prototype.ngOnDestroy;if(y){const b=o.destroyHooks||(o.destroyHooks=[]);if(!f&&l.multi){const I=b.indexOf(u);-1===I?b.push(u,[d,y]):b[I+1].push(d,y)}else b.push(u,y)}}}function yc(o,l,u){return u&&o.componentProviders++,o.multi.push(l)-1}function Qf(o,l,u,d){for(let f=u;f<d;f++)if(l[f]===o)return f;return-1}function im(o,l,u,d){return sm(this.multi,[])}function tD(o,l,u,d){const f=this.multi;let g;if(this.providerFactory){const y=this.providerFactory.componentProviders,b=fr(u,u[1],this.providerFactory.index,d);g=b.slice(0,y),sm(f,g);for(let I=y;I<b.length;I++)g.push(b[I])}else g=[],sm(f,g);return g}function sm(o,l){for(let u=0;u<o.length;u++)l.push((0,o[u])());return l}function nD(o,l=[]){return u=>{u.providersResolver=(d,f)=>function(o,l,u){const d=zt();if(d.firstCreatePass){const f=vr(o);Yf(u,d.data,d.blueprint,f,!0),Yf(l,d.data,d.blueprint,f,!1)}}(d,f?f(o):o,l)}}class My{}const Ib="ngComponent";class rD{resolveComponentFactory(l){throw function(o){const l=Error(`No component factory found for ${re(o)}. Did you add it to @NgModule.entryComponents?`);return l[Ib]=o,l}(l)}}let rh=(()=>{class o{}return o.NULL=new rD,o})();function ky(...o){}function du(o,l){return new so(fi(o,l))}const lx=function(){return du(Fn(),Ve())};let so=(()=>{class o{constructor(u){this.nativeElement=u}}return o.__NG_ELEMENT_ID__=lx,o})();function vc(o){return o instanceof so?o.nativeElement:o}class wc{}let bc=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>oD(),o})();const oD=function(){const o=Ve(),u=Kr(Fn().index,o);return function(o){return o[11]}(yo(u)?u:o)};let Sb=(()=>{class o{}return o.\u0275prov=wt({token:o,providedIn:"root",factory:()=>null}),o})();class aD{constructor(l){this.full=l,this.major=l.split(".")[0],this.minor=l.split(".")[1],this.patch=l.split(".").slice(2).join(".")}}const Ab=new aD("12.2.9");class lD{constructor(){}supports(l){return Sf(l)}create(l){return new dx(l)}}const uD=(o,l)=>l;class dx{constructor(l){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=l||uD}forEachItem(l){let u;for(u=this._itHead;null!==u;u=u._next)l(u)}forEachOperation(l){let u=this._itHead,d=this._removalsHead,f=0,g=null;for(;u||d;){const y=!d||u&&u.currentIndex<Rb(d,f,g)?u:d,b=Rb(y,f,g),I=y.currentIndex;if(y===d)f--,d=d._nextRemoved;else if(u=u._next,null==y.previousIndex)f++;else{g||(g=[]);const R=b-f,P=I-f;if(R!=P){for(let U=0;U<R;U++){const Z=U<g.length?g[U]:g[U]=0,te=Z+U;P<=te&&te<R&&(g[U]=Z+1)}g[y.previousIndex]=P-R}}b!==I&&l(y,b,I)}}forEachPreviousItem(l){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)l(u)}forEachAddedItem(l){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)l(u)}forEachMovedItem(l){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)l(u)}forEachRemovedItem(l){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)l(u)}forEachIdentityChange(l){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)l(u)}diff(l){if(null==l&&(l=[]),!Sf(l))throw new Error(`Error trying to diff '${re(l)}'. Only arrays and iterables are allowed`);return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let f,g,y,u=this._itHead,d=!1;if(Array.isArray(l)){this.length=l.length;for(let b=0;b<this.length;b++)g=l[b],y=this._trackByFn(b,g),null!==u&&Object.is(u.trackById,y)?(d&&(u=this._verifyReinsertion(u,g,y,b)),Object.is(u.item,g)||this._addIdentityChange(u,g)):(u=this._mismatch(u,g,y,b),d=!0),u=u._next}else f=0,function(o,l){if(Array.isArray(o))for(let u=0;u<o.length;u++)l(o[u]);else{const u=o[lc()]();let d;for(;!(d=u.next()).done;)l(d.value)}}(l,b=>{y=this._trackByFn(f,b),null!==u&&Object.is(u.trackById,y)?(d&&(u=this._verifyReinsertion(u,b,y,f)),Object.is(u.item,b)||this._addIdentityChange(u,b)):(u=this._mismatch(u,b,y,f),d=!0),u=u._next,f++}),this.length=f;return this._truncate(u),this.collection=l,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let l;for(l=this._previousItHead=this._itHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._additionsHead;null!==l;l=l._nextAdded)l.previousIndex=l.currentIndex;for(this._additionsHead=this._additionsTail=null,l=this._movesHead;null!==l;l=l._nextMoved)l.previousIndex=l.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(l,u,d,f){let g;return null===l?g=this._itTail:(g=l._prev,this._remove(l)),null!==(l=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(l.item,u)||this._addIdentityChange(l,u),this._reinsertAfter(l,g,f)):null!==(l=null===this._linkedRecords?null:this._linkedRecords.get(d,f))?(Object.is(l.item,u)||this._addIdentityChange(l,u),this._moveAfter(l,g,f)):l=this._addAfter(new cD(u,d),g,f),l}_verifyReinsertion(l,u,d,f){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==g?l=this._reinsertAfter(g,l._prev,f):l.currentIndex!=f&&(l.currentIndex=f,this._addToMoves(l,f)),l}_truncate(l){for(;null!==l;){const u=l._next;this._addToRemovals(this._unlink(l)),l=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(l,u,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(l);const f=l._prevRemoved,g=l._nextRemoved;return null===f?this._removalsHead=g:f._nextRemoved=g,null===g?this._removalsTail=f:g._prevRemoved=f,this._insertAfter(l,u,d),this._addToMoves(l,d),l}_moveAfter(l,u,d){return this._unlink(l),this._insertAfter(l,u,d),this._addToMoves(l,d),l}_addAfter(l,u,d){return this._insertAfter(l,u,d),this._additionsTail=null===this._additionsTail?this._additionsHead=l:this._additionsTail._nextAdded=l,l}_insertAfter(l,u,d){const f=null===u?this._itHead:u._next;return l._next=f,l._prev=u,null===f?this._itTail=l:f._prev=l,null===u?this._itHead=l:u._next=l,null===this._linkedRecords&&(this._linkedRecords=new dD),this._linkedRecords.put(l),l.currentIndex=d,l}_remove(l){return this._addToRemovals(this._unlink(l))}_unlink(l){null!==this._linkedRecords&&this._linkedRecords.remove(l);const u=l._prev,d=l._next;return null===u?this._itHead=d:u._next=d,null===d?this._itTail=u:d._prev=u,l}_addToMoves(l,u){return l.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=l:this._movesTail._nextMoved=l),l}_addToRemovals(l){return null===this._unlinkedRecords&&(this._unlinkedRecords=new dD),this._unlinkedRecords.put(l),l.currentIndex=null,l._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=l,l._prevRemoved=null):(l._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=l),l}_addIdentityChange(l,u){return l.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=l:this._identityChangesTail._nextIdentityChange=l,l}}class cD{constructor(l,u){this.item=l,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class hx{constructor(){this._head=null,this._tail=null}add(l){null===this._head?(this._head=this._tail=l,l._nextDup=null,l._prevDup=null):(this._tail._nextDup=l,l._prevDup=this._tail,l._nextDup=null,this._tail=l)}get(l,u){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===u||u<=d.currentIndex)&&Object.is(d.trackById,l))return d;return null}remove(l){const u=l._prevDup,d=l._nextDup;return null===u?this._head=d:u._nextDup=d,null===d?this._tail=u:d._prevDup=u,null===this._head}}class dD{constructor(){this.map=new Map}put(l){const u=l.trackById;let d=this.map.get(u);d||(d=new hx,this.map.set(u,d)),d.add(l)}get(l,u){const f=this.map.get(l);return f?f.get(l,u):null}remove(l){const u=l.trackById;return this.map.get(u).remove(l)&&this.map.delete(u),l}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Rb(o,l,u){const d=o.previousIndex;if(null===d)return d;let f=0;return u&&d<u.length&&(f=u[d]),d+l+f}class hD{constructor(){}supports(l){return l instanceof Map||uc(l)}create(){return new fx}}class fx{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(l){let u;for(u=this._mapHead;null!==u;u=u._next)l(u)}forEachPreviousItem(l){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)l(u)}forEachChangedItem(l){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)l(u)}forEachAddedItem(l){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)l(u)}forEachRemovedItem(l){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)l(u)}diff(l){if(l){if(!(l instanceof Map||uc(l)))throw new Error(`Error trying to diff '${re(l)}'. Only maps and objects are allowed`)}else l=new Map;return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(l,(d,f)=>{if(u&&u.key===f)this._maybeAddToChanges(u,d),this._appendAfter=u,u=u._next;else{const g=this._getOrCreateRecordForKey(f,d);u=this._insertBeforeOrAppend(u,g)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let d=u;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(l,u){if(l){const d=l._prev;return u._next=l,u._prev=d,l._prev=u,d&&(d._next=u),l===this._mapHead&&(this._mapHead=u),this._appendAfter=l,l}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(l,u){if(this._records.has(l)){const f=this._records.get(l);this._maybeAddToChanges(f,u);const g=f._prev,y=f._next;return g&&(g._next=y),y&&(y._prev=g),f._next=null,f._prev=null,f}const d=new fD(l);return this._records.set(l,d),d.currentValue=u,this._addToAdditions(d),d}_reset(){if(this.isDirty){let l;for(this._previousMapHead=this._mapHead,l=this._previousMapHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._changesHead;null!==l;l=l._nextChanged)l.previousValue=l.currentValue;for(l=this._additionsHead;null!=l;l=l._nextAdded)l.previousValue=l.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(l,u){Object.is(u,l.currentValue)||(l.previousValue=l.currentValue,l.currentValue=u,this._addToChanges(l))}_addToAdditions(l){null===this._additionsHead?this._additionsHead=this._additionsTail=l:(this._additionsTail._nextAdded=l,this._additionsTail=l)}_addToChanges(l){null===this._changesHead?this._changesHead=this._changesTail=l:(this._changesTail._nextChanged=l,this._changesTail=l)}_forEach(l,u){l instanceof Map?l.forEach(u):Object.keys(l).forEach(d=>u(l[d],d))}}class fD{constructor(l){this.key=l,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Nb(){return new lm([new lD])}let lm=(()=>{class o{constructor(u){this.factories=u}static create(u,d){if(null!=d){const f=d.factories.slice();u=u.concat(f)}return new o(u)}static extend(u){return{provide:o,useFactory:d=>o.create(u,d||Nb()),deps:[[o,new Lo,new Zs]]}}find(u){const d=this.factories.find(f=>f.supports(u));if(null!=d)return d;throw new Error(`Cannot find a differ supporting object '${u}' of type '${function(o){return o.name||typeof o}(u)}'`)}}return o.\u0275prov=wt({token:o,providedIn:"root",factory:Nb}),o})();function Ly(){return new ih([new hD])}let ih=(()=>{class o{constructor(u){this.factories=u}static create(u,d){if(d){const f=d.factories.slice();u=u.concat(f)}return new o(u)}static extend(u){return{provide:o,useFactory:d=>o.create(u,d||Ly()),deps:[[o,new Lo,new Zs]]}}find(u){const d=this.factories.find(f=>f.supports(u));if(d)return d;throw new Error(`Cannot find a differ supporting object '${u}'`)}}return o.\u0275prov=wt({token:o,providedIn:"root",factory:Ly}),o})();function Vy(o,l,u,d,f=!1){for(;null!==u;){const g=l[u.index];if(null!==g&&d.push(An(g)),Nr(g))for(let b=10;b<g.length;b++){const I=g[b],R=I[1].firstChild;null!==R&&Vy(I[1],I,R,d)}const y=u.type;if(8&y)Vy(o,l,u.child,d);else if(32&y){const b=D_(u,l);let I;for(;I=b();)d.push(I)}else if(16&y){const b=_i(l,u);if(Array.isArray(b))d.push(...b);else{const I=hg(l[16]);Vy(I[1],I,b,d,!0)}}u=f?u.projectionNext:u.next}return d}class Xf{constructor(l,u){this._lView=l,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const l=this._lView,u=l[1];return Vy(u,l,u.firstChild,[])}get context(){return this._lView[8]}set context(l){this._lView[8]=l}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const l=this._lView[3];if(Nr(l)){const u=l[8],d=u?u.indexOf(this):-1;d>-1&&(N_(l,d),Mo(u,d))}this._attachedToViewContainer=!1}Yu(this._lView[1],this._lView)}onDestroy(l){$_(this._lView[1],this._lView,null,l)}markForCheck(){dn(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Lr(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(o,l,u){Do(!0);try{Lr(o,l,u)}finally{Do(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var l;this._appRef=null,_g(this._lView[1],l=this._lView,l[11],2,null,null)}attachToAppRef(l){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=l}}class Tc extends Xf{constructor(l){super(l),this._view=l}detectChanges(){Og(this._view)}checkNoChanges(){!function(o){Do(!0);try{Og(o)}finally{Do(!1)}}(this._view)}get context(){return null}}const gx=function(o){return function(o,l,u){if(La(o)&&!u){const d=Kr(o.index,l);return new Xf(d,d)}return 47&o.type?new Xf(l[16],l):null}(Fn(),Ve(),16==(16&o))};let mx=(()=>{class o{}return o.__NG_ELEMENT_ID__=gx,o})();const vx=[new hD],mD=new lm([new lD]),Ex=new ih(vx),Cx=function(){return Uy(Fn(),Ve())};let gl=(()=>{class o{}return o.__NG_ELEMENT_ID__=Cx,o})();const xb=gl,Tx=class extends xb{constructor(l,u,d){super(),this._declarationLView=l,this._declarationTContainer=u,this.elementRef=d}createEmbeddedView(l){const u=this._declarationTContainer.tViews,d=ll(this._declarationLView,u,l,16,null,u.declTNode,null,null,null,null);d[17]=this._declarationLView[this._declarationTContainer.index];const g=this._declarationLView[19];return null!==g&&(d[19]=g.createEmbeddedView(u)),Xs(u,d,l),new Xf(d)}};function Uy(o,l){return 4&o.type?new Tx(l,o,du(o,l)):null}class sh{}class _D{}const f1=function(){return tp(Fn(),Ve())};let By=(()=>{class o{}return o.__NG_ELEMENT_ID__=f1,o})();const Ax=By,jy=class extends Ax{constructor(l,u,d){super(),this._lContainer=l,this._hostTNode=u,this._hostLView=d}get element(){return du(this._hostTNode,this._hostLView)}get injector(){return new mt(this._hostTNode,this._hostLView)}get parentInjector(){const l=Ro(this._hostTNode,this._hostLView);if(ku(l)){const u=Ws(l,this._hostLView),d=os(l);return new mt(u[1].data[d+8],u)}return new mt(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(l){const u=Pb(this._lContainer);return null!==u&&u[l]||null}get length(){return this._lContainer.length-10}createEmbeddedView(l,u,d){const f=l.createEmbeddedView(u||{});return this.insert(f,d),f}createComponent(l,u,d,f,g){const y=d||this.parentInjector;if(!g&&null==l.ngModule&&y){const I=y.get(sh,null);I&&(g=I)}const b=l.create(y,f,void 0,g);return this.insert(b.hostView,u),b}insert(l,u){const d=l._lView,f=d[1];if(Nr(d[3])){const P=this.indexOf(l);if(-1!==P)this.detach(P);else{const F=d[3],U=new jy(F,F[6],F[3]);U.detach(U.indexOf(l))}}const g=this._adjustIndex(u),y=this._lContainer;!function(o,l,u,d){const f=10+d,g=u.length;d>0&&(u[f-1][4]=l),d<g-10?(l[4]=u[f],ca(u,10+d,l)):(u.push(l),l[4]=null),l[3]=u;const y=l[17];null!==y&&u!==y&&function(o,l){const u=o[9];l[16]!==l[3][3][16]&&(o[2]=!0),null===u?o[9]=[l]:u.push(l)}(y,l);const b=l[19];null!==b&&b.insertView(o),l[2]|=128}(f,d,y,g);const b=Qu(g,y),I=d[11],R=P_(I,y[7]);return null!==R&&function(o,l,u,d,f,g){d[0]=f,d[6]=l,_g(o,d,u,1,f,g)}(f,y[6],I,d,R,b),l.attachToViewContainerRef(),ca($y(y),g,l),l}move(l,u){return this.insert(l,u)}indexOf(l){const u=Pb(this._lContainer);return null!==u?u.indexOf(l):-1}remove(l){const u=this._adjustIndex(l,-1),d=N_(this._lContainer,u);d&&(Mo($y(this._lContainer),u),Yu(d[1],d))}detach(l){const u=this._adjustIndex(l,-1),d=N_(this._lContainer,u);return d&&null!=Mo($y(this._lContainer),u)?new Xf(d):null}_adjustIndex(l,u=0){return null==l?this.length+u:l}};function Pb(o){return o[8]}function $y(o){return o[8]||(o[8]=[])}function tp(o,l){let u;const d=l[o.index];if(Nr(d))u=d;else{let f;if(8&o.type)f=An(d);else{const g=l[11];f=g.createComment("");const y=fi(o,l);Qr(g,P_(g,y),f,function(o,l){return On(o)?o.nextSibling(l):l.nextSibling}(g,y),!1)}l[o.index]=u=nu(d,l,f,o),gr(l,u)}return new jy(u,o,l)}const ap={};class tv extends rh{constructor(l){super(),this.ngModule=l}resolveComponentFactory(l){const u=vn(l);return new rv(u,this.ngModule)}}function LD(o){const l=[];for(let u in o)o.hasOwnProperty(u)&&l.push({propName:o[u],templateName:u});return l}const tP=new cn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>hf});class rv extends My{constructor(l,u){super(),this.componentDef=l,this.ngModule=u,this.componentType=l.type,this.selector=l.selectors.map(yf).join(","),this.ngContentSelectors=l.ngContentSelectors?l.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return LD(this.componentDef.inputs)}get outputs(){return LD(this.componentDef.outputs)}create(l,u,d,f){const g=(f=f||this.ngModule)?function(o,l){return{get:(u,d,f)=>{const g=o.get(u,ap,f);return g!==ap||d===ap?g:l.get(u,d,f)}}}(l,f.injector):l,y=g.get(wc,Ss),b=g.get(Sb,null),I=y.createRenderer(null,this.componentDef),R=this.componentDef.selectors[0][0]||"div",P=d?function(o,l,u){if(On(o))return o.selectRootElement(l,u===qe.ShadowDom);let d="string"==typeof l?o.querySelector(l):l;return d.textContent="",d}(I,d,this.componentDef.encapsulation):Sd(y.createRenderer(null,this.componentDef),R,function(o){const l=o.toLowerCase();return"svg"===l?"http://www.w3.org/2000/svg":"math"===l?"http://www.w3.org/1998/MathML/":null}(R)),F=this.componentDef.onPush?576:528,U=function(o,l){return{components:[],scheduler:o||hf,clean:jo,playerHandler:l||null,flags:0}}(),Z=tu(0,null,null,1,0,null,null,null,null,null),te=ll(null,Z,U,F,null,null,y,I,b,g);let ve,le;qs(te);try{const Ge=function(o,l,u,d,f,g){const y=u[1];u[20]=o;const I=wf(y,20,2,"#host",null),R=I.mergedAttrs=l.hostAttrs;null!==R&&(Z_(I,R,!0),null!==o&&(ud(f,o,R),null!==I.classes&&Nt(f,o,I.classes),null!==I.styles&&ft(f,o,I.styles)));const P=d.createRenderer(o,l),F=ll(u,B_(l),null,l.onPush?64:16,u[20],I,d,P,g||null,null);return y.firstCreatePass&&(tr(Ao(I,u),y,l.type),DT(y,I),Pg(I,u.length,1)),gr(u,F),u[20]=F}(P,this.componentDef,te,y,I);if(P)if(d)ud(I,P,["ng-version",Ab.full]);else{const{attrs:Oe,classes:ct}=function(o){const l=[],u=[];let d=1,f=2;for(;d<o.length;){let g=o[d];if("string"==typeof g)2===f?""!==g&&l.push(g,o[++d]):8===f&&u.push(g);else{if(!ma(f))break;f=g}d++}return{attrs:l,classes:u}}(this.componentDef.selectors[0]);Oe&&ud(I,P,Oe),ct&&ct.length>0&&Nt(I,P,ct.join(" "))}if(le=Rl(Z,20),void 0!==u){const Oe=le.projection=[];for(let ct=0;ct<this.ngContentSelectors.length;ct++){const Pt=u[ct];Oe.push(null!=Pt?Array.from(Pt):null)}}ve=function(o,l,u,d,f){const g=u[1],y=function(o,l,u){const d=Fn();o.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),Mg(o,d,l,Pd(o,l,1,null),u));const f=fr(l,o,d.directiveStart,d);Hi(f,l);const g=fi(d,l);return g&&Hi(g,l),f}(g,u,l);if(d.components.push(y),o[8]=y,f&&f.forEach(I=>I(y,l)),l.contentQueries){const I=Fn();l.contentQueries(1,y,I.directiveStart)}const b=Fn();return!g.firstCreatePass||null===l.hostBindings&&null===l.hostAttrs||(So(b.index),tc(u[1],b,0,b.directiveStart,b.directiveEnd,l),GE(l,y)),y}(Ge,this.componentDef,te,U,[hN]),Xs(Z,te,null)}finally{ra()}return new nP(this.componentType,ve,du(le,te),te,le)}}class nP extends class{}{constructor(l,u,d,f,g){super(),this.location=d,this._rootLView=f,this._tNode=g,this.instance=u,this.hostView=this.changeDetectorRef=new Tc(f),this.componentType=l}get injector(){return new mt(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(l){this.hostView.onDestroy(l)}}const _l=new Map;class iP extends sh{constructor(l,u){super(),this._parent=u,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new tv(this);const d=sr(l),f=l[vt]||null;f&&ub(f),this._bootstrapComponents=ol(d.bootstrap),this._r3Injector=FT(l,u,[{provide:sh,useValue:this},{provide:rh,useValue:this.componentFactoryResolver}],re(l)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(l)}get(l,u=jn.THROW_IF_NOT_FOUND,d=ot.Default){return l===jn||l===sh||l===ru?this:this._r3Injector.get(l,u,d)}destroy(){const l=this._r3Injector;!l.destroyed&&l.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(l){this.destroyCbs.push(l)}}class Wb extends _D{constructor(l){super(),this.moduleType=l,null!==sr(l)&&function(o){const l=new Set;!function u(d){const f=sr(d,!0),g=f.id;null!==g&&(function(o,l,u){if(l&&l!==u)throw new Error(`Duplicate module registered for ${o} - ${re(l)} vs ${re(l.name)}`)}(g,_l.get(g),d),_l.set(g,d));const y=ol(f.imports);for(const b of y)l.has(b)||(l.add(b),u(b))}(o)}(l)}create(l){return new iP(this.moduleType,l)}}function HD(o,l,u){const d=Er()+o,f=Ve();return f[d]===We?ks(f,d,u?l.call(u):l()):function(o,l){return o[l]}(f,d)}function iv(o,l){const u=o[l];return u===We?void 0:u}function lP(o,l,u,d,f,g,y){const b=l+u;return function(o,l,u,d){const f=vi(o,l,u);return vi(o,l+1,d)||f}(o,b,f,g)?ks(o,b+2,y?d.call(y,f,g):d(f,g)):iv(o,b+2)}function Zb(o,l){const u=zt();let d;const f=o+20;u.firstCreatePass?(d=function(o,l){if(l)for(let u=l.length-1;u>=0;u--){const d=l[u];if(o===d.name)return d}throw new Ne("302",`The pipe '${o}' could not be found!`)}(l,u.pipeRegistry),u.data[f]=d,d.onDestroy&&(u.destroyHooks||(u.destroyHooks=[])).push(f,d.onDestroy)):d=u.data[f];const g=d.factory||(d.factory=bo(d.type)),y=lr(zd);try{const b=Fu(!1),I=g();return Fu(b),function(o,l,u,d){u>=o.data.length&&(o.data[u]=null,o.blueprint[u]=null),l[u]=d}(u,Ve(),f,I),I}finally{lr(y)}}function lp(o,l,u){const d=o+20,f=Ve(),g=Gs(f,d);return ym(f,ov(f,d)?function(o,l,u,d,f,g){const y=l+u;return vi(o,y,f)?ks(o,y+1,g?d.call(g,f):d(f)):iv(o,y+1)}(f,Er(),l,g.transform,u,g):g.transform(u))}function uP(o,l,u,d){const f=o+20,g=Ve(),y=Gs(g,f);return ym(g,ov(g,f)?lP(g,Er(),l,y.transform,u,d,y):y.transform(u,d))}function ov(o,l){return o[1].data[l].pure}function ym(o,l){return ro.isWrapped(l)&&(l=ro.unwrap(l),o[bt.lFrame.bindingIndex]=We),l}function ZD(o){return l=>{setTimeout(o,void 0,l)}}const pu=class extends _.xQ{constructor(l=!1){super(),this.__isAsync=l}emit(l){super.next(l)}subscribe(l,u,d){var f,g,y;let b=l,I=u||(()=>null),R=d;if(l&&"object"==typeof l){const F=l;b=null===(f=F.next)||void 0===f?void 0:f.bind(F),I=null===(g=F.error)||void 0===g?void 0:g.bind(F),R=null===(y=F.complete)||void 0===y?void 0:y.bind(F)}this.__isAsync&&(I=ZD(I),b&&(b=ZD(b)),R&&(R=ZD(R)));const P=super.subscribe({next:b,error:I,complete:R});return l instanceof z.w&&l.add(P),P}};function hP(){return this._results[lc()]()}class Jb{constructor(l=!1){this._emitDistinctChangesOnly=l,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=lc(),d=Jb.prototype;d[u]||(d[u]=hP)}get changes(){return this._changes||(this._changes=new pu)}get(l){return this._results[l]}map(l){return this._results.map(l)}filter(l){return this._results.filter(l)}find(l){return this._results.find(l)}reduce(l,u){return this._results.reduce(l,u)}forEach(l){this._results.forEach(l)}some(l){return this._results.some(l)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(l,u){const d=this;d.dirty=!1;const f=Ui(l);(this._changesDetected=!function(o,l,u){if(o.length!==l.length)return!1;for(let d=0;d<o.length;d++){let f=o[d],g=l[d];if(u&&(f=u(f),g=u(g)),g!==f)return!1}return!0}(d._results,f,u))&&(d._results=f,d.length=f.length,d.last=f[this.length-1],d.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class YD{constructor(l){this.queryList=l,this.matches=null}clone(){return new YD(this.queryList)}setDirty(){this.queryList.setDirty()}}class vm{constructor(l=[]){this.queries=l}createEmbeddedView(l){const u=l.queries;if(null!==u){const d=null!==l.contentQueries?l.contentQueries[0]:u.length,f=[];for(let g=0;g<d;g++){const y=u.getByIndex(g);f.push(this.queries[y.indexInDeclarationView].clone())}return new vm(f)}return null}insertView(l){this.dirtyQueriesWithMatches(l)}detachView(l){this.dirtyQueriesWithMatches(l)}dirtyQueriesWithMatches(l){for(let u=0;u<this.queries.length;u++)null!==lv(l,u).matches&&this.queries[u].setDirty()}}class QD{constructor(l,u,d=null){this.predicate=l,this.flags=u,this.read=d}}class Em{constructor(l=[]){this.queries=l}elementStart(l,u){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(l,u)}elementEnd(l){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(l)}embeddedTView(l){let u=null;for(let d=0;d<this.length;d++){const f=null!==u?u.length:0,g=this.getByIndex(d).embeddedTView(l,f);g&&(g.indexInDeclarationView=d,null!==u?u.push(g):u=[g])}return null!==u?new Em(u):null}template(l,u){for(let d=0;d<this.queries.length;d++)this.queries[d].template(l,u)}getByIndex(l){return this.queries[l]}get length(){return this.queries.length}track(l){this.queries.push(l)}}class wm{constructor(l,u=-1){this.metadata=l,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(l,u){this.isApplyingToNode(u)&&this.matchTNode(l,u)}elementEnd(l){this._declarationNodeIndex===l.index&&(this._appliesToNextNode=!1)}template(l,u){this.elementStart(l,u)}embeddedTView(l,u){return this.isApplyingToNode(l)?(this.crossesNgTemplate=!0,this.addMatch(-l.index,u),new wm(this.metadata)):null}isApplyingToNode(l){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let d=l.parent;for(;null!==d&&8&d.type&&d.index!==u;)d=d.parent;return u===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(l,u){const d=this.metadata.predicate;if(Array.isArray(d))for(let f=0;f<d.length;f++){const g=d[f];this.matchTNodeWithReadOption(l,u,Xb(u,g)),this.matchTNodeWithReadOption(l,u,la(u,l,g,!1,!1))}else d===gl?4&u.type&&this.matchTNodeWithReadOption(l,u,-1):this.matchTNodeWithReadOption(l,u,la(u,l,d,!1,!1))}matchTNodeWithReadOption(l,u,d){if(null!==d){const f=this.metadata.read;if(null!==f)if(f===so||f===By||f===gl&&4&u.type)this.addMatch(u.index,-2);else{const g=la(u,l,f,!1,!1);null!==g&&this.addMatch(u.index,g)}else this.addMatch(u.index,d)}}addMatch(l,u){null===this.matches?this.matches=[l,u]:this.matches.push(l,u)}}function Xb(o,l){const u=o.localNames;if(null!==u)for(let d=0;d<u.length;d+=2)if(u[d]===l)return u[d+1];return null}function tC(o,l,u,d){return-1===u?function(o,l){return 11&o.type?du(o,l):4&o.type?Uy(o,l):null}(l,o):-2===u?function(o,l,u){return u===so?du(l,o):u===gl?Uy(l,o):u===By?tp(l,o):void 0}(o,l,d):fr(o,o[1],u,l)}function av(o,l,u,d){const f=l[19].queries[d];if(null===f.matches){const g=o.data,y=u.matches,b=[];for(let I=0;I<y.length;I+=2){const R=y[I];b.push(R<0?null:tC(l,g[R],y[I+1],u.metadata.read))}f.matches=b}return f.matches}function ba(o,l,u,d){const f=o.queries.getByIndex(u),g=f.matches;if(null!==g){const y=av(o,l,f,u);for(let b=0;b<g.length;b+=2){const I=g[b];if(I>0)d.push(y[b/2]);else{const R=g[b+1],P=l[-I];for(let F=10;F<P.length;F++){const U=P[F];U[17]===U[3]&&ba(U[1],U,R,d)}if(null!==P[9]){const F=P[9];for(let U=0;U<F.length;U++){const Z=F[U];ba(Z[1],Z,R,d)}}}}}return d}function JD(o){const l=Ve(),u=zt(),d=$h();Ha(d+1);const f=lv(u,d);if(o.dirty&&Yc(l)===(2==(2&f.metadata.flags))){if(null===f.matches)o.reset([]);else{const g=f.crossesNgTemplate?ba(u,l,d,[]):av(u,l,f,d);o.reset(g,vc),o.notifyOnChanges()}return!0}return!1}function rC(o,l,u,d){const f=zt();if(f.firstCreatePass){const g=Fn();(function(o,l,u){null===o.queries&&(o.queries=new Em),o.queries.track(new wm(l,u))})(f,new QD(l,u,d),g.index),function(o,l){const u=o.contentQueries||(o.contentQueries=[]);l!==(u.length?u[u.length-1]:-1)&&u.push(o.queries.length-1,l)}(f,o),2==(2&u)&&(f.staticContentQueries=!0)}!function(o,l,u){const d=new Jb(4==(4&u));$_(o,l,d,d.destroy),null===l[19]&&(l[19]=new vm),l[19].queries.push(new YD(d))}(f,Ve(),u)}function XD(){return o=Ve(),l=$h(),o[19].queries[l].queryList;var o,l}function lv(o,l){return o.queries.getByIndex(l)}function eS(o,l){return Uy(o,l)}const mC=new cn("Application Initializer");let hh=(()=>{class o{constructor(u){this.appInits=u,this.resolve=ky,this.reject=ky,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,f)=>{this.resolve=d,this.reject=f})}runInitializers(){if(this.initialized)return;const u=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const g=this.appInits[f]();if(Iw(g))u.push(g);else if(dy(g)){const y=new Promise((b,I)=>{g.subscribe({complete:b,error:I})});u.push(y)}}Promise.all(u).then(()=>{d()}).catch(f=>{this.reject(f)}),0===u.length&&d(),this.initialized=!0}}return o.\u0275fac=function(u){return new(u||o)(tn(mC,8))},o.\u0275prov=wt({token:o,factory:o.\u0275fac}),o})();const vS=new cn("AppId"),yC={provide:vS,useFactory:function(){return`${Dm()}${Dm()}${Dm()}`},deps:[]};function Dm(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const ES=new cn("Platform Initializer"),wS=new cn("Platform ID"),vC=new cn("appBootstrapListener");let bS=(()=>{class o{log(u){console.log(u)}warn(u){console.warn(u)}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=wt({token:o,factory:o.\u0275fac}),o})();const yv=new cn("LocaleId"),EC=new cn("DefaultCurrencyCode");class FP{constructor(l,u){this.ngModuleFactory=l,this.componentFactories=u}}const wC=function(o){return new Wb(o)},UP=wC,bC=function(o){return Promise.resolve(wC(o))},CS=function(o){const l=wC(o),d=ol(sr(o).declarations).reduce((f,g)=>{const y=vn(g);return y&&f.push(new rv(y)),f},[]);return new FP(l,d)},Am=CS,BP=function(o){return Promise.resolve(CS(o))};let Rm=(()=>{class o{constructor(){this.compileModuleSync=UP,this.compileModuleAsync=bC,this.compileModuleAndAllComponentsSync=Am,this.compileModuleAndAllComponentsAsync=BP}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=wt({token:o,factory:o.\u0275fac}),o})();const CC=(()=>Promise.resolve(0))();function wv(o){"undefined"==typeof Zone?CC.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class Fs{constructor({enableLongStackTrace:l=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new pu(!1),this.onMicrotaskEmpty=new pu(!1),this.onStable=new pu(!1),this.onError=new pu(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),l&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!d&&u,f.shouldCoalesceRunChangeDetection=d,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function(){let o=fn.requestAnimationFrame,l=fn.cancelAnimationFrame;if("undefined"!=typeof Zone&&o&&l){const u=o[Zone.__symbol__("OriginalDelegate")];u&&(o=u);const d=l[Zone.__symbol__("OriginalDelegate")];d&&(l=d)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:l}}().nativeRequestAnimationFrame,function(o){const l=()=>{!function(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(fn,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,Cv(o),o.isCheckStableRunning=!0,bv(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),Cv(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,d,f,g,y,b)=>{try{return SS(o),u.invokeTask(f,g,y,b)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||o.shouldCoalesceRunChangeDetection)&&l(),TC(o)}},onInvoke:(u,d,f,g,y,b,I)=>{try{return SS(o),u.invoke(f,g,y,b,I)}finally{o.shouldCoalesceRunChangeDetection&&l(),TC(o)}},onHasTask:(u,d,f,g)=>{u.hasTask(f,g),d===f&&("microTask"==g.change?(o._hasPendingMicrotasks=g.microTask,Cv(o),bv(o)):"macroTask"==g.change&&(o.hasPendingMacrotasks=g.macroTask))},onHandleError:(u,d,f,g)=>(u.handleError(f,g),o.runOutsideAngular(()=>o.onError.emit(g)),!1)})}(f)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Fs.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Fs.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(l,u,d){return this._inner.run(l,u,d)}runTask(l,u,d,f){const g=this._inner,y=g.scheduleEventTask("NgZoneEvent: "+f,l,GP,ky,ky);try{return g.runTask(y,u,d)}finally{g.cancelTask(y)}}runGuarded(l,u,d){return this._inner.runGuarded(l,u,d)}runOutsideAngular(l){return this._outer.run(l)}}const GP={};function bv(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function Cv(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function SS(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function TC(o){o._nesting--,bv(o)}class AS{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new pu,this.onMicrotaskEmpty=new pu,this.onStable=new pu,this.onError=new pu}run(l,u,d){return l.apply(u,d)}runGuarded(l,u,d){return l.apply(u,d)}runOutsideAngular(l){return l()}runTask(l,u,d,f){return l.apply(u,d)}}let IC=(()=>{class o{constructor(u){this._ngZone=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Fs.assertNotInAngularZone(),wv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())wv(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(u)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,d,f){let g=-1;d&&d>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==g),u(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:u,timeoutId:g,updateCb:f})}whenStable(u,d,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,d,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(u,d,f){return[]}}return o.\u0275fac=function(u){return new(u||o)(tn(Fs))},o.\u0275prov=wt({token:o,factory:o.\u0275fac}),o})(),Nm=(()=>{class o{constructor(){this._applications=new Map,Sn.addToWindow(this)}registerApplication(u,d){this._applications.set(u,d)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,d=!0){return Sn.findTestabilityInTree(this,u,d)}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=wt({token:o,factory:o.\u0275fac}),o})();class RS{addToWindow(l){}findTestabilityInTree(l,u,d){return null}}function NS(o){Sn=o}let Sn=new RS,bn=!0,Jt=!1;function vl(){return Jt=!0,bn}function $n(){if(Jt)throw new Error("Cannot enable prod mode after platform setup.");bn=!1}let oo;const MS=new cn("AllowMultipleToken");class zP{constructor(l,u){this.name=l,this.token=u}}function DC(o,l,u=[]){const d=`Platform: ${l}`,f=new cn(d);return(g=[])=>{let y=hp();if(!y||y.injector.get(MS,!1))if(o)o(u.concat(g).concat({provide:f,useValue:!0}));else{const b=u.concat(g).concat({provide:f,useValue:!0},{provide:Tf,useValue:"platform"});!function(o){if(oo&&!oo.destroyed&&!oo.injector.get(MS,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");oo=o.get(kS);const l=o.get(ES,null);l&&l.forEach(u=>u())}(jn.create({providers:b,name:d}))}return function(o){const l=hp();if(!l)throw new Error("No platform exists!");if(!l.injector.get(o,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return l}(f)}}function hp(){return oo&&!oo.destroyed?oo:null}let kS=(()=>{class o{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,d){const b=function(o,l){let u;return u="noop"===o?new AS:("zone.js"===o?void 0:o)||new Fs({enableLongStackTrace:vl(),shouldCoalesceEventChangeDetection:!!(null==l?void 0:l.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==l?void 0:l.ngZoneRunCoalescing)}),u}(d?d.ngZone:void 0,{ngZoneEventCoalescing:d&&d.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:d&&d.ngZoneRunCoalescing||!1}),I=[{provide:Fs,useValue:b}];return b.run(()=>{const R=jn.create({providers:I,parent:this.injector,name:u.moduleType.name}),P=u.create(R),F=P.injector.get(Ku,null);if(!F)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return b.runOutsideAngular(()=>{const U=b.onError.subscribe({next:Z=>{F.handleError(Z)}});P.onDestroy(()=>{SC(this._modules,P),U.unsubscribe()})}),function(o,l,u){try{const d=u();return Iw(d)?d.catch(f=>{throw l.runOutsideAngular(()=>o.handleError(f)),f}):d}catch(d){throw l.runOutsideAngular(()=>o.handleError(d)),d}}(F,b,()=>{const U=P.injector.get(hh);return U.runInitializers(),U.donePromise.then(()=>(ub(P.injector.get(yv,Ry)||Ry),this._moduleDoBootstrap(P),P))})})}bootstrapModule(u,d=[]){const f=LS({},d);return function(o,l,u){const d=new Wb(u);return Promise.resolve(d)}(0,0,u).then(g=>this.bootstrapModuleFactory(g,f))}_moduleDoBootstrap(u){const d=u.injector.get(xm);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(f=>d.bootstrap(f));else{if(!u.instance.ngDoBootstrap)throw new Error(`The module ${re(u.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);u.instance.ngDoBootstrap(d)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u()),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(u){return new(u||o)(tn(jn))},o.\u0275prov=wt({token:o,factory:o.\u0275fac}),o})();function LS(o,l){return Array.isArray(l)?l.reduce(LS,o):Object.assign(Object.assign({},o),l)}let xm=(()=>{class o{constructor(u,d,f,g,y){this._zone=u,this._injector=d,this._exceptionHandler=f,this._componentFactoryResolver=g,this._initStatus=y,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const b=new L.y(R=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{R.next(this._stable),R.complete()})}),I=new L.y(R=>{let P;this._zone.runOutsideAngular(()=>{P=this._zone.onStable.subscribe(()=>{Fs.assertNotInAngularZone(),wv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,R.next(!0))})})});const F=this._zone.onUnstable.subscribe(()=>{Fs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{R.next(!1)}))});return()=>{P.unsubscribe(),F.unsubscribe()}});this.isStable=(0,_e.T)(b,I.pipe((0,de.B)()))}bootstrap(u,d){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let f;f=u instanceof My?u:this._componentFactoryResolver.resolveComponentFactory(u),this.componentTypes.push(f.componentType);const g=function(o){return o.isBoundToModule}(f)?void 0:this._injector.get(sh),b=f.create(jn.NULL,[],d||f.selector,g),I=b.location.nativeElement,R=b.injector.get(IC,null),P=R&&b.injector.get(Nm);return R&&P&&P.registerApplication(I,R),b.onDestroy(()=>{this.detachView(b.hostView),SC(this.components,b),P&&P.unregisterApplication(I)}),this._loadComponent(b),b}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const d=u;this._views.push(d),d.attachToAppRef(this)}detachView(u){const d=u;SC(this._views,d),d.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(vC,[]).concat(this._bootstrapListeners).forEach(f=>f(u))}ngOnDestroy(){this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return o.\u0275fac=function(u){return new(u||o)(tn(Fs),tn(jn),tn(Ku),tn(rh),tn(hh))},o.\u0275prov=wt({token:o,factory:o.\u0275fac}),o})();function SC(o,l){const u=o.indexOf(l);u>-1&&o.splice(u,1)}class nn{}class QP{}const Ls={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let JP=(()=>{class o{constructor(u,d){this._compiler=u,this._config=d||Ls}load(u){return this.loadAndCompile(u)}loadAndCompile(u){let[d,f]=u.split("#");return void 0===f&&(f="default"),$(8255)(d).then(g=>g[f]).then(g=>Iv(g,d,f)).then(g=>this._compiler.compileModuleAsync(g))}loadFactory(u){let[d,f]=u.split("#"),g="NgFactory";return void 0===f&&(f="default",g=""),$(8255)(this._config.factoryPathPrefix+d+this._config.factoryPathSuffix).then(y=>y[f+g]).then(y=>Iv(y,d,f))}}return o.\u0275fac=function(u){return new(u||o)(tn(Rm),tn(QP,8))},o.\u0275prov=wt({token:o,factory:o.\u0275fac}),o})();function Iv(o,l,u){if(!o)throw new Error(`Cannot find '${u}' in '${l}'`);return o}const tM=function(o){return null},$S=DC(null,"core",[{provide:wS,useValue:"unknown"},{provide:kS,deps:[jn]},{provide:Nm,deps:[]},{provide:bS,deps:[]}]),iM=[{provide:xm,useClass:xm,deps:[Fs,jn,Ku,rh,hh]},{provide:tP,deps:[Fs],useFactory:function(o){let l=[];return o.onStable.subscribe(()=>{for(;l.length;)l.pop()()}),function(u){l.push(u)}}},{provide:hh,useClass:hh,deps:[[new Zs,mC]]},{provide:Rm,useClass:Rm,deps:[]},yC,{provide:lm,useFactory:function(){return mD},deps:[]},{provide:ih,useFactory:function(){return Ex},deps:[]},{provide:yv,useFactory:function(o){return ub(o=o||"undefined"!=typeof $localize&&$localize.locale||Ry),o},deps:[[new Fo(yv),new Zs,new Lo]]},{provide:EC,useValue:"USD"}];let Lm=(()=>{class o{constructor(u){}}return o.\u0275fac=function(u){return new(u||o)(tn(xm))},o.\u0275mod=Ke({type:o}),o.\u0275inj=Mn({providers:iM}),o})()},8939:(lt,ke,$)=>{"use strict";$.d(ke,{hO:()=>ce,xv:()=>ne,Dh:()=>re,GT:()=>ie,cc:()=>ge,on:()=>j,pX:()=>de});var _=$(7716),z=$(7841),L=$(6643);lt=$.hmd(lt);const _e=["ngOnDestroy"],de=(se,me,Ee,Fe={})=>new Proxy(se,{get:(nt,Ct)=>Ee.runOutsideAngular(()=>{var Vt;if(se[Ct])return(null===(Vt=null==Fe?void 0:Fe.spy)||void 0===Vt?void 0:Vt.get)&&Fe.spy.get(Ct,se[Ct]),se[Ct];if(_e.indexOf(Ct)>-1)return()=>{};const xe=me.toPromise().then(Zt=>{const he=Zt&&Zt[Ct];return"function"==typeof he?he.bind(Zt):he&&he.then?he.then(we=>Ee.run(()=>we)):Ee.run(()=>he)});return new Proxy(()=>{},{get:(Zt,he)=>xe[he],apply:(Zt,he,we)=>xe.then(Te=>{var Ae;const He=Te&&Te(...we);return(null===(Ae=null==Fe?void 0:Fe.spy)||void 0===Ae?void 0:Ae.apply)&&Fe.spy.apply(Ct,we,He),He})})})}),ie=(se,me)=>{me.forEach(Ee=>{Object.getOwnPropertyNames(Ee.prototype||Ee).forEach(Fe=>{Object.defineProperty(se.prototype,Fe,Object.getOwnPropertyDescriptor(Ee.prototype||Ee,Fe))})})};class Re{constructor(me){return me}}const re=new _.OlP("angularfire2.app.options"),ne=new _.OlP("angularfire2.app.name");function j(se,me,Ee){const nt="object"==typeof Ee&&Ee||{};nt.name=nt.name||"string"==typeof Ee&&Ee||"[DEFAULT]";const Vt=z.Z.apps.filter(xe=>xe&&xe.name===nt.name)[0]||me.runOutsideAngular(()=>z.Z.initializeApp(se,nt));try{JSON.stringify(se)!==JSON.stringify(Vt.options)&&G("error",`${Vt.name} Firebase App already initialized with different options${lt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(xe){}return new Re(Vt)}const G=(se,...me)=>{(0,_.X6Q)()&&"undefined"!=typeof console&&console[se](...me)},K={provide:Re,useFactory:j,deps:[re,_.R0b,[new _.FiY,ne]]};let ce=(()=>{class se{constructor(Ee){z.Z.registerVersion("angularfire",L.q4.full,"core"),z.Z.registerVersion("angularfire",L.q4.full,"app-compat"),z.Z.registerVersion("angular",_.q4F.full,Ee.toString())}static initializeApp(Ee,Fe){return{ngModule:se,providers:[{provide:re,useValue:Ee},{provide:ne,useValue:Fe}]}}}return se.\u0275fac=function(Ee){return new(Ee||se)(_.LFG(_.Lbi))},se.\u0275mod=_.oAB({type:se}),se.\u0275inj=_.cJS({providers:[K]}),se})();function ge(se,me,Ee,Fe,nt){const[,Ct,Vt]=globalThis.\u0275AngularfireInstanceCache.find(xe=>xe[0]===se)||[];if(Ct)return function(se,me){try{return se.toString()===me.toString()}catch(Ee){return se===me}}(nt,Vt)||(ye("error",`${me} was already initialized on the ${Ee} Firebase App with different settings.${Ce?" You may need to reload as Firebase is not HMR aware.":""}`),ye("warn",{is:nt,was:Vt})),Ct;{const xe=Fe();return globalThis.\u0275AngularfireInstanceCache.push([se,xe,nt]),xe}}const Ce=!!lt.hot,ye=(se,...me)=>{(0,_.X6Q)()&&"undefined"!=typeof console&&console[se](...me)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},6643:(lt,ke,$)=>{"use strict";$.d(ke,{q4:()=>$l,iC:()=>da,fc:()=>Jp,HU:()=>Oo,vb:()=>Ui,JM:()=>Po});var _=$(7716),z=$(2329),L=$(8239),_e=$(5452),de=$(3854),ie=$(6034),Re=$(5601),re=$(6676);const j="0.5.1",K=`w:${j}`,ce="FIS_v2",me=new de.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ee(A){return A instanceof de.ZR&&A.code.includes("request-failed")}function Fe({projectId:A}){return`https://firebaseinstallations.googleapis.com/v1/projects/${A}/installations`}function nt(A){return{token:A.token,requestStatus:2,expiresIn:Te(A.expiresIn),creationTime:Date.now()}}function Ct(A,x){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,L.Z)(function*(A,x){const q=(yield x.json()).error;return me.create("request-failed",{requestName:A,serverCode:q.code,serverMessage:q.message,serverStatus:q.status})})).apply(this,arguments)}function xe({apiKey:A}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":A})}function Zt(A,{refreshToken:x}){const k=xe(A);return k.append("Authorization",function(A){return`${ce} ${A}`}(x)),k}function he(A){return we.apply(this,arguments)}function we(){return(we=(0,L.Z)(function*(A){const x=yield A();return x.status>=500&&x.status<600?A():x})).apply(this,arguments)}function Te(A){return Number(A.replace("s","000"))}function He(A,x){return be.apply(this,arguments)}function be(){return(be=(0,L.Z)(function*(A,{fid:x}){const k=Fe(A),Ie={method:"POST",headers:xe(A),body:JSON.stringify({fid:x,authVersion:ce,appId:A.appId,sdkVersion:K})},je=yield he(()=>fetch(k,Ie));if(je.ok){const Qe=yield je.json();return{fid:Qe.fid||x,registrationStatus:2,refreshToken:Qe.refreshToken,authToken:nt(Qe.authToken)}}throw yield Ct("Create Installation",je)})).apply(this,arguments)}function Tt(A){return new Promise(x=>{setTimeout(x,A)})}const Hn=/^[cdef][\w-]{21}$/;function Dt(){try{const A=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(A),A[0]=112+A[0]%16;const k=function(A){return function(A){return btoa(String.fromCharCode(...A)).replace(/\+/g,"-").replace(/\//g,"_")}(A).substr(0,22)}(A);return Hn.test(k)?k:""}catch(A){return""}}function yn(A){return`${A.appName}!${A.appId}`}const Sr=new Map;function Vr(A,x){const k=yn(A);Mn(k,x),function(A,x){const k=(!ir&&"BroadcastChannel"in self&&(ir=new BroadcastChannel("[Firebase] FID Change"),ir.onmessage=A=>{Mn(A.data.key,A.data.fid)}),ir);k&&k.postMessage({key:A,fid:x}),0===Sr.size&&ir&&(ir.close(),ir=null)}(k,x)}function Mn(A,x){const k=Sr.get(A);if(k)for(const q of k)q(x)}let ir=null;const Xn="firebase-installations-store";let es=null;function Ti(){return es||(es=(0,re.openDb)("firebase-installations-database",1,A=>{switch(A.oldVersion){case 0:A.createObjectStore(Xn)}})),es}function ot(A,x){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,L.Z)(function*(A,x){const k=yn(A),oe=(yield Ti()).transaction(Xn,"readwrite"),Ie=oe.objectStore(Xn),je=yield Ie.get(k);return yield Ie.put(x,k),yield oe.complete,(!je||je.fid!==x.fid)&&Vr(A,x.fid),x})).apply(this,arguments)}function Ar(A){return lr.apply(this,arguments)}function lr(){return(lr=(0,L.Z)(function*(A){const x=yn(A),q=(yield Ti()).transaction(Xn,"readwrite");yield q.objectStore(Xn).delete(x),yield q.complete})).apply(this,arguments)}function ht(A,x){return yt.apply(this,arguments)}function yt(){return(yt=(0,L.Z)(function*(A,x){const k=yn(A),oe=(yield Ti()).transaction(Xn,"readwrite"),Ie=oe.objectStore(Xn),je=yield Ie.get(k),Qe=x(je);return void 0===Qe?yield Ie.delete(k):yield Ie.put(Qe,k),yield oe.complete,Qe&&(!je||je.fid!==Qe.fid)&&Vr(A,Qe.fid),Qe})).apply(this,arguments)}function Ut(A){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,L.Z)(function*(A){let x;const k=yield ht(A,q=>{const oe=ur(q),Ie=ln(A,oe);return x=Ie.registrationPromise,Ie.installationEntry});return""===k.fid?{installationEntry:yield x}:{installationEntry:k,registrationPromise:x}})).apply(this,arguments)}function ur(A){return fn(A||{fid:Dt(),registrationStatus:0})}function ln(A,x){if(0===x.registrationStatus){if(!navigator.onLine)return{installationEntry:x,registrationPromise:Promise.reject(me.create("app-offline"))};const k={fid:x.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:k,registrationPromise:function(A,x){return st.apply(this,arguments)}(A,k)}}return 1===x.registrationStatus?{installationEntry:x,registrationPromise:Yo(A)}:{installationEntry:x}}function st(){return(st=(0,L.Z)(function*(A,x){try{return ot(A,yield He(A,x))}catch(k){throw Ee(k)&&409===k.customData.serverCode?yield Ar(A):yield ot(A,{fid:x.fid,registrationStatus:0}),k}})).apply(this,arguments)}function Yo(A){return bs.apply(this,arguments)}function bs(){return(bs=(0,L.Z)(function*(A){let x=yield Ii(A);for(;1===x.registrationStatus;)yield Tt(100),x=yield Ii(A);if(0===x.registrationStatus){const{installationEntry:k,registrationPromise:q}=yield Ut(A);return q||k}return x})).apply(this,arguments)}function Ii(A){return ht(A,x=>{if(!x)throw me.create("installation-not-found");return fn(x)})}function fn(A){return function(A){return 1===A.registrationStatus&&A.registrationTime+1e4<Date.now()}(A)?{fid:A.fid,registrationStatus:0}:A}function po(A,x){return Q.apply(this,arguments)}function Q(){return(Q=(0,L.Z)(function*({appConfig:A,platformLoggerProvider:x},k){const q=Y(A,k),oe=Zt(A,k),Ie=x.getImmediate({optional:!0});Ie&&oe.append("x-firebase-client",Ie.getPlatformInfoString());const Qe={method:"POST",headers:oe,body:JSON.stringify({installation:{sdkVersion:K}})},Xe=yield he(()=>fetch(q,Qe));if(Xe.ok)return nt(yield Xe.json());throw yield Ct("Generate Auth Token",Xe)})).apply(this,arguments)}function Y(A,{fid:x}){return`${Fe(A)}/${x}/authTokens:generate`}function X(A){return Me.apply(this,arguments)}function Me(){return(Me=(0,L.Z)(function*(A,x=!1){let k;const q=yield ht(A.appConfig,Ie=>{if(!cr(Ie))throw me.create("not-registered");const je=Ie.authToken;if(!x&&dr(je))return Ie;if(1===je.requestStatus)return k=pe(A,x),Ie;{if(!navigator.onLine)throw me.create("app-offline");const Qe=J(Ie);return k=Bt(A,Qe),Qe}});return k?yield k:q.authToken})).apply(this,arguments)}function pe(A,x){return et.apply(this,arguments)}function et(){return(et=(0,L.Z)(function*(A,x){let k=yield vt(A.appConfig);for(;1===k.authToken.requestStatus;)yield Tt(100),k=yield vt(A.appConfig);const q=k.authToken;return 0===q.requestStatus?X(A,x):q})).apply(this,arguments)}function vt(A){return ht(A,x=>{if(!cr(x))throw me.create("not-registered");return function(A){return 1===A.requestStatus&&A.requestTime+1e4<Date.now()}(x.authToken)?Object.assign(Object.assign({},x),{authToken:{requestStatus:0}}):x})}function Bt(A,x){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,L.Z)(function*(A,x){try{const k=yield po(A,x),q=Object.assign(Object.assign({},x),{authToken:k});return yield ot(A.appConfig,q),k}catch(k){if(!Ee(k)||401!==k.customData.serverCode&&404!==k.customData.serverCode){const q=Object.assign(Object.assign({},x),{authToken:{requestStatus:0}});yield ot(A.appConfig,q)}else yield Ar(A.appConfig);throw k}})).apply(this,arguments)}function cr(A){return void 0!==A&&2===A.registrationStatus}function dr(A){return 2===A.requestStatus&&!function(A){const x=Date.now();return x<A.creationTime||A.creationTime+A.expiresIn<x+36e5}(A)}function J(A){const x={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},A),{authToken:x})}function Ke(){return(Ke=(0,L.Z)(function*(A){const x=A,{installationEntry:k,registrationPromise:q}=yield Ut(x.appConfig);return q?q.catch(console.error):X(x).catch(console.error),k.fid})).apply(this,arguments)}function Wt(){return(Wt=(0,L.Z)(function*(A,x=!1){const k=A;return yield Xt(k.appConfig),(yield X(k,x)).token})).apply(this,arguments)}function Xt(A){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,L.Z)(function*(A){const{registrationPromise:x}=yield Ut(A);x&&(yield x)})).apply(this,arguments)}function In(A){return me.create("missing-app-config-values",{valueName:A})}const En="installations";(0,_e._registerComponent)(new ie.wA(En,A=>{const x=A.getProvider("app").getImmediate();return{app:x,appConfig:function(A){if(!A||!A.options)throw In("App Configuration");if(!A.name)throw In("App Name");const x=["projectId","apiKey","appId"];for(const k of x)if(!A.options[k])throw In(k);return{appName:A.name,projectId:A.options.projectId,apiKey:A.options.apiKey,appId:A.options.appId}}(x),platformLoggerProvider:(0,_e._getProvider)(x,"platform-logger"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,_e._registerComponent)(new ie.wA("installations-internal",A=>{const x=A.getProvider("app").getImmediate(),k=(0,_e._getProvider)(x,En).getImmediate();return{getId:()=>function(A){return Ke.apply(this,arguments)}(k),getToken:oe=>function(A){return Wt.apply(this,arguments)}(k,oe)}},"PRIVATE")),(0,_e.registerVersion)("@firebase/installations",j);const Qo="@firebase/remote-config",Rr=new de.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class vo{constructor(x,k,q,oe){this.client=x,this.storage=k,this.storageCache=q,this.logger=oe}isCachedDataFresh(x,k){if(!k)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const q=Date.now()-k,oe=q<=x;return this.logger.debug(`Config fetch cache check. Cache age millis: ${q}. Cache max age millis (minimumFetchIntervalMillis setting): ${x}. Is cache hit: ${oe}.`),oe}fetch(x){var k=this;return(0,L.Z)(function*(){const[q,oe]=yield Promise.all([k.storage.getLastSuccessfulFetchTimestampMillis(),k.storage.getLastSuccessfulFetchResponse()]);if(oe&&k.isCachedDataFresh(x.cacheMaxAgeMillis,q))return oe;x.eTag=oe&&oe.eTag;const Ie=yield k.client.fetch(x),je=[k.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Ie.status&&je.push(k.storage.setLastSuccessfulFetchResponse(Ie)),yield Promise.all(je),Ie})()}}function vr(A=navigator){return A.languages&&A.languages[0]||A.language}class Si{constructor(x,k,q,oe,Ie,je){this.firebaseInstallations=x,this.sdkVersion=k,this.namespace=q,this.projectId=oe,this.apiKey=Ie,this.appId=je}fetch(x){var k=this;return(0,L.Z)(function*(){const[q,oe]=yield Promise.all([k.firebaseInstallations.getId(),k.firebaseInstallations.getToken()]),je=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${k.projectId}/namespaces/${k.namespace}:fetch?key=${k.apiKey}`,Qe={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":x.eTag||"*"},Xe={sdk_version:k.sdkVersion,app_instance_id:q,app_instance_id_token:oe,app_id:k.appId,language_code:vr()},Ht={method:"POST",headers:Qe,body:JSON.stringify(Xe)},kn=fetch(je,Ht),Pr=new Promise((us,pa)=>{x.signal.addEventListener(()=>{const ko=new Error("The operation was aborted.");ko.name="AbortError",pa(ko)})});let Mr;try{yield Promise.race([kn,Pr]),Mr=yield kn}catch(us){let pa="fetch-client-network";throw"AbortError"===us.name&&(pa="fetch-timeout"),Rr.create(pa,{originalErrorMessage:us.message})}let Vn=Mr.status;const el=Mr.headers.get("ETag")||void 0;let ha,fa;if(200===Mr.status){let us;try{us=yield Mr.json()}catch(pa){throw Rr.create("fetch-client-parse",{originalErrorMessage:pa.message})}ha=us.entries,fa=us.state}if("INSTANCE_STATE_UNSPECIFIED"===fa?Vn=500:"NO_CHANGE"===fa?Vn=304:("NO_TEMPLATE"===fa||"EMPTY_CONFIG"===fa)&&(ha={}),304!==Vn&&200!==Vn)throw Rr.create("fetch-status",{httpStatus:Vn});return{status:Vn,eTag:el,config:ha}})()}}class Lp{constructor(x,k){this.client=x,this.storage=k}fetch(x){var k=this;return(0,L.Z)(function*(){const q=(yield k.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return k.attemptFetch(x,q)})()}attemptFetch(x,{throttleEndTimeMillis:k,backoffCount:q}){var oe=this;return(0,L.Z)(function*(){yield function(A,x){return new Promise((k,q)=>{const oe=Math.max(x-Date.now(),0),Ie=setTimeout(k,oe);A.addEventListener(()=>{clearTimeout(Ie),q(Rr.create("fetch-throttle",{throttleEndTimeMillis:x}))})})}(x.signal,k);try{const Ie=yield oe.client.fetch(x);return yield oe.storage.deleteThrottleMetadata(),Ie}catch(Ie){if(!function(A){if(!(A instanceof de.ZR&&A.customData))return!1;const x=Number(A.customData.httpStatus);return 429===x||500===x||503===x||504===x}(Ie))throw Ie;const je={throttleEndTimeMillis:Date.now()+(0,de.$s)(q),backoffCount:q+1};return yield oe.storage.setThrottleMetadata(je),oe.attemptFetch(x,je)}})()}}class Fh{constructor(x,k,q,oe,Ie){this.app=x,this._client=k,this._storageCache=q,this._storage=oe,this._logger=Ie,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function $c(A,x){const k=A.target.error||void 0;return Rr.create(x,{originalErrorMessage:k&&k.message})}const Eo="app_namespace_store";class Va{constructor(x,k,q,oe=function(){return new Promise((A,x)=>{try{const k=indexedDB.open("firebase_remote_config",1);k.onerror=q=>{x($c(q,"storage-open"))},k.onsuccess=q=>{A(q.target.result)},k.onupgradeneeded=q=>{const oe=q.target.result;switch(q.oldVersion){case 0:oe.createObjectStore(Eo,{keyPath:"compositeKey"})}}}catch(k){x(Rr.create("storage-open",{originalErrorMessage:k}))}})}()){this.appId=x,this.appName=k,this.namespace=q,this.openDbPromise=oe}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(x){return this.set("last_fetch_status",x)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(x){return this.set("last_successful_fetch_timestamp_millis",x)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(x){return this.set("last_successful_fetch_response",x)}getActiveConfig(){return this.get("active_config")}setActiveConfig(x){return this.set("active_config",x)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(x){return this.set("active_config_etag",x)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(x){return this.set("throttle_metadata",x)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(x){var k=this;return(0,L.Z)(function*(){const q=yield k.openDbPromise;return new Promise((oe,Ie)=>{const Qe=q.transaction([Eo],"readonly").objectStore(Eo),Xe=k.createCompositeKey(x);try{const Ht=Qe.get(Xe);Ht.onerror=kn=>{Ie($c(kn,"storage-get"))},Ht.onsuccess=kn=>{const Pr=kn.target.result;oe(Pr?Pr.value:void 0)}}catch(Ht){Ie(Rr.create("storage-get",{originalErrorMessage:Ht&&Ht.message}))}})})()}set(x,k){var q=this;return(0,L.Z)(function*(){const oe=yield q.openDbPromise;return new Promise((Ie,je)=>{const Xe=oe.transaction([Eo],"readwrite").objectStore(Eo),Ht=q.createCompositeKey(x);try{const kn=Xe.put({compositeKey:Ht,value:k});kn.onerror=Pr=>{je($c(Pr,"storage-set"))},kn.onsuccess=()=>{Ie()}}catch(kn){je(Rr.create("storage-set",{originalErrorMessage:kn&&kn.message}))}})})()}delete(x){var k=this;return(0,L.Z)(function*(){const q=yield k.openDbPromise;return new Promise((oe,Ie)=>{const Qe=q.transaction([Eo],"readwrite").objectStore(Eo),Xe=k.createCompositeKey(x);try{const Ht=Qe.delete(Xe);Ht.onerror=kn=>{Ie($c(kn,"storage-delete"))},Ht.onsuccess=()=>{oe()}}catch(Ht){Ie(Rr.create("storage-delete",{originalErrorMessage:Ht&&Ht.message}))}})})()}createCompositeKey(x){return[this.appId,this.appName,this.namespace,x].join()}}class l_{constructor(x){this.storage=x}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var x=this;return(0,L.Z)(function*(){const k=x.storage.getLastFetchStatus(),q=x.storage.getLastSuccessfulFetchTimestampMillis(),oe=x.storage.getActiveConfig(),Ie=yield k;Ie&&(x.lastFetchStatus=Ie);const je=yield q;je&&(x.lastSuccessfulFetchTimestampMillis=je);const Qe=yield oe;Qe&&(x.activeConfig=Qe)})()}setLastFetchStatus(x){return this.lastFetchStatus=x,this.storage.setLastFetchStatus(x)}setLastSuccessfulFetchTimestampMillis(x){return this.lastSuccessfulFetchTimestampMillis=x,this.storage.setLastSuccessfulFetchTimestampMillis(x)}setActiveConfig(x){return this.activeConfig=x,this.storage.setActiveConfig(x)}}function Gc(){return ns.apply(this,arguments)}function ns(){return(ns=(0,L.Z)(function*(){if(!(0,de.hl)())return!1;try{return yield(0,de.eu)()}catch(A){return!1}})).apply(this,arguments)}(0,_e._registerComponent)(new ie.wA("remote-config",function(x,{instanceIdentifier:k}){const q=x.getProvider("app").getImmediate(),oe=x.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Rr.create("registration-window");if(!(0,de.hl)())throw Rr.create("indexed-db-unavailable");const{projectId:Ie,apiKey:je,appId:Qe}=q.options;if(!Ie)throw Rr.create("registration-project-id");if(!je)throw Rr.create("registration-api-key");if(!Qe)throw Rr.create("registration-app-id");const Xe=new Va(Qe,q.name,k=k||"firebase"),Ht=new l_(Xe),kn=new Re.Yd(Qo);kn.logLevel=Re.in.ERROR;const Pr=new Si(oe,_e.SDK_VERSION,k,Ie,je,Qe),Mr=new Lp(Pr,Xe),Vn=new vo(Mr,Xe,Ht,kn),el=new Fh(q,Vn,Ht,Xe,kn);return function(A){const x=(0,de.m9)(A);x._initializePromise||(x._initializePromise=x._storageCache.loadFromStorage().then(()=>{x._isInitializationComplete=!0}))}(el),el},"PUBLIC").setMultipleInstances(!0)),(0,_e.registerVersion)(Qo,"0.3.0");const wo="/firebase-messaging-sw.js",Tu="/firebase-cloud-messaging-push-scope",qc="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",bo="google.c.a.c_id",Bp="google.c.a.c_l",hi="google.c.a.ts",Wc="google.c.a.e";var Ua=(()=>{return(A=Ua||(Ua={})).PUSH_RECEIVED="push-received",A.NOTIFICATION_CLICKED="notification-clicked",Ua;var A})();function rs(A){const x=new Uint8Array(A);return btoa(String.fromCharCode(...x)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function zc(A){const k=(A+"=".repeat((4-A.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),q=atob(k),oe=new Uint8Array(q.length);for(let Ie=0;Ie<q.length;++Ie)oe[Ie]=q.charCodeAt(Ie);return oe}const zr="fcm_token_details_db",jp="fcm_token_object_Store";function Ai(A){return Co.apply(this,arguments)}function Co(){return(Co=(0,L.Z)(function*(A){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Ie=>Ie.name).includes(zr))return null;let x=null;return(yield(0,re.openDb)(zr,5,function(){var q=(0,L.Z)(function*(oe){var Ie;if(oe.oldVersion<2||!oe.objectStoreNames.contains(jp))return;const je=oe.transaction.objectStore(jp),Qe=yield je.index("fcmSenderId").get(A);if(yield je.clear(),Qe)if(2===oe.oldVersion){const Xe=Qe;if(!Xe.auth||!Xe.p256dh||!Xe.endpoint)return;x={token:Xe.fcmToken,createTime:null!==(Ie=Xe.createTime)&&void 0!==Ie?Ie:Date.now(),subscriptionOptions:{auth:Xe.auth,p256dh:Xe.p256dh,endpoint:Xe.endpoint,swScope:Xe.swScope,vapidKey:"string"==typeof Xe.vapidKey?Xe.vapidKey:rs(Xe.vapidKey)}}}else if(3===oe.oldVersion){const Xe=Qe;x={token:Xe.fcmToken,createTime:Xe.createTime,subscriptionOptions:{auth:rs(Xe.auth),p256dh:rs(Xe.p256dh),endpoint:Xe.endpoint,swScope:Xe.swScope,vapidKey:rs(Xe.vapidKey)}}}else if(4===oe.oldVersion){const Xe=Qe;x={token:Xe.fcmToken,createTime:Xe.createTime,subscriptionOptions:{auth:rs(Xe.auth),p256dh:rs(Xe.p256dh),endpoint:Xe.endpoint,swScope:Xe.swScope,vapidKey:rs(Xe.vapidKey)}}}});return function(oe){return q.apply(this,arguments)}}())).close(),yield(0,re.deleteDb)(zr),yield(0,re.deleteDb)("fcm_vapid_details_db"),yield(0,re.deleteDb)("undefined"),Zc(x)?x:null})).apply(this,arguments)}function Zc(A){if(!A||!A.subscriptionOptions)return!1;const{subscriptionOptions:x}=A;return"number"==typeof A.createTime&&A.createTime>0&&"string"==typeof A.token&&A.token.length>0&&"string"==typeof x.auth&&x.auth.length>0&&"string"==typeof x.p256dh&&x.p256dh.length>0&&"string"==typeof x.endpoint&&x.endpoint.length>0&&"string"==typeof x.swScope&&x.swScope.length>0&&"string"==typeof x.vapidKey&&x.vapidKey.length>0}const Ds="firebase-messaging-store";let Iu=null;function On(){return Iu||(Iu=(0,re.openDb)("firebase-messaging-database",1,A=>{switch(A.oldVersion){case 0:A.createObjectStore(Ds)}})),Iu}function Ba(A){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,L.Z)(function*(A){const x=Hs(A),q=yield(yield On()).transaction(Ds).objectStore(Ds).get(x);if(q)return q;{const oe=yield Ai(A.appConfig.senderId);if(oe)return yield Du(A,oe),oe}})).apply(this,arguments)}function Du(A,x){return An.apply(this,arguments)}function An(){return(An=(0,L.Z)(function*(A,x){const k=Hs(A),oe=(yield On()).transaction(Ds,"readwrite");return yield oe.objectStore(Ds).put(x,k),yield oe.complete,x})).apply(this,arguments)}function Bh(A){return Al.apply(this,arguments)}function Al(){return(Al=(0,L.Z)(function*(A){const x=Hs(A),q=(yield On()).transaction(Ds,"readwrite");yield q.objectStore(Ds).delete(x),yield q.complete})).apply(this,arguments)}function Hs({appConfig:A}){return A.appId}const or=new de.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Rl(A,x){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,L.Z)(function*(A,x){const k=yield ta(A),q=bt(x),oe={method:"POST",headers:k,body:JSON.stringify(q)};let Ie;try{Ie=yield(yield fetch(is(A.appConfig),oe)).json()}catch(je){throw or.create("token-subscribe-failed",{errorInfo:je})}if(Ie.error)throw or.create("token-subscribe-failed",{errorInfo:Ie.error.message});if(!Ie.token)throw or.create("token-subscribe-no-token");return Ie.token})).apply(this,arguments)}function Kr(A,x){return Yc.apply(this,arguments)}function Yc(){return(Yc=(0,L.Z)(function*(A,x){const k=yield ta(A),q=bt(x.subscriptionOptions),oe={method:"PATCH",headers:k,body:JSON.stringify(q)};let Ie;try{Ie=yield(yield fetch(`${is(A.appConfig)}/${x.token}`,oe)).json()}catch(je){throw or.create("token-update-failed",{errorInfo:je})}if(Ie.error)throw or.create("token-update-failed",{errorInfo:Ie.error.message});if(!Ie.token)throw or.create("token-update-no-token");return Ie.token})).apply(this,arguments)}function Nl(A,x){return ja.apply(this,arguments)}function ja(){return(ja=(0,L.Z)(function*(A,x){const q={method:"DELETE",headers:yield ta(A)};try{const Ie=yield(yield fetch(`${is(A.appConfig)}/${x}`,q)).json();if(Ie.error)throw or.create("token-unsubscribe-failed",{errorInfo:Ie.error.message})}catch(oe){throw or.create("token-unsubscribe-failed",{errorInfo:oe})}})).apply(this,arguments)}function is({projectId:A}){return`https://fcmregistrations.googleapis.com/v1/projects/${A}/registrations`}function ta(A){return na.apply(this,arguments)}function na(){return(na=(0,L.Z)(function*({appConfig:A,installations:x}){const k=yield x.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":A.apiKey,"x-goog-firebase-installations-auth":`FIS ${k}`})})).apply(this,arguments)}function bt({p256dh:A,auth:x,endpoint:k,vapidKey:q}){const oe={web:{endpoint:k,auth:x,p256dh:A}};return q!==qc&&(oe.web.applicationPubKey=q),oe}const Hp=6048e5;function Qc(A){return Jc.apply(this,arguments)}function Jc(){return(Jc=(0,L.Z)(function*(A){const x=yield xl(A.swRegistration,A.vapidKey),k={vapidKey:A.vapidKey,swScope:A.swRegistration.scope,endpoint:x.endpoint,auth:rs(x.getKey("auth")),p256dh:rs(x.getKey("p256dh"))},q=yield Ba(A.firebaseDependencies);if(q){if(Pl(q.subscriptionOptions,k))return Date.now()>=q.createTime+Hp?ed(A,{token:q.token,createTime:Date.now(),subscriptionOptions:k}):q.token;try{yield Nl(A.firebaseDependencies,q.token)}catch(oe){console.warn(oe)}return Ve(A.firebaseDependencies,k)}return Ve(A.firebaseDependencies,k)})).apply(this,arguments)}function Su(A){return Xc.apply(this,arguments)}function Xc(){return(Xc=(0,L.Z)(function*(A){const x=yield Ba(A.firebaseDependencies);x&&(yield Nl(A.firebaseDependencies,x.token),yield Bh(A.firebaseDependencies));const k=yield A.swRegistration.pushManager.getSubscription();return!k||k.unsubscribe()})).apply(this,arguments)}function ed(A,x){return To.apply(this,arguments)}function To(){return(To=(0,L.Z)(function*(A,x){try{const k=yield Kr(A.firebaseDependencies,x),q=Object.assign(Object.assign({},x),{token:k,createTime:Date.now()});return yield Du(A.firebaseDependencies,q),k}catch(k){throw yield Su(A),k}})).apply(this,arguments)}function Ve(A,x){return zt.apply(this,arguments)}function zt(){return(zt=(0,L.Z)(function*(A,x){const q={token:yield Rl(A,x),createTime:Date.now(),subscriptionOptions:x};return yield Du(A,q),q.token})).apply(this,arguments)}function xl(A,x){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,L.Z)(function*(A,x){return(yield A.pushManager.getSubscription())||A.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:zc(x)})})).apply(this,arguments)}function Pl(A,x){return x.vapidKey===A.vapidKey&&x.endpoint===A.endpoint&&x.auth===A.auth&&x.p256dh===A.p256dh}function Io(A){const x={from:A.from,collapseKey:A.collapse_key,messageId:A.fcm_message_id};return function(A,x){if(!x.notification)return;A.notification={};const k=x.notification.title;k&&(A.notification.title=k);const q=x.notification.body;q&&(A.notification.body=q);const oe=x.notification.image;oe&&(A.notification.image=oe)}(x,A),function(A,x){!x.data||(A.data=x.data)}(x,A),function(A,x){if(!x.fcmOptions)return;A.fcmOptions={};const k=x.fcmOptions.link;k&&(A.fcmOptions.link=k);const q=x.fcmOptions.analytics_label;q&&(A.fcmOptions.analyticsLabel=q)}(x,A),x}function c_(A){return"object"==typeof A&&!!A&&bo in A}function Ru(A,x){const k=[];for(let q=0;q<A.length;q++)k.push(A.charAt(q)),q<x.length&&k.push(x.charAt(q));return k.join("")}function Do(A){return or.create("missing-app-config-values",{valueName:A})}Ru("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ru("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Er{constructor(x,k,q){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const oe=function(A){if(!A||!A.options)throw Do("App Configuration Object");if(!A.name)throw Do("App Name");const x=["projectId","apiKey","appId","messagingSenderId"],{options:k}=A;for(const q of x)if(!k[q])throw Do(q);return{appName:A.name,projectId:k.projectId,apiKey:k.apiKey,appId:k.appId,senderId:k.messagingSenderId}}(x);this.firebaseDependencies={app:x,appConfig:oe,installations:k,analyticsProvider:q}}_delete(){return Promise.resolve()}}function pi(A){return td.apply(this,arguments)}function td(){return(td=(0,L.Z)(function*(A){try{A.swRegistration=yield navigator.serviceWorker.register(wo,{scope:Tu}),A.swRegistration.update().catch(()=>{})}catch(x){throw or.create("failed-service-worker-registration",{browserErrorMessage:x.message})}})).apply(this,arguments)}function ss(A,x){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,L.Z)(function*(A,x){if(!x&&!A.swRegistration&&(yield pi(A)),x||!A.swRegistration){if(!(x instanceof ServiceWorkerRegistration))throw or.create("invalid-sw-registration");A.swRegistration=x}})).apply(this,arguments)}function jh(A,x){return xu.apply(this,arguments)}function xu(){return(xu=(0,L.Z)(function*(A,x){x?A.vapidKey=x:A.vapidKey||(A.vapidKey=qc)})).apply(this,arguments)}function nd(){return(nd=(0,L.Z)(function*(A,x){if(!navigator)throw or.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw or.create("permission-blocked");return yield jh(A,null==x?void 0:x.vapidKey),yield ss(A,null==x?void 0:x.serviceWorkerRegistration),Qc(A)})).apply(this,arguments)}function Ol(A,x,k){return kl.apply(this,arguments)}function kl(){return(kl=(0,L.Z)(function*(A,x,k){const q=$h(x);(yield A.firebaseDependencies.analyticsProvider.get()).logEvent(q,{message_id:k[bo],message_name:k[Bp],message_time:k[hi],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function $h(A){switch(A){case Ua.NOTIFICATION_CLICKED:return"notification_open";case Ua.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Ga(){return(Ga=(0,L.Z)(function*(A,x){const k=x.data;if(!k.isFirebaseMessaging)return;A.onMessageHandler&&k.messageType===Ua.PUSH_RECEIVED&&("function"==typeof A.onMessageHandler?A.onMessageHandler(Io(k)):A.onMessageHandler.next(Io(k)));const q=k.data;c_(q)&&"1"===q[Wc]&&(yield Ol(A,k.messageType,q))})).apply(this,arguments)}function Gh(){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,L.Z)(function*(){return"undefined"!=typeof window&&(0,de.hl)()&&(yield(0,de.eu)())&&(0,de.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,_e._registerComponent)(new ie.wA("messaging",A=>{const x=new Er(A.getProvider("app").getImmediate(),A.getProvider("installations-internal").getImmediate(),A.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",k=>function(A,x){return Ga.apply(this,arguments)}(x,k)),x},"PUBLIC")),(0,_e._registerComponent)(new ie.wA("messaging-internal",A=>{const x=A.getProvider("messaging").getImmediate();return{getToken:q=>function(A,x){return nd.apply(this,arguments)}(x,q)}},"PRIVATE"));const qh="analytics",d_="firebase_id",sa="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Fl="https://www.googletagmanager.com/gtag/js",qn=new Re.Yd("@firebase/analytics");function Ll(A){return Promise.all(A.map(x=>x.catch(k=>k)))}function sd(A,x){const k=document.createElement("script");k.src=`${Fl}?l=${A}&id=${x}`,k.async=!0,document.head.appendChild(k)}function od(A,x,k,q,oe,Ie){return As.apply(this,arguments)}function As(){return(As=(0,L.Z)(function*(A,x,k,q,oe,Ie){const je=q[oe];try{if(je)yield x[je];else{const Xe=(yield Ll(k)).find(Ht=>Ht.measurementId===oe);Xe&&(yield x[Xe.appId])}}catch(Qe){qn.error(Qe)}A("config",oe,Ie)})).apply(this,arguments)}function oa(A,x,k,q,oe){return ad.apply(this,arguments)}function ad(){return(ad=(0,L.Z)(function*(A,x,k,q,oe){try{let Ie=[];if(oe&&oe.send_to){let je=oe.send_to;Array.isArray(je)||(je=[je]);const Qe=yield Ll(k);for(const Xe of je){const Ht=Qe.find(Pr=>Pr.measurementId===Xe),kn=Ht&&x[Ht.appId];if(!kn){Ie=[];break}Ie.push(kn)}}0===Ie.length&&(Ie=Object.values(x)),yield Promise.all(Ie),A("event",q,oe||{})}catch(Ie){qn.error(Ie)}})).apply(this,arguments)}function ld(){const A=window.document.getElementsByTagName("script");for(const x of Object.values(A))if(x.src&&x.src.includes(Fl))return x;return null}const Ni=new de.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),cd=new class{constructor(x={},k=1e3){this.throttleMetadata=x,this.intervalMillis=k}getThrottleMetadata(x){return this.throttleMetadata[x]}setThrottleMetadata(x,k){this.throttleMetadata[x]=k}deleteThrottleMetadata(x){delete this.throttleMetadata[x]}};function mi(A){return new Headers({Accept:"application/json","x-goog-api-key":A})}function Ou(A){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,L.Z)(function*(A){var x;const{appId:k,apiKey:q}=A,oe={method:"GET",headers:mi(q)},Ie=sa.replace("{app-id}",k),je=yield fetch(Ie,oe);if(200!==je.status&&304!==je.status){let Qe="";try{const Xe=yield je.json();(null===(x=Xe.error)||void 0===x?void 0:x.message)&&(Qe=Xe.error.message)}catch(Xe){}throw Ni.create("config-fetch-failed",{httpStatus:je.status,responseMessage:Qe})}return je.json()})).apply(this,arguments)}function ku(A){return os.apply(this,arguments)}function os(){return(os=(0,L.Z)(function*(A,x=cd,k){const{appId:q,apiKey:oe,measurementId:Ie}=A.options;if(!q)throw Ni.create("no-app-id");if(!oe){if(Ie)return{measurementId:Ie,appId:q};throw Ni.create("no-api-key")}const je=x.getThrottleMetadata(q)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Qe=new h_;return setTimeout((0,L.Z)(function*(){Qe.abort()}),void 0!==k?k:6e4),Kp({appId:q,apiKey:oe,measurementId:Ie},je,Qe,x)})).apply(this,arguments)}function Kp(A,x,k){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,L.Z)(function*(A,{throttleEndTimeMillis:x,backoffCount:k},q,oe=cd){const{appId:Ie,measurementId:je}=A;try{yield zh(q,x)}catch(Qe){if(je)return qn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${je} provided in the "measurementId" field in the local Firebase config. [${Qe.message}]`),{appId:Ie,measurementId:je};throw Qe}try{const Qe=yield Ou(A);return oe.deleteThrottleMetadata(Ie),Qe}catch(Qe){if(!Fu(Qe)){if(oe.deleteThrottleMetadata(Ie),je)return qn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${je} provided in the "measurementId" field in the local Firebase config. [${Qe.message}]`),{appId:Ie,measurementId:je};throw Qe}const Xe=503===Number(Qe.customData.httpStatus)?(0,de.$s)(k,oe.intervalMillis,30):(0,de.$s)(k,oe.intervalMillis),Ht={throttleEndTimeMillis:Date.now()+Xe,backoffCount:k+1};return oe.setThrottleMetadata(Ie,Ht),qn.debug(`Calling attemptFetch again in ${Xe} millis`),Kp(A,Ht,q,oe)}})).apply(this,arguments)}function zh(A,x){return new Promise((k,q)=>{const oe=Math.max(x-Date.now(),0),Ie=setTimeout(k,oe);A.addEventListener(()=>{clearTimeout(Ie),q(Ni.create("fetch-throttle",{throttleEndTimeMillis:x}))})})}function Fu(A){if(!(A instanceof de.ZR&&A.customData))return!1;const x=Number(A.customData.httpStatus);return 429===x||500===x||503===x||504===x}class h_{constructor(){this.listeners=[]}addEventListener(x){this.listeners.push(x)}abort(){this.listeners.forEach(x=>x())}}function Kh(){return qa.apply(this,arguments)}function qa(){return(qa=(0,L.Z)(function*(){if(!(0,de.hl)())return qn.warn(Ni.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,de.eu)()}catch(A){return qn.warn(Ni.create("indexeddb-unavailable",{errorInfo:A}).message),!1}return!0})).apply(this,arguments)}function Wa(){return(Wa=(0,L.Z)(function*(A,x,k,q,oe,Ie,je){var Qe;const Xe=ku(A);Xe.then(Vn=>{k[Vn.measurementId]=Vn.appId,A.options.measurementId&&Vn.measurementId!==A.options.measurementId&&qn.warn(`The measurement ID in the local Firebase config (${A.options.measurementId}) does not match the measurement ID fetched from the server (${Vn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Vn=>qn.error(Vn)),x.push(Xe);const Ht=Kh().then(Vn=>{if(Vn)return q.getId()}),[kn,Pr]=yield Promise.all([Xe,Ht]);ld()||sd(Ie,kn.measurementId),oe("js",new Date);const Mr=null!==(Qe=null==je?void 0:je.config)&&void 0!==Qe?Qe:{};return Mr.origin="firebase",Mr.update=!0,null!=Pr&&(Mr[d_]=Pr),oe("config",kn.measurementId,Mr),kn.measurementId})).apply(this,arguments)}class Ao{constructor(x){this.app=x}_delete(){return delete Rs[this.app.options.appId],Promise.resolve()}}let Rs={},Un=[];const Ro={};let gt,Kt,tr="dataLayer",aa=!1;function dd(A,x,k){!function(){const A=[];if((0,de.ru)()&&A.push("This is a browser extension environment."),(0,de.zI)()||A.push("Cookies are not available."),A.length>0){const x=A.map((q,oe)=>`(${oe+1}) ${q}`).join(" "),k=Ni.create("invalid-analytics-context",{errorInfo:x});qn.warn(k.message)}}();const q=A.options.appId;if(!q)throw Ni.create("no-app-id");if(!A.options.apiKey){if(!A.options.measurementId)throw Ni.create("no-api-key");qn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${A.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Rs[q])throw Ni.create("already-exists",{id:q});if(!aa){!function(A){let x=[];Array.isArray(window[A])?x=window[A]:window[A]=x}(tr);const{wrappedGtag:Ie,gtagCore:je}=function(A,x,k,q,oe){let Ie=function(...je){window[q].push(arguments)};return window[oe]&&"function"==typeof window[oe]&&(Ie=window[oe]),window[oe]=function(A,x,k,q){function Ie(){return(Ie=(0,L.Z)(function*(je,Qe,Xe){try{"event"===je?yield oa(A,x,k,Qe,Xe):"config"===je?yield od(A,x,k,q,Qe,Xe):A("set",Qe)}catch(Ht){qn.error(Ht)}})).apply(this,arguments)}return function(je,Qe,Xe){return Ie.apply(this,arguments)}}(Ie,A,x,k),{gtagCore:Ie,wrappedGtag:window[oe]}}(Rs,Un,Ro,tr,"gtag");Kt=Ie,gt=je,aa=!0}return Rs[q]=function(A,x,k,q,oe,Ie,je){return Wa.apply(this,arguments)}(A,Un,Ro,x,gt,tr,k),new Ao(A)}function fr(){return(fr=(0,L.Z)(function*(A,x,k,q,oe){if(oe&&oe.global)A("event",k,q);else{const Ie=yield x;A("event",k,Object.assign(Object.assign({},q),{send_to:Ie}))}})).apply(this,arguments)}function xi(){return ua.apply(this,arguments)}function ua(){return(ua=(0,L.Z)(function*(){if((0,de.ru)()||!(0,de.zI)()||!(0,de.hl)())return!1;try{return yield(0,de.eu)()}catch(A){return!1}})).apply(this,arguments)}(0,_e._registerComponent)(new ie.wA(qh,(x,{options:k})=>dd(x.getProvider("app").getImmediate(),x.getProvider("installations-internal").getImmediate(),k),"PUBLIC")),(0,_e._registerComponent)(new ie.wA("analytics-internal",function(x){try{const k=x.getProvider(qh).getImmediate();return{logEvent:(q,oe,Ie)=>function(A,x,k,q){A=(0,de.m9)(A),function(A,x,k,q,oe){return fr.apply(this,arguments)}(Kt,Rs[A.app.options.appId],x,k,q).catch(oe=>qn.error(oe))}(k,q,oe,Ie)}}catch(k){throw Ni.create("interop-component-reg-failed",{reason:k})}},"PRIVATE")),(0,_e.registerVersion)("@firebase/analytics","0.7.1");var Qh=$(7771),Ns=$(3637),it=$(3342),jl=$(309),Mt=$(3101);const $l=new _.GfV("7.1.0"),No="__angularfire_symbol__analyticsIsSupported",Ya="__angularfire_symbol__remoteConfigIsSupported",Vu="__angularfire_symbol__messagingIsSupported";function Po(A,x,k){if(x){if(1===x.length)return x[0];const Ie=x.filter(je=>je.app===k);if(1===Ie.length)return Ie[0]}return k.container.getProvider(A).getImmediate({optional:!0})}globalThis[No]||(globalThis[No]=xi().then(A=>globalThis.__angularfire_symbol__analyticsIsSupportedValue=A)),globalThis[Vu]||(globalThis[Vu]=Gh().then(A=>globalThis.__angularfire_symbol__messagingIsSupportedValue=A)),globalThis[Ya]||(globalThis[Ya]=Gc().then(A=>globalThis.__angularfire_symbol__remoteConfigIsSupportedValue=A));const Ui=(A,x)=>{const k=x?[x]:(0,z.C6)(),q=[];return k.forEach(oe=>{oe.container.getProvider(A).instances.forEach(je=>{q.includes(je)||q.push(je)})}),q};function xr(){}class ca{constructor(x,k=Qh.N){this.zone=x,this.delegate=k}now(){return this.delegate.now()}schedule(x,k,q){const oe=this.zone;return this.delegate.schedule(function(je){oe.runGuarded(()=>{x.apply(this,[je])})},k,q)}}class Mo{constructor(x){this.zone=x,this.task=null}call(x,k){const q=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",xr,{},xr,xr)),k.pipe((0,it.b)({next:q,complete:q,error:q})).subscribe(x).add(q)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Oo=(()=>{class A{constructor(k){this.ngZone=k,this.outsideAngular=k.runOutsideAngular(()=>new ca(Zone.current)),this.insideAngular=k.run(()=>new ca(Zone.current,Ns.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return A.\u0275fac=function(k){return new(k||A)(_.LFG(_.R0b))},A.\u0275prov=_.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();function ls(){const A=globalThis.\u0275AngularFireScheduler;if(!A)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return A}function Jp(A){return A.pipe((0,jl.QV)(ls().outsideAngular))}function da(A){return ls(),function(A){return function(k){return(k=k.lift(new Mo(A.ngZone))).pipe((0,Mt.R)(A.outsideAngular),(0,jl.QV)(A.insideAngular))}}(ls())(A)}},4486:(lt,ke,$)=>{"use strict";$.d(ke,{Z:()=>Ne});var _=$(3854),z=$(6034),L=$(5452),_e=$(5601);class de{constructor(ye,se){this._delegate=ye,this.firebase=se,(0,L._addComponent)(ye,new z.wA("app-compat",()=>this,"PUBLIC")),this.container=ye.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ye){this._delegate.automaticDataCollectionEnabled=ye}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ye=>{this._delegate.checkDestroyed(),ye()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,L.deleteApp)(this._delegate)))}_getService(ye,se=L._DEFAULT_ENTRY_NAME){var me;this._delegate.checkDestroyed();const Ee=this._delegate.container.getProvider(ye);return!Ee.isInitialized()&&"EXPLICIT"===(null===(me=Ee.getComponent())||void 0===me?void 0:me.instantiationMode)&&Ee.initialize(),Ee.getImmediate({identifier:se})}_removeServiceInstance(ye,se=L._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ye).clearInstance(se)}_addComponent(ye){(0,L._addComponent)(this._delegate,ye)}_addOrOverwriteComponent(ye){(0,L._addOrOverwriteComponent)(this._delegate,ye)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Re=new _.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),j=function ne(){const Ce=function(Ce){const ye={},se={__esModule:!0,initializeApp:function(xe,Zt={}){const he=L.initializeApp(xe,Zt);if((0,_.r3)(ye,he.name))return ye[he.name];const we=new Ce(he,se);return ye[he.name]=we,we},app:Ee,registerVersion:L.registerVersion,setLogLevel:L.setLogLevel,onLog:L.onLog,apps:null,SDK_VERSION:L.SDK_VERSION,INTERNAL:{registerComponent:function(xe){const Zt=xe.name,he=Zt.replace("-compat","");if(L._registerComponent(xe)&&"PUBLIC"===xe.type){const we=(Te=Ee())=>{if("function"!=typeof Te[he])throw Re.create("invalid-app-argument",{appName:Zt});return Te[he]()};void 0!==xe.serviceProps&&(0,_.ZB)(we,xe.serviceProps),se[he]=we,Ce.prototype[he]=function(...Te){return this._getService.bind(this,Zt).apply(this,xe.multipleInstances?Te:[])}}return"PUBLIC"===xe.type?se[he]:null},removeApp:function(xe){delete ye[xe]},useAsService:function(xe,Zt){return"serverAuth"===Zt?null:Zt},modularAPIs:L}};function Ee(xe){if(!(0,_.r3)(ye,xe=xe||L._DEFAULT_ENTRY_NAME))throw Re.create("no-app",{appName:xe});return ye[xe]}return se.default=se,Object.defineProperty(se,"apps",{get:function(){return Object.keys(ye).map(xe=>ye[xe])}}),Ee.App=Ce,se}(de);return Ce.INTERNAL=Object.assign(Object.assign({},Ce.INTERNAL),{createFirebaseNamespace:ne,extendNamespace:function(se){(0,_.ZB)(Ce,se)},createSubscribe:_.ne,ErrorFactory:_.LL,deepExtend:_.ZB}),Ce}(),G=new _e.Yd("@firebase/app-compat");if((0,_.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ce=self.firebase.SDK_VERSION;Ce&&Ce.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ne=j;(0,L.registerVersion)("@firebase/app-compat","0.1.4",undefined)},5452:(lt,ke,$)=>{"use strict";$.r(ke),$.d(ke,{FirebaseError:()=>_e.ZR,SDK_VERSION:()=>Bs,_DEFAULT_ENTRY_NAME:()=>Hn,_addComponent:()=>yn,_addOrOverwriteComponent:()=>Sr,_apps:()=>Dt,_clearComponents:()=>Mn,_components:()=>Ot,_getProvider:()=>wt,_registerComponent:()=>Vr,_removeServiceInstance:()=>Pn,deleteApp:()=>es,getApp:()=>ki,getApps:()=>Xn,initializeApp:()=>ws,onLog:()=>Yt,registerVersion:()=>ot,setLogLevel:()=>Ar});var _=$(8239),z=$(6034),L=$(5601),_e=$(3854);class de{constructor(yt){this.container=yt}getPlatformInfoString(){return this.container.getProviders().map(Ut=>{if(function(ht){const yt=ht.getComponent();return"VERSION"===(null==yt?void 0:yt.type)}(Ut)){const Lt=Ut.getImmediate();return`${Lt.library}/${Lt.version}`}return null}).filter(Ut=>Ut).join(" ")}}const Re="@firebase/app",ne=new L.Yd("@firebase/app"),Hn="[DEFAULT]",xt={[Re]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Dt=new Map,Ot=new Map;function yn(ht,yt){try{ht.container.addComponent(yt)}catch(Ut){ne.debug(`Component ${yt.name} failed to register with FirebaseApp ${ht.name}`,Ut)}}function Sr(ht,yt){ht.container.addOrOverwriteComponent(yt)}function Vr(ht){const yt=ht.name;if(Ot.has(yt))return ne.debug(`There were multiple attempts to register component ${yt}.`),!1;Ot.set(yt,ht);for(const Ut of Dt.values())yn(Ut,ht);return!0}function wt(ht,yt){return ht.container.getProvider(yt)}function Pn(ht,yt,Ut=Hn){wt(ht,yt).clearInstance(Ut)}function Mn(){Ot.clear()}const ir=new _e.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class Ur{constructor(yt,Ut,Lt){this._isDeleted=!1,this._options=Object.assign({},yt),this._config=Object.assign({},Ut),this._name=Ut.name,this._automaticDataCollectionEnabled=Ut.automaticDataCollectionEnabled,this._container=Lt,this.container.addComponent(new z.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(yt){this.checkDestroyed(),this._automaticDataCollectionEnabled=yt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(yt){this._isDeleted=yt}checkDestroyed(){if(this.isDeleted)throw ir.create("app-deleted",{appName:this._name})}}const Bs="9.1.2";function ws(ht,yt={}){"object"!=typeof yt&&(yt={name:yt});const Ut=Object.assign({name:Hn,automaticDataCollectionEnabled:!1},yt),Lt=Ut.name;if("string"!=typeof Lt||!Lt)throw ir.create("bad-app-name",{appName:String(Lt)});const ur=Dt.get(Lt);if(ur){if((0,_e.vZ)(ht,ur.options)&&(0,_e.vZ)(Ut,ur.config))return ur;throw ir.create("duplicate-app",{appName:Lt})}const ln=new z.H0(Lt);for(const st of Ot.values())ln.addComponent(st);const qe=new Ur(ht,Ut,ln);return Dt.set(Lt,qe),qe}function ki(ht=Hn){const yt=Dt.get(ht);if(!yt)throw ir.create("no-app",{appName:ht});return yt}function Xn(){return Array.from(Dt.values())}function es(ht){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,_.Z)(function*(ht){const yt=ht.name;Dt.has(yt)&&(Dt.delete(yt),yield Promise.all(ht.container.getProviders().map(Ut=>Ut.delete())),ht.isDeleted=!0)})).apply(this,arguments)}function ot(ht,yt,Ut){var Lt;let ur=null!==(Lt=xt[ht])&&void 0!==Lt?Lt:ht;Ut&&(ur+=`-${Ut}`);const ln=ur.match(/\s|\//),qe=yt.match(/\s|\//);if(ln||qe){const st=[`Unable to register library "${ur}" with version "${yt}":`];return ln&&st.push(`library name "${ur}" contains illegal characters (whitespace or "/")`),ln&&qe&&st.push("and"),qe&&st.push(`version name "${yt}" contains illegal characters (whitespace or "/")`),void ne.warn(st.join(" "))}Vr(new z.wA(`${ur}-version`,()=>({library:ur,version:yt}),"VERSION"))}function Yt(ht,yt){if(null!==ht&&"function"!=typeof ht)throw ir.create("invalid-log-argument");(0,L.Am)(ht,yt)}function Ar(ht){(0,L.Ub)(ht)}Vr(new z.wA("platform-logger",yt=>new de(yt),"PRIVATE")),ot(Re,"0.7.3",undefined),ot("fire-js","")},1093:(lt,ke,$)=>{"use strict";$.d(ke,{$:()=>Hp,A:()=>G,E:()=>yr,G:()=>St,I:()=>Is,K:()=>dr,L:()=>Gc,M:()=>qc,N:()=>Vh,P:()=>nr,Q:()=>bo,R:()=>V,T:()=>Tu,V:()=>Ua,W:()=>jp,X:()=>Hs,Y:()=>or,Z:()=>Gs,_:()=>ja,a:()=>zp,a0:()=>Jc,a1:()=>Xc,a2:()=>To,a3:()=>zt,a4:()=>Fn,a5:()=>Io,a6:()=>Fi,a7:()=>Au,a8:()=>c_,a9:()=>Er,aA:()=>pa,aB:()=>oe,aC:()=>En,aG:()=>mi,aJ:()=>hi,aa:()=>td,ab:()=>Ri,ae:()=>nd,af:()=>kl,ag:()=>$h,aj:()=>$p,ak:()=>qp,am:()=>Fl,an:()=>As,ao:()=>kt,ap:()=>he,aq:()=>Tn,ar:()=>Xt,as:()=>Ee,at:()=>ig,au:()=>Uu,av:()=>Fe,aw:()=>xe,ax:()=>Te,ay:()=>ae,az:()=>tn,b:()=>Ni,c:()=>Oo,d:()=>Jp,e:()=>gd,f:()=>Qe,g:()=>Vn,h:()=>kn,i:()=>dd,j:()=>fa,k:()=>ju,l:()=>Mt,m:()=>il,o:()=>re,r:()=>pd,s:()=>it,u:()=>Qa,z:()=>ge});var _=$(8239),z=$(3854),L=$(5452),_e=$(4762),de=$(5601),ie=$(6034);const re={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},G={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const ge=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ne=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ce=new z.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),se=new de.Yd("@firebase/auth");function me(T,...v){se.logLevel<=de.in.ERROR&&se.error(`Auth (${L.SDK_VERSION}): ${T}`,...v)}function Ee(T,...v){throw Vt(T,...v)}function Fe(T,...v){return Vt(T,...v)}function nt(T,v,w){const D=Object.assign(Object.assign({},Ne()),{[v]:w});return new z.LL("auth","Firebase",D).create(v,{appName:T.name})}function Ct(T,v,w){if(!(v instanceof w))throw w.name!==v.constructor.name&&Ee(T,"argument-error"),nt(T,"argument-error",`Type of ${v.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Vt(T,...v){if("string"!=typeof T){const w=v[0],D=[...v.slice(1)];return D[0]&&(D[0].appName=T.name),T._errorFactory.create(w,...D)}return Ce.create(T,...v)}function xe(T,v,...w){if(!T)throw Vt(v,...w)}function Zt(T){const v="INTERNAL ASSERTION FAILED: "+T;throw me(v),new Error(v)}function he(T,v){T||Zt(v)}const we=new Map;function Te(T){he(T instanceof Function,"Expected a class definition");let v=we.get(T);return v?(he(v instanceof T,"Instance stored in cache mismatched with class"),v):(v=new T,we.set(T,v),v)}function be(){var T;return"undefined"!=typeof self&&(null===(T=self.location)||void 0===T?void 0:T.href)||""}function Tt(){return"http:"===gn()||"https:"===gn()}function gn(){var T;return"undefined"!=typeof self&&(null===(T=self.location)||void 0===T?void 0:T.protocol)||null}class Dt{constructor(v,w){this.shortDelay=v,this.longDelay=w,he(w>v,"Short delay should be less than long delay!"),this.isMobile=(0,z.uI)()||(0,z.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Tt()||(0,z.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Ot(T,v){he(T.emulator,"Emulator should always be set here");const{url:w}=T.emulator;return v?`${w}${v.startsWith("/")?v.slice(1):v}`:w}class yn{static initialize(v,w,D){this.fetchImpl=v,w&&(this.headersImpl=w),D&&(this.responseImpl=D)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Zt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Zt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Zt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Sr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Vr=new Dt(3e4,6e4);function wt(T,v){return T.tenantId&&!v.tenantId?Object.assign(Object.assign({},v),{tenantId:T.tenantId}):v}function Pn(T,v,w,D){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,_.Z)(function*(T,v,w,D,M={}){return _r(T,M,()=>{let H={},fe={};D&&("GET"===v?fe=D:H={body:JSON.stringify(D)});const Be=(0,z.xO)(Object.assign({key:T.config.apiKey},fe)).slice(1),at=new(yn.headers());return at.set("Content-Type","application/json"),at.set("X-Client-Version",T._getSdkClientVersion()),T.languageCode&&at.set("X-Firebase-Locale",T.languageCode),yn.fetch()(ws(T,T.config.apiHost,w,Be),Object.assign({method:v,headers:at,referrerPolicy:"no-referrer"},H))})})).apply(this,arguments)}function _r(T,v,w){return ir.apply(this,arguments)}function ir(){return(ir=(0,_.Z)(function*(T,v,w){T._canInitEmulator=!1;const D=Object.assign(Object.assign({},Sr),v);try{const M=new ki(T),H=yield Promise.race([w(),M.promise]);M.clearNetworkTimeout();const fe=yield H.json();if("needConfirmation"in fe)throw Xn(T,"account-exists-with-different-credential",fe);if(H.ok&&!("errorMessage"in fe))return fe;{const Be=H.ok?fe.errorMessage:fe.error.message,[at,Et]=Be.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===at)throw Xn(T,"credential-already-in-use",fe);if("EMAIL_EXISTS"===at)throw Xn(T,"email-already-in-use",fe);const Qt=D[at]||at.toLowerCase().replace(/[_\s]+/g,"-");if(Et)throw nt(T,Qt,Et);Ee(T,Qt)}}catch(M){if(M instanceof z.ZR)throw M;Ee(T,"network-request-failed")}})).apply(this,arguments)}function Ur(T,v,w,D){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,_.Z)(function*(T,v,w,D,M={}){const H=yield Pn(T,v,w,D,M);return"mfaPendingCredential"in H&&Ee(T,"multi-factor-auth-required",{serverResponse:H}),H})).apply(this,arguments)}function ws(T,v,w,D){const M=`${v}${w}?${D}`;return T.config.emulator?Ot(T.config,M):`${T.config.apiScheme}://${M}`}class ki{constructor(v){this.auth=v,this.timer=null,this.promise=new Promise((w,D)=>{this.timer=setTimeout(()=>D(Fe(this.auth,"timeout")),Vr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Xn(T,v,w){const D={appName:T.name};w.email&&(D.email=w.email),w.phoneNumber&&(D.phoneNumber=w.phoneNumber);const M=Fe(T,v,D);return M.customData._tokenResponse=w,M}function Ti(){return(Ti=(0,_.Z)(function*(T,v){return Pn(T,"POST","/v1/accounts:delete",v)})).apply(this,arguments)}function ot(T,v){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,_.Z)(function*(T,v){return Pn(T,"POST","/v1/accounts:update",v)})).apply(this,arguments)}function Ar(T,v){return lr.apply(this,arguments)}function lr(){return(lr=(0,_.Z)(function*(T,v){return Pn(T,"POST","/v1/accounts:lookup",v)})).apply(this,arguments)}function ht(T){if(T)try{const v=new Date(Number(T));if(!isNaN(v.getTime()))return v.toUTCString()}catch(v){}}function Lt(){return(Lt=(0,_.Z)(function*(T,v=!1){const w=(0,z.m9)(T),D=yield w.getIdToken(v),M=ln(D);xe(M&&M.exp&&M.auth_time&&M.iat,w.auth,"internal-error");const H="object"==typeof M.firebase?M.firebase:void 0,fe=null==H?void 0:H.sign_in_provider;return{claims:M,token:D,authTime:ht(ur(M.auth_time)),issuedAtTime:ht(ur(M.iat)),expirationTime:ht(ur(M.exp)),signInProvider:fe||null,signInSecondFactor:(null==H?void 0:H.sign_in_second_factor)||null}})).apply(this,arguments)}function ur(T){return 1e3*Number(T)}function ln(T){const[v,w,D]=T.split(".");if(void 0===v||void 0===w||void 0===D)return me("JWT malformed, contained fewer than 3 sections"),null;try{const M=(0,z.tV)(w);return M?JSON.parse(M):(me("Failed to decode base64 JWT payload"),null)}catch(M){return me("Caught error parsing JWT payload as JSON",M),null}}function st(T,v){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,_.Z)(function*(T,v,w=!1){if(w)return v;try{return yield v}catch(D){throw D instanceof z.ZR&&bs(D)&&T.auth.currentUser===T&&(yield T.auth.signOut()),D}})).apply(this,arguments)}function bs({code:T}){return"auth/user-disabled"===T||"auth/user-token-expired"===T}class Ii{constructor(v){this.user=v,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(v){var w;if(v){const D=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),D}{this.errorBackoff=3e4;const M=(null!==(w=this.user.stsTokenManager.expirationTime)&&void 0!==w?w:0)-Date.now()-3e5;return Math.max(0,M)}}schedule(v=!1){var w=this;if(!this.isRunning)return;const D=this.getInterval(v);this.timerId=setTimeout((0,_.Z)(function*(){yield w.iteration()}),D)}iteration(){var v=this;return(0,_.Z)(function*(){try{yield v.user.getIdToken(!0)}catch(w){return void("auth/network-request-failed"===w.code&&v.schedule(!0))}v.schedule()})()}}class fn{constructor(v,w){this.createdAt=v,this.lastLoginAt=w,this._initializeTime()}_initializeTime(){this.lastSignInTime=ht(this.lastLoginAt),this.creationTime=ht(this.createdAt)}_copy(v){this.createdAt=v.createdAt,this.lastLoginAt=v.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function pn(T){return po.apply(this,arguments)}function po(){return(po=(0,_.Z)(function*(T){var v;const w=T.auth,D=yield T.getIdToken(),M=yield st(T,Ar(w,{idToken:D}));xe(null==M?void 0:M.users.length,w,"internal-error");const H=M.users[0];T._notifyReloadListener(H);const fe=(null===(v=H.providerUserInfo)||void 0===v?void 0:v.length)?Me(H.providerUserInfo):[],Be=X(T.providerData,fe),Qt=!!T.isAnonymous&&!(T.email&&H.passwordHash||(null==Be?void 0:Be.length)),rn={uid:H.localId,displayName:H.displayName||null,photoURL:H.photoUrl||null,email:H.email||null,emailVerified:H.emailVerified||!1,phoneNumber:H.phoneNumber||null,tenantId:H.tenantId||null,providerData:Be,metadata:new fn(H.createdAt,H.lastLoginAt),isAnonymous:Qt};Object.assign(T,rn)})).apply(this,arguments)}function Y(){return(Y=(0,_.Z)(function*(T){const v=(0,z.m9)(T);yield pn(v),yield v.auth._persistUserIfCurrent(v),v.auth._notifyListenersIfCurrent(v)})).apply(this,arguments)}function X(T,v){return[...T.filter(D=>!v.some(M=>M.providerId===D.providerId)),...v]}function Me(T){return T.map(v=>{var{providerId:w}=v,D=(0,_e._T)(v,["providerId"]);return{providerId:w,uid:D.rawId||"",displayName:D.displayName||null,email:D.email||null,phoneNumber:D.phoneNumber||null,photoURL:D.photoUrl||null}})}function et(){return(et=(0,_.Z)(function*(T,v){const w=yield _r(T,{},()=>{const D=(0,z.xO)({grant_type:"refresh_token",refresh_token:v}).slice(1),{tokenApiHost:M,apiKey:H}=T.config,fe=ws(T,M,"/v1/token",`key=${H}`);return yn.fetch()(fe,{method:"POST",headers:{"X-Client-Version":T._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:D})});return{accessToken:w.access_token,expiresIn:w.expires_in,refreshToken:w.refresh_token}})).apply(this,arguments)}class vt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(v){xe(v.idToken,"internal-error"),xe(void 0!==v.idToken,"internal-error"),xe(void 0!==v.refreshToken,"internal-error");const w="expiresIn"in v&&void 0!==v.expiresIn?Number(v.expiresIn):function(T){const v=ln(T);return xe(v,"internal-error"),xe(void 0!==v.exp,"internal-error"),xe(void 0!==v.iat,"internal-error"),Number(v.exp)-Number(v.iat)}(v.idToken);this.updateTokensAndExpiration(v.idToken,v.refreshToken,w)}getToken(v,w=!1){var D=this;return(0,_.Z)(function*(){return xe(!D.accessToken||D.refreshToken,v,"user-token-expired"),w||!D.accessToken||D.isExpired?D.refreshToken?(yield D.refresh(v,D.refreshToken),D.accessToken):null:D.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(v,w){var D=this;return(0,_.Z)(function*(){const{accessToken:M,refreshToken:H,expiresIn:fe}=yield function(T,v){return et.apply(this,arguments)}(v,w);D.updateTokensAndExpiration(M,H,Number(fe))})()}updateTokensAndExpiration(v,w,D){this.refreshToken=w||null,this.accessToken=v||null,this.expirationTime=Date.now()+1e3*D}static fromJSON(v,w){const{refreshToken:D,accessToken:M,expirationTime:H}=w,fe=new vt;return D&&(xe("string"==typeof D,"internal-error",{appName:v}),fe.refreshToken=D),M&&(xe("string"==typeof M,"internal-error",{appName:v}),fe.accessToken=M),H&&(xe("number"==typeof H,"internal-error",{appName:v}),fe.expirationTime=H),fe}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(v){this.accessToken=v.accessToken,this.refreshToken=v.refreshToken,this.expirationTime=v.expirationTime}_clone(){return Object.assign(new vt,this.toJSON())}_performRefresh(){return Zt("not implemented")}}function Bt(T,v){xe("string"==typeof T||void 0===T,"internal-error",{appName:v})}class Cn{constructor(v){var{uid:w,auth:D,stsTokenManager:M}=v,H=(0,_e._T)(v,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new Ii(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=w,this.auth=D,this.stsTokenManager=M,this.accessToken=M.accessToken,this.displayName=H.displayName||null,this.email=H.email||null,this.emailVerified=H.emailVerified||!1,this.phoneNumber=H.phoneNumber||null,this.photoURL=H.photoURL||null,this.isAnonymous=H.isAnonymous||!1,this.tenantId=H.tenantId||null,this.metadata=new fn(H.createdAt||void 0,H.lastLoginAt||void 0)}getIdToken(v){var w=this;return(0,_.Z)(function*(){const D=yield st(w,w.stsTokenManager.getToken(w.auth,v));return xe(D,w.auth,"internal-error"),w.accessToken!==D&&(w.accessToken=D,yield w.auth._persistUserIfCurrent(w),w.auth._notifyListenersIfCurrent(w)),D})()}getIdTokenResult(v){return function(T){return Lt.apply(this,arguments)}(this,v)}reload(){return function(T){return Y.apply(this,arguments)}(this)}_assign(v){this!==v&&(xe(this.uid===v.uid,this.auth,"internal-error"),this.displayName=v.displayName,this.photoURL=v.photoURL,this.email=v.email,this.emailVerified=v.emailVerified,this.phoneNumber=v.phoneNumber,this.isAnonymous=v.isAnonymous,this.tenantId=v.tenantId,this.providerData=v.providerData.map(w=>Object.assign({},w)),this.metadata._copy(v.metadata),this.stsTokenManager._assign(v.stsTokenManager))}_clone(v){return new Cn(Object.assign(Object.assign({},this),{auth:v,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(v){xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=v,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(v){this.reloadListener?this.reloadListener(v):this.reloadUserInfo=v}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(v,w=!1){var D=this;return(0,_.Z)(function*(){let M=!1;v.idToken&&v.idToken!==D.stsTokenManager.accessToken&&(D.stsTokenManager.updateFromServerResponse(v),M=!0),w&&(yield pn(D)),yield D.auth._persistUserIfCurrent(D),M&&D.auth._notifyListenersIfCurrent(D)})()}delete(){var v=this;return(0,_.Z)(function*(){const w=yield v.getIdToken();return yield st(v,function(T,v){return Ti.apply(this,arguments)}(v.auth,{idToken:w})),v.stsTokenManager.clearRefreshToken(),v.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(v=>Object.assign({},v)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(v,w){var D,M,H,fe,Be,at,Et,Qt;const rn=null!==(D=w.displayName)&&void 0!==D?D:void 0,Vo=null!==(M=w.email)&&void 0!==M?M:void 0,xs=null!==(H=w.phoneNumber)&&void 0!==H?H:void 0,Qs=null!==(fe=w.photoURL)&&void 0!==fe?fe:void 0,rf=null!==(Be=w.tenantId)&&void 0!==Be?Be:void 0,ji=null!==(at=w._redirectEventId)&&void 0!==at?at:void 0,zl=null!==(Et=w.createdAt)&&void 0!==Et?Et:void 0,sf=null!==(Qt=w.lastLoginAt)&&void 0!==Qt?Qt:void 0,{uid:sl,emailVerified:wd,isAnonymous:og,providerData:af,stsTokenManager:lf}=w;xe(sl&&lf,v,"internal-error");const Kl=vt.fromJSON(this.name,lf);xe("string"==typeof sl,v,"internal-error"),Bt(rn,v.name),Bt(Vo,v.name),xe("boolean"==typeof wd,v,"internal-error"),xe("boolean"==typeof og,v,"internal-error"),Bt(xs,v.name),Bt(Qs,v.name),Bt(rf,v.name),Bt(ji,v.name),Bt(zl,v.name),Bt(sf,v.name);const Hu=new Cn({uid:sl,auth:v,email:Vo,emailVerified:wd,displayName:rn,isAnonymous:og,photoURL:Qs,phoneNumber:xs,tenantId:rf,stsTokenManager:Kl,createdAt:zl,lastLoginAt:sf});return af&&Array.isArray(af)&&(Hu.providerData=af.map(ag=>Object.assign({},ag))),ji&&(Hu._redirectEventId=ji),Hu}static _fromIdTokenResponse(v,w,D=!1){return(0,_.Z)(function*(){const M=new vt;M.updateFromServerResponse(w);const H=new Cn({uid:w.localId,auth:v,stsTokenManager:M,isAnonymous:D});return yield pn(H),H})()}}const dr=(()=>{class T{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,_.Z)(function*(){return!0})()}_set(w,D){var M=this;return(0,_.Z)(function*(){M.storage[w]=D})()}_get(w){var D=this;return(0,_.Z)(function*(){const M=D.storage[w];return void 0===M?null:M})()}_remove(w){var D=this;return(0,_.Z)(function*(){delete D.storage[w]})()}_addListener(w,D){}_removeListener(w,D){}}return T.type="NONE",T})();function ae(T,v,w){return`firebase:${T}:${v}:${w}`}class J{constructor(v,w,D){this.persistence=v,this.auth=w,this.userKey=D;const{config:M,name:H}=this.auth;this.fullUserKey=ae(this.userKey,M.apiKey,H),this.fullPersistenceKey=ae("persistence",M.apiKey,H),this.boundEventHandler=w._onStorageEvent.bind(w),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(v){return this.persistence._set(this.fullUserKey,v.toJSON())}getCurrentUser(){var v=this;return(0,_.Z)(function*(){const w=yield v.persistence._get(v.fullUserKey);return w?Cn._fromJSON(v.auth,w):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(v){var w=this;return(0,_.Z)(function*(){if(w.persistence===v)return;const D=yield w.getCurrentUser();return yield w.removeCurrentUser(),w.persistence=v,D?w.setCurrentUser(D):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(v,w,D="authUser"){return(0,_.Z)(function*(){if(!w.length)return new J(Te(dr),v,D);const M=(yield Promise.all(w.map(function(){var Et=(0,_.Z)(function*(Qt){if(yield Qt._isAvailable())return Qt});return function(Qt){return Et.apply(this,arguments)}}()))).filter(Et=>Et);let H=M[0]||Te(dr);const fe=ae(D,v.config.apiKey,v.name);let Be=null;for(const Et of w)try{const Qt=yield Et._get(fe);if(Qt){const rn=Cn._fromJSON(v,Qt);Et!==H&&(Be=rn),H=Et;break}}catch(Qt){}const at=M.filter(Et=>Et._shouldAllowMigration);return H._shouldAllowMigration&&at.length?(H=at[0],Be&&(yield H._set(fe,Be.toJSON())),yield Promise.all(w.map(function(){var Et=(0,_.Z)(function*(Qt){if(Qt!==H)try{yield Qt._remove(fe)}catch(rn){}});return function(Qt){return Et.apply(this,arguments)}}())),new J(H,v,D)):new J(H,v,D)})()}}function ee(T){const v=T.toLowerCase();if(v.includes("opera/")||v.includes("opr/")||v.includes("opios/"))return"Opera";if(Wt(v))return"IEMobile";if(v.includes("msie")||v.includes("trident/"))return"IE";if(v.includes("edge/"))return"Edge";if(Le(v))return"Firefox";if(v.includes("silk/"))return"Silk";if(Gn(v))return"Blackberry";if(vn(v))return"Webos";if(Ke(v))return"Safari";if((v.includes("chrome/")||Rt(v))&&!v.includes("edge/"))return"Chrome";if(Xt(v))return"Android";{const D=T.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==D?void 0:D.length))return D[1]}return"Other"}function Le(T=(0,z.z$)()){return/firefox\//i.test(T)}function Ke(T=(0,z.z$)()){const v=T.toLowerCase();return v.includes("safari/")&&!v.includes("chrome/")&&!v.includes("crios/")&&!v.includes("android")}function Rt(T=(0,z.z$)()){return/crios\//i.test(T)}function Wt(T=(0,z.z$)()){return/iemobile/i.test(T)}function Xt(T=(0,z.z$)()){return/android/i.test(T)}function Gn(T=(0,z.z$)()){return/blackberry/i.test(T)}function vn(T=(0,z.z$)()){return/webos/i.test(T)}function Tn(T=(0,z.z$)()){return/iphone|ipad|ipod/i.test(T)}function kt(T=(0,z.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(T)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(T)}function ci(T=(0,z.z$)()){return Tn(T)||Xt(T)||vn(T)||Gn(T)||/windows phone/i.test(T)||Wt(T)}function $t(T,v=[]){let w;switch(T){case"Browser":w=ee((0,z.z$)());break;case"Worker":w=`${ee((0,z.z$)())}-${T}`;break;default:w=T}const D=v.length?v.join(","):"FirebaseCore-web";return`${w}/JsCore/${L.SDK_VERSION}/${D}`}class In{constructor(v,w){this.app=v,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new go(this),this.idTokenSubscription=new go(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ce,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=v.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(v,w){var D=this;return w&&(this._popupRedirectResolver=Te(w)),this._initializationPromise=this.queue((0,_.Z)(function*(){var M;D._deleted||(D.persistenceManager=yield J.create(D,v),!D._deleted&&((null===(M=D._popupRedirectResolver)||void 0===M?void 0:M._shouldInitProactively)&&(yield D._popupRedirectResolver._initialize(D)),yield D.initializeCurrentUser(w),!D._deleted&&(D._isInitialized=!0)))})),this._initializationPromise}_onStorageEvent(){var v=this;return(0,_.Z)(function*(){if(v._deleted)return;const w=yield v.assertedPersistence.getCurrentUser();if(v.currentUser||w){if(v.currentUser&&w&&v.currentUser.uid===w.uid)return v._currentUser._assign(w),void(yield v.currentUser.getIdToken());yield v._updateCurrentUser(w)}})()}initializeCurrentUser(v){var w=this;return(0,_.Z)(function*(){var D;let M=yield w.assertedPersistence.getCurrentUser();if(v&&w.config.authDomain){yield w.getOrInitRedirectPersistenceManager();const H=null===(D=w.redirectUser)||void 0===D?void 0:D._redirectEventId,fe=null==M?void 0:M._redirectEventId,Be=yield w.tryRedirectSignIn(v);(!H||H===fe)&&(null==Be?void 0:Be.user)&&(M=Be.user)}return M?M._redirectEventId?(xe(w._popupRedirectResolver,w,"argument-error"),yield w.getOrInitRedirectPersistenceManager(),w.redirectUser&&w.redirectUser._redirectEventId===M._redirectEventId?w.directlySetCurrentUser(M):w.reloadAndSetCurrentUserOrClear(M)):w.reloadAndSetCurrentUserOrClear(M):w.directlySetCurrentUser(null)})()}tryRedirectSignIn(v){var w=this;return(0,_.Z)(function*(){let D=null;try{D=yield w._popupRedirectResolver._completeRedirectFn(w,v,!0)}catch(M){yield w._setRedirectUser(null)}return D})()}reloadAndSetCurrentUserOrClear(v){var w=this;return(0,_.Z)(function*(){try{yield pn(v)}catch(D){if("auth/network-request-failed"!==D.code)return w.directlySetCurrentUser(null)}return w.directlySetCurrentUser(v)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const T=navigator;return T.languages&&T.languages[0]||T.language||null}()}_delete(){var v=this;return(0,_.Z)(function*(){v._deleted=!0})()}updateCurrentUser(v){var w=this;return(0,_.Z)(function*(){const D=v?(0,z.m9)(v):null;return D&&xe(D.auth.config.apiKey===w.config.apiKey,w,"invalid-user-token"),w._updateCurrentUser(D&&D._clone(w))})()}_updateCurrentUser(v){var w=this;return(0,_.Z)(function*(){if(!w._deleted)return v&&xe(w.tenantId===v.tenantId,w,"tenant-id-mismatch"),w.queue((0,_.Z)(function*(){yield w.directlySetCurrentUser(v),w.notifyAuthListeners()}))})()}signOut(){var v=this;return(0,_.Z)(function*(){return(v.redirectPersistenceManager||v._popupRedirectResolver)&&(yield v._setRedirectUser(null)),v._updateCurrentUser(null)})()}setPersistence(v){var w=this;return this.queue((0,_.Z)(function*(){yield w.assertedPersistence.setPersistence(Te(v))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(v){this._errorFactory=new z.LL("auth","Firebase",v())}onAuthStateChanged(v,w,D){return this.registerStateListener(this.authStateSubscription,v,w,D)}onIdTokenChanged(v,w,D){return this.registerStateListener(this.idTokenSubscription,v,w,D)}toJSON(){var v;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(v=this._currentUser)||void 0===v?void 0:v.toJSON()}}_setRedirectUser(v,w){var D=this;return(0,_.Z)(function*(){const M=yield D.getOrInitRedirectPersistenceManager(w);return null===v?M.removeCurrentUser():M.setCurrentUser(v)})()}getOrInitRedirectPersistenceManager(v){var w=this;return(0,_.Z)(function*(){if(!w.redirectPersistenceManager){const D=v&&Te(v)||w._popupRedirectResolver;xe(D,w,"argument-error"),w.redirectPersistenceManager=yield J.create(w,[Te(D._redirectPersistence)],"redirectUser"),w.redirectUser=yield w.redirectPersistenceManager.getCurrentUser()}return w.redirectPersistenceManager})()}_redirectUserForId(v){var w=this;return(0,_.Z)(function*(){var D,M;return w._isInitialized&&(yield w.queue((0,_.Z)(function*(){}))),(null===(D=w._currentUser)||void 0===D?void 0:D._redirectEventId)===v?w._currentUser:(null===(M=w.redirectUser)||void 0===M?void 0:M._redirectEventId)===v?w.redirectUser:null})()}_persistUserIfCurrent(v){var w=this;return(0,_.Z)(function*(){if(v===w.currentUser)return w.queue((0,_.Z)(function*(){return w.directlySetCurrentUser(v)}))})()}_notifyListenersIfCurrent(v){v===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var v,w;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const D=null!==(w=null===(v=this.currentUser)||void 0===v?void 0:v.uid)&&void 0!==w?w:null;this.lastNotifiedUid!==D&&(this.lastNotifiedUid=D,this.authStateSubscription.next(this.currentUser))}registerStateListener(v,w,D,M){if(this._deleted)return()=>{};const H="function"==typeof w?w:w.next.bind(w),fe=this._isInitialized?Promise.resolve():this._initializationPromise;return xe(fe,this,"internal-error"),fe.then(()=>H(this.currentUser)),"function"==typeof w?v.addObserver(w,D,M):v.addObserver(w)}directlySetCurrentUser(v){var w=this;return(0,_.Z)(function*(){w.currentUser&&w.currentUser!==v&&(w._currentUser._stopProactiveRefresh(),v&&w.isProactiveRefreshEnabled&&v._startProactiveRefresh()),w.currentUser=v,v?yield w.assertedPersistence.setCurrentUser(v):yield w.assertedPersistence.removeCurrentUser()})()}queue(v){return this.operations=this.operations.then(v,v),this.operations}get assertedPersistence(){return xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(v){!v||this.frameworks.includes(v)||(this.frameworks.push(v),this.frameworks.sort(),this.clientVersion=$t(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}}function En(T){return(0,z.m9)(T)}class go{constructor(v){this.auth=v,this.observer=null,this.addObserver=(0,z.ne)(w=>this.observer=w)}get next(){return xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function yr(T,v,w){const D=En(T);xe(D._canInitEmulator,D,"emulator-config-failed"),xe(/^https?:\/\//.test(v),D,"invalid-emulator-scheme");const M=!!(null==w?void 0:w.disableWarnings),H=Cs(v),{host:fe,port:Be}=function(T){const v=Cs(T),w=/(\/\/)?([^?#/]+)/.exec(T.substr(v.length));if(!w)return{host:"",port:null};const D=w[2].split("@").pop()||"",M=/^(\[[^\]]+\])(:|$)/.exec(D);if(M){const H=M[1];return{host:H,port:Qo(D.substr(H.length+1))}}{const[H,fe]=D.split(":");return{host:H,port:Qo(fe)}}}(v);D.config.emulator={url:`${H}//${fe}${null===Be?"":`:${Be}`}/`},D.settings.appVerificationDisabledForTesting=!0,D.emulatorConfig=Object.freeze({host:fe,port:Be,protocol:H.replace(":",""),options:Object.freeze({disableWarnings:M})}),M||function(){function T(){const v=document.createElement("p"),w=v.style;v.innerText="Running in emulator mode. Do not use with production credentials.",w.position="fixed",w.width="100%",w.backgroundColor="#ffffff",w.border=".1em solid #000000",w.color="#b50000",w.bottom="0px",w.left="0px",w.margin="0px",w.zIndex="10000",w.textAlign="center",v.classList.add("firebase-emulator-warning"),document.body.appendChild(v)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",T):T())}()}function Cs(T){const v=T.indexOf(":");return v<0?"":T.substr(0,v+1)}function Qo(T){if(!T)return null;const v=Number(T);return isNaN(v)?null:v}class St{constructor(v,w){this.providerId=v,this.signInMethod=w}toJSON(){return Zt("not implemented")}_getIdTokenResponse(v){return Zt("not implemented")}_linkToIdToken(v,w){return Zt("not implemented")}_getReauthenticationResolver(v){return Zt("not implemented")}}function js(T,v){return $s.apply(this,arguments)}function $s(){return($s=(0,_.Z)(function*(T,v){return Pn(T,"POST","/v1/accounts:resetPassword",wt(T,v))})).apply(this,arguments)}function Rr(T,v){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,_.Z)(function*(T,v){return Pn(T,"POST","/v1/accounts:update",v)})).apply(this,arguments)}function di(T,v){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,_.Z)(function*(T,v){return Pn(T,"POST","/v1/accounts:update",wt(T,v))})).apply(this,arguments)}function Di(){return(Di=(0,_.Z)(function*(T,v){return Ur(T,"POST","/v1/accounts:signInWithPassword",wt(T,v))})).apply(this,arguments)}function un(T,v){return Bc.apply(this,arguments)}function Bc(){return(Bc=(0,_.Z)(function*(T,v){return Pn(T,"POST","/v1/accounts:sendOobCode",wt(T,v))})).apply(this,arguments)}function Fp(T,v){return ts.apply(this,arguments)}function ts(){return(ts=(0,_.Z)(function*(T,v){return un(T,v)})).apply(this,arguments)}function jc(T,v){return mo.apply(this,arguments)}function mo(){return(mo=(0,_.Z)(function*(T,v){return un(T,v)})).apply(this,arguments)}function _o(T,v){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,_.Z)(function*(T,v){return un(T,v)})).apply(this,arguments)}function Wr(T,v){return Ph.apply(this,arguments)}function Ph(){return(Ph=(0,_.Z)(function*(T,v){return un(T,v)})).apply(this,arguments)}function Nr(){return(Nr=(0,_.Z)(function*(T,v){return Ur(T,"POST","/v1/accounts:signInWithEmailLink",wt(T,v))})).apply(this,arguments)}function La(){return(La=(0,_.Z)(function*(T,v){return Ur(T,"POST","/v1/accounts:signInWithEmailLink",wt(T,v))})).apply(this,arguments)}class vo extends St{constructor(v,w,D,M=null){super("password",D),this._email=v,this._password=w,this._tenantId=M}static _fromEmailAndPassword(v,w){return new vo(v,w,"password")}static _fromEmailAndCode(v,w,D=null){return new vo(v,w,"emailLink",D)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(v){const w="string"==typeof v?JSON.parse(v):v;if((null==w?void 0:w.email)&&(null==w?void 0:w.password)){if("password"===w.signInMethod)return this._fromEmailAndPassword(w.email,w.password);if("emailLink"===w.signInMethod)return this._fromEmailAndCode(w.email,w.password,w.tenantId)}return null}_getIdTokenResponse(v){var w=this;return(0,_.Z)(function*(){switch(w.signInMethod){case"password":return function(T,v){return Di.apply(this,arguments)}(v,{returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function(T,v){return Nr.apply(this,arguments)}(v,{email:w._email,oobCode:w._password});default:Ee(v,"internal-error")}})()}_linkToIdToken(v,w){var D=this;return(0,_.Z)(function*(){switch(D.signInMethod){case"password":return Rr(v,{idToken:w,returnSecureToken:!0,email:D._email,password:D._password});case"emailLink":return function(T,v){return La.apply(this,arguments)}(v,{idToken:w,email:D._email,oobCode:D._password});default:Ee(v,"internal-error")}})()}_getReauthenticationResolver(v){return this._getIdTokenResponse(v)}}function vr(T,v){return Si.apply(this,arguments)}function Si(){return(Si=(0,_.Z)(function*(T,v){return Ur(T,"POST","/v1/accounts:signInWithIdp",wt(T,v))})).apply(this,arguments)}class Is extends St{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(v){const w=new Is(v.providerId,v.signInMethod);return v.idToken||v.accessToken?(v.idToken&&(w.idToken=v.idToken),v.accessToken&&(w.accessToken=v.accessToken),v.nonce&&!v.pendingToken&&(w.nonce=v.nonce),v.pendingToken&&(w.pendingToken=v.pendingToken)):v.oauthToken&&v.oauthTokenSecret?(w.accessToken=v.oauthToken,w.secret=v.oauthTokenSecret):Ee("argument-error"),w}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(v){const w="string"==typeof v?JSON.parse(v):v,{providerId:D,signInMethod:M}=w,H=(0,_e._T)(w,["providerId","signInMethod"]);if(!D||!M)return null;const fe=new Is(D,M);return fe.idToken=H.idToken||void 0,fe.accessToken=H.accessToken||void 0,fe.secret=H.secret,fe.nonce=H.nonce,fe.pendingToken=H.pendingToken||null,fe}_getIdTokenResponse(v){return vr(v,this.buildRequest())}_linkToIdToken(v,w){const D=this.buildRequest();return D.idToken=w,vr(v,D)}_getReauthenticationResolver(v){const w=this.buildRequest();return w.autoCreate=!1,vr(v,w)}buildRequest(){const v={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)v.pendingToken=this.pendingToken;else{const w={};this.idToken&&(w.id_token=this.idToken),this.accessToken&&(w.access_token=this.accessToken),this.secret&&(w.oauth_token_secret=this.secret),w.providerId=this.providerId,this.nonce&&!this.pendingToken&&(w.nonce=this.nonce),v.postBody=(0,z.xO)(w)}return v}}function Lp(T,v){return Oh.apply(this,arguments)}function Oh(){return(Oh=(0,_.Z)(function*(T,v){return Pn(T,"POST","/v1/accounts:sendVerificationCode",wt(T,v))})).apply(this,arguments)}function Fh(){return(Fh=(0,_.Z)(function*(T,v){return Ur(T,"POST","/v1/accounts:signInWithPhoneNumber",wt(T,v))})).apply(this,arguments)}function Eo(){return(Eo=(0,_.Z)(function*(T,v){const w=yield Ur(T,"POST","/v1/accounts:signInWithPhoneNumber",wt(T,v));if(w.temporaryProof)throw Xn(T,"account-exists-with-different-credential",w);return w})).apply(this,arguments)}const a_={USER_NOT_FOUND:"user-not-found"};function Lh(){return(Lh=(0,_.Z)(function*(T,v){return Ur(T,"POST","/v1/accounts:signInWithPhoneNumber",wt(T,Object.assign(Object.assign({},v),{operation:"REAUTH"})),a_)})).apply(this,arguments)}class Va extends St{constructor(v){super("phone","phone"),this.params=v}static _fromVerification(v,w){return new Va({verificationId:v,verificationCode:w})}static _fromTokenResponse(v,w){return new Va({phoneNumber:v,temporaryProof:w})}_getIdTokenResponse(v){return function(T,v){return Fh.apply(this,arguments)}(v,this._makeVerificationRequest())}_linkToIdToken(v,w){return function(T,v){return Eo.apply(this,arguments)}(v,Object.assign({idToken:w},this._makeVerificationRequest()))}_getReauthenticationResolver(v){return function(T,v){return Lh.apply(this,arguments)}(v,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:v,phoneNumber:w,verificationId:D,verificationCode:M}=this.params;return v&&w?{temporaryProof:v,phoneNumber:w}:{sessionInfo:D,code:M}}toJSON(){const v={providerId:this.providerId};return this.params.phoneNumber&&(v.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(v.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(v.verificationCode=this.params.verificationCode),this.params.verificationId&&(v.verificationId=this.params.verificationId),v}static fromJSON(v){"string"==typeof v&&(v=JSON.parse(v));const{verificationId:w,verificationCode:D,phoneNumber:M,temporaryProof:H}=v;return D||w||M||H?new Va({verificationId:w,verificationCode:D,phoneNumber:M,temporaryProof:H}):null}}class Hc{constructor(v){var w,D,M,H,fe,Be;const at=(0,z.zd)((0,z.pd)(v)),Et=null!==(w=at.apiKey)&&void 0!==w?w:null,Qt=null!==(D=at.oobCode)&&void 0!==D?D:null,rn=function(T){switch(T){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(M=at.mode)&&void 0!==M?M:null);xe(Et&&Qt&&rn,"argument-error"),this.apiKey=Et,this.operation=rn,this.code=Qt,this.continueUrl=null!==(H=at.continueUrl)&&void 0!==H?H:null,this.languageCode=null!==(fe=at.languageCode)&&void 0!==fe?fe:null,this.tenantId=null!==(Be=at.tenantId)&&void 0!==Be?Be:null}static parseLink(v){const w=function(T){const v=(0,z.zd)((0,z.pd)(T)).link,w=v?(0,z.zd)((0,z.pd)(v)).deep_link_id:null,D=(0,z.zd)((0,z.pd)(T)).deep_link_id;return(D?(0,z.zd)((0,z.pd)(D)).link:null)||D||w||v||T}(v);try{return new Hc(w)}catch(D){return null}}}let Gc=(()=>{class T{constructor(){this.providerId=T.PROVIDER_ID}static credential(w,D){return vo._fromEmailAndPassword(w,D)}static credentialWithLink(w,D){const M=Hc.parseLink(D);return xe(M,"argument-error"),vo._fromEmailAndCode(w,M.code,M.tenantId)}}return T.PROVIDER_ID="password",T.EMAIL_PASSWORD_SIGN_IN_METHOD="password",T.EMAIL_LINK_SIGN_IN_METHOD="emailLink",T})();class ns{constructor(v){this.providerId=v,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(v){this.defaultLanguageCode=v}setCustomParameters(v){return this.customParameters=v,this}getCustomParameters(){return this.customParameters}}class wo extends ns{constructor(){super(...arguments),this.scopes=[]}addScope(v){return this.scopes.includes(v)||this.scopes.push(v),this}getScopes(){return[...this.scopes]}}class Tu extends wo{static credentialFromJSON(v){const w="string"==typeof v?JSON.parse(v):v;return xe("providerId"in w&&"signInMethod"in w,"argument-error"),Is._fromParams(w)}credential(v){return this._credential(Object.assign(Object.assign({},v),{nonce:v.rawNonce}))}_credential(v){return xe(v.idToken||v.accessToken,"argument-error"),Is._fromParams(Object.assign(Object.assign({},v),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(v){return Tu.oauthCredentialFromTaggedObject(v)}static credentialFromError(v){return Tu.oauthCredentialFromTaggedObject(v.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthIdToken:w,oauthAccessToken:D,oauthTokenSecret:M,pendingToken:H,nonce:fe,providerId:Be}=v;if(!D&&!M&&!w&&!H||!Be)return null;try{return new Tu(Be)._credential({idToken:w,accessToken:D,nonce:fe,pendingToken:H})}catch(at){return null}}}let qc=(()=>{class T extends wo{constructor(){super("facebook.com")}static credential(w){return Is._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.FACEBOOK_SIGN_IN_METHOD,accessToken:w})}static credentialFromResult(w){return T.credentialFromTaggedObject(w)}static credentialFromError(w){return T.credentialFromTaggedObject(w.customData||{})}static credentialFromTaggedObject({_tokenResponse:w}){if(!w||!("oauthAccessToken"in w)||!w.oauthAccessToken)return null;try{return T.credential(w.oauthAccessToken)}catch(D){return null}}}return T.FACEBOOK_SIGN_IN_METHOD="facebook.com",T.PROVIDER_ID="facebook.com",T})(),Vh=(()=>{class T extends wo{constructor(){super("google.com"),this.addScope("profile")}static credential(w,D){return Is._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.GOOGLE_SIGN_IN_METHOD,idToken:w,accessToken:D})}static credentialFromResult(w){return T.credentialFromTaggedObject(w)}static credentialFromError(w){return T.credentialFromTaggedObject(w.customData||{})}static credentialFromTaggedObject({_tokenResponse:w}){if(!w)return null;const{oauthIdToken:D,oauthAccessToken:M}=w;if(!D&&!M)return null;try{return T.credential(D,M)}catch(H){return null}}}return T.GOOGLE_SIGN_IN_METHOD="google.com",T.PROVIDER_ID="google.com",T})(),bo=(()=>{class T extends wo{constructor(){super("github.com")}static credential(w){return Is._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.GITHUB_SIGN_IN_METHOD,accessToken:w})}static credentialFromResult(w){return T.credentialFromTaggedObject(w)}static credentialFromError(w){return T.credentialFromTaggedObject(w.customData||{})}static credentialFromTaggedObject({_tokenResponse:w}){if(!w||!("oauthAccessToken"in w)||!w.oauthAccessToken)return null;try{return T.credential(w.oauthAccessToken)}catch(D){return null}}}return T.GITHUB_SIGN_IN_METHOD="github.com",T.PROVIDER_ID="github.com",T})();class hi extends St{constructor(v,w){super(v,v),this.pendingToken=w}_getIdTokenResponse(v){return vr(v,this.buildRequest())}_linkToIdToken(v,w){const D=this.buildRequest();return D.idToken=w,vr(v,D)}_getReauthenticationResolver(v){const w=this.buildRequest();return w.autoCreate=!1,vr(v,w)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(v){const w="string"==typeof v?JSON.parse(v):v,{providerId:D,signInMethod:M,pendingToken:H}=w;return D&&M&&H&&D===M?new hi(D,H):null}static _create(v,w){return new hi(v,w)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}let Ua=(()=>{class T extends wo{constructor(){super("twitter.com")}static credential(w,D){return Is._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.TWITTER_SIGN_IN_METHOD,oauthToken:w,oauthTokenSecret:D})}static credentialFromResult(w){return T.credentialFromTaggedObject(w)}static credentialFromError(w){return T.credentialFromTaggedObject(w.customData||{})}static credentialFromTaggedObject({_tokenResponse:w}){if(!w)return null;const{oauthAccessToken:D,oauthTokenSecret:M}=w;if(!D||!M)return null;try{return T.credential(D,M)}catch(H){return null}}}return T.TWITTER_SIGN_IN_METHOD="twitter.com",T.PROVIDER_ID="twitter.com",T})();function rs(T,v){return zc.apply(this,arguments)}function zc(){return(zc=(0,_.Z)(function*(T,v){return Ur(T,"POST","/v1/accounts:signUp",wt(T,v))})).apply(this,arguments)}class zr{constructor(v){this.user=v.user,this.providerId=v.providerId,this._tokenResponse=v._tokenResponse,this.operationType=v.operationType}static _fromIdTokenResponse(v,w,D,M=!1){return(0,_.Z)(function*(){const H=yield Cn._fromIdTokenResponse(v,D,M),fe=Kc(D);return new zr({user:H,providerId:fe,_tokenResponse:D,operationType:w})})()}static _forOperation(v,w,D){return(0,_.Z)(function*(){yield v._updateTokensIfNecessary(D,!0);const M=Kc(D);return new zr({user:v,providerId:M,_tokenResponse:D,operationType:w})})()}}function Kc(T){return T.providerId?T.providerId:"phoneNumber"in T?"phone":null}function jp(T){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,_.Z)(function*(T){var v;const w=En(T);if(yield w._initializationPromise,null===(v=w.currentUser)||void 0===v?void 0:v.isAnonymous)return new zr({user:w.currentUser,providerId:null,operationType:"signIn"});const D=yield rs(w,{returnSecureToken:!0}),M=yield zr._fromIdTokenResponse(w,"signIn",D,!0);return yield w._updateCurrentUser(M.user),M})).apply(this,arguments)}class Co extends z.ZR{constructor(v,w,D,M){var H;super(w.code,w.message),this.operationType=D,this.user=M,this.name="FirebaseError",Object.setPrototypeOf(this,Co.prototype),this.appName=v.name,this.code=w.code,this.tenantId=null!==(H=v.tenantId)&&void 0!==H?H:void 0,this.serverResponse=w.customData.serverResponse}static _fromErrorAndOperation(v,w,D,M){return new Co(v,w,D,M)}}function Zc(T,v,w,D){return("reauthenticate"===v?w._getReauthenticationResolver(T):w._getIdTokenResponse(T)).catch(H=>{throw"auth/multi-factor-auth-required"===H.code?Co._fromErrorAndOperation(T,H,v,D):H})}function Sl(T){return new Set(T.map(({providerId:v})=>v).filter(v=>!!v))}function $p(T,v){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,_.Z)(function*(T,v){const w=(0,z.m9)(T);yield Ba(!0,w,v);const{providerUserInfo:D}=yield ot(w.auth,{idToken:yield w.getIdToken(),deleteProvider:[v]}),M=Sl(D||[]);return w.providerData=w.providerData.filter(H=>M.has(H.providerId)),M.has("phone")||(w.phoneNumber=null),yield w.auth._persistUserIfCurrent(w),w})).apply(this,arguments)}function Iu(T,v){return On.apply(this,arguments)}function On(){return(On=(0,_.Z)(function*(T,v,w=!1){const D=yield st(T,v._linkToIdToken(T.auth,yield T.getIdToken()),w);return zr._forOperation(T,"link",D)})).apply(this,arguments)}function Ba(T,v,w){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,_.Z)(function*(T,v,w){yield pn(v);const M=!1===T?"provider-already-linked":"no-such-provider";xe(Sl(v.providerData).has(w)===T,v.auth,M)})).apply(this,arguments)}function Du(T,v){return An.apply(this,arguments)}function An(){return(An=(0,_.Z)(function*(T,v,w=!1){const{auth:D}=T,M="reauthenticate";try{const H=yield st(T,Zc(D,M,v,T),w);xe(H.idToken,D,"internal-error");const fe=ln(H.idToken);xe(fe,D,"internal-error");const{sub:Be}=fe;return xe(T.uid===Be,D,"user-mismatch"),zr._forOperation(T,M,H)}catch(H){throw"auth/user-not-found"===(null==H?void 0:H.code)&&Ee(D,"user-mismatch"),H}})).apply(this,arguments)}function Bh(T,v){return Al.apply(this,arguments)}function Al(){return(Al=(0,_.Z)(function*(T,v,w=!1){const D="signIn",M=yield Zc(T,D,v),H=yield zr._fromIdTokenResponse(T,D,M);return w||(yield T._updateCurrentUser(H.user)),H})).apply(this,arguments)}function Hs(T,v){return fi.apply(this,arguments)}function fi(){return(fi=(0,_.Z)(function*(T,v){return Bh(En(T),v)})).apply(this,arguments)}function or(T,v){return Rl.apply(this,arguments)}function Rl(){return(Rl=(0,_.Z)(function*(T,v){const w=(0,z.m9)(T);return yield Ba(!1,w,v.providerId),Iu(w,v)})).apply(this,arguments)}function Gs(T,v){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,_.Z)(function*(T,v){return Du((0,z.m9)(T),v)})).apply(this,arguments)}function Yc(T,v){return Nl.apply(this,arguments)}function Nl(){return(Nl=(0,_.Z)(function*(T,v){return Ur(T,"POST","/v1/accounts:signInWithCustomToken",wt(T,v))})).apply(this,arguments)}function ja(T,v){return is.apply(this,arguments)}function is(){return(is=(0,_.Z)(function*(T,v){const w=En(T),D=yield Yc(w,{token:v,returnSecureToken:!0}),M=yield zr._fromIdTokenResponse(w,"signIn",D);return yield w._updateCurrentUser(M.user),M})).apply(this,arguments)}class ta{constructor(v,w){this.factorId=v,this.uid=w.mfaEnrollmentId,this.enrollmentTime=new Date(w.enrolledAt).toUTCString(),this.displayName=w.displayName}static _fromServerResponse(v,w){return"phoneInfo"in w?na._fromServerResponse(v,w):Ee(v,"internal-error")}}class na extends ta{constructor(v){super("phone",v),this.phoneNumber=v.phoneInfo}static _fromServerResponse(v,w){return new na(w)}}function bt(T,v,w){var D;xe((null===(D=w.url)||void 0===D?void 0:D.length)>0,T,"invalid-continue-uri"),xe(void 0===w.dynamicLinkDomain||w.dynamicLinkDomain.length>0,T,"invalid-dynamic-link-domain"),v.continueUrl=w.url,v.dynamicLinkDomain=w.dynamicLinkDomain,v.canHandleCodeInApp=w.handleCodeInApp,w.iOS&&(xe(w.iOS.bundleId.length>0,T,"missing-ios-bundle-id"),v.iOSBundleId=w.iOS.bundleId),w.android&&(xe(w.android.packageName.length>0,T,"missing-android-pkg-name"),v.androidInstallApp=w.android.installApp,v.androidMinimumVersionCode=w.android.minimumVersion,v.androidPackageName=w.android.packageName)}function Hp(T,v,w){return Qc.apply(this,arguments)}function Qc(){return(Qc=(0,_.Z)(function*(T,v,w){const D=(0,z.m9)(T),M={requestType:"PASSWORD_RESET",email:v};w&&bt(D,M,w),yield jc(D,M)})).apply(this,arguments)}function Jc(T,v,w){return Su.apply(this,arguments)}function Su(){return(Su=(0,_.Z)(function*(T,v,w){yield js((0,z.m9)(T),{oobCode:v,newPassword:w})})).apply(this,arguments)}function Xc(T,v){return ed.apply(this,arguments)}function ed(){return(ed=(0,_.Z)(function*(T,v){yield di((0,z.m9)(T),{oobCode:v})})).apply(this,arguments)}function To(T,v){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,_.Z)(function*(T,v){const w=(0,z.m9)(T),D=yield js(w,{oobCode:v}),M=D.requestType;switch(xe(M,w,"internal-error"),M){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":xe(D.newEmail,w,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":xe(D.mfaInfo,w,"internal-error");default:xe(D.email,w,"internal-error")}let H=null;return D.mfaInfo&&(H=ta._fromServerResponse(En(w),D.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===D.requestType?D.newEmail:D.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===D.requestType?D.email:D.newEmail)||null,multiFactorInfo:H},operation:M}})).apply(this,arguments)}function zt(T,v){return xl.apply(this,arguments)}function xl(){return(xl=(0,_.Z)(function*(T,v){const{data:w}=yield To((0,z.m9)(T),v);return w.email})).apply(this,arguments)}function Fn(T,v,w){return Pl.apply(this,arguments)}function Pl(){return(Pl=(0,_.Z)(function*(T,v,w){const D=En(T),M=yield rs(D,{returnSecureToken:!0,email:v,password:w}),H=yield zr._fromIdTokenResponse(D,"signIn",M);return yield D._updateCurrentUser(H.user),H})).apply(this,arguments)}function Io(T,v,w){return Hs((0,z.m9)(T),Gc.credential(v,w))}function Fi(T,v,w){return $a.apply(this,arguments)}function $a(){return($a=(0,_.Z)(function*(T,v,w){const D=(0,z.m9)(T),M={requestType:"EMAIL_SIGNIN",email:v};xe(w.handleCodeInApp,D,"argument-error"),w&&bt(D,M,w),yield _o(D,M)})).apply(this,arguments)}function Au(T,v){const w=Hc.parseLink(v);return"EMAIL_SIGNIN"===(null==w?void 0:w.operation)}function c_(T,v,w){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,_.Z)(function*(T,v,w){const D=(0,z.m9)(T),M=Gc.credentialWithLink(v,w||be());return xe(M._tenantId===(D.tenantId||null),D,"tenant-id-mismatch"),Hs(D,M)})).apply(this,arguments)}function Nu(T,v){return Do.apply(this,arguments)}function Do(){return(Do=(0,_.Z)(function*(T,v){return Pn(T,"POST","/v1/accounts:createAuthUri",wt(T,v))})).apply(this,arguments)}function Er(T,v){return pi.apply(this,arguments)}function pi(){return(pi=(0,_.Z)(function*(T,v){const D={identifier:v,continueUri:Tt()?be():"http://localhost"},{signinMethods:M}=yield Nu((0,z.m9)(T),D);return M||[]})).apply(this,arguments)}function td(T,v){return ss.apply(this,arguments)}function ss(){return(ss=(0,_.Z)(function*(T,v){const w=(0,z.m9)(T),M={requestType:"VERIFY_EMAIL",idToken:yield T.getIdToken()};v&&bt(w.auth,M,v);const{email:H}=yield Fp(w.auth,M);H!==T.email&&(yield T.reload())})).apply(this,arguments)}function Ri(T,v,w){return jh.apply(this,arguments)}function jh(){return(jh=(0,_.Z)(function*(T,v,w){const D=(0,z.m9)(T),H={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield T.getIdToken(),newEmail:v};w&&bt(D.auth,H,w);const{email:fe}=yield Wr(D.auth,H);fe!==T.email&&(yield T.reload())})).apply(this,arguments)}function xu(T,v){return Ml.apply(this,arguments)}function Ml(){return(Ml=(0,_.Z)(function*(T,v){return Pn(T,"POST","/v1/accounts:update",v)})).apply(this,arguments)}function nd(T,v){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,_.Z)(function*(T,{displayName:v,photoURL:w}){if(void 0===v&&void 0===w)return;const D=(0,z.m9)(T),H={idToken:yield D.getIdToken(),displayName:v,photoUrl:w,returnSecureToken:!0},fe=yield st(D,xu(D.auth,H));D.displayName=fe.displayName||null,D.photoURL=fe.photoUrl||null;const Be=D.providerData.find(({providerId:at})=>"password"===at);Be&&(Be.displayName=D.displayName,Be.photoURL=D.photoURL),yield D._updateTokensIfNecessary(fe)})).apply(this,arguments)}function kl(T,v){return Ha((0,z.m9)(T),v,null)}function $h(T,v){return Ha((0,z.m9)(T),null,v)}function Ha(T,v,w){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,_.Z)(function*(T,v,w){const{auth:D}=T,H={idToken:yield T.getIdToken(),returnSecureToken:!0};v&&(H.email=v),w&&(H.password=w);const fe=yield st(T,Rr(D,H));yield T._updateTokensIfNecessary(fe,!0)})).apply(this,arguments)}class qs{constructor(v,w,D={}){this.isNewUser=v,this.providerId=w,this.profile=D}}class rd extends qs{constructor(v,w,D,M){super(v,w,D),this.username=M}}class Gh extends qs{constructor(v,w){super(v,"facebook.com",w)}}class Pu extends rd{constructor(v,w){super(v,"github.com",w,"string"==typeof(null==w?void 0:w.login)?null==w?void 0:w.login:null)}}class Gp extends qs{constructor(v,w){super(v,"google.com",w)}}class ra extends rd{constructor(v,w,D){super(v,"twitter.com",w,D)}}function qp(T){const{user:v,_tokenResponse:w}=T;return v.isAnonymous&&!w?{providerId:null,isNewUser:!1,profile:null}:function(T){var v,w;if(!T)return null;const{providerId:D}=T,M=T.rawUserInfo?JSON.parse(T.rawUserInfo):{},H=T.isNewUser||"identitytoolkit#SignupNewUserResponse"===T.kind;if(!D&&(null==T?void 0:T.idToken)){const fe=null===(w=null===(v=ln(T.idToken))||void 0===v?void 0:v.firebase)||void 0===w?void 0:w.sign_in_provider;if(fe)return new qs(H,"anonymous"!==fe&&"custom"!==fe?fe:null)}if(!D)return null;switch(D){case"facebook.com":return new Gh(H,M);case"github.com":return new Pu(H,M);case"google.com":return new Gp(H,M);case"twitter.com":return new ra(H,M,T.screenName||null);case"custom":case"anonymous":return new qs(H,null);default:return new qs(H,D,M)}}(w)}class ia{constructor(v,w){this.type=v,this.credential=w}static _fromIdtoken(v){return new ia("enroll",v)}static _fromMfaPendingCredential(v){return new ia("signin",v)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(v){var w,D;if(null==v?void 0:v.multiFactorSession){if(null===(w=v.multiFactorSession)||void 0===w?void 0:w.pendingCredential)return ia._fromMfaPendingCredential(v.multiFactorSession.pendingCredential);if(null===(D=v.multiFactorSession)||void 0===D?void 0:D.idToken)return ia._fromIdtoken(v.multiFactorSession.idToken)}return null}}class sa{constructor(v,w,D){this.session=v,this.hints=w,this.signInResolver=D}static _fromError(v,w){const D=En(v),M=(w.serverResponse.mfaInfo||[]).map(fe=>ta._fromServerResponse(D,fe));xe(w.serverResponse.mfaPendingCredential,D,"internal-error");const H=ia._fromMfaPendingCredential(w.serverResponse.mfaPendingCredential);return new sa(H,M,function(){var fe=(0,_.Z)(function*(Be){const at=yield Be._process(D,H);delete w.serverResponse.mfaInfo,delete w.serverResponse.mfaPendingCredential;const Et=Object.assign(Object.assign({},w.serverResponse),{idToken:at.idToken,refreshToken:at.refreshToken});switch(w.operationType){case"signIn":const Qt=yield zr._fromIdTokenResponse(D,w.operationType,Et);return yield D._updateCurrentUser(Qt.user),Qt;case"reauthenticate":return xe(w.user,D,"internal-error"),zr._forOperation(w.user,w.operationType,Et);default:Ee(D,"internal-error")}});return function(Be){return fe.apply(this,arguments)}}())}resolveSignIn(v){var w=this;return(0,_.Z)(function*(){return w.signInResolver(v)})()}}function Fl(T,v){var w;const D=(0,z.m9)(T),M=v;return xe(v.operationType,D,"argument-error"),xe(null===(w=M.serverResponse)||void 0===w?void 0:w.mfaPendingCredential,D,"argument-error"),sa._fromError(D,M)}function qn(T,v){return Pn(T,"POST","/v2/accounts/mfaEnrollment:start",wt(T,v))}class Mu{constructor(v){this.user=v,this.enrolledFactors=[],v._onReload(w=>{w.mfaInfo&&(this.enrolledFactors=w.mfaInfo.map(D=>ta._fromServerResponse(v.auth,D)))})}static _fromUser(v){return new Mu(v)}getSession(){var v=this;return(0,_.Z)(function*(){return ia._fromIdtoken(yield v.user.getIdToken())})()}enroll(v,w){var D=this;return(0,_.Z)(function*(){const M=v,H=yield D.getSession(),fe=yield st(D.user,M._process(D.user.auth,H,w));return yield D.user._updateTokensIfNecessary(fe),D.user.reload()})()}unenroll(v){var w=this;return(0,_.Z)(function*(){const D="string"==typeof v?v:v.uid,M=yield w.user.getIdToken(),H=yield st(w.user,function(T,v){return Pn(T,"POST","/v2/accounts/mfaEnrollment:withdraw",wt(T,v))}(w.user.auth,{idToken:M,mfaEnrollmentId:D}));w.enrolledFactors=w.enrolledFactors.filter(({uid:fe})=>fe!==D),yield w.user._updateTokensIfNecessary(H);try{yield w.user.reload()}catch(fe){if("auth/user-token-expired"!==fe.code)throw fe}})()}}const od=new WeakMap;function As(T){const v=(0,z.m9)(T);return od.has(v)||od.set(v,Mu._fromUser(v)),od.get(v)}const oa="__sak";class ad{constructor(v,w){this.storage=v,this.type=w}_isAvailable(){try{return this.storage?(this.storage.setItem(oa,"1"),this.storage.removeItem(oa),Promise.resolve(!0)):Promise.resolve(!1)}catch(v){return Promise.resolve(!1)}}_set(v,w){return this.storage.setItem(v,JSON.stringify(w)),Promise.resolve()}_get(v){const w=this.storage.getItem(v);return Promise.resolve(w?JSON.parse(w):null)}_remove(v){return this.storage.removeItem(v),Promise.resolve()}}const Ni=(()=>{class T extends ad{constructor(){super(window.localStorage,"LOCAL"),this.boundEventHandler=(w,D)=>this.onStorageEvent(w,D),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const T=(0,z.z$)();return Ke(T)||Tn(T)}()&&function(){try{return!(!window||window===window.top)}catch(T){return!1}}(),this.fallbackToPolling=ci(),this._shouldAllowMigration=!0}forAllChangedKeys(w){for(const D of Object.keys(this.listeners)){const M=this.storage.getItem(D),H=this.localCache[D];M!==H&&w(D,H,M)}}onStorageEvent(w,D=!1){if(!w.key)return void this.forAllChangedKeys((Be,at,Et)=>{this.notifyListeners(Be,Et)});const M=w.key;if(D?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Be=this.storage.getItem(M);if(w.newValue!==Be)null!==w.newValue?this.storage.setItem(M,w.newValue):this.storage.removeItem(M);else if(this.localCache[M]===w.newValue&&!D)return}const H=()=>{const Be=this.storage.getItem(M);!D&&this.localCache[M]===Be||this.notifyListeners(M,Be)},fe=this.storage.getItem(M);(0,z.w1)()&&10===document.documentMode&&fe!==w.newValue&&w.newValue!==w.oldValue?setTimeout(H,10):H()}notifyListeners(w,D){this.localCache[w]=D;const M=this.listeners[w];if(M)for(const H of Array.from(M))H(D&&JSON.parse(D))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((w,D,M)=>{this.onStorageEvent(new StorageEvent("storage",{key:w,oldValue:D,newValue:M}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(w,D){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[w]||(this.listeners[w]=new Set,this.localCache[w]=this.storage.getItem(w)),this.listeners[w].add(D)}_removeListener(w,D){this.listeners[w]&&(this.listeners[w].delete(D),0===this.listeners[w].size&&delete this.listeners[w]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(w,D){var M=()=>super._set,H=this;return(0,_.Z)(function*(){yield M().call(H,w,D),H.localCache[w]=JSON.stringify(D)})()}_get(w){var D=()=>super._get,M=this;return(0,_.Z)(function*(){const H=yield D().call(M,w);return M.localCache[w]=JSON.stringify(H),H})()}_remove(w){var D=()=>super._remove,M=this;return(0,_.Z)(function*(){yield D().call(M,w),delete M.localCache[w]})()}}return T.type="LOCAL",T})(),zp=(()=>{class T extends ad{constructor(){super(window.sessionStorage,"SESSION")}_addListener(w,D){}_removeListener(w,D){}}return T.type="SESSION",T})();let cd=(()=>{class T{constructor(w){this.eventTarget=w,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(w){const D=this.receivers.find(H=>H.isListeningto(w));if(D)return D;const M=new T(w);return this.receivers.push(M),M}isListeningto(w){return this.eventTarget===w}handleEvent(w){var D=this;return(0,_.Z)(function*(){const M=w,{eventId:H,eventType:fe,data:Be}=M.data,at=D.handlersMap[fe];if(!(null==at?void 0:at.size))return;M.ports[0].postMessage({status:"ack",eventId:H,eventType:fe});const Et=Array.from(at).map(function(){var rn=(0,_.Z)(function*(Vo){return Vo(M.origin,Be)});return function(Vo){return rn.apply(this,arguments)}}()),Qt=yield function(T){return Promise.all(T.map(function(){var v=(0,_.Z)(function*(w){try{return{fulfilled:!0,value:yield w}}catch(D){return{fulfilled:!1,reason:D}}});return function(w){return v.apply(this,arguments)}}()))}(Et);M.ports[0].postMessage({status:"done",eventId:H,eventType:fe,response:Qt})})()}_subscribe(w,D){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[w]||(this.handlersMap[w]=new Set),this.handlersMap[w].add(D)}_unsubscribe(w,D){this.handlersMap[w]&&D&&this.handlersMap[w].delete(D),(!D||0===this.handlersMap[w].size)&&delete this.handlersMap[w],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return T.receivers=[],T})();function mi(T="",v=10){let w="";for(let D=0;D<v;D++)w+=Math.floor(10*Math.random());return T+w}class Ou{constructor(v){this.target=v,this.handlers=new Set}removeMessageHandler(v){v.messageChannel&&(v.messageChannel.port1.removeEventListener("message",v.onMessage),v.messageChannel.port1.close()),this.handlers.delete(v)}_send(v,w,D=50){var M=this;return(0,_.Z)(function*(){const H="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!H)throw new Error("connection_unavailable");let fe,Be;return new Promise((at,Et)=>{const Qt=mi("",20);H.port1.start();const rn=setTimeout(()=>{Et(new Error("unsupported_event"))},D);Be={messageChannel:H,onMessage(Vo){const xs=Vo;if(xs.data.eventId===Qt)switch(xs.data.status){case"ack":clearTimeout(rn),fe=setTimeout(()=>{Et(new Error("timeout"))},3e3);break;case"done":clearTimeout(fe),at(xs.data.response);break;default:clearTimeout(rn),clearTimeout(fe),Et(new Error("invalid_response"))}}},M.handlers.add(Be),H.port1.addEventListener("message",Be.onMessage),M.target.postMessage({eventType:v,eventId:Qt,data:w},[H.port2])}).finally(()=>{Be&&M.removeMessageHandler(Be)})})()}}function Wn(){return window}function os(){return void 0!==Wn().WorkerGlobalScope&&"function"==typeof Wn().importScripts}function Ws(){return(Ws=(0,_.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(T){return null}})).apply(this,arguments)}const h_="firebaseLocalStorageDb",qa="firebaseLocalStorage",Zp="fbase_key";class Wa{constructor(v){this.request=v}toPromise(){return new Promise((v,w)=>{this.request.addEventListener("success",()=>{v(this.request.result)}),this.request.addEventListener("error",()=>{w(this.request.error)})})}}function Ao(T,v){return T.transaction([qa],v?"readwrite":"readonly").objectStore(qa)}function Un(){const T=indexedDB.open(h_,1);return new Promise((v,w)=>{T.addEventListener("error",()=>{w(T.error)}),T.addEventListener("upgradeneeded",()=>{const D=T.result;try{D.createObjectStore(qa,{keyPath:Zp})}catch(M){w(M)}}),T.addEventListener("success",(0,_.Z)(function*(){const D=T.result;D.objectStoreNames.contains(qa)?v(D):(D.close(),yield function(){const T=indexedDB.deleteDatabase(h_);return new Wa(T).toPromise()}(),v(yield Un()))}))})}function Ro(T,v,w){return tr.apply(this,arguments)}function tr(){return(tr=(0,_.Z)(function*(T,v,w){const D=Ao(T,!0).put({[Zp]:v,value:w});return new Wa(D).toPromise()})).apply(this,arguments)}function gt(){return(gt=(0,_.Z)(function*(T,v){const w=Ao(T,!1).get(v),D=yield new Wa(w).toPromise();return void 0===D?null:D.value})).apply(this,arguments)}function Kt(T,v){const w=Ao(T,!0).delete(v);return new Wa(w).toPromise()}const dd=(()=>{class T{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var w=this;return(0,_.Z)(function*(){return w.db||(w.db=yield Un()),w.db})()}_withRetries(w){var D=this;return(0,_.Z)(function*(){let M=0;for(;;)try{const H=yield D._openDb();return yield w(H)}catch(H){if(M++>3)throw H;D.db&&(D.db.close(),D.db=void 0)}})()}initializeServiceWorkerMessaging(){var w=this;return(0,_.Z)(function*(){return os()?w.initializeReceiver():w.initializeSender()})()}initializeReceiver(){var w=this;return(0,_.Z)(function*(){w.receiver=cd._getInstance(os()?self:null),w.receiver._subscribe("keyChanged",function(){var D=(0,_.Z)(function*(M,H){return{keyProcessed:(yield w._poll()).includes(H.key)}});return function(M,H){return D.apply(this,arguments)}}()),w.receiver._subscribe("ping",function(){var D=(0,_.Z)(function*(M,H){return["keyChanged"]});return function(M,H){return D.apply(this,arguments)}}())})()}initializeSender(){var w=this;return(0,_.Z)(function*(){var D,M;if(w.activeServiceWorker=yield function(){return Ws.apply(this,arguments)}(),!w.activeServiceWorker)return;w.sender=new Ou(w.activeServiceWorker);const H=yield w.sender._send("ping",{},800);!H||(null===(D=H[0])||void 0===D?void 0:D.fulfilled)&&(null===(M=H[0])||void 0===M?void 0:M.value.includes("keyChanged"))&&(w.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(w){var D=this;return(0,_.Z)(function*(){if(D.sender&&D.activeServiceWorker&&function(){var T;return(null===(T=null==navigator?void 0:navigator.serviceWorker)||void 0===T?void 0:T.controller)||null}()===D.activeServiceWorker)try{yield D.sender._send("keyChanged",{key:w},D.serviceWorkerReceiverAvailable?800:50)}catch(M){}})()}_isAvailable(){return(0,_.Z)(function*(){try{if(!indexedDB)return!1;const w=yield Un();return yield Ro(w,oa,"1"),yield Kt(w,oa),!0}catch(w){}return!1})()}_withPendingWrite(w){var D=this;return(0,_.Z)(function*(){D.pendingWrites++;try{yield w()}finally{D.pendingWrites--}})()}_set(w,D){var M=this;return(0,_.Z)(function*(){return M._withPendingWrite((0,_.Z)(function*(){return yield M._withRetries(H=>Ro(H,w,D)),M.localCache[w]=D,M.notifyServiceWorker(w)}))})()}_get(w){var D=this;return(0,_.Z)(function*(){const M=yield D._withRetries(H=>function(T,v){return gt.apply(this,arguments)}(H,w));return D.localCache[w]=M,M})()}_remove(w){var D=this;return(0,_.Z)(function*(){return D._withPendingWrite((0,_.Z)(function*(){return yield D._withRetries(M=>Kt(M,w)),delete D.localCache[w],D.notifyServiceWorker(w)}))})()}_poll(){var w=this;return(0,_.Z)(function*(){const D=yield w._withRetries(fe=>{const Be=Ao(fe,!1).getAll();return new Wa(Be).toPromise()});if(!D)return[];if(0!==w.pendingWrites)return[];const M=[],H=new Set;for(const{fbase_key:fe,value:Be}of D)H.add(fe),JSON.stringify(w.localCache[fe])!==JSON.stringify(Be)&&(w.notifyListeners(fe,Be),M.push(fe));for(const fe of Object.keys(w.localCache))w.localCache[fe]&&!H.has(fe)&&(w.notifyListeners(fe,null),M.push(fe));return M})()}notifyListeners(w,D){this.localCache[w]=D;const M=this.listeners[w];if(M)for(const H of Array.from(M))H(D)}startPolling(){var w=this;this.stopPolling(),this.pollTimer=setInterval((0,_.Z)(function*(){return w._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(w,D){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[w]||(this.listeners[w]=new Set,this._get(w)),this.listeners[w].add(D)}_removeListener(w,D){this.listeners[w]&&(this.listeners[w].delete(D),0===this.listeners[w].size&&delete this.listeners[w]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return T.type="LOCAL",T})();function la(T,v){return Pn(T,"POST","/v2/accounts/mfaSignIn:start",wt(T,v))}function za(){return(za=(0,_.Z)(function*(T){return(yield Pn(T,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function mt(T){return new Promise((v,w)=>{const D=document.createElement("script");D.setAttribute("src",T),D.onload=v,D.onerror=M=>{const H=Fe("internal-error");H.customData=M,w(H)},D.type="text/javascript",D.charset="UTF-8",function(){var T,v;return null!==(v=null===(T=document.getElementsByTagName("head"))||void 0===T?void 0:T[0])&&void 0!==v?v:document}().appendChild(D)})}function zs(T){return`__${T}${Math.floor(1e6*Math.random())}`}const Li=1e12;class Bl{constructor(v){this.auth=v,this.counter=Li,this._widgets=new Map}render(v,w){const D=this.counter;return this._widgets.set(D,new Ka(v,this.auth.name,w||{})),this.counter++,D}reset(v){var w;const D=v||Li;null===(w=this._widgets.get(D))||void 0===w||w.delete(),this._widgets.delete(D)}getResponse(v){var w;return(null===(w=this._widgets.get(v||Li))||void 0===w?void 0:w.getResponse())||""}execute(v){var w=this;return(0,_.Z)(function*(){var D;return null===(D=w._widgets.get(v||Li))||void 0===D||D.execute(),""})()}}class Ka{constructor(v,w,D){this.params=D,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const M="string"==typeof v?document.getElementById(v):v;xe(M,"argument-error",{appName:w}),this.container=M,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(T){const v=[],w="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let D=0;D<50;D++)v.push(w.charAt(Math.floor(Math.random()*w.length)));return v.join("")}();const{callback:v,"expired-callback":w}=this.params;if(v)try{v(this.responseToken)}catch(D){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,w)try{w()}catch(D){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ua=zs("rcb"),Za=new Dt(3e4,6e4);class Qp{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Wn().grecaptcha}load(v,w=""){return xe((T=w).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(T),v,"argument-error"),this.shouldResolveImmediately(w)?Promise.resolve(Wn().grecaptcha):new Promise((D,M)=>{const H=Wn().setTimeout(()=>{M(Fe(v,"network-request-failed"))},Za.get());Wn()[ua]=()=>{Wn().clearTimeout(H),delete Wn()[ua];const Be=Wn().grecaptcha;if(!Be)return void M(Fe(v,"internal-error"));const at=Be.render;Be.render=(Et,Qt)=>{const rn=at(Et,Qt);return this.counter++,rn},this.hostLanguage=w,D(Be)},mt(`https://www.google.com/recaptcha/api.js??${(0,z.xO)({onload:ua,render:"explicit",hl:w})}`).catch(()=>{clearTimeout(H),M(Fe(v,"internal-error"))})});var T}clearedOneInstance(){this.counter--}shouldResolveImmediately(v){return!!Wn().grecaptcha&&(v===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class as{load(v){return(0,_.Z)(function*(){return new Bl(v)})()}clearedOneInstance(){}}const Vi="recaptcha",cn={theme:"light",type:"image"};class V{constructor(v,w=Object.assign({},cn),D){this.parameters=w,this.type=Vi,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=En(D),this.isInvisible="invisible"===this.parameters.size,xe("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const M="string"==typeof v?document.getElementById(v):v;xe(M,this.auth,"argument-error"),this.container=M,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new as:new Qp,this.validateStartingState()}verify(){var v=this;return(0,_.Z)(function*(){v.assertNotDestroyed();const w=yield v.render(),D=v.getAssertedRecaptcha();return D.getResponse(w)||new Promise(H=>{const fe=Be=>{!Be||(v.tokenChangeListeners.delete(fe),H(Be))};v.tokenChangeListeners.add(fe),v.isInvisible&&D.execute(w)})})()}render(){try{this.assertNotDestroyed()}catch(v){return Promise.reject(v)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(v=>{throw this.renderPromise=null,v})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(v=>{this.container.removeChild(v)})}validateStartingState(){xe(!this.parameters.sitekey,this.auth,"argument-error"),xe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),xe("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(v){return w=>{if(this.tokenChangeListeners.forEach(D=>D(w)),"function"==typeof v)v(w);else if("string"==typeof v){const D=Wn()[v];"function"==typeof D&&D(w)}}}assertNotDestroyed(){xe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var v=this;return(0,_.Z)(function*(){if(yield v.init(),!v.widgetId){let w=v.container;if(!v.isInvisible){const D=document.createElement("div");w.appendChild(D),w=D}v.widgetId=v.getAssertedRecaptcha().render(w,v.parameters)}return v.widgetId})()}init(){var v=this;return(0,_.Z)(function*(){xe(Tt()&&!os(),v.auth,"internal-error"),yield function(){let T=null;return new Promise(v=>{"complete"!==document.readyState?(T=()=>v(),window.addEventListener("load",T)):v()}).catch(v=>{throw T&&window.removeEventListener("load",T),v})}(),v.recaptcha=yield v._recaptchaLoader.load(v.auth,v.auth.languageCode||void 0);const w=yield function(T){return za.apply(this,arguments)}(v.auth);xe(w,v.auth,"internal-error"),v.parameters.sitekey=w})()}getAssertedRecaptcha(){return xe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ns{constructor(v,w){this.verificationId=v,this.onConfirmation=w}confirm(v){const w=Va._fromVerification(this.verificationId,v);return this.onConfirmation(w)}}function it(T,v,w){return jl.apply(this,arguments)}function jl(){return(jl=(0,_.Z)(function*(T,v,w){const D=En(T),M=yield Lu(D,v,(0,z.m9)(w));return new Ns(M,H=>Hs(D,H))})).apply(this,arguments)}function Mt(T,v,w){return $l.apply(this,arguments)}function $l(){return($l=(0,_.Z)(function*(T,v,w){const D=(0,z.m9)(T);yield Ba(!1,D,"phone");const M=yield Lu(D.auth,v,(0,z.m9)(w));return new Ns(M,H=>or(D,H))})).apply(this,arguments)}function pd(T,v,w){return No.apply(this,arguments)}function No(){return(No=(0,_.Z)(function*(T,v,w){const D=(0,z.m9)(T),M=yield Lu(D.auth,v,(0,z.m9)(w));return new Ns(M,H=>Gs(D,H))})).apply(this,arguments)}function Lu(T,v,w){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,_.Z)(function*(T,v,w){var D;const M=yield w.verify();try{let H;if(xe("string"==typeof M,T,"argument-error"),xe(w.type===Vi,T,"argument-error"),H="string"==typeof v?{phoneNumber:v}:v,"session"in H){const fe=H.session;if("phoneNumber"in H)return xe("enroll"===fe.type,T,"internal-error"),(yield qn(T,{idToken:fe.credential,phoneEnrollmentInfo:{phoneNumber:H.phoneNumber,recaptchaToken:M}})).phoneSessionInfo.sessionInfo;{xe("signin"===fe.type,T,"internal-error");const Be=(null===(D=H.multiFactorHint)||void 0===D?void 0:D.uid)||H.multiFactorUid;return xe(Be,T,"missing-multi-factor-info"),(yield la(T,{mfaPendingCredential:fe.credential,mfaEnrollmentId:Be,phoneSignInInfo:{recaptchaToken:M}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:fe}=yield Lp(T,{phoneNumber:H.phoneNumber,recaptchaToken:M});return fe}}finally{w._reset()}})).apply(this,arguments)}function Qa(T,v){return Vu.apply(this,arguments)}function Vu(){return(Vu=(0,_.Z)(function*(T,v){yield Iu((0,z.m9)(T),v)})).apply(this,arguments)}let nr=(()=>{class T{constructor(w){this.providerId=T.PROVIDER_ID,this.auth=En(w)}verifyPhoneNumber(w,D){return Lu(this.auth,w,(0,z.m9)(D))}static credential(w,D){return Va._fromVerification(w,D)}static credentialFromResult(w){return T.credentialFromTaggedObject(w)}static credentialFromError(w){return T.credentialFromTaggedObject(w.customData||{})}static credentialFromTaggedObject({_tokenResponse:w}){if(!w)return null;const{phoneNumber:D,temporaryProof:M}=w;return D&&M?Va._fromTokenResponse(D,M):null}}return T.PROVIDER_ID="phone",T.PHONE_SIGN_IN_METHOD="phone",T})();function Ln(T,v){return v?Te(v):(xe(T._popupRedirectResolver,T,"argument-error"),T._popupRedirectResolver)}class xo extends St{constructor(v){super("custom","custom"),this.params=v}_getIdTokenResponse(v){return vr(v,this._buildIdpRequest())}_linkToIdToken(v,w){return vr(v,this._buildIdpRequest(w))}_getReauthenticationResolver(v){return vr(v,this._buildIdpRequest())}_buildIdpRequest(v){const w={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return v&&(w.idToken=v),w}}function Zr(T){return Bh(T.auth,new xo(T),T.bypassAuthState)}function Po(T){const{auth:v,user:w}=T;return xe(w,v,"internal-error"),Du(w,new xo(T),T.bypassAuthState)}function Ui(T){return xr.apply(this,arguments)}function xr(){return(xr=(0,_.Z)(function*(T){const{auth:v,user:w}=T;return xe(w,v,"internal-error"),Iu(w,new xo(T),T.bypassAuthState)})).apply(this,arguments)}class ca{constructor(v,w,D,M,H=!1){this.auth=v,this.resolver=D,this.user=M,this.bypassAuthState=H,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(w)?w:[w]}execute(){var v=this;return new Promise(function(){var w=(0,_.Z)(function*(D,M){v.pendingPromise={resolve:D,reject:M};try{v.eventManager=yield v.resolver._initialize(v.auth),yield v.onExecution(),v.eventManager.registerConsumer(v)}catch(H){v.reject(H)}});return function(D,M){return w.apply(this,arguments)}}())}onAuthEvent(v){var w=this;return(0,_.Z)(function*(){const{urlResponse:D,sessionId:M,postBody:H,tenantId:fe,error:Be,type:at}=v;if(Be)return void w.reject(Be);const Et={auth:w.auth,requestUri:D,sessionId:M,tenantId:fe||void 0,postBody:H||void 0,user:w.user,bypassAuthState:w.bypassAuthState};try{w.resolve(yield w.getIdpTask(at)(Et))}catch(Qt){w.reject(Qt)}})()}onError(v){this.reject(v)}getIdpTask(v){switch(v){case"signInViaPopup":case"signInViaRedirect":return Zr;case"linkViaPopup":case"linkViaRedirect":return Ui;case"reauthViaPopup":case"reauthViaRedirect":return Po;default:Ee(this.auth,"internal-error")}}resolve(v){he(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(v),this.unregisterAndCleanUp()}reject(v){he(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(v),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Mo=new Dt(2e3,1e4);function Oo(T,v,w){return ls.apply(this,arguments)}function ls(){return(ls=(0,_.Z)(function*(T,v,w){const D=En(T);Ct(T,v,ns);const M=Ln(D,w);return new da(D,"signInViaPopup",v,M).executeNotNull()})).apply(this,arguments)}function gd(T,v,w){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,_.Z)(function*(T,v,w){const D=(0,z.m9)(T);Ct(D.auth,v,ns);const M=Ln(D.auth,w);return new da(D.auth,"reauthViaPopup",v,M,D).executeNotNull()})).apply(this,arguments)}function Jp(T,v,w){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,_.Z)(function*(T,v,w){const D=(0,z.m9)(T);Ct(D.auth,v,ns);const M=Ln(D.auth,w);return new da(D.auth,"linkViaPopup",v,M,D).executeNotNull()})).apply(this,arguments)}let da=(()=>{class T extends ca{constructor(w,D,M,H,fe){super(w,D,H,fe),this.provider=M,this.authWindow=null,this.pollId=null,T.currentPopupAction&&T.currentPopupAction.cancel(),T.currentPopupAction=this}executeNotNull(){var w=this;return(0,_.Z)(function*(){const D=yield w.execute();return xe(D,w.auth,"internal-error"),D})()}onExecution(){var w=this;return(0,_.Z)(function*(){he(1===w.filter.length,"Popup operations only handle one event");const D=mi();w.authWindow=yield w.resolver._openPopup(w.auth,w.provider,w.filter[0],D),w.authWindow.associatedEvent=D,w.resolver._originValidation(w.auth).catch(M=>{w.reject(M)}),w.resolver._isIframeWebStorageSupported(w.auth,M=>{M||w.reject(Fe(w.auth,"web-storage-unsupported"))}),w.pollUserCancellation()})()}get eventId(){var w;return(null===(w=this.authWindow)||void 0===w?void 0:w.associatedEvent)||null}cancel(){this.reject(Fe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,T.currentPopupAction=null}pollUserCancellation(){const w=()=>{var D,M;this.pollId=(null===(M=null===(D=this.authWindow)||void 0===D?void 0:D.window)||void 0===M?void 0:M.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Fe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(w,Mo.get())};w()}}return T.currentPopupAction=null,T})();const Ja=new Map;class Xa extends ca{constructor(v,w,D=!1){super(v,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],w,void 0,D),this.eventId=null}execute(){var v=()=>super.execute,w=this;return(0,_.Z)(function*(){let D=Ja.get(w.auth._key());if(!D){try{const H=(yield function(T,v){return x.apply(this,arguments)}(w.resolver,w.auth))?yield v().call(w):null;D=()=>Promise.resolve(H)}catch(M){D=()=>Promise.reject(M)}Ja.set(w.auth._key(),D)}return D()})()}onAuthEvent(v){var w=()=>super.onAuthEvent,D=this;return(0,_.Z)(function*(){if("signInViaRedirect"===v.type)return w().call(D,v);if("unknown"!==v.type){if(v.eventId){const M=yield D.auth._redirectUserForId(v.eventId);if(M)return D.user=M,w().call(D,v);D.resolve(null)}}else D.resolve(null)})()}onExecution(){return(0,_.Z)(function*(){})()}cleanUp(){}}function x(){return(x=(0,_.Z)(function*(T,v){const w=je(v),D="true"===(yield Ie(T)._get(w));return yield Ie(T)._remove(w),D})).apply(this,arguments)}function k(T,v){return q.apply(this,arguments)}function q(){return(q=(0,_.Z)(function*(T,v){return Ie(T)._set(je(v),"true")})).apply(this,arguments)}function oe(){Ja.clear()}function Ie(T){return Te(T._redirectPersistence)}function je(T){return ae("pendingRedirect",T.config.apiKey,T.name)}function Qe(T,v,w){return function(T,v,w){return Ht.apply(this,arguments)}(T,v,w)}function Ht(){return(Ht=(0,_.Z)(function*(T,v,w){const D=En(T);Ct(T,v,ns);const M=Ln(D,w);return yield k(M,D),M._openRedirect(D,v,"signInViaRedirect")})).apply(this,arguments)}function kn(T,v,w){return function(T,v,w){return Mr.apply(this,arguments)}(T,v,w)}function Mr(){return(Mr=(0,_.Z)(function*(T,v,w){const D=(0,z.m9)(T);Ct(D.auth,v,ns);const M=Ln(D.auth,w);yield k(M,D.auth);const H=yield Hl(D);return M._openRedirect(D.auth,v,"reauthViaRedirect",H)})).apply(this,arguments)}function Vn(T,v,w){return function(T,v,w){return ha.apply(this,arguments)}(T,v,w)}function ha(){return(ha=(0,_.Z)(function*(T,v,w){const D=(0,z.m9)(T);Ct(D.auth,v,ns);const M=Ln(D.auth,w);yield Ba(!1,D,v.providerId),yield k(M,D.auth);const H=yield Hl(D);return M._openRedirect(D.auth,v,"linkViaRedirect",H)})).apply(this,arguments)}function fa(T,v){return us.apply(this,arguments)}function us(){return(us=(0,_.Z)(function*(T,v){return yield En(T)._initializationPromise,pa(T,v,!1)})).apply(this,arguments)}function pa(T,v){return ko.apply(this,arguments)}function ko(){return(ko=(0,_.Z)(function*(T,v,w=!1){const D=En(T),M=Ln(D,v),fe=yield new Xa(D,M,w).execute();return fe&&!w&&(delete fe.user._redirectEventId,yield D._persistUserIfCurrent(fe.user),yield D._setRedirectUser(null,v)),fe})).apply(this,arguments)}function Hl(T){return tl.apply(this,arguments)}function tl(){return(tl=(0,_.Z)(function*(T){const v=mi(`${T.uid}:::`);return T._redirectEventId=v,yield T.auth._setRedirectUser(T),yield T.auth._persistUserIfCurrent(T),v})).apply(this,arguments)}class tn{constructor(v){this.auth=v,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(v){this.consumers.add(v),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,v)&&(this.sendToConsumer(this.queuedRedirectEvent,v),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(v){this.consumers.delete(v)}onEvent(v){if(this.hasEventBeenHandled(v))return!1;let w=!1;return this.consumers.forEach(D=>{this.isEventForConsumer(v,D)&&(w=!0,this.sendToConsumer(v,D),this.saveEventToCache(v))}),this.hasHandledPotentialRedirect||!function(T){switch(T.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return aE(T);default:return!1}}(v)||(this.hasHandledPotentialRedirect=!0,w||(this.queuedRedirectEvent=v,w=!0)),w}sendToConsumer(v,w){var D;if(v.error&&!aE(v)){const M=(null===(D=v.error.code)||void 0===D?void 0:D.split("auth/")[1])||"internal-error";w.onError(Fe(this.auth,M))}else w.onAuthEvent(v)}isEventForConsumer(v,w){const D=null===w.eventId||!!v.eventId&&v.eventId===w.eventId;return w.filter.includes(v.type)&&D}hasEventBeenHandled(v){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Gl(v))}saveEventToCache(v){this.cachedEventUids.add(Gl(v)),this.lastProcessedEventTime=Date.now()}}function Gl(T){return[T.type,T.eventId,T.sessionId,T.tenantId].filter(v=>v).join("-")}function aE({type:T,error:v}){return"unknown"===T&&"auth/no-auth-event"===(null==v?void 0:v.code)}function Uu(T){return Xp.apply(this,arguments)}function Xp(){return(Xp=(0,_.Z)(function*(T,v={}){return Pn(T,"GET","/v1/projects",v)})).apply(this,arguments)}const md=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_d=/^https?/;function Fo(){return(Fo=(0,_.Z)(function*(T){if(T.config.emulator)return;const{authorizedDomains:v}=yield Uu(T);for(const w of v)try{if(Zs(w))return}catch(D){}Ee(T,"unauthorized-domain")})).apply(this,arguments)}function Zs(T){const v=be(),{protocol:w,hostname:D}=new URL(v);if(T.startsWith("chrome-extension://")){const fe=new URL(T);return""===fe.hostname&&""===D?"chrome-extension:"===w&&T.replace("chrome-extension://","")===v.replace("chrome-extension://",""):"chrome-extension:"===w&&fe.hostname===D}if(!_d.test(w))return!1;if(md.test(T))return D===T;const M=T.replace(/\./g,"\\.");return new RegExp("^(.+\\."+M+"|"+M+")$","i").test(D)}const Bu=new Dt(3e4,6e4);function Lo(){const T=Wn().___jsl;if(null==T?void 0:T.H)for(const v of Object.keys(T.H))if(T.H[v].r=T.H[v].r||[],T.H[v].L=T.H[v].L||[],T.H[v].r=[...T.H[v].L],T.CP)for(let w=0;w<T.CP.length;w++)T.CP[w]=null}let yd=null;function Jh(T){return yd=yd||function(T){return new Promise((v,w)=>{var D,M,H;function fe(){Lo(),gapi.load("gapi.iframes",{callback:()=>{v(gapi.iframes.getContext())},ontimeout:()=>{Lo(),w(Fe(T,"network-request-failed"))},timeout:Bu.get()})}if(null===(M=null===(D=Wn().gapi)||void 0===D?void 0:D.iframes)||void 0===M?void 0:M.Iframe)v(gapi.iframes.getContext());else{if(!(null===(H=Wn().gapi)||void 0===H?void 0:H.load)){const Be=zs("iframefcb");return Wn()[Be]=()=>{gapi.load?fe():w(Fe(T,"network-request-failed"))},mt(`https://apis.google.com/js/api.js?onload=${Be}`)}fe()}}).catch(v=>{throw yd=null,v})}(T),yd}const vd=new Dt(5e3,15e3),lE={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},nl=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ql(T){const v=T.config;xe(v.authDomain,T,"auth-domain-config-required");const w=v.emulator?Ot(v,"emulator/auth/iframe"):`https://${T.config.authDomain}/__/auth/iframe`,D={apiKey:v.apiKey,appName:T.name,v:L.SDK_VERSION},M=nl.get(T.config.apiHost);M&&(D.eid=M);const H=T._getFrameworks();return H.length&&(D.fw=H.join(",")),`${w}?${(0,z.xO)(D).slice(1)}`}function Or(){return(Or=(0,_.Z)(function*(T){const v=yield Jh(T),w=Wn().gapi;return xe(w,T,"internal-error"),v.open({where:document.body,url:ql(T),messageHandlersFilter:w.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:lE,dontclear:!0},D=>new Promise(function(){var M=(0,_.Z)(function*(H,fe){yield D.restyle({setHideOnLeave:!1});const Be=Fe(T,"network-request-failed"),at=Wn().setTimeout(()=>{fe(Be)},vd.get());function Et(){Wn().clearTimeout(at),H(D)}D.ping(Et).then(Et,()=>{fe(Be)})});return function(H,fe){return M.apply(this,arguments)}}()))})).apply(this,arguments)}const Br={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class tg{constructor(v){this.window=v,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(v){}}}function ig(T,v,w,D,M,H){xe(T.config.authDomain,T,"auth-domain-config-required"),xe(T.config.apiKey,T,"invalid-api-key");const fe={apiKey:T.config.apiKey,appName:T.name,authType:w,redirectUrl:D,v:L.SDK_VERSION,eventId:M};if(v instanceof ns){v.setDefaultLanguage(T.languageCode),fe.providerId=v.providerId||"",(0,z.xb)(v.getCustomParameters())||(fe.customParameters=JSON.stringify(v.getCustomParameters()));for(const[at,Et]of Object.entries(H||{}))fe[at]=Et}if(v instanceof wo){const at=v.getScopes().filter(Et=>""!==Et);at.length>0&&(fe.scopes=at.join(","))}T.tenantId&&(fe.tid=T.tenantId);const Be=fe;for(const at of Object.keys(Be))void 0===Be[at]&&delete Be[at];return`${function({config:T}){return T.emulator?Ot(T,"emulator/auth/handler"):`https://${T.authDomain}/__/auth/handler`}(T)}?${(0,z.xO)(Be).slice(1)}`}const Wl="webStorageSupport",ju=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zp,this._completeRedirectFn=pa}_openPopup(v,w,D,M){var H=this;return(0,_.Z)(function*(){var fe;he(null===(fe=H.eventManagers[v._key()])||void 0===fe?void 0:fe.manager,"_initialize() not called before _openPopup()");const Be=ig(v,w,D,be(),M);return function(T,v,w,D=500,M=600){const H=Math.max((window.screen.availHeight-M)/2,0).toString(),fe=Math.max((window.screen.availWidth-D)/2,0).toString();let Be="";const at=Object.assign(Object.assign({},Br),{width:D.toString(),height:M.toString(),top:H,left:fe}),Et=(0,z.z$)().toLowerCase();w&&(Be=Rt(Et)?"_blank":w),Le(Et)&&(v=v||"http://localhost",at.scrollbars="yes");const Qt=Object.entries(at).reduce((Vo,[xs,Qs])=>`${Vo}${xs}=${Qs},`,"");if(function(T=(0,z.z$)()){var v;return Tn(T)&&!!(null===(v=window.navigator)||void 0===v?void 0:v.standalone)}(Et)&&"_self"!==Be)return function(T,v){const w=document.createElement("a");w.href=T,w.target=v;const D=document.createEvent("MouseEvent");D.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),w.dispatchEvent(D)}(v||"",Be),new tg(null);const rn=window.open(v||"",Be,Qt);xe(rn,T,"popup-blocked");try{rn.focus()}catch(Vo){}return new tg(rn)}(v,Be,mi())})()}_openRedirect(v,w,D,M){var H=this;return(0,_.Z)(function*(){return yield H._originValidation(v),T=ig(v,w,D,be(),M),Wn().location.href=T,new Promise(()=>{});var T})()}_initialize(v){const w=v._key();if(this.eventManagers[w]){const{manager:M,promise:H}=this.eventManagers[w];return M?Promise.resolve(M):(he(H,"If manager is not set, promise should be"),H)}const D=this.initAndGetManager(v);return this.eventManagers[w]={promise:D},D}initAndGetManager(v){var w=this;return(0,_.Z)(function*(){const D=yield function(T){return Or.apply(this,arguments)}(v),M=new tn(v);return D.register("authEvent",H=>(xe(null==H?void 0:H.authEvent,v,"invalid-auth-event"),{status:M.onEvent(H.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),w.eventManagers[v._key()]={manager:M},w.iframes[v._key()]=D,M})()}_isIframeWebStorageSupported(v,w){this.iframes[v._key()].send(Wl,{type:Wl},M=>{var H;const fe=null===(H=null==M?void 0:M[0])||void 0===H?void 0:H[Wl];void 0!==fe&&w(!!fe),Ee(v,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(v){const w=v._key();return this.originValidationPromises[w]||(this.originValidationPromises[w]=function(T){return Fo.apply(this,arguments)}(v)),this.originValidationPromises[w]}get _shouldInitProactively(){return ci()||Ke()||Tn()}};class $u extends class{constructor(v){this.factorId=v}_process(v,w,D){switch(w.type){case"enroll":return this._finalizeEnroll(v,w.credential,D);case"signin":return this._finalizeSignIn(v,w.credential);default:return Zt("unexpected MultiFactorSessionType")}}}{constructor(v){super("phone"),this.credential=v}static _fromCredential(v){return new $u(v)}_finalizeEnroll(v,w,D){return function(T,v){return Pn(T,"POST","/v2/accounts/mfaEnrollment:finalize",wt(T,v))}(v,{idToken:w,displayName:D,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(v,w){return function(T,v){return Pn(T,"POST","/v2/accounts/mfaSignIn:finalize",wt(T,v))}(v,{mfaPendingCredential:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let il=(()=>{class T{constructor(){}static assertion(w){return $u._fromCredential(w)}}return T.FACTOR_ID="phone",T})();var T;class y_{constructor(v){this.auth=v,this.internalListeners=new Map}getUid(){var v;return this.assertAuthConfigured(),(null===(v=this.auth.currentUser)||void 0===v?void 0:v.uid)||null}getToken(v){var w=this;return(0,_.Z)(function*(){return w.assertAuthConfigured(),yield w.auth._initializationPromise,w.auth.currentUser?{accessToken:yield w.auth.currentUser.getIdToken(v)}:null})()}addAuthTokenListener(v){if(this.assertAuthConfigured(),this.internalListeners.has(v))return;const w=this.auth.onIdTokenChanged(D=>{var M;v((null===(M=D)||void 0===M?void 0:M.stsTokenManager.accessToken)||null)});this.internalListeners.set(v,w),this.updateProactiveRefresh()}removeAuthTokenListener(v){this.assertAuthConfigured();const w=this.internalListeners.get(v);!w||(this.internalListeners.delete(v),w(),this.updateProactiveRefresh())}assertAuthConfigured(){xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}T="Browser",(0,L._registerComponent)(new ie.wA("auth",(v,{options:w})=>{const D=v.getProvider("app").getImmediate(),{apiKey:M,authDomain:H}=D.options;return(fe=>{xe(M&&!M.includes(":"),"invalid-api-key",{appName:fe.name}),xe(!(null==H?void 0:H.includes(":")),"argument-error",{appName:fe.name});const Be={apiKey:M,authDomain:H,clientPlatform:T,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$t(T)},at=new In(fe,Be);return function(T,v){const w=(null==v?void 0:v.persistence)||[],D=(Array.isArray(w)?w:[w]).map(Te);(null==v?void 0:v.errorMap)&&T._updateErrorMap(v.errorMap),T._initializeWithPersistence(D,null==v?void 0:v.popupRedirectResolver)}(at,w),at})(D)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((v,w,D)=>{v.getProvider("auth-internal").initialize()})),(0,L._registerComponent)(new ie.wA("auth-internal",v=>{const w=En(v.getProvider("auth").getImmediate());return new y_(w)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,L.registerVersion)("@firebase/auth","0.18.2",void 0)},6034:(lt,ke,$)=>{"use strict";$.d(ke,{wA:()=>L,H0:()=>re,zt:()=>de});var _=$(4762),z=$(3854),L=function(){function ne(j,G,K){this.name=j,this.instanceFactory=G,this.type=K,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return ne.prototype.setInstantiationMode=function(j){return this.instantiationMode=j,this},ne.prototype.setMultipleInstances=function(j){return this.multipleInstances=j,this},ne.prototype.setServiceProps=function(j){return this.serviceProps=j,this},ne.prototype.setInstanceCreatedCallback=function(j){return this.onInstanceCreated=j,this},ne}(),_e="[DEFAULT]",de=function(){function ne(j,G){this.name=j,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return ne.prototype.get=function(j){var G=this.normalizeInstanceIdentifier(j);if(!this.instancesDeferred.has(G)){var K=new z.BH;if(this.instancesDeferred.set(G,K),this.isInitialized(G)||this.shouldAutoInitialize())try{var ce=this.getOrInitializeService({instanceIdentifier:G});ce&&K.resolve(ce)}catch(ge){}}return this.instancesDeferred.get(G).promise},ne.prototype.getImmediate=function(j){var G,K=this.normalizeInstanceIdentifier(null==j?void 0:j.identifier),ce=null!==(G=null==j?void 0:j.optional)&&void 0!==G&&G;if(!this.isInitialized(K)&&!this.shouldAutoInitialize()){if(ce)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:K})}catch(ge){if(ce)return null;throw ge}},ne.prototype.getComponent=function(){return this.component},ne.prototype.setComponent=function(j){var G,K;if(j.name!==this.name)throw Error("Mismatching Component "+j.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=j,this.shouldAutoInitialize()){if(function(ne){return"EAGER"===ne.instantiationMode}(j))try{this.getOrInitializeService({instanceIdentifier:_e})}catch(Ee){}try{for(var ce=(0,_.XA)(this.instancesDeferred.entries()),ge=ce.next();!ge.done;ge=ce.next()){var Ne=(0,_.CR)(ge.value,2),ye=Ne[1],se=this.normalizeInstanceIdentifier(Ne[0]);try{var me=this.getOrInitializeService({instanceIdentifier:se});ye.resolve(me)}catch(Ee){}}}catch(Ee){G={error:Ee}}finally{try{ge&&!ge.done&&(K=ce.return)&&K.call(ce)}finally{if(G)throw G.error}}}},ne.prototype.clearInstance=function(j){void 0===j&&(j=_e),this.instancesDeferred.delete(j),this.instancesOptions.delete(j),this.instances.delete(j)},ne.prototype.delete=function(){return(0,_.mG)(this,void 0,void 0,function(){var j;return(0,_.Jh)(this,function(G){switch(G.label){case 0:return j=Array.from(this.instances.values()),[4,Promise.all((0,_.ev)((0,_.ev)([],(0,_.CR)(j.filter(function(K){return"INTERNAL"in K}).map(function(K){return K.INTERNAL.delete()}))),(0,_.CR)(j.filter(function(K){return"_delete"in K}).map(function(K){return K._delete()}))))];case 1:return G.sent(),[2]}})})},ne.prototype.isComponentSet=function(){return null!=this.component},ne.prototype.isInitialized=function(j){return void 0===j&&(j=_e),this.instances.has(j)},ne.prototype.getOptions=function(j){return void 0===j&&(j=_e),this.instancesOptions.get(j)||{}},ne.prototype.initialize=function(j){var G,K;void 0===j&&(j={});var ce=j.options,ge=void 0===ce?{}:ce,Ne=this.normalizeInstanceIdentifier(j.instanceIdentifier);if(this.isInitialized(Ne))throw Error(this.name+"("+Ne+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var Ce=this.getOrInitializeService({instanceIdentifier:Ne,options:ge});try{for(var ye=(0,_.XA)(this.instancesDeferred.entries()),se=ye.next();!se.done;se=ye.next()){var me=(0,_.CR)(se.value,2),Fe=me[1];Ne===this.normalizeInstanceIdentifier(me[0])&&Fe.resolve(Ce)}}catch(Ct){G={error:Ct}}finally{try{se&&!se.done&&(K=ye.return)&&K.call(ye)}finally{if(G)throw G.error}}return Ce},ne.prototype.onInit=function(j,G){var K,ce=this.normalizeInstanceIdentifier(G),ge=null!==(K=this.onInitCallbacks.get(ce))&&void 0!==K?K:new Set;ge.add(j),this.onInitCallbacks.set(ce,ge);var Ne=this.instances.get(ce);return Ne&&j(Ne,ce),function(){ge.delete(j)}},ne.prototype.invokeOnInitCallbacks=function(j,G){var K,ce,ge=this.onInitCallbacks.get(G);if(ge)try{for(var Ne=(0,_.XA)(ge),Ce=Ne.next();!Ce.done;Ce=Ne.next()){var ye=Ce.value;try{ye(j,G)}catch(se){}}}catch(se){K={error:se}}finally{try{Ce&&!Ce.done&&(ce=Ne.return)&&ce.call(Ne)}finally{if(K)throw K.error}}},ne.prototype.getOrInitializeService=function(j){var G=j.instanceIdentifier,K=j.options,ce=void 0===K?{}:K,ge=this.instances.get(G);if(!ge&&this.component&&(ge=this.component.instanceFactory(this.container,{instanceIdentifier:ie(G),options:ce}),this.instances.set(G,ge),this.instancesOptions.set(G,ce),this.invokeOnInitCallbacks(ge,G),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,G,ge)}catch(Ne){}return ge||null},ne.prototype.normalizeInstanceIdentifier=function(j){return void 0===j&&(j=_e),this.component?this.component.multipleInstances?j:_e:j},ne.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},ne}();function ie(ne){return ne===_e?void 0:ne}var re=function(){function ne(j){this.name=j,this.providers=new Map}return ne.prototype.addComponent=function(j){var G=this.getProvider(j.name);if(G.isComponentSet())throw new Error("Component "+j.name+" has already been registered with "+this.name);G.setComponent(j)},ne.prototype.addOrOverwriteComponent=function(j){this.getProvider(j.name).isComponentSet()&&this.providers.delete(j.name),this.addComponent(j)},ne.prototype.getProvider=function(j){if(this.providers.has(j))return this.providers.get(j);var G=new de(j,this);return this.providers.set(j,G),G},ne.prototype.getProviders=function(){return Array.from(this.providers.values())},ne}()},5601:(lt,ke,$)=>{"use strict";$.d(ke,{in:()=>z,Yd:()=>Re,Ub:()=>re,Am:()=>ne});const _=[];var z=(()=>{return(j=z||(z={}))[j.DEBUG=0]="DEBUG",j[j.VERBOSE=1]="VERBOSE",j[j.INFO=2]="INFO",j[j.WARN=3]="WARN",j[j.ERROR=4]="ERROR",j[j.SILENT=5]="SILENT",z;var j})();const L={debug:z.DEBUG,verbose:z.VERBOSE,info:z.INFO,warn:z.WARN,error:z.ERROR,silent:z.SILENT},_e=z.INFO,de={[z.DEBUG]:"log",[z.VERBOSE]:"log",[z.INFO]:"info",[z.WARN]:"warn",[z.ERROR]:"error"},ie=(j,G,...K)=>{if(G<j.logLevel)return;const ce=(new Date).toISOString(),ge=de[G];if(!ge)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[ge](`[${ce}]  ${j.name}:`,...K)};class Re{constructor(G){this.name=G,this._logLevel=_e,this._logHandler=ie,this._userLogHandler=null,_.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in z))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?L[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,z.DEBUG,...G),this._logHandler(this,z.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,z.VERBOSE,...G),this._logHandler(this,z.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,z.INFO,...G),this._logHandler(this,z.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,z.WARN,...G),this._logHandler(this,z.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,z.ERROR,...G),this._logHandler(this,z.ERROR,...G)}}function re(j){_.forEach(G=>{G.setLogLevel(j)})}function ne(j,G){for(const K of _){let ce=null;G&&G.level&&(ce=L[G.level]),K.userLogHandler=null===j?null:(ge,Ne,...Ce)=>{const ye=Ce.map(se=>{if(null==se)return null;if("string"==typeof se)return se;if("number"==typeof se||"boolean"==typeof se)return se.toString();if(se instanceof Error)return se.message;try{return JSON.stringify(se)}catch(me){return null}}).filter(se=>se).join(" ");Ne>=(null!=ce?ce:ge.logLevel)&&j({level:z[Ne].toLowerCase(),message:ye,args:Ce,type:ge.name})}}}},3854:(lt,ke,$)=>{"use strict";$.d(ke,{BH:()=>ce,LL:()=>be,ZR:()=>He,gQ:()=>Xn,zI:()=>we,hu:()=>z,g5:()=>L,US:()=>ie,tV:()=>ne,h$:()=>Re,$s:()=>Ii,r3:()=>wt,Sg:()=>ge,ne:()=>es,p$:()=>j,vZ:()=>ir,ZB:()=>G,gK:()=>ht,pd:()=>ki,m9:()=>po,z$:()=>Ne,GJ:()=>Vr,jU:()=>se,ru:()=>me,d:()=>Fe,xb:()=>Mn,w1:()=>nt,hl:()=>Zt,uI:()=>Ce,UG:()=>ye,Yr:()=>Vt,b$:()=>Ee,G6:()=>xe,Mn:()=>Ct,w9:()=>Sr,cI:()=>Hn,UI:()=>_r,xO:()=>Bs,zd:()=>ws,DV:()=>Pn,ug:()=>ln,dS:()=>ur,Pz:()=>xt,Dv:()=>lr,Wj:()=>Ut,lb:()=>Lt,eu:()=>he});const z=function(Q,Y){if(!Q)throw L(Y)},L=function(Q){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+Q)},_e=function(Q){const Y=[];let X=0;for(let Me=0;Me<Q.length;Me++){let pe=Q.charCodeAt(Me);pe<128?Y[X++]=pe:pe<2048?(Y[X++]=pe>>6|192,Y[X++]=63&pe|128):55296==(64512&pe)&&Me+1<Q.length&&56320==(64512&Q.charCodeAt(Me+1))?(pe=65536+((1023&pe)<<10)+(1023&Q.charCodeAt(++Me)),Y[X++]=pe>>18|240,Y[X++]=pe>>12&63|128,Y[X++]=pe>>6&63|128,Y[X++]=63&pe|128):(Y[X++]=pe>>12|224,Y[X++]=pe>>6&63|128,Y[X++]=63&pe|128)}return Y},ie={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Q,Y){if(!Array.isArray(Q))throw Error("encodeByteArray takes an array as a parameter");this.init_();const X=Y?this.byteToCharMapWebSafe_:this.byteToCharMap_,Me=[];for(let pe=0;pe<Q.length;pe+=3){const et=Q[pe],vt=pe+1<Q.length,Bt=vt?Q[pe+1]:0,Cn=pe+2<Q.length,cr=Cn?Q[pe+2]:0;let J=(15&Bt)<<2|cr>>6,ee=63&cr;Cn||(ee=64,vt||(J=64)),Me.push(X[et>>2],X[(3&et)<<4|Bt>>4],X[J],X[ee])}return Me.join("")},encodeString(Q,Y){return this.HAS_NATIVE_SUPPORT&&!Y?btoa(Q):this.encodeByteArray(_e(Q),Y)},decodeString(Q,Y){return this.HAS_NATIVE_SUPPORT&&!Y?atob(Q):function(Q){const Y=[];let X=0,Me=0;for(;X<Q.length;){const pe=Q[X++];if(pe<128)Y[Me++]=String.fromCharCode(pe);else if(pe>191&&pe<224){const et=Q[X++];Y[Me++]=String.fromCharCode((31&pe)<<6|63&et)}else if(pe>239&&pe<365){const Cn=((7&pe)<<18|(63&Q[X++])<<12|(63&Q[X++])<<6|63&Q[X++])-65536;Y[Me++]=String.fromCharCode(55296+(Cn>>10)),Y[Me++]=String.fromCharCode(56320+(1023&Cn))}else{const et=Q[X++],vt=Q[X++];Y[Me++]=String.fromCharCode((15&pe)<<12|(63&et)<<6|63&vt)}}return Y.join("")}(this.decodeStringToByteArray(Q,Y))},decodeStringToByteArray(Q,Y){this.init_();const X=Y?this.charToByteMapWebSafe_:this.charToByteMap_,Me=[];for(let pe=0;pe<Q.length;){const et=X[Q.charAt(pe++)],Bt=pe<Q.length?X[Q.charAt(pe)]:0;++pe;const cr=pe<Q.length?X[Q.charAt(pe)]:64;++pe;const ae=pe<Q.length?X[Q.charAt(pe)]:64;if(++pe,null==et||null==Bt||null==cr||null==ae)throw Error();Me.push(et<<2|Bt>>4),64!==cr&&(Me.push(Bt<<4&240|cr>>2),64!==ae&&Me.push(cr<<6&192|ae))}return Me},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Q=0;Q<this.ENCODED_VALS.length;Q++)this.byteToCharMap_[Q]=this.ENCODED_VALS.charAt(Q),this.charToByteMap_[this.byteToCharMap_[Q]]=Q,this.byteToCharMapWebSafe_[Q]=this.ENCODED_VALS_WEBSAFE.charAt(Q),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Q]]=Q,Q>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Q)]=Q,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Q)]=Q)}}},Re=function(Q){const Y=_e(Q);return ie.encodeByteArray(Y,!0)},re=function(Q){return Re(Q).replace(/\./g,"")},ne=function(Q){try{return ie.decodeString(Q,!0)}catch(Y){console.error("base64Decode failed: ",Y)}return null};function j(Q){return G(void 0,Q)}function G(Q,Y){if(!(Y instanceof Object))return Y;switch(Y.constructor){case Date:return new Date(Y.getTime());case Object:void 0===Q&&(Q={});break;case Array:Q=[];break;default:return Y}for(const X in Y)!Y.hasOwnProperty(X)||!K(X)||(Q[X]=G(Q[X],Y[X]));return Q}function K(Q){return"__proto__"!==Q}class ce{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Y,X)=>{this.resolve=Y,this.reject=X})}wrapCallback(Y){return(X,Me)=>{X?this.reject(X):this.resolve(Me),"function"==typeof Y&&(this.promise.catch(()=>{}),1===Y.length?Y(X):Y(X,Me))}}}function ge(Q,Y){if(Q.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Me=Y||"demo-project",pe=Q.iat||0,et=Q.sub||Q.user_id;if(!et)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const vt=Object.assign({iss:`https://securetoken.google.com/${Me}`,aud:Me,iat:pe,exp:pe+3600,auth_time:pe,sub:et,user_id:et,firebase:{sign_in_provider:"custom",identities:{}}},Q);return[re(JSON.stringify({alg:"none",type:"JWT"})),re(JSON.stringify(vt)),""].join(".")}function Ne(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ce(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ne())}function ye(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(Q){return!1}}function se(){return"object"==typeof self&&self.self===self}function me(){const Q="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Q&&void 0!==Q.id}function Ee(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Fe(){return Ne().indexOf("Electron/")>=0}function nt(){const Q=Ne();return Q.indexOf("MSIE ")>=0||Q.indexOf("Trident/")>=0}function Ct(){return Ne().indexOf("MSAppHost/")>=0}function Vt(){return!1}function xe(){return!ye()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Zt(){return"object"==typeof indexedDB}function he(){return new Promise((Q,Y)=>{try{let X=!0;const Me="validate-browser-context-for-indexeddb-analytics-module",pe=self.indexedDB.open(Me);pe.onsuccess=()=>{pe.result.close(),X||self.indexedDB.deleteDatabase(Me),Q(!0)},pe.onupgradeneeded=()=>{X=!1},pe.onerror=()=>{var et;Y((null===(et=pe.error)||void 0===et?void 0:et.message)||"")}}catch(X){Y(X)}})}function we(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class He extends Error{constructor(Y,X,Me){super(X),this.code=Y,this.customData=Me,this.name="FirebaseError",Object.setPrototypeOf(this,He.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,be.prototype.create)}}class be{constructor(Y,X,Me){this.service=Y,this.serviceName=X,this.errors=Me}create(Y,...X){const Me=X[0]||{},pe=`${this.service}/${Y}`,et=this.errors[Y],vt=et?function(Q,Y){return Q.replace(gn,(X,Me)=>{const pe=Y[Me];return null!=pe?String(pe):`<${Me}?>`})}(et,Me):"Error";return new He(pe,`${this.serviceName}: ${vt} (${pe}).`,Me)}}const gn=/\{\$([^}]+)}/g;function Hn(Q){return JSON.parse(Q)}function xt(Q){return JSON.stringify(Q)}const Dt=function(Q){let Y={},X={},Me={},pe="";try{const et=Q.split(".");Y=Hn(ne(et[0])||""),X=Hn(ne(et[1])||""),pe=et[2],Me=X.d||{},delete X.d}catch(et){}return{header:Y,claims:X,data:Me,signature:pe}},Sr=function(Q){const X=Dt(Q).claims;return!!X&&"object"==typeof X&&X.hasOwnProperty("iat")},Vr=function(Q){const Y=Dt(Q).claims;return"object"==typeof Y&&!0===Y.admin};function wt(Q,Y){return Object.prototype.hasOwnProperty.call(Q,Y)}function Pn(Q,Y){if(Object.prototype.hasOwnProperty.call(Q,Y))return Q[Y]}function Mn(Q){for(const Y in Q)if(Object.prototype.hasOwnProperty.call(Q,Y))return!1;return!0}function _r(Q,Y,X){const Me={};for(const pe in Q)Object.prototype.hasOwnProperty.call(Q,pe)&&(Me[pe]=Y.call(X,Q[pe],pe,Q));return Me}function ir(Q,Y){if(Q===Y)return!0;const X=Object.keys(Q),Me=Object.keys(Y);for(const pe of X){if(!Me.includes(pe))return!1;const et=Q[pe],vt=Y[pe];if(Ur(et)&&Ur(vt)){if(!ir(et,vt))return!1}else if(et!==vt)return!1}for(const pe of Me)if(!X.includes(pe))return!1;return!0}function Ur(Q){return null!==Q&&"object"==typeof Q}function Bs(Q){const Y=[];for(const[X,Me]of Object.entries(Q))Array.isArray(Me)?Me.forEach(pe=>{Y.push(encodeURIComponent(X)+"="+encodeURIComponent(pe))}):Y.push(encodeURIComponent(X)+"="+encodeURIComponent(Me));return Y.length?"&"+Y.join("&"):""}function ws(Q){const Y={};return Q.replace(/^\?/,"").split("&").forEach(Me=>{if(Me){const[pe,et]=Me.split("=");Y[decodeURIComponent(pe)]=decodeURIComponent(et)}}),Y}function ki(Q){const Y=Q.indexOf("?");if(!Y)return"";const X=Q.indexOf("#",Y);return Q.substring(Y,X>0?X:void 0)}class Xn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Y=1;Y<this.blockSize;++Y)this.pad_[Y]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Y,X){X||(X=0);const Me=this.W_;if("string"==typeof Y)for(let ae=0;ae<16;ae++)Me[ae]=Y.charCodeAt(X)<<24|Y.charCodeAt(X+1)<<16|Y.charCodeAt(X+2)<<8|Y.charCodeAt(X+3),X+=4;else for(let ae=0;ae<16;ae++)Me[ae]=Y[X]<<24|Y[X+1]<<16|Y[X+2]<<8|Y[X+3],X+=4;for(let ae=16;ae<80;ae++){const J=Me[ae-3]^Me[ae-8]^Me[ae-14]^Me[ae-16];Me[ae]=4294967295&(J<<1|J>>>31)}let cr,dr,pe=this.chain_[0],et=this.chain_[1],vt=this.chain_[2],Bt=this.chain_[3],Cn=this.chain_[4];for(let ae=0;ae<80;ae++){ae<40?ae<20?(cr=Bt^et&(vt^Bt),dr=1518500249):(cr=et^vt^Bt,dr=1859775393):ae<60?(cr=et&vt|Bt&(et|vt),dr=2400959708):(cr=et^vt^Bt,dr=3395469782);const J=(pe<<5|pe>>>27)+cr+Cn+dr+Me[ae]&4294967295;Cn=Bt,Bt=vt,vt=4294967295&(et<<30|et>>>2),et=pe,pe=J}this.chain_[0]=this.chain_[0]+pe&4294967295,this.chain_[1]=this.chain_[1]+et&4294967295,this.chain_[2]=this.chain_[2]+vt&4294967295,this.chain_[3]=this.chain_[3]+Bt&4294967295,this.chain_[4]=this.chain_[4]+Cn&4294967295}update(Y,X){if(null==Y)return;void 0===X&&(X=Y.length);const Me=X-this.blockSize;let pe=0;const et=this.buf_;let vt=this.inbuf_;for(;pe<X;){if(0===vt)for(;pe<=Me;)this.compress_(Y,pe),pe+=this.blockSize;if("string"==typeof Y){for(;pe<X;)if(et[vt]=Y.charCodeAt(pe),++vt,++pe,vt===this.blockSize){this.compress_(et),vt=0;break}}else for(;pe<X;)if(et[vt]=Y[pe],++vt,++pe,vt===this.blockSize){this.compress_(et),vt=0;break}}this.inbuf_=vt,this.total_+=X}digest(){const Y=[];let X=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let pe=this.blockSize-1;pe>=56;pe--)this.buf_[pe]=255&X,X/=256;this.compress_(this.buf_);let Me=0;for(let pe=0;pe<5;pe++)for(let et=24;et>=0;et-=8)Y[Me]=this.chain_[pe]>>et&255,++Me;return Y}}function es(Q,Y){const X=new Ti(Q,Y);return X.subscribe.bind(X)}class Ti{constructor(Y,X){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=X,this.task.then(()=>{Y(this)}).catch(Me=>{this.error(Me)})}next(Y){this.forEachObserver(X=>{X.next(Y)})}error(Y){this.forEachObserver(X=>{X.error(Y)}),this.close(Y)}complete(){this.forEachObserver(Y=>{Y.complete()}),this.close()}subscribe(Y,X,Me){let pe;if(void 0===Y&&void 0===X&&void 0===Me)throw new Error("Missing Observer.");pe=function(Q,Y){if("object"!=typeof Q||null===Q)return!1;for(const X of["next","error","complete"])if(X in Q&&"function"==typeof Q[X])return!0;return!1}(Y)?Y:{next:Y,error:X,complete:Me},void 0===pe.next&&(pe.next=Ar),void 0===pe.error&&(pe.error=Ar),void 0===pe.complete&&(pe.complete=Ar);const et=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?pe.error(this.finalError):pe.complete()}catch(vt){}}),this.observers.push(pe),et}unsubscribeOne(Y){void 0===this.observers||void 0===this.observers[Y]||(delete this.observers[Y],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Y){if(!this.finalized)for(let X=0;X<this.observers.length;X++)this.sendOne(X,Y)}sendOne(Y,X){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Y])try{X(this.observers[Y])}catch(Me){"undefined"!=typeof console&&console.error&&console.error(Me)}})}close(Y){this.finalized||(this.finalized=!0,void 0!==Y&&(this.finalError=Y),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ar(){}const lr=function(Q,Y,X,Me){let pe;if(Me<Y?pe="at least "+Y:Me>X&&(pe=0===X?"none":"no more than "+X),pe)throw new Error(Q+" failed: Was called with "+Me+(1===Me?" argument.":" arguments.")+" Expects "+pe+".")};function ht(Q,Y){return`${Q} failed: ${Y} argument `}function Ut(Q,Y,X,Me){if((!Me||X)&&"function"!=typeof X)throw new Error(ht(Q,Y)+"must be a valid function.")}function Lt(Q,Y,X,Me){if((!Me||X)&&("object"!=typeof X||null===X))throw new Error(ht(Q,Y)+"must be a valid context object.")}const ur=function(Q){const Y=[];let X=0;for(let Me=0;Me<Q.length;Me++){let pe=Q.charCodeAt(Me);if(pe>=55296&&pe<=56319){const et=pe-55296;Me++,z(Me<Q.length,"Surrogate pair missing trail surrogate."),pe=65536+(et<<10)+(Q.charCodeAt(Me)-56320)}pe<128?Y[X++]=pe:pe<2048?(Y[X++]=pe>>6|192,Y[X++]=63&pe|128):pe<65536?(Y[X++]=pe>>12|224,Y[X++]=pe>>6&63|128,Y[X++]=63&pe|128):(Y[X++]=pe>>18|240,Y[X++]=pe>>12&63|128,Y[X++]=pe>>6&63|128,Y[X++]=63&pe|128)}return Y},ln=function(Q){let Y=0;for(let X=0;X<Q.length;X++){const Me=Q.charCodeAt(X);Me<128?Y++:Me<2048?Y+=2:Me>=55296&&Me<=56319?(Y+=4,X++):Y+=3}return Y};function Ii(Q,Y=1e3,X=2){const Me=Y*Math.pow(X,Q),pe=Math.round(.5*Me*(Math.random()-.5)*2);return Math.min(144e5,Me+pe)}function po(Q){return Q&&Q._delegate?Q._delegate:Q}},2329:(lt,ke,$)=>{"use strict";$.d(ke,{Mq:()=>_.getApp,C6:()=>_.getApps});var _=$(5452);(0,_.registerVersion)("firebase","9.1.2","app")},7841:(lt,ke,$)=>{"use strict";$.d(ke,{Z:()=>_.Z});var _=$(4486);_.Z.registerVersion("firebase","9.1.2","app-compat")},4828:(lt,ke,$)=>{"use strict";$.r(ke);var _=$(8239),z=$(4486),L=$(1093),_e=$(3854),Re=($(5452),$(5601),$(6034));function re(){return window}function G(){return(G=(0,_.Z)(function*(ae,J,ee){var Le;const{BuildInfo:Ke}=re();(0,L.ap)(J.sessionId,"AuthEvent did not contain a session ID");const Rt=yield se(J.sessionId),Wt={};return(0,L.aq)()?Wt.ibi=Ke.packageName:(0,L.ar)()?Wt.apn=Ke.packageName:(0,L.as)(ae,"operation-not-supported-in-this-environment"),Ke.displayName&&(Wt.appDisplayName=Ke.displayName),Wt.sessionId=Rt,(0,L.at)(ae,ee,J.type,void 0,null!==(Le=J.eventId)&&void 0!==Le?Le:void 0,Wt)})).apply(this,arguments)}function ce(){return(ce=(0,_.Z)(function*(ae){const{BuildInfo:J}=re(),ee={};(0,L.aq)()?ee.iosBundleId=J.packageName:(0,L.ar)()?ee.androidPackageName=J.packageName:(0,L.as)(ae,"operation-not-supported-in-this-environment"),yield(0,L.au)(ae,ee)})).apply(this,arguments)}function Ce(){return(Ce=(0,_.Z)(function*(ae,J,ee){const{cordova:Le}=re();let Ke=()=>{};try{yield new Promise((Rt,Wt)=>{let Xt=null;function Gn(){var kt;Rt();const sr=null===(kt=Le.plugins.browsertab)||void 0===kt?void 0:kt.close;"function"==typeof sr&&sr(),"function"==typeof(null==ee?void 0:ee.close)&&ee.close()}function vn(){Xt||(Xt=window.setTimeout(()=>{Wt((0,L.av)(ae,"redirect-cancelled-by-user"))},2e3))}function Tn(){"visible"===(null==document?void 0:document.visibilityState)&&vn()}J.addPassiveListener(Gn),document.addEventListener("resume",vn,!1),(0,L.ar)()&&document.addEventListener("visibilitychange",Tn,!1),Ke=()=>{J.removePassiveListener(Gn),document.removeEventListener("resume",vn,!1),document.removeEventListener("visibilitychange",Tn,!1),Xt&&window.clearTimeout(Xt)}})}finally{Ke()}})).apply(this,arguments)}function se(ae){return me.apply(this,arguments)}function me(){return(me=(0,_.Z)(function*(ae){const J=Ee(ae),ee=yield crypto.subtle.digest("SHA-256",J);return Array.from(new Uint8Array(ee)).map(Ke=>Ke.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Ee(ae){if((0,L.ap)(/[0-9a-zA-Z]+/.test(ae),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(ae);const J=new ArrayBuffer(ae.length),ee=new Uint8Array(J);for(let Le=0;Le<ae.length;Le++)ee[Le]=ae.charCodeAt(Le);return ee}class nt extends L.az{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(J=>{this.resolveInialized=J})}addPassiveListener(J){this.passiveListeners.add(J)}removePassiveListener(J){this.passiveListeners.delete(J)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(J){return this.resolveInialized(),this.passiveListeners.forEach(ee=>ee(J)),super.onEvent(J)}initialized(){var J=this;return(0,_.Z)(function*(){yield J.initPromise})()}}function xe(ae){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,_.Z)(function*(ae){const J=yield Te()._get(Ae(ae));return J&&(yield Te()._remove(Ae(ae))),J})).apply(this,arguments)}function we(){const ae=[],J="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let ee=0;ee<20;ee++){const Le=Math.floor(Math.random()*J.length);ae.push(J.charAt(Le))}return ae.join("")}function Te(){return(0,L.ax)(L.b)}function Ae(ae){return(0,L.ay)("authEvent",ae.config.apiKey,ae.name)}function Tt(ae){if(!(null==ae?void 0:ae.includes("?")))return{};const[J,...ee]=ae.split("?");return(0,_e.zd)(ee.join("?"))}function Dt(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,L.av)("no-auth-event")}}function wt(){var ae;return(null===(ae=null==self?void 0:self.location)||void 0===ae?void 0:ae.protocol)||null}function Mn(ae=(0,_e.z$)()){return!("file:"!==wt()&&"ionic:"!==wt()||!ae.toLowerCase().match(/iphone|ipad|ipod|android/))}function ws(){try{const ae=self.localStorage,J=L.aG();if(ae)return ae.setItem(J,"1"),ae.removeItem(J),!function(ae=(0,_e.z$)()){return(0,_e.w1)()&&11===(null==document?void 0:document.documentMode)||function(ae=(0,_e.z$)()){return/Edge\/\d+/.test(ae)}(ae)}()||(0,_e.hl)()}catch(ae){return ki()&&(0,_e.hl)()}return!1}function ki(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Xn(){return("http:"===wt()||"https:"===wt()||(0,_e.ru)()||Mn())&&!((0,_e.b$)()||(0,_e.UG)())&&ws()&&!ki()}function es(){return Mn()&&"undefined"!=typeof document}function ot(){return(ot=(0,_.Z)(function*(){return!!es()&&new Promise(ae=>{const J=setTimeout(()=>{ae(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(J),ae(!0)})})})).apply(this,arguments)}const Yt={LOCAL:"local",NONE:"none",SESSION:"session"},Ar=L.aw,lr="persistence";function yt(ae){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,_.Z)(function*(ae){yield ae._initializationPromise;const J=ur(),ee=L.ay(lr,ae.config.apiKey,ae.name);(null==J?void 0:J.sessionStorage)&&J.sessionStorage.setItem(ee,ae._getPersistence())})).apply(this,arguments)}function ur(){return"undefined"!=typeof window?window:null}const ln=L.aw;class qe{constructor(){this.browserResolver=L.ax(L.k),this.cordovaResolver=L.ax(class{constructor(){this._redirectPersistence=L.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=L.aA}_initialize(J){var ee=this;return(0,_.Z)(function*(){const Le=J._key();let Ke=ee.eventManagers.get(Le);return Ke||(Ke=new nt(J),ee.eventManagers.set(Le,Ke),ee.attachCallbackListeners(J,Ke)),Ke})()}_openPopup(J){(0,L.as)(J,"operation-not-supported-in-this-environment")}_openRedirect(J,ee,Le,Ke){var Rt=this;return(0,_.Z)(function*(){!function(ae){var J,ee,Le,Ke,Rt,Wt,Xt,Gn,vn,Tn;const kt=re();(0,L.aw)("function"==typeof(null===(J=null==kt?void 0:kt.universalLinks)||void 0===J?void 0:J.subscribe),ae,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,L.aw)(void 0!==(null===(ee=null==kt?void 0:kt.BuildInfo)||void 0===ee?void 0:ee.packageName),ae,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,L.aw)("function"==typeof(null===(Rt=null===(Ke=null===(Le=null==kt?void 0:kt.cordova)||void 0===Le?void 0:Le.plugins)||void 0===Ke?void 0:Ke.browsertab)||void 0===Rt?void 0:Rt.openUrl),ae,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,L.aw)("function"==typeof(null===(Gn=null===(Xt=null===(Wt=null==kt?void 0:kt.cordova)||void 0===Wt?void 0:Wt.plugins)||void 0===Xt?void 0:Xt.browsertab)||void 0===Gn?void 0:Gn.isAvailable),ae,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,L.aw)("function"==typeof(null===(Tn=null===(vn=null==kt?void 0:kt.cordova)||void 0===vn?void 0:vn.InAppBrowser)||void 0===Tn?void 0:Tn.open),ae,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(J);const Wt=yield Rt._initialize(J);yield Wt.initialized(),Wt.resetRedirect(),(0,L.aB)(),yield Rt._originValidation(J);const Xt=function(ae,J,ee=null){return{type:J,eventId:ee,urlResponse:null,sessionId:we(),postBody:null,tenantId:ae.tenantId,error:(0,L.av)(ae,"no-auth-event")}}(J,Le,Ke);yield function(ae,J){return Te()._set(Ae(ae),J)}(J,Xt);const Gn=yield function(ae,J,ee){return G.apply(this,arguments)}(J,Xt,ee),vn=yield function(ae){const{cordova:J}=re();return new Promise(ee=>{J.plugins.browsertab.isAvailable(Le=>{let Ke=null;Le?J.plugins.browsertab.openUrl(ae):Ke=J.InAppBrowser.open(ae,(0,L.ao)()?"_blank":"_system","location=yes"),ee(Ke)})})}(Gn);return function(ae,J,ee){return Ce.apply(this,arguments)}(J,Wt,vn)})()}_isIframeWebStorageSupported(J,ee){throw new Error("Method not implemented.")}_originValidation(J){const ee=J._key();return this.originValidationPromises[ee]||(this.originValidationPromises[ee]=function(ae){return ce.apply(this,arguments)}(J)),this.originValidationPromises[ee]}attachCallbackListeners(J,ee){const{universalLinks:Le,handleOpenURL:Ke,BuildInfo:Rt}=re(),Wt=setTimeout((0,_.Z)(function*(){yield xe(J),ee.onEvent(Dt())}),500),Xt=function(){var Tn=(0,_.Z)(function*(kt){clearTimeout(Wt);const sr=yield xe(J);let ka=null;sr&&(null==kt?void 0:kt.url)&&(ka=function(ae,J){var ee,Le;const Ke=function(ae){const J=Tt(ae),ee=J.link?decodeURIComponent(J.link):void 0,Le=Tt(ee).link,Ke=J.deep_link_id?decodeURIComponent(J.deep_link_id):void 0;return Tt(Ke).link||Ke||Le||ee||ae}(J);if(Ke.includes("/__/auth/callback")){const Rt=Tt(Ke),Wt=Rt.firebaseError?function(ae){try{return JSON.parse(ae)}catch(J){return null}}(decodeURIComponent(Rt.firebaseError)):null,Xt=null===(Le=null===(ee=null==Wt?void 0:Wt.code)||void 0===ee?void 0:ee.split("auth/"))||void 0===Le?void 0:Le[1],Gn=Xt?(0,L.av)(Xt):null;return Gn?{type:ae.type,eventId:ae.eventId,tenantId:ae.tenantId,error:Gn,urlResponse:null,sessionId:null,postBody:null}:{type:ae.type,eventId:ae.eventId,tenantId:ae.tenantId,sessionId:ae.sessionId,urlResponse:Ke,postBody:null}}return null}(sr,kt.url)),ee.onEvent(ka||Dt())});return function(sr){return Tn.apply(this,arguments)}}();void 0!==Le&&"function"==typeof Le.subscribe&&Le.subscribe(null,Xt);const Gn=Ke,vn=`${Rt.packageName.toLowerCase()}://`;re().handleOpenURL=function(){var Tn=(0,_.Z)(function*(kt){if(kt.toLowerCase().startsWith(vn)&&Xt({url:kt}),"function"==typeof Gn)try{Gn(kt)}catch(sr){console.error(sr)}});return function(kt){return Tn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=L.a,this._completeRedirectFn=L.aA}_initialize(J){var ee=this;return(0,_.Z)(function*(){return yield ee.selectUnderlyingResolver(),ee.assertedUnderlyingResolver._initialize(J)})()}_openPopup(J,ee,Le,Ke){var Rt=this;return(0,_.Z)(function*(){return yield Rt.selectUnderlyingResolver(),Rt.assertedUnderlyingResolver._openPopup(J,ee,Le,Ke)})()}_openRedirect(J,ee,Le,Ke){var Rt=this;return(0,_.Z)(function*(){return yield Rt.selectUnderlyingResolver(),Rt.assertedUnderlyingResolver._openRedirect(J,ee,Le,Ke)})()}_isIframeWebStorageSupported(J,ee){this.assertedUnderlyingResolver._isIframeWebStorageSupported(J,ee)}_originValidation(J){return this.assertedUnderlyingResolver._originValidation(J)}get _shouldInitProactively(){return es()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ln(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var J=this;return(0,_.Z)(function*(){if(J.underlyingResolver)return;const ee=yield function(){return ot.apply(this,arguments)}();J.underlyingResolver=ee?J.cordovaResolver:J.browserResolver})()}}function st(ae){return ae.unwrap()}function bs(ae){return fn(ae)}function fn(ae){const{_tokenResponse:J}=ae instanceof _e.ZR?ae.customData:ae;if(!J)return null;if(!(ae instanceof _e.ZR)&&"temporaryProof"in J&&"phoneNumber"in J)return L.P.credentialFromResult(ae);const ee=J.providerId;if(!ee||ee===L.o.PASSWORD)return null;let Le;switch(ee){case L.o.GOOGLE:Le=L.N;break;case L.o.FACEBOOK:Le=L.M;break;case L.o.GITHUB:Le=L.Q;break;case L.o.TWITTER:Le=L.V;break;default:const{oauthIdToken:Ke,oauthAccessToken:Rt,oauthTokenSecret:Wt,pendingToken:Xt,nonce:Gn}=J;return Rt||Wt||Ke||Xt?Xt?ee.startsWith("saml.")?L.aJ._create(ee,Xt):L.I._fromParams({providerId:ee,signInMethod:ee,pendingToken:Xt,idToken:Ke,accessToken:Rt}):new L.T(ee).credential({idToken:Ke,accessToken:Rt,rawNonce:Gn}):null}return ae instanceof _e.ZR?Le.credentialFromError(ae):Le.credentialFromResult(ae)}function pn(ae,J){return J.catch(ee=>{throw ee instanceof _e.ZR&&function(ae,J){var ee;const Le=null===(ee=J.customData)||void 0===ee?void 0:ee._tokenResponse;if("auth/multi-factor-auth-required"===J.code)J.resolver=new Y(ae,L.am(ae,J));else if(Le){const Ke=fn(J),Rt=J;Ke&&(Rt.credential=Ke,Rt.tenantId=Le.tenantId||void 0,Rt.email=Le.email||void 0,Rt.phoneNumber=Le.phoneNumber||void 0)}}(ae,ee),ee}).then(ee=>{const Ke=ee.user;return{operationType:ee.operationType,credential:bs(ee),additionalUserInfo:L.ak(ee),user:X.getOrCreate(Ke)}})}function po(ae,J){return Q.apply(this,arguments)}function Q(){return(Q=(0,_.Z)(function*(ae,J){const ee=yield J;return{verificationId:ee.verificationId,confirm:Le=>pn(ae,ee.confirm(Le))}})).apply(this,arguments)}class Y{constructor(J,ee){this.resolver=ee,this.auth=J.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(J){return pn(st(this.auth),this.resolver.resolveSignIn(J))}}class X{constructor(J){this._delegate=J,this.multiFactor=L.an(J)}static getOrCreate(J){return X.USER_MAP.has(J)||X.USER_MAP.set(J,new X(J)),X.USER_MAP.get(J)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(J){return this._delegate.getIdTokenResult(J)}getIdToken(J){return this._delegate.getIdToken(J)}linkAndRetrieveDataWithCredential(J){return this.linkWithCredential(J)}linkWithCredential(J){var ee=this;return(0,_.Z)(function*(){return pn(ee.auth,L.Y(ee._delegate,J))})()}linkWithPhoneNumber(J,ee){var Le=this;return(0,_.Z)(function*(){return po(Le.auth,L.l(Le._delegate,J,ee))})()}linkWithPopup(J){var ee=this;return(0,_.Z)(function*(){return pn(ee.auth,L.d(ee._delegate,J,qe))})()}linkWithRedirect(J){var ee=this;return(0,_.Z)(function*(){return yield yt(L.aC(ee.auth)),L.g(ee._delegate,J,qe)})()}reauthenticateAndRetrieveDataWithCredential(J){return this.reauthenticateWithCredential(J)}reauthenticateWithCredential(J){var ee=this;return(0,_.Z)(function*(){return pn(ee.auth,L.Z(ee._delegate,J))})()}reauthenticateWithPhoneNumber(J,ee){return po(this.auth,L.r(this._delegate,J,ee))}reauthenticateWithPopup(J){return pn(this.auth,L.e(this._delegate,J,qe))}reauthenticateWithRedirect(J){var ee=this;return(0,_.Z)(function*(){return yield yt(L.aC(ee.auth)),L.h(ee._delegate,J,qe)})()}sendEmailVerification(J){return L.aa(this._delegate,J)}unlink(J){var ee=this;return(0,_.Z)(function*(){return yield L.aj(ee._delegate,J),ee})()}updateEmail(J){return L.af(this._delegate,J)}updatePassword(J){return L.ag(this._delegate,J)}updatePhoneNumber(J){return L.u(this._delegate,J)}updateProfile(J){return L.ae(this._delegate,J)}verifyBeforeUpdateEmail(J,ee){return L.ab(this._delegate,J,ee)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}X.USER_MAP=new WeakMap;const Me=L.aw;let pe=(()=>{class ae{constructor(ee,Le){if(this.app=ee,Le.isInitialized())return this._delegate=Le.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Ke}=ee.options;Me(Ke,"invalid-api-key",{appName:ee.name});let Rt=[L.K];if("undefined"!=typeof window){Rt=function(ae,J){const ee=ur();if(!(null==ee?void 0:ee.sessionStorage))return[];const Le=L.ay(lr,ae,J);switch(ee.sessionStorage.getItem(Le)){case Yt.NONE:return[L.K];case Yt.LOCAL:return[L.i,L.a];case Yt.SESSION:return[L.a];default:return[]}}(Ke,ee.name);for(const Xt of[L.i,L.b,L.a])Rt.includes(Xt)||Rt.push(Xt)}Me(Ke,"invalid-api-key",{appName:ee.name});const Wt="undefined"!=typeof window?qe:void 0;this._delegate=Le.initialize({options:{persistence:Rt,popupRedirectResolver:Wt}}),this._delegate._updateErrorMap(L.z),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?X.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(ee){this._delegate.languageCode=ee}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(ee){this._delegate.tenantId=ee}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(ee,Le){L.E(this._delegate,ee,Le)}applyActionCode(ee){return L.a1(this._delegate,ee)}checkActionCode(ee){return L.a2(this._delegate,ee)}confirmPasswordReset(ee,Le){return L.a0(this._delegate,ee,Le)}createUserWithEmailAndPassword(ee,Le){var Ke=this;return(0,_.Z)(function*(){return pn(Ke._delegate,L.a4(Ke._delegate,ee,Le))})()}fetchProvidersForEmail(ee){return this.fetchSignInMethodsForEmail(ee)}fetchSignInMethodsForEmail(ee){return L.a9(this._delegate,ee)}isSignInWithEmailLink(ee){return L.a7(this._delegate,ee)}getRedirectResult(){var ee=this;return(0,_.Z)(function*(){Me(Xn(),ee._delegate,"operation-not-supported-in-this-environment");const Le=yield L.j(ee._delegate,qe);return Le?pn(ee._delegate,Promise.resolve(Le)):{credential:null,user:null}})()}addFrameworkForLogging(ee){!function(ae,J){(0,L.aC)(ae)._logFramework(J)}(this._delegate,ee)}onAuthStateChanged(ee,Le,Ke){const{next:Rt,error:Wt,complete:Xt}=et(ee,Le,Ke);return this._delegate.onAuthStateChanged(Rt,Wt,Xt)}onIdTokenChanged(ee,Le,Ke){const{next:Rt,error:Wt,complete:Xt}=et(ee,Le,Ke);return this._delegate.onIdTokenChanged(Rt,Wt,Xt)}sendSignInLinkToEmail(ee,Le){return L.a6(this._delegate,ee,Le)}sendPasswordResetEmail(ee,Le){return L.$(this._delegate,ee,Le||void 0)}setPersistence(ee){var Le=this;return(0,_.Z)(function*(){let Ke;switch(function(ae,J){Ar(Object.values(Yt).includes(J),ae,"invalid-persistence-type"),(0,_e.b$)()?Ar(J!==Yt.SESSION,ae,"unsupported-persistence-type"):(0,_e.UG)()?Ar(J===Yt.NONE,ae,"unsupported-persistence-type"):ki()?Ar(J===Yt.NONE||J===Yt.LOCAL&&(0,_e.hl)(),ae,"unsupported-persistence-type"):Ar(J===Yt.NONE||ws(),ae,"unsupported-persistence-type")}(Le._delegate,ee),ee){case Yt.SESSION:Ke=L.a;break;case Yt.LOCAL:Ke=(yield L.ax(L.i)._isAvailable())?L.i:L.b;break;case Yt.NONE:Ke=L.K;break;default:return L.as("argument-error",{appName:Le._delegate.name})}return Le._delegate.setPersistence(Ke)})()}signInAndRetrieveDataWithCredential(ee){return this.signInWithCredential(ee)}signInAnonymously(){return pn(this._delegate,L.W(this._delegate))}signInWithCredential(ee){return pn(this._delegate,L.X(this._delegate,ee))}signInWithCustomToken(ee){return pn(this._delegate,L._(this._delegate,ee))}signInWithEmailAndPassword(ee,Le){return pn(this._delegate,L.a5(this._delegate,ee,Le))}signInWithEmailLink(ee,Le){return pn(this._delegate,L.a8(this._delegate,ee,Le))}signInWithPhoneNumber(ee,Le){return po(this._delegate,L.s(this._delegate,ee,Le))}signInWithPopup(ee){var Le=this;return(0,_.Z)(function*(){return Me(Xn(),Le._delegate,"operation-not-supported-in-this-environment"),pn(Le._delegate,L.c(Le._delegate,ee,qe))})()}signInWithRedirect(ee){var Le=this;return(0,_.Z)(function*(){return Me(Xn(),Le._delegate,"operation-not-supported-in-this-environment"),yield yt(Le._delegate),L.f(Le._delegate,ee,qe)})()}updateCurrentUser(ee){return this._delegate.updateCurrentUser(ee)}verifyPasswordResetCode(ee){return L.a3(this._delegate,ee)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return ae.Persistence=Yt,ae})();function et(ae,J,ee){let Le=ae;"function"!=typeof ae&&({next:Le,error:J,complete:ee}=ae);const Ke=Le;return{next:Wt=>Ke(Wt&&X.getOrCreate(Wt)),error:J,complete:ee}}class vt{constructor(){this.providerId="phone",this._delegate=new L.P(st(z.Z.auth()))}static credential(J,ee){return L.P.credential(J,ee)}verifyPhoneNumber(J,ee){return this._delegate.verifyPhoneNumber(J,ee)}unwrap(){return this._delegate}}vt.PHONE_SIGN_IN_METHOD=L.P.PHONE_SIGN_IN_METHOD,vt.PROVIDER_ID=L.P.PROVIDER_ID;const Bt=L.aw;var ae;(ae=z.Z).INTERNAL.registerComponent(new Re.wA("auth-compat",J=>{const ee=J.getProvider("app-compat").getImmediate(),Le=J.getProvider("auth");return new pe(ee,Le)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:L.A.EMAIL_SIGNIN,PASSWORD_RESET:L.A.PASSWORD_RESET,RECOVER_EMAIL:L.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:L.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:L.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:L.A.VERIFY_EMAIL}},EmailAuthProvider:L.L,FacebookAuthProvider:L.M,GithubAuthProvider:L.Q,GoogleAuthProvider:L.N,OAuthProvider:L.T,PhoneAuthProvider:vt,PhoneMultiFactorGenerator:L.m,RecaptchaVerifier:class{constructor(J,ee,Le=z.Z.app()){var Ke;Bt(null===(Ke=Le.options)||void 0===Ke?void 0:Ke.apiKey,"invalid-api-key",{appName:Le.name}),this._delegate=new L.R(J,ee,Le.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}},TwitterAuthProvider:L.V,Auth:pe,AuthCredential:L.G,Error:_e.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),ae.registerVersion("@firebase/auth-compat","0.1.5")},6676:function(lt,ke){!function($){"use strict";function _(ye){return Array.prototype.slice.call(ye)}function z(ye){return new Promise(function(se,me){ye.onsuccess=function(){se(ye.result)},ye.onerror=function(){me(ye.error)}})}function L(ye,se,me){var Ee,Fe=new Promise(function(nt,Ct){z(Ee=ye[se].apply(ye,me)).then(nt,Ct)});return Fe.request=Ee,Fe}function _e(ye,se,me){var Ee=L(ye,se,me);return Ee.then(function(Fe){if(Fe)return new j(Fe,Ee.request)})}function de(ye,se,me){me.forEach(function(Ee){Object.defineProperty(ye.prototype,Ee,{get:function(){return this[se][Ee]},set:function(Fe){this[se][Ee]=Fe}})})}function ie(ye,se,me,Ee){Ee.forEach(function(Fe){Fe in me.prototype&&(ye.prototype[Fe]=function(){return L(this[se],Fe,arguments)})})}function Re(ye,se,me,Ee){Ee.forEach(function(Fe){Fe in me.prototype&&(ye.prototype[Fe]=function(){return this[se][Fe].apply(this[se],arguments)})})}function re(ye,se,me,Ee){Ee.forEach(function(Fe){Fe in me.prototype&&(ye.prototype[Fe]=function(){return _e(this[se],Fe,arguments)})})}function ne(ye){this._index=ye}function j(ye,se){this._cursor=ye,this._request=se}function G(ye){this._store=ye}function K(ye){this._tx=ye,this.complete=new Promise(function(se,me){ye.oncomplete=function(){se()},ye.onerror=function(){me(ye.error)},ye.onabort=function(){me(ye.error)}})}function ce(ye,se,me){this._db=ye,this.oldVersion=se,this.transaction=new K(me)}function ge(ye){this._db=ye}de(ne,"_index",["name","keyPath","multiEntry","unique"]),ie(ne,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),re(ne,"_index",IDBIndex,["openCursor","openKeyCursor"]),de(j,"_cursor",["direction","key","primaryKey","value"]),ie(j,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(ye){ye in IDBCursor.prototype&&(j.prototype[ye]=function(){var se=this,me=arguments;return Promise.resolve().then(function(){return se._cursor[ye].apply(se._cursor,me),z(se._request).then(function(Ee){if(Ee)return new j(Ee,se._request)})})})}),G.prototype.createIndex=function(){return new ne(this._store.createIndex.apply(this._store,arguments))},G.prototype.index=function(){return new ne(this._store.index.apply(this._store,arguments))},de(G,"_store",["name","keyPath","indexNames","autoIncrement"]),ie(G,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),re(G,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),Re(G,"_store",IDBObjectStore,["deleteIndex"]),K.prototype.objectStore=function(){return new G(this._tx.objectStore.apply(this._tx,arguments))},de(K,"_tx",["objectStoreNames","mode"]),Re(K,"_tx",IDBTransaction,["abort"]),ce.prototype.createObjectStore=function(){return new G(this._db.createObjectStore.apply(this._db,arguments))},de(ce,"_db",["name","version","objectStoreNames"]),Re(ce,"_db",IDBDatabase,["deleteObjectStore","close"]),ge.prototype.transaction=function(){return new K(this._db.transaction.apply(this._db,arguments))},de(ge,"_db",["name","version","objectStoreNames"]),Re(ge,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(ye){[G,ne].forEach(function(se){ye in se.prototype&&(se.prototype[ye.replace("open","iterate")]=function(){var me=_(arguments),Ee=me[me.length-1],Fe=this._store||this._index,nt=Fe[ye].apply(Fe,me.slice(0,-1));nt.onsuccess=function(){Ee(nt.result)}})})}),[ne,G].forEach(function(ye){ye.prototype.getAll||(ye.prototype.getAll=function(se,me){var Ee=this,Fe=[];return new Promise(function(nt){Ee.iterateCursor(se,function(Ct){Ct?(Fe.push(Ct.value),void 0===me||Fe.length!=me?Ct.continue():nt(Fe)):nt(Fe)})})})}),$.openDb=function(ye,se,me){var Ee=L(indexedDB,"open",[ye,se]),Fe=Ee.request;return Fe&&(Fe.onupgradeneeded=function(nt){me&&me(new ce(Fe.result,nt.oldVersion,Fe.transaction))}),Ee.then(function(nt){return new ge(nt)})},$.deleteDb=function(ye){return L(indexedDB,"deleteDatabase",[ye])},Object.defineProperty($,"__esModule",{value:!0})}(ke)},7574:(lt,ke,$)=>{"use strict";$.d(ke,{y:()=>G});var _=$(7393),L=$(9181),_e=$(6490),ie=$(6554),Re=$(4487);var j=$(2494);let G=(()=>{class ce{constructor(Ne){this._isScalar=!1,Ne&&(this._subscribe=Ne)}lift(Ne){const Ce=new ce;return Ce.source=this,Ce.operator=Ne,Ce}subscribe(Ne,Ce,ye){const{operator:se}=this,me=function(ce,ge,Ne){if(ce){if(ce instanceof _.L)return ce;if(ce[L.b])return ce[L.b]()}return ce||ge||Ne?new _.L(ce,ge,Ne):new _.L(_e.c)}(Ne,Ce,ye);if(me.add(se?se.call(me,this.source):this.source||j.v.useDeprecatedSynchronousErrorHandling&&!me.syncErrorThrowable?this._subscribe(me):this._trySubscribe(me)),j.v.useDeprecatedSynchronousErrorHandling&&me.syncErrorThrowable&&(me.syncErrorThrowable=!1,me.syncErrorThrown))throw me.syncErrorValue;return me}_trySubscribe(Ne){try{return this._subscribe(Ne)}catch(Ce){j.v.useDeprecatedSynchronousErrorHandling&&(Ne.syncErrorThrown=!0,Ne.syncErrorValue=Ce),function(ce){for(;ce;){const{closed:ge,destination:Ne,isStopped:Ce}=ce;if(ge||Ce)return!1;ce=Ne&&Ne instanceof _.L?Ne:null}return!0}(Ne)?Ne.error(Ce):console.warn(Ce)}}forEach(Ne,Ce){return new(Ce=K(Ce))((ye,se)=>{let me;me=this.subscribe(Ee=>{try{Ne(Ee)}catch(Fe){se(Fe),me&&me.unsubscribe()}},se,ye)})}_subscribe(Ne){const{source:Ce}=this;return Ce&&Ce.subscribe(Ne)}[ie.L](){return this}pipe(...Ne){return 0===Ne.length?this:function(ce){return 0===ce.length?Re.y:1===ce.length?ce[0]:function(Ne){return ce.reduce((Ce,ye)=>ye(Ce),Ne)}}(Ne)(this)}toPromise(Ne){return new(Ne=K(Ne))((Ce,ye)=>{let se;this.subscribe(me=>se=me,me=>ye(me),()=>Ce(se))})}}return ce.create=ge=>new ce(ge),ce})();function K(ce){if(ce||(ce=j.v.Promise||Promise),!ce)throw new Error("no Promise impl found");return ce}},6490:(lt,ke,$)=>{"use strict";$.d(ke,{c:()=>L});var _=$(2494),z=$(4449);const L={closed:!0,next(_e){},error(_e){if(_.v.useDeprecatedSynchronousErrorHandling)throw _e;(0,z.z)(_e)},complete(){}}},9765:(lt,ke,$)=>{"use strict";$.d(ke,{Yc:()=>Re,xQ:()=>re});var _=$(7574),z=$(7393),L=$(5319),_e=$(7971),de=$(8858),ie=$(9181);class Re extends z.L{constructor(G){super(G),this.destination=G}}let re=(()=>{class j extends _.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[ie.b](){return new Re(this)}lift(K){const ce=new ne(this,this);return ce.operator=K,ce}next(K){if(this.closed)throw new _e.N;if(!this.isStopped){const{observers:ce}=this,ge=ce.length,Ne=ce.slice();for(let Ce=0;Ce<ge;Ce++)Ne[Ce].next(K)}}error(K){if(this.closed)throw new _e.N;this.hasError=!0,this.thrownError=K,this.isStopped=!0;const{observers:ce}=this,ge=ce.length,Ne=ce.slice();for(let Ce=0;Ce<ge;Ce++)Ne[Ce].error(K);this.observers.length=0}complete(){if(this.closed)throw new _e.N;this.isStopped=!0;const{observers:K}=this,ce=K.length,ge=K.slice();for(let Ne=0;Ne<ce;Ne++)ge[Ne].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(K){if(this.closed)throw new _e.N;return super._trySubscribe(K)}_subscribe(K){if(this.closed)throw new _e.N;return this.hasError?(K.error(this.thrownError),L.w.EMPTY):this.isStopped?(K.complete(),L.w.EMPTY):(this.observers.push(K),new de.W(this,K))}asObservable(){const K=new _.y;return K.source=this,K}}return j.create=(G,K)=>new ne(G,K),j})();class ne extends re{constructor(G,K){super(),this.destination=G,this.source=K}next(G){const{destination:K}=this;K&&K.next&&K.next(G)}error(G){const{destination:K}=this;K&&K.error&&this.destination.error(G)}complete(){const{destination:G}=this;G&&G.complete&&this.destination.complete()}_subscribe(G){const{source:K}=this;return K?this.source.subscribe(G):L.w.EMPTY}}},8858:(lt,ke,$)=>{"use strict";$.d(ke,{W:()=>z});var _=$(5319);class z extends _.w{constructor(_e,de){super(),this.subject=_e,this.subscriber=de,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const _e=this.subject,de=_e.observers;if(this.subject=null,!de||0===de.length||_e.isStopped||_e.closed)return;const ie=de.indexOf(this.subscriber);-1!==ie&&de.splice(ie,1)}}},7393:(lt,ke,$)=>{"use strict";$.d(ke,{L:()=>Re});var _=$(9105),z=$(6490),L=$(5319),_e=$(9181),de=$(2494),ie=$(4449);class Re extends L.w{constructor(j,G,K){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=z.c;break;case 1:if(!j){this.destination=z.c;break}if("object"==typeof j){j instanceof Re?(this.syncErrorThrowable=j.syncErrorThrowable,this.destination=j,j.add(this)):(this.syncErrorThrowable=!0,this.destination=new re(this,j));break}default:this.syncErrorThrowable=!0,this.destination=new re(this,j,G,K)}}[_e.b](){return this}static create(j,G,K){const ce=new Re(j,G,K);return ce.syncErrorThrowable=!1,ce}next(j){this.isStopped||this._next(j)}error(j){this.isStopped||(this.isStopped=!0,this._error(j))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(j){this.destination.next(j)}_error(j){this.destination.error(j),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:j}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=j,this}}class re extends Re{constructor(j,G,K,ce){super(),this._parentSubscriber=j;let ge,Ne=this;(0,_.m)(G)?ge=G:G&&(ge=G.next,K=G.error,ce=G.complete,G!==z.c&&(Ne=Object.create(G),(0,_.m)(Ne.unsubscribe)&&this.add(Ne.unsubscribe.bind(Ne)),Ne.unsubscribe=this.unsubscribe.bind(this))),this._context=Ne,this._next=ge,this._error=K,this._complete=ce}next(j){if(!this.isStopped&&this._next){const{_parentSubscriber:G}=this;de.v.useDeprecatedSynchronousErrorHandling&&G.syncErrorThrowable?this.__tryOrSetError(G,this._next,j)&&this.unsubscribe():this.__tryOrUnsub(this._next,j)}}error(j){if(!this.isStopped){const{_parentSubscriber:G}=this,{useDeprecatedSynchronousErrorHandling:K}=de.v;if(this._error)K&&G.syncErrorThrowable?(this.__tryOrSetError(G,this._error,j),this.unsubscribe()):(this.__tryOrUnsub(this._error,j),this.unsubscribe());else if(G.syncErrorThrowable)K?(G.syncErrorValue=j,G.syncErrorThrown=!0):(0,ie.z)(j),this.unsubscribe();else{if(this.unsubscribe(),K)throw j;(0,ie.z)(j)}}}complete(){if(!this.isStopped){const{_parentSubscriber:j}=this;if(this._complete){const G=()=>this._complete.call(this._context);de.v.useDeprecatedSynchronousErrorHandling&&j.syncErrorThrowable?(this.__tryOrSetError(j,G),this.unsubscribe()):(this.__tryOrUnsub(G),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(j,G){try{j.call(this._context,G)}catch(K){if(this.unsubscribe(),de.v.useDeprecatedSynchronousErrorHandling)throw K;(0,ie.z)(K)}}__tryOrSetError(j,G,K){if(!de.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{G.call(this._context,K)}catch(ce){return de.v.useDeprecatedSynchronousErrorHandling?(j.syncErrorValue=ce,j.syncErrorThrown=!0,!0):((0,ie.z)(ce),!0)}return!1}_unsubscribe(){const{_parentSubscriber:j}=this;this._context=null,this._parentSubscriber=null,j.unsubscribe()}}},5319:(lt,ke,$)=>{"use strict";$.d(ke,{w:()=>ie});var _=$(9796),z=$(1555),L=$(9105);const de=(()=>{function re(ne){return Error.call(this),this.message=ne?`${ne.length} errors occurred during unsubscription:\n${ne.map((j,G)=>`${G+1}) ${j.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ne,this}return re.prototype=Object.create(Error.prototype),re})();class ie{constructor(ne){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,ne&&(this._ctorUnsubscribe=!0,this._unsubscribe=ne)}unsubscribe(){let ne;if(this.closed)return;let{_parentOrParents:j,_ctorUnsubscribe:G,_unsubscribe:K,_subscriptions:ce}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,j instanceof ie)j.remove(this);else if(null!==j)for(let ge=0;ge<j.length;++ge)j[ge].remove(this);if((0,L.m)(K)){G&&(this._unsubscribe=void 0);try{K.call(this)}catch(ge){ne=ge instanceof de?Re(ge.errors):[ge]}}if((0,_.k)(ce)){let ge=-1,Ne=ce.length;for(;++ge<Ne;){const Ce=ce[ge];if((0,z.K)(Ce))try{Ce.unsubscribe()}catch(ye){ne=ne||[],ye instanceof de?ne=ne.concat(Re(ye.errors)):ne.push(ye)}}}if(ne)throw new de(ne)}add(ne){let j=ne;if(!ne)return ie.EMPTY;switch(typeof ne){case"function":j=new ie(ne);case"object":if(j===this||j.closed||"function"!=typeof j.unsubscribe)return j;if(this.closed)return j.unsubscribe(),j;if(!(j instanceof ie)){const ce=j;j=new ie,j._subscriptions=[ce]}break;default:throw new Error("unrecognized teardown "+ne+" added to Subscription.")}let{_parentOrParents:G}=j;if(null===G)j._parentOrParents=this;else if(G instanceof ie){if(G===this)return j;j._parentOrParents=[G,this]}else{if(-1!==G.indexOf(this))return j;G.push(this)}const K=this._subscriptions;return null===K?this._subscriptions=[j]:K.push(j),j}remove(ne){const j=this._subscriptions;if(j){const G=j.indexOf(ne);-1!==G&&j.splice(G,1)}}}var re;function Re(re){return re.reduce((ne,j)=>ne.concat(j instanceof de?j.errors:j),[])}ie.EMPTY=((re=new ie).closed=!0,re)},2494:(lt,ke,$)=>{"use strict";$.d(ke,{v:()=>z});let _=!1;const z={Promise:void 0,set useDeprecatedSynchronousErrorHandling(L){if(L){const _e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+_e.stack)}else _&&console.log("RxJS: Back to a better error behavior. Thank you. <3");_=L},get useDeprecatedSynchronousErrorHandling(){return _}}},5345:(lt,ke,$)=>{"use strict";$.d(ke,{IY:()=>_e,Ds:()=>ie,ft:()=>re});var _=$(7393),z=$(7574),L=$(7444);class _e extends _.L{constructor(j){super(),this.parent=j}_next(j){this.parent.notifyNext(j)}_error(j){this.parent.notifyError(j),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class ie extends _.L{notifyNext(j){this.destination.next(j)}notifyError(j){this.destination.error(j)}notifyComplete(){this.destination.complete()}}function re(ne,j){if(j.closed)return;if(ne instanceof z.y)return ne.subscribe(j);let G;try{G=(0,L.s)(ne)(j)}catch(K){j.error(K)}return G}},2441:(lt,ke,$)=>{"use strict";$.d(ke,{c:()=>de,N:()=>ie});var _=$(9765),z=$(7574),L=$(5319),_e=$(1307);class de extends z.y{constructor(G,K){super(),this.source=G,this.subjectFactory=K,this._refCount=0,this._isComplete=!1}_subscribe(G){return this.getSubject().subscribe(G)}getSubject(){const G=this._subject;return(!G||G.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let G=this._connection;return G||(this._isComplete=!1,G=this._connection=new L.w,G.add(this.source.subscribe(new Re(this.getSubject(),this))),G.closed&&(this._connection=null,G=L.w.EMPTY)),G}refCount(){return(0,_e.x)()(this)}}const ie=(()=>{const j=de.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:j._subscribe},_isComplete:{value:j._isComplete,writable:!0},getSubject:{value:j.getSubject},connect:{value:j.connect},refCount:{value:j.refCount}}})();class Re extends _.Yc{constructor(G,K){super(G),this.connectable=K}_error(G){this._unsubscribe(),super._error(G)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const G=this.connectable;if(G){this.connectable=null;const K=G._connection;G._refCount=0,G._subject=null,G._connection=null,K&&K.unsubscribe()}}}},9193:(lt,ke,$)=>{"use strict";$.d(ke,{E:()=>z,c:()=>L});var _=$(7574);const z=new _.y(de=>de.complete());function L(de){return de?function(de){return new _.y(ie=>de.schedule(()=>ie.complete()))}(de):z}},4402:(lt,ke,$)=>{"use strict";$.d(ke,{D:()=>Ne});var _=$(7574),z=$(7444),L=$(5319),_e=$(6554),Re=$(4087),re=$(377),G=$(4072),K=$(9489);function Ne(Ce,ye){return ye?function(Ce,ye){if(null!=Ce){if(function(Ce){return Ce&&"function"==typeof Ce[_e.L]}(Ce))return function(Ce,ye){return new _.y(se=>{const me=new L.w;return me.add(ye.schedule(()=>{const Ee=Ce[_e.L]();me.add(Ee.subscribe({next(Fe){me.add(ye.schedule(()=>se.next(Fe)))},error(Fe){me.add(ye.schedule(()=>se.error(Fe)))},complete(){me.add(ye.schedule(()=>se.complete()))}}))})),me})}(Ce,ye);if((0,G.t)(Ce))return function(Ce,ye){return new _.y(se=>{const me=new L.w;return me.add(ye.schedule(()=>Ce.then(Ee=>{me.add(ye.schedule(()=>{se.next(Ee),me.add(ye.schedule(()=>se.complete()))}))},Ee=>{me.add(ye.schedule(()=>se.error(Ee)))}))),me})}(Ce,ye);if((0,K.z)(Ce))return(0,Re.r)(Ce,ye);if(function(Ce){return Ce&&"function"==typeof Ce[re.hZ]}(Ce)||"string"==typeof Ce)return function(Ce,ye){if(!Ce)throw new Error("Iterable cannot be null");return new _.y(se=>{const me=new L.w;let Ee;return me.add(()=>{Ee&&"function"==typeof Ee.return&&Ee.return()}),me.add(ye.schedule(()=>{Ee=Ce[re.hZ](),me.add(ye.schedule(function(){if(se.closed)return;let Fe,nt;try{const Ct=Ee.next();Fe=Ct.value,nt=Ct.done}catch(Ct){return void se.error(Ct)}nt?se.complete():(se.next(Fe),this.schedule())}))})),me})}(Ce,ye)}throw new TypeError((null!==Ce&&typeof Ce||Ce)+" is not observable")}(Ce,ye):Ce instanceof _.y?Ce:new _.y((0,z.s)(Ce))}},6693:(lt,ke,$)=>{"use strict";$.d(ke,{n:()=>_e});var _=$(7574),z=$(5015),L=$(4087);function _e(de,ie){return ie?(0,L.r)(de,ie):new _.y((0,z.V)(de))}},6682:(lt,ke,$)=>{"use strict";$.d(ke,{T:()=>de});var _=$(7574),z=$(4869),L=$(3282),_e=$(6693);function de(...ie){let Re=Number.POSITIVE_INFINITY,re=null,ne=ie[ie.length-1];return(0,z.K)(ne)?(re=ie.pop(),ie.length>1&&"number"==typeof ie[ie.length-1]&&(Re=ie.pop())):"number"==typeof ne&&(Re=ie.pop()),null===re&&1===ie.length&&ie[0]instanceof _.y?ie[0]:(0,L.J)(Re)((0,_e.n)(ie,re))}},5917:(lt,ke,$)=>{"use strict";$.d(ke,{of:()=>_e});var _=$(4869),z=$(6693),L=$(4087);function _e(...de){let ie=de[de.length-1];return(0,_.K)(ie)?(de.pop(),(0,L.r)(de,ie)):(0,z.n)(de)}},8002:(lt,ke,$)=>{"use strict";$.d(ke,{U:()=>z});var _=$(7393);function z(de,ie){return function(re){if("function"!=typeof de)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return re.lift(new L(de,ie))}}class L{constructor(ie,Re){this.project=ie,this.thisArg=Re}call(ie,Re){return Re.subscribe(new _e(ie,this.project,this.thisArg))}}class _e extends _.L{constructor(ie,Re,re){super(ie),this.project=Re,this.count=0,this.thisArg=re||this}_next(ie){let Re;try{Re=this.project.call(this.thisArg,ie,this.count++)}catch(re){return void this.destination.error(re)}this.destination.next(Re)}}},3282:(lt,ke,$)=>{"use strict";$.d(ke,{J:()=>L});var _=$(9773),z=$(4487);function L(_e=Number.POSITIVE_INFINITY){return(0,_.zg)(z.y,_e)}},9773:(lt,ke,$)=>{"use strict";$.d(ke,{zg:()=>_e});var _=$(8002),z=$(4402),L=$(5345);function _e(re,ne,j=Number.POSITIVE_INFINITY){return"function"==typeof ne?G=>G.pipe(_e((K,ce)=>(0,z.D)(re(K,ce)).pipe((0,_.U)((ge,Ne)=>ne(K,ge,ce,Ne))),j)):("number"==typeof ne&&(j=ne),G=>G.lift(new de(re,j)))}class de{constructor(ne,j=Number.POSITIVE_INFINITY){this.project=ne,this.concurrent=j}call(ne,j){return j.subscribe(new ie(ne,this.project,this.concurrent))}}class ie extends L.Ds{constructor(ne,j,G=Number.POSITIVE_INFINITY){super(ne),this.project=j,this.concurrent=G,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(ne){this.active<this.concurrent?this._tryNext(ne):this.buffer.push(ne)}_tryNext(ne){let j;const G=this.index++;try{j=this.project(ne,G)}catch(K){return void this.destination.error(K)}this.active++,this._innerSub(j)}_innerSub(ne){const j=new L.IY(this),G=this.destination;G.add(j);const K=(0,L.ft)(ne,j);K!==j&&G.add(K)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(ne){this.destination.next(ne)}notifyComplete(){const ne=this.buffer;this.active--,ne.length>0?this._next(ne.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},309:(lt,ke,$)=>{"use strict";$.d(ke,{ht:()=>G,QV:()=>ne});var _=$(7393),z=$(9193),L=$(5917),_e=$(7574);class re{constructor(ge,Ne,Ce){this.kind=ge,this.value=Ne,this.error=Ce,this.hasValue="N"===ge}observe(ge){switch(this.kind){case"N":return ge.next&&ge.next(this.value);case"E":return ge.error&&ge.error(this.error);case"C":return ge.complete&&ge.complete()}}do(ge,Ne,Ce){switch(this.kind){case"N":return ge&&ge(this.value);case"E":return Ne&&Ne(this.error);case"C":return Ce&&Ce()}}accept(ge,Ne,Ce){return ge&&"function"==typeof ge.next?this.observe(ge):this.do(ge,Ne,Ce)}toObservable(){switch(this.kind){case"N":return(0,L.of)(this.value);case"E":return ce=this.error,new _e.y(Ne=>Ne.error(ce));case"C":return(0,z.c)()}var ce;throw new Error("unexpected notification kind value")}static createNext(ge){return void 0!==ge?new re("N",ge):re.undefinedValueNotification}static createError(ge){return new re("E",void 0,ge)}static createComplete(){return re.completeNotification}}function ne(ce,ge=0){return function(Ce){return Ce.lift(new j(ce,ge))}}re.completeNotification=new re("C"),re.undefinedValueNotification=new re("N",void 0);class j{constructor(ge,Ne=0){this.scheduler=ge,this.delay=Ne}call(ge,Ne){return Ne.subscribe(new G(ge,this.scheduler,this.delay))}}class G extends _.L{constructor(ge,Ne,Ce=0){super(ge),this.scheduler=Ne,this.delay=Ce}static dispatch(ge){const{notification:Ne,destination:Ce}=ge;Ne.observe(Ce),this.unsubscribe()}scheduleMessage(ge){this.destination.add(this.scheduler.schedule(G.dispatch,this.delay,new K(ge,this.destination)))}_next(ge){this.scheduleMessage(re.createNext(ge))}_error(ge){this.scheduleMessage(re.createError(ge)),this.unsubscribe()}_complete(){this.scheduleMessage(re.createComplete()),this.unsubscribe()}}class K{constructor(ge,Ne){this.notification=ge,this.destination=Ne}}},1307:(lt,ke,$)=>{"use strict";$.d(ke,{x:()=>z});var _=$(7393);function z(){return function(ie){return ie.lift(new L(ie))}}class L{constructor(ie){this.connectable=ie}call(ie,Re){const{connectable:re}=this;re._refCount++;const ne=new _e(ie,re),j=Re.subscribe(ne);return ne.closed||(ne.connection=re.connect()),j}}class _e extends _.L{constructor(ie,Re){super(ie),this.connectable=Re}_unsubscribe(){const{connectable:ie}=this;if(!ie)return void(this.connection=null);this.connectable=null;const Re=ie._refCount;if(Re<=0)return void(this.connection=null);if(ie._refCount=Re-1,Re>1)return void(this.connection=null);const{connection:re}=this,ne=ie._connection;this.connection=null,ne&&(!re||ne===re)&&ne.unsubscribe()}}},8819:(lt,ke,$)=>{"use strict";$.d(ke,{B:()=>Re});var _=$(2441);var _e=$(1307),de=$(9765);function ie(){return new de.xQ}function Re(){return re=>(0,_e.x)()(function(re,ne){return function(G){let K;K="function"==typeof re?re:function(){return re};const ce=Object.create(G,_.N);return ce.source=G,ce.subjectFactory=K,ce}}(ie)(re))}},3101:(lt,ke,$)=>{"use strict";$.d(ke,{R:()=>ye});var _=$(7574);let z=1;const L=Promise.resolve(),_e={};function de(me){return me in _e&&(delete _e[me],!0)}const ie={setImmediate(me){const Ee=z++;return _e[Ee]=!0,L.then(()=>de(Ee)&&me()),Ee},clearImmediate(me){de(me)}};var re=$(6465),j=$(6102);const ce=new class extends j.v{flush(Ee){this.active=!0,this.scheduled=void 0;const{actions:Fe}=this;let nt,Ct=-1,Vt=Fe.length;Ee=Ee||Fe.shift();do{if(nt=Ee.execute(Ee.state,Ee.delay))break}while(++Ct<Vt&&(Ee=Fe.shift()));if(this.active=!1,nt){for(;++Ct<Vt&&(Ee=Fe.shift());)Ee.unsubscribe();throw nt}}}(class extends re.o{constructor(Ee,Fe){super(Ee,Fe),this.scheduler=Ee,this.work=Fe}requestAsyncId(Ee,Fe,nt=0){return null!==nt&&nt>0?super.requestAsyncId(Ee,Fe,nt):(Ee.actions.push(this),Ee.scheduled||(Ee.scheduled=ie.setImmediate(Ee.flush.bind(Ee,null))))}recycleAsyncId(Ee,Fe,nt=0){if(null!==nt&&nt>0||null===nt&&this.delay>0)return super.recycleAsyncId(Ee,Fe,nt);0===Ee.actions.length&&(ie.clearImmediate(Fe),Ee.scheduled=void 0)}});var ge=$(9796);class Ce extends _.y{constructor(Ee,Fe=0,nt=ce){var me;super(),this.source=Ee,this.delayTime=Fe,this.scheduler=nt,(!(!(0,ge.k)(me=Fe)&&me-parseFloat(me)+1>=0)||Fe<0)&&(this.delayTime=0),(!nt||"function"!=typeof nt.schedule)&&(this.scheduler=ce)}static create(Ee,Fe=0,nt=ce){return new Ce(Ee,Fe,nt)}static dispatch(Ee){const{source:Fe,subscriber:nt}=Ee;return this.add(Fe.subscribe(nt))}_subscribe(Ee){return this.scheduler.schedule(Ce.dispatch,this.delayTime,{source:this.source,subscriber:Ee})}}function ye(me,Ee=0){return function(nt){return nt.lift(new se(me,Ee))}}class se{constructor(Ee,Fe){this.scheduler=Ee,this.delay=Fe}call(Ee,Fe){return new Ce(Fe,this.delay,this.scheduler).subscribe(Ee)}}},3342:(lt,ke,$)=>{"use strict";$.d(ke,{b:()=>_e});var _=$(7393);function z(){}var L=$(9105);function _e(Re,re,ne){return function(G){return G.lift(new de(Re,re,ne))}}class de{constructor(re,ne,j){this.nextOrObserver=re,this.error=ne,this.complete=j}call(re,ne){return ne.subscribe(new ie(re,this.nextOrObserver,this.error,this.complete))}}class ie extends _.L{constructor(re,ne,j,G){super(re),this._tapNext=z,this._tapError=z,this._tapComplete=z,this._tapError=j||z,this._tapComplete=G||z,(0,L.m)(ne)?(this._context=this,this._tapNext=ne):ne&&(this._context=ne,this._tapNext=ne.next||z,this._tapError=ne.error||z,this._tapComplete=ne.complete||z)}_next(re){try{this._tapNext.call(this._context,re)}catch(ne){return void this.destination.error(ne)}this.destination.next(re)}_error(re){try{this._tapError.call(this._context,re)}catch(ne){return void this.destination.error(ne)}this.destination.error(re)}_complete(){try{this._tapComplete.call(this._context)}catch(re){return void this.destination.error(re)}return this.destination.complete()}}},4087:(lt,ke,$)=>{"use strict";$.d(ke,{r:()=>L});var _=$(7574),z=$(5319);function L(_e,de){return new _.y(ie=>{const Re=new z.w;let re=0;return Re.add(de.schedule(function(){re!==_e.length?(ie.next(_e[re++]),ie.closed||Re.add(this.schedule())):ie.complete()})),Re})}},6465:(lt,ke,$)=>{"use strict";$.d(ke,{o:()=>L});var _=$(5319);class z extends _.w{constructor(de,ie){super()}schedule(de,ie=0){return this}}class L extends z{constructor(de,ie){super(de,ie),this.scheduler=de,this.work=ie,this.pending=!1}schedule(de,ie=0){if(this.closed)return this;this.state=de;const Re=this.id,re=this.scheduler;return null!=Re&&(this.id=this.recycleAsyncId(re,Re,ie)),this.pending=!0,this.delay=ie,this.id=this.id||this.requestAsyncId(re,this.id,ie),this}requestAsyncId(de,ie,Re=0){return setInterval(de.flush.bind(de,this),Re)}recycleAsyncId(de,ie,Re=0){if(null!==Re&&this.delay===Re&&!1===this.pending)return ie;clearInterval(ie)}execute(de,ie){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Re=this._execute(de,ie);if(Re)return Re;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(de,ie){let re,Re=!1;try{this.work(de)}catch(ne){Re=!0,re=!!ne&&ne||new Error(ne)}if(Re)return this.unsubscribe(),re}_unsubscribe(){const de=this.id,ie=this.scheduler,Re=ie.actions,re=Re.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==re&&Re.splice(re,1),null!=de&&(this.id=this.recycleAsyncId(ie,de,null)),this.delay=null}}},6102:(lt,ke,$)=>{"use strict";$.d(ke,{v:()=>z});let _=(()=>{class L{constructor(de,ie=L.now){this.SchedulerAction=de,this.now=ie}schedule(de,ie=0,Re){return new this.SchedulerAction(this,de).schedule(Re,ie)}}return L.now=()=>Date.now(),L})();class z extends _{constructor(_e,de=_.now){super(_e,()=>z.delegate&&z.delegate!==this?z.delegate.now():de()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(_e,de=0,ie){return z.delegate&&z.delegate!==this?z.delegate.schedule(_e,de,ie):super.schedule(_e,de,ie)}flush(_e){const{actions:de}=this;if(this.active)return void de.push(_e);let ie;this.active=!0;do{if(ie=_e.execute(_e.state,_e.delay))break}while(_e=de.shift());if(this.active=!1,ie){for(;_e=de.shift();)_e.unsubscribe();throw ie}}}},3637:(lt,ke,$)=>{"use strict";$.d(ke,{z:()=>L,P:()=>_e});var _=$(6465);const L=new($(6102).v)(_.o),_e=L},7771:(lt,ke,$)=>{"use strict";$.d(ke,{c:()=>ie,N:()=>de});var _=$(6465),L=$(6102);const de=new class extends L.v{}(class extends _.o{constructor(re,ne){super(re,ne),this.scheduler=re,this.work=ne}schedule(re,ne=0){return ne>0?super.schedule(re,ne):(this.delay=ne,this.state=re,this.scheduler.flush(this),this)}execute(re,ne){return ne>0||this.closed?super.execute(re,ne):this._execute(re,ne)}requestAsyncId(re,ne,j=0){return null!==j&&j>0||null===j&&this.delay>0?super.requestAsyncId(re,ne,j):re.flush(this)}}),ie=de},377:(lt,ke,$)=>{"use strict";$.d(ke,{hZ:()=>z});const z="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(lt,ke,$)=>{"use strict";$.d(ke,{L:()=>_});const _="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(lt,ke,$)=>{"use strict";$.d(ke,{b:()=>_});const _="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(lt,ke,$)=>{"use strict";$.d(ke,{N:()=>z});const z=(()=>{function L(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return L.prototype=Object.create(Error.prototype),L})()},4449:(lt,ke,$)=>{"use strict";function _(z){setTimeout(()=>{throw z},0)}$.d(ke,{z:()=>_})},4487:(lt,ke,$)=>{"use strict";function _(z){return z}$.d(ke,{y:()=>_})},9796:(lt,ke,$)=>{"use strict";$.d(ke,{k:()=>_});const _=Array.isArray||(z=>z&&"number"==typeof z.length)},9489:(lt,ke,$)=>{"use strict";$.d(ke,{z:()=>_});const _=z=>z&&"number"==typeof z.length&&"function"!=typeof z},9105:(lt,ke,$)=>{"use strict";function _(z){return"function"==typeof z}$.d(ke,{m:()=>_})},1555:(lt,ke,$)=>{"use strict";function _(z){return null!==z&&"object"==typeof z}$.d(ke,{K:()=>_})},4072:(lt,ke,$)=>{"use strict";function _(z){return!!z&&"function"!=typeof z.subscribe&&"function"==typeof z.then}$.d(ke,{t:()=>_})},4869:(lt,ke,$)=>{"use strict";function _(z){return z&&"function"==typeof z.schedule}$.d(ke,{K:()=>_})},7444:(lt,ke,$)=>{"use strict";$.d(ke,{s:()=>G});var _=$(5015),z=$(4449),_e=$(377),ie=$(6554),re=$(9489),ne=$(4072),j=$(1555);const G=K=>{if(K&&"function"==typeof K[ie.L])return(K=>ce=>{const ge=K[ie.L]();if("function"!=typeof ge.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return ge.subscribe(ce)})(K);if((0,re.z)(K))return(0,_.V)(K);if((0,ne.t)(K))return(K=>ce=>(K.then(ge=>{ce.closed||(ce.next(ge),ce.complete())},ge=>ce.error(ge)).then(null,z.z),ce))(K);if(K&&"function"==typeof K[_e.hZ])return(K=>ce=>{const ge=K[_e.hZ]();for(;;){let Ne;try{Ne=ge.next()}catch(Ce){return ce.error(Ce),ce}if(Ne.done){ce.complete();break}if(ce.next(Ne.value),ce.closed)break}return"function"==typeof ge.return&&ce.add(()=>{ge.return&&ge.return()}),ce})(K);{const ge=`You provided ${(0,j.K)(K)?"an invalid object":`'${K}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(ge)}}},5015:(lt,ke,$)=>{"use strict";$.d(ke,{V:()=>_});const _=z=>L=>{for(let _e=0,de=z.length;_e<de&&!L.closed;_e++)L.next(z[_e]);L.complete()}},228:(lt,ke,$)=>{"use strict";var _=$(7716);let z=null;function L(){return z}const Re=new _.OlP("DocumentToken");let re=(()=>{class i{historyGo(r){throw new Error("Not implemented")}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=(0,_.Yz7)({factory:ne,token:i,providedIn:"platform"}),i})();function ne(){return(0,_.LFG)(G)}const j=new _.OlP("Location Initialized");let G=(()=>{class i extends re{constructor(r){super(),this._doc=r,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return L().getBaseHref(this._doc)}onPopState(r){const s=L().getGlobalEventTarget(this._doc,"window");return s.addEventListener("popstate",r,!1),()=>s.removeEventListener("popstate",r)}onHashChange(r){const s=L().getGlobalEventTarget(this._doc,"window");return s.addEventListener("hashchange",r,!1),()=>s.removeEventListener("hashchange",r)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(r){this.location.pathname=r}pushState(r,s,a){K()?this._history.pushState(r,s,a):this.location.hash=a}replaceState(r,s,a){K()?this._history.replaceState(r,s,a):this.location.hash=a}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}}return i.\u0275fac=function(r){return new(r||i)(_.LFG(Re))},i.\u0275prov=(0,_.Yz7)({factory:ce,token:i,providedIn:"platform"}),i})();function K(){return!!window.history.pushState}function ce(){return new G((0,_.LFG)(Re))}function ge(i,n){if(0==i.length)return n;if(0==n.length)return i;let r=0;return i.endsWith("/")&&r++,n.startsWith("/")&&r++,2==r?i+n.substring(1):1==r?i+n:i+"/"+n}function Ne(i){const n=i.match(/#|\?|$/),r=n&&n.index||i.length;return i.slice(0,r-("/"===i[r-1]?1:0))+i.slice(r)}function Ce(i){return i&&"?"!==i[0]?"?"+i:i}let ye=(()=>{class i{historyGo(r){throw new Error("Not implemented")}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=(0,_.Yz7)({factory:se,token:i,providedIn:"root"}),i})();function se(i){const n=(0,_.LFG)(Re).location;return new Ee((0,_.LFG)(re),n&&n.origin||"")}const me=new _.OlP("appBaseHref");let Ee=(()=>{class i extends ye{constructor(r,s){if(super(),this._platformLocation=r,this._removeListenerFns=[],null==s&&(s=this._platformLocation.getBaseHrefFromDOM()),null==s)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=s}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return ge(this._baseHref,r)}path(r=!1){const s=this._platformLocation.pathname+Ce(this._platformLocation.search),a=this._platformLocation.hash;return a&&r?`${s}${a}`:s}pushState(r,s,a,c){const h=this.prepareExternalUrl(a+Ce(c));this._platformLocation.pushState(r,s,h)}replaceState(r,s,a,c){const h=this.prepareExternalUrl(a+Ce(c));this._platformLocation.replaceState(r,s,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(r=0){var s,a;null===(a=(s=this._platformLocation).historyGo)||void 0===a||a.call(s,r)}}return i.\u0275fac=function(r){return new(r||i)(_.LFG(re),_.LFG(me,8))},i.\u0275prov=_.Yz7({token:i,factory:i.\u0275fac}),i})(),Fe=(()=>{class i extends ye{constructor(r,s){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],null!=s&&(this._baseHref=s)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let s=this._platformLocation.hash;return null==s&&(s="#"),s.length>0?s.substring(1):s}prepareExternalUrl(r){const s=ge(this._baseHref,r);return s.length>0?"#"+s:s}pushState(r,s,a,c){let h=this.prepareExternalUrl(a+Ce(c));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.pushState(r,s,h)}replaceState(r,s,a,c){let h=this.prepareExternalUrl(a+Ce(c));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.replaceState(r,s,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(r=0){var s,a;null===(a=(s=this._platformLocation).historyGo)||void 0===a||a.call(s,r)}}return i.\u0275fac=function(r){return new(r||i)(_.LFG(re),_.LFG(me,8))},i.\u0275prov=_.Yz7({token:i,factory:i.\u0275fac}),i})(),nt=(()=>{class i{constructor(r,s){this._subject=new _.vpe,this._urlChangeListeners=[],this._platformStrategy=r;const a=this._platformStrategy.getBaseHref();this._platformLocation=s,this._baseHref=Ne(xe(a)),this._platformStrategy.onPopState(c=>{this._subject.emit({url:this.path(!0),pop:!0,state:c.state,type:c.type})})}path(r=!1){return this.normalize(this._platformStrategy.path(r))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(r,s=""){return this.path()==this.normalize(r+Ce(s))}normalize(r){return i.stripTrailingSlash(function(i,n){return i&&n.startsWith(i)?n.substring(i.length):n}(this._baseHref,xe(r)))}prepareExternalUrl(r){return r&&"/"!==r[0]&&(r="/"+r),this._platformStrategy.prepareExternalUrl(r)}go(r,s="",a=null){this._platformStrategy.pushState(a,"",r,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Ce(s)),a)}replaceState(r,s="",a=null){this._platformStrategy.replaceState(a,"",r,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Ce(s)),a)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(r=0){var s,a;null===(a=(s=this._platformStrategy).historyGo)||void 0===a||a.call(s,r)}onUrlChange(r){this._urlChangeListeners.push(r),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(s=>{this._notifyUrlChangeListeners(s.url,s.state)}))}_notifyUrlChangeListeners(r="",s){this._urlChangeListeners.forEach(a=>a(r,s))}subscribe(r,s,a){return this._subject.subscribe({next:r,error:s,complete:a})}}return i.\u0275fac=function(r){return new(r||i)(_.LFG(ye),_.LFG(re))},i.normalizeQueryParams=Ce,i.joinWithSlash=ge,i.stripTrailingSlash=Ne,i.\u0275prov=(0,_.Yz7)({factory:Ct,token:i,providedIn:"root"}),i})();function Ct(){return new nt((0,_.LFG)(ye),(0,_.LFG)(re))}function xe(i){return i.replace(/\/index.html$/,"")}var we=(()=>((we=we||{})[we.Zero=0]="Zero",we[we.One=1]="One",we[we.Two=2]="Two",we[we.Few=3]="Few",we[we.Many=4]="Many",we[we.Other=5]="Other",we))(),Te=(()=>((Te=Te||{})[Te.Format=0]="Format",Te[Te.Standalone=1]="Standalone",Te))(),Ae=(()=>((Ae=Ae||{})[Ae.Narrow=0]="Narrow",Ae[Ae.Abbreviated=1]="Abbreviated",Ae[Ae.Wide=2]="Wide",Ae[Ae.Short=3]="Short",Ae))(),He=(()=>((He=He||{})[He.Short=0]="Short",He[He.Medium=1]="Medium",He[He.Long=2]="Long",He[He.Full=3]="Full",He))(),be=(()=>((be=be||{})[be.Decimal=0]="Decimal",be[be.Group=1]="Group",be[be.List=2]="List",be[be.PercentSign=3]="PercentSign",be[be.PlusSign=4]="PlusSign",be[be.MinusSign=5]="MinusSign",be[be.Exponential=6]="Exponential",be[be.SuperscriptingExponent=7]="SuperscriptingExponent",be[be.PerMille=8]="PerMille",be[be.Infinity=9]="Infinity",be[be.NaN=10]="NaN",be[be.TimeSeparator=11]="TimeSeparator",be[be.CurrencyDecimal=12]="CurrencyDecimal",be[be.CurrencyGroup=13]="CurrencyGroup",be))();function Vr(i,n){return Yt((0,_.cg1)(i)[_.wAp.DateFormat],n)}function wt(i,n){return Yt((0,_.cg1)(i)[_.wAp.TimeFormat],n)}function Pn(i,n){return Yt((0,_.cg1)(i)[_.wAp.DateTimeFormat],n)}function Mn(i,n){const r=(0,_.cg1)(i),s=r[_.wAp.NumberSymbols][n];if(void 0===s){if(n===be.CurrencyDecimal)return r[_.wAp.NumberSymbols][be.Decimal];if(n===be.CurrencyGroup)return r[_.wAp.NumberSymbols][be.Group]}return s}const ki=_.kL8;function Xn(i){if(!i[_.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${i[_.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Yt(i,n){for(let r=n;r>-1;r--)if(void 0!==i[r])return i[r];throw new Error("Locale data API: locale data undefined")}function Ar(i){const[n,r]=i.split(":");return{hours:+n,minutes:+r}}const Ut=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Lt={},ur=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var ln=(()=>((ln=ln||{})[ln.Short=0]="Short",ln[ln.ShortGMT=1]="ShortGMT",ln[ln.Long=2]="Long",ln[ln.Extended=3]="Extended",ln))(),qe=(()=>((qe=qe||{})[qe.FullYear=0]="FullYear",qe[qe.Month=1]="Month",qe[qe.Date=2]="Date",qe[qe.Hours=3]="Hours",qe[qe.Minutes=4]="Minutes",qe[qe.Seconds=5]="Seconds",qe[qe.FractionalSeconds=6]="FractionalSeconds",qe[qe.Day=7]="Day",qe))(),st=(()=>((st=st||{})[st.DayPeriods=0]="DayPeriods",st[st.Days=1]="Days",st[st.Months=2]="Months",st[st.Eras=3]="Eras",st))();function Yo(i,n,r,s){let a=function(i){if(Xt(i))return i;if("number"==typeof i&&!isNaN(i))return new Date(i);if("string"==typeof i){if(i=i.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(i)){const[a,c=1,h=1]=i.split("-").map(m=>+m);return bs(a,c-1,h)}const r=parseFloat(i);if(!isNaN(i-r))return new Date(r);let s;if(s=i.match(Ut))return function(i){const n=new Date(0);let r=0,s=0;const a=i[8]?n.setUTCFullYear:n.setFullYear,c=i[8]?n.setUTCHours:n.setHours;i[9]&&(r=Number(i[9]+i[10]),s=Number(i[9]+i[11])),a.call(n,Number(i[1]),Number(i[2])-1,Number(i[3]));const h=Number(i[4]||0)-r,m=Number(i[5]||0)-s,E=Number(i[6]||0),C=Math.floor(1e3*parseFloat("0."+(i[7]||0)));return c.call(n,h,m,E,C),n}(s)}const n=new Date(i);if(!Xt(n))throw new Error(`Unable to convert "${i}" into a date`);return n}(i);n=Ii(r,n)||n;let m,h=[];for(;n;){if(m=ur.exec(n),!m){h.push(n);break}{h=h.concat(m.slice(1));const S=h.pop();if(!S)break;n=S}}let E=a.getTimezoneOffset();s&&(E=ee(s,E),a=function(i,n,r){const a=i.getTimezoneOffset();return function(i,n){return(i=new Date(i.getTime())).setMinutes(i.getMinutes()+n),i}(i,-1*(ee(n,a)-a))}(a,s));let C="";return h.forEach(S=>{const N=function(i){if(ae[i])return ae[i];let n;switch(i){case"G":case"GG":case"GGG":n=X(st.Eras,Ae.Abbreviated);break;case"GGGG":n=X(st.Eras,Ae.Wide);break;case"GGGGG":n=X(st.Eras,Ae.Narrow);break;case"y":n=Q(qe.FullYear,1,0,!1,!0);break;case"yy":n=Q(qe.FullYear,2,0,!0,!0);break;case"yyy":n=Q(qe.FullYear,3,0,!1,!0);break;case"yyyy":n=Q(qe.FullYear,4,0,!1,!0);break;case"Y":n=dr(1);break;case"YY":n=dr(2,!0);break;case"YYY":n=dr(3);break;case"YYYY":n=dr(4);break;case"M":case"L":n=Q(qe.Month,1,1);break;case"MM":case"LL":n=Q(qe.Month,2,1);break;case"MMM":n=X(st.Months,Ae.Abbreviated);break;case"MMMM":n=X(st.Months,Ae.Wide);break;case"MMMMM":n=X(st.Months,Ae.Narrow);break;case"LLL":n=X(st.Months,Ae.Abbreviated,Te.Standalone);break;case"LLLL":n=X(st.Months,Ae.Wide,Te.Standalone);break;case"LLLLL":n=X(st.Months,Ae.Narrow,Te.Standalone);break;case"w":n=cr(1);break;case"ww":n=cr(2);break;case"W":n=cr(1,!0);break;case"d":n=Q(qe.Date,1);break;case"dd":n=Q(qe.Date,2);break;case"c":case"cc":n=Q(qe.Day,1);break;case"ccc":n=X(st.Days,Ae.Abbreviated,Te.Standalone);break;case"cccc":n=X(st.Days,Ae.Wide,Te.Standalone);break;case"ccccc":n=X(st.Days,Ae.Narrow,Te.Standalone);break;case"cccccc":n=X(st.Days,Ae.Short,Te.Standalone);break;case"E":case"EE":case"EEE":n=X(st.Days,Ae.Abbreviated);break;case"EEEE":n=X(st.Days,Ae.Wide);break;case"EEEEE":n=X(st.Days,Ae.Narrow);break;case"EEEEEE":n=X(st.Days,Ae.Short);break;case"a":case"aa":case"aaa":n=X(st.DayPeriods,Ae.Abbreviated);break;case"aaaa":n=X(st.DayPeriods,Ae.Wide);break;case"aaaaa":n=X(st.DayPeriods,Ae.Narrow);break;case"b":case"bb":case"bbb":n=X(st.DayPeriods,Ae.Abbreviated,Te.Standalone,!0);break;case"bbbb":n=X(st.DayPeriods,Ae.Wide,Te.Standalone,!0);break;case"bbbbb":n=X(st.DayPeriods,Ae.Narrow,Te.Standalone,!0);break;case"B":case"BB":case"BBB":n=X(st.DayPeriods,Ae.Abbreviated,Te.Format,!0);break;case"BBBB":n=X(st.DayPeriods,Ae.Wide,Te.Format,!0);break;case"BBBBB":n=X(st.DayPeriods,Ae.Narrow,Te.Format,!0);break;case"h":n=Q(qe.Hours,1,-12);break;case"hh":n=Q(qe.Hours,2,-12);break;case"H":n=Q(qe.Hours,1);break;case"HH":n=Q(qe.Hours,2);break;case"m":n=Q(qe.Minutes,1);break;case"mm":n=Q(qe.Minutes,2);break;case"s":n=Q(qe.Seconds,1);break;case"ss":n=Q(qe.Seconds,2);break;case"S":n=Q(qe.FractionalSeconds,1);break;case"SS":n=Q(qe.FractionalSeconds,2);break;case"SSS":n=Q(qe.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":n=pe(ln.Short);break;case"ZZZZZ":n=pe(ln.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":n=pe(ln.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":n=pe(ln.Long);break;default:return null}return ae[i]=n,n}(S);C+=N?N(a,r,E):"''"===S?"'":S.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),C}function bs(i,n,r){const s=new Date(0);return s.setFullYear(i,n,r),s.setHours(0,0,0),s}function Ii(i,n){const r=function(i){return(0,_.cg1)(i)[_.wAp.LocaleId]}(i);if(Lt[r]=Lt[r]||{},Lt[r][n])return Lt[r][n];let s="";switch(n){case"shortDate":s=Vr(i,He.Short);break;case"mediumDate":s=Vr(i,He.Medium);break;case"longDate":s=Vr(i,He.Long);break;case"fullDate":s=Vr(i,He.Full);break;case"shortTime":s=wt(i,He.Short);break;case"mediumTime":s=wt(i,He.Medium);break;case"longTime":s=wt(i,He.Long);break;case"fullTime":s=wt(i,He.Full);break;case"short":const a=Ii(i,"shortTime"),c=Ii(i,"shortDate");s=fn(Pn(i,He.Short),[a,c]);break;case"medium":const h=Ii(i,"mediumTime"),m=Ii(i,"mediumDate");s=fn(Pn(i,He.Medium),[h,m]);break;case"long":const E=Ii(i,"longTime"),C=Ii(i,"longDate");s=fn(Pn(i,He.Long),[E,C]);break;case"full":const S=Ii(i,"fullTime"),N=Ii(i,"fullDate");s=fn(Pn(i,He.Full),[S,N])}return s&&(Lt[r][n]=s),s}function fn(i,n){return n&&(i=i.replace(/\{([^}]+)}/g,function(r,s){return null!=n&&s in n?n[s]:r})),i}function pn(i,n,r="-",s,a){let c="";(i<0||a&&i<=0)&&(a?i=1-i:(i=-i,c=r));let h=String(i);for(;h.length<n;)h="0"+h;return s&&(h=h.substr(h.length-n)),c+h}function Q(i,n,r=0,s=!1,a=!1){return function(c,h){let m=function(i,n){switch(i){case qe.FullYear:return n.getFullYear();case qe.Month:return n.getMonth();case qe.Date:return n.getDate();case qe.Hours:return n.getHours();case qe.Minutes:return n.getMinutes();case qe.Seconds:return n.getSeconds();case qe.FractionalSeconds:return n.getMilliseconds();case qe.Day:return n.getDay();default:throw new Error(`Unknown DateType value "${i}".`)}}(i,c);if((r>0||m>-r)&&(m+=r),i===qe.Hours)0===m&&-12===r&&(m=12);else if(i===qe.FractionalSeconds)return function(i,n){return pn(i,3).substr(0,n)}(m,n);const E=Mn(h,be.MinusSign);return pn(m,n,E,s,a)}}function X(i,n,r=Te.Format,s=!1){return function(a,c){return function(i,n,r,s,a,c){switch(r){case st.Months:return function(i,n,r){const s=(0,_.cg1)(i),c=Yt([s[_.wAp.MonthsFormat],s[_.wAp.MonthsStandalone]],n);return Yt(c,r)}(n,a,s)[i.getMonth()];case st.Days:return function(i,n,r){const s=(0,_.cg1)(i),c=Yt([s[_.wAp.DaysFormat],s[_.wAp.DaysStandalone]],n);return Yt(c,r)}(n,a,s)[i.getDay()];case st.DayPeriods:const h=i.getHours(),m=i.getMinutes();if(c){const C=function(i){const n=(0,_.cg1)(i);return Xn(n),(n[_.wAp.ExtraData][2]||[]).map(s=>"string"==typeof s?Ar(s):[Ar(s[0]),Ar(s[1])])}(n),S=function(i,n,r){const s=(0,_.cg1)(i);Xn(s);const c=Yt([s[_.wAp.ExtraData][0],s[_.wAp.ExtraData][1]],n)||[];return Yt(c,r)||[]}(n,a,s),N=C.findIndex(O=>{if(Array.isArray(O)){const[B,W]=O,ue=h>=B.hours&&m>=B.minutes,Pe=h<W.hours||h===W.hours&&m<W.minutes;if(B.hours<W.hours){if(ue&&Pe)return!0}else if(ue||Pe)return!0}else if(O.hours===h&&O.minutes===m)return!0;return!1});if(-1!==N)return S[N]}return function(i,n,r){const s=(0,_.cg1)(i),c=Yt([s[_.wAp.DayPeriodsFormat],s[_.wAp.DayPeriodsStandalone]],n);return Yt(c,r)}(n,a,s)[h<12?0:1];case st.Eras:return function(i,n){return Yt((0,_.cg1)(i)[_.wAp.Eras],n)}(n,s)[i.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${r}`)}}(a,c,i,n,r,s)}}function pe(i){return function(n,r,s){const a=-1*s,c=Mn(r,be.MinusSign),h=a>0?Math.floor(a/60):Math.ceil(a/60);switch(i){case ln.Short:return(a>=0?"+":"")+pn(h,2,c)+pn(Math.abs(a%60),2,c);case ln.ShortGMT:return"GMT"+(a>=0?"+":"")+pn(h,1,c);case ln.Long:return"GMT"+(a>=0?"+":"")+pn(h,2,c)+":"+pn(Math.abs(a%60),2,c);case ln.Extended:return 0===s?"Z":(a>=0?"+":"")+pn(h,2,c)+":"+pn(Math.abs(a%60),2,c);default:throw new Error(`Unknown zone width "${i}"`)}}}function Cn(i){return bs(i.getFullYear(),i.getMonth(),i.getDate()+(4-i.getDay()))}function cr(i,n=!1){return function(r,s){let a;if(n){const c=new Date(r.getFullYear(),r.getMonth(),1).getDay()-1,h=r.getDate();a=1+Math.floor((h+c)/7)}else{const c=Cn(r),h=function(i){const n=bs(i,0,1).getDay();return bs(i,0,1+(n<=4?4:11)-n)}(c.getFullYear()),m=c.getTime()-h.getTime();a=1+Math.round(m/6048e5)}return pn(a,i,Mn(s,be.MinusSign))}}function dr(i,n=!1){return function(r,s){return pn(Cn(r).getFullYear(),i,Mn(s,be.MinusSign),n)}}const ae={};function ee(i,n){i=i.replace(/:/g,"");const r=Date.parse("Jan 01, 1970 00:00:00 "+i)/6e4;return isNaN(r)?n:r}function Xt(i){return i instanceof Date&&!isNaN(i.valueOf())}class js{}let Rr=(()=>{class i extends js{constructor(r){super(),this.locale=r}getPluralCategory(r,s){switch(ki(s||this.locale)(r)){case we.Zero:return"zero";case we.One:return"one";case we.Two:return"two";case we.Few:return"few";case we.Many:return"many";default:return"other"}}}return i.\u0275fac=function(r){return new(r||i)(_.LFG(_.soG))},i.\u0275prov=_.Yz7({token:i,factory:i.\u0275fac}),i})();class Di{constructor(n,r,s,a){this.$implicit=n,this.ngForOf=r,this.index=s,this.count=a}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let un=(()=>{class i{constructor(r,s,a){this._viewContainer=r,this._template=s,this._differs=a,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const r=this._ngForOf;if(!this._differ&&r)try{this._differ=this._differs.find(r).create(this.ngForTrackBy)}catch(s){throw new Error(`Cannot find a differ supporting object '${r}' of type '${function(i){return i.name||typeof i}(r)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){const s=[];r.forEachOperation((a,c,h)=>{if(null==a.previousIndex){const m=this._viewContainer.createEmbeddedView(this._template,new Di(null,this._ngForOf,-1,-1),null===h?void 0:h),E=new Bc(a,m);s.push(E)}else if(null==h)this._viewContainer.remove(null===c?void 0:c);else if(null!==c){const m=this._viewContainer.get(c);this._viewContainer.move(m,h);const E=new Bc(a,m);s.push(E)}});for(let a=0;a<s.length;a++)this._perViewChange(s[a].view,s[a].record);for(let a=0,c=this._viewContainer.length;a<c;a++){const h=this._viewContainer.get(a);h.context.index=a,h.context.count=c,h.context.ngForOf=this._ngForOf}r.forEachIdentityChange(a=>{this._viewContainer.get(a.currentIndex).context.$implicit=a.item})}_perViewChange(r,s){r.context.$implicit=s.item}static ngTemplateContextGuard(r,s){return!0}}return i.\u0275fac=function(r){return new(r||i)(_.Y36(_.s_b),_.Y36(_.Rgc),_.Y36(_.ZZ4))},i.\u0275dir=_.lG2({type:i,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),i})();class Bc{constructor(n,r){this.record=n,this.view=r}}let ts=(()=>{class i{constructor(r,s){this._viewContainer=r,this._context=new jc,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=s}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){mo("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){mo("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,s){return!0}}return i.\u0275fac=function(r){return new(r||i)(_.Y36(_.s_b),_.Y36(_.Rgc))},i.\u0275dir=_.lG2({type:i,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),i})();class jc{constructor(){this.$implicit=null,this.ngIf=null}}function mo(i,n){if(n&&!n.createEmbeddedView)throw new Error(`${i} must be a TemplateRef, but received '${(0,_.AaK)(n)}'.`)}function Si(i,n){return Error(`InvalidPipeArgument: '${n}' for pipe '${(0,_.AaK)(i)}'`)}class o_{createSubscription(n,r){return n.subscribe({next:r,error:s=>{throw s}})}dispose(n){n.unsubscribe()}onDestroy(n){n.unsubscribe()}}class Is{createSubscription(n,r){return n.then(r,s=>{throw s})}dispose(n){}onDestroy(n){}}const Lp=new Is,Oh=new o_;let kh=(()=>{class i{constructor(r){this._ref=r,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(r){return this._obj?r!==this._obj?(this._dispose(),this.transform(r)):this._latestValue:(r&&this._subscribe(r),this._latestValue)}_subscribe(r){this._obj=r,this._strategy=this._selectStrategy(r),this._subscription=this._strategy.createSubscription(r,s=>this._updateLatestValue(r,s))}_selectStrategy(r){if((0,_.QGY)(r))return Lp;if((0,_.F4k)(r))return Oh;throw Si(i,r)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(r,s){r===this._obj&&(this._latestValue=s,this._ref.markForCheck())}}return i.\u0275fac=function(r){return new(r||i)(_.Y36(_.sBO,16))},i.\u0275pipe=_.Yjl({name:"async",type:i,pure:!1}),i})(),Vp=(()=>{class i{constructor(r){this.locale=r}transform(r,s="mediumDate",a,c){if(null==r||""===r||r!=r)return null;try{return Yo(r,s,c||this.locale,a)}catch(h){throw Si(i,h.message)}}}return i.\u0275fac=function(r){return new(r||i)(_.Y36(_.soG,16))},i.\u0275pipe=_.Yjl({name:"date",type:i,pure:!0}),i})(),hi=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=_.oAB({type:i}),i.\u0275inj=_.cJS({providers:[{provide:js,useClass:Rr}]}),i})();function zr(i){return"server"===i}let Co=(()=>{class i{}return i.\u0275prov=(0,_.Yz7)({token:i,providedIn:"root",factory:()=>new Zc((0,_.LFG)(Re),window)}),i})();class Zc{constructor(n,r){this.document=n,this.window=r,this.offset=()=>[0,0]}setOffset(n){this.offset=Array.isArray(n)?()=>n:n}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(n){this.supportsScrolling()&&this.window.scrollTo(n[0],n[1])}scrollToAnchor(n){if(!this.supportsScrolling())return;const r=function(i,n){const r=i.getElementById(n)||i.getElementsByName(n)[0];if(r)return r;if("function"==typeof i.createTreeWalker&&i.body&&(i.body.createShadowRoot||i.body.attachShadow)){const s=i.createTreeWalker(i.body,NodeFilter.SHOW_ELEMENT);let a=s.currentNode;for(;a;){const c=a.shadowRoot;if(c){const h=c.getElementById(n)||c.querySelector(`[name="${n}"]`);if(h)return h}a=s.nextNode()}}return null}(this.document,n);r&&(this.scrollToElement(r),this.attemptFocus(r))}setHistoryScrollRestoration(n){if(this.supportScrollRestoration()){const r=this.window.history;r&&r.scrollRestoration&&(r.scrollRestoration=n)}}scrollToElement(n){const r=n.getBoundingClientRect(),s=r.left+this.window.pageXOffset,a=r.top+this.window.pageYOffset,c=this.offset();this.window.scrollTo(s-c[0],a-c[1])}attemptFocus(n){return n.focus(),this.document.activeElement===n}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const n=Sl(this.window.history)||Sl(Object.getPrototypeOf(this.window.history));return!(!n||!n.writable&&!n.set)}catch(n){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(n){return!1}}}function Sl(i){return Object.getOwnPropertyDescriptor(i,"scrollRestoration")}class Ba extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var i;i=new Ba,z||(z=i)}onAndCancel(n,r,s){return n.addEventListener(r,s,!1),()=>{n.removeEventListener(r,s,!1)}}dispatchEvent(n,r){n.dispatchEvent(r)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,r){return(r=r||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,r){return"window"===r?window:"document"===r?n:"body"===r?n.body:null}getBaseHref(n){const r=(Ss=Ss||document.querySelector("base"),Ss?Ss.getAttribute("href"):null);return null==r?null:function(i){An=An||document.createElement("a"),An.setAttribute("href",i);const n=An.pathname;return"/"===n.charAt(0)?n:`/${n}`}(r)}resetBaseElement(){Ss=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return function(i,n){n=encodeURIComponent(n);for(const r of i.split(";")){const s=r.indexOf("="),[a,c]=-1==s?[r,""]:[r.slice(0,s),r.slice(s+1)];if(a.trim()===n)return decodeURIComponent(c)}return null}(document.cookie,n)}}let An,Ss=null;const Al=new _.OlP("TRANSITION_ID"),fi=[{provide:_.ip1,useFactory:function(i,n,r){return()=>{r.get(_.CZH).donePromise.then(()=>{const s=L(),a=n.querySelectorAll(`style[ng-transition="${i}"]`);for(let c=0;c<a.length;c++)s.remove(a[c])})}},deps:[Al,Re,_.zs3],multi:!0}];class or{static init(){(0,_.VLi)(new or)}addToWindow(n){_.dqk.getAngularTestability=(s,a=!0)=>{const c=n.findTestabilityInTree(s,a);if(null==c)throw new Error("Could not find testability for element.");return c},_.dqk.getAllAngularTestabilities=()=>n.getAllTestabilities(),_.dqk.getAllAngularRootElements=()=>n.getAllRootElements(),_.dqk.frameworkStabilizers||(_.dqk.frameworkStabilizers=[]),_.dqk.frameworkStabilizers.push(s=>{const a=_.dqk.getAllAngularTestabilities();let c=a.length,h=!1;const m=function(E){h=h||E,c--,0==c&&s(h)};a.forEach(function(E){E.whenStable(m)})})}findTestabilityInTree(n,r,s){if(null==r)return null;const a=n.getTestability(r);return null!=a?a:s?L().isShadowRoot(r)?this.findTestabilityInTree(n,r.host,!0):this.findTestabilityInTree(n,r.parentElement,!0):null}}let Rl=(()=>{class i{build(){return new XMLHttpRequest}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=_.Yz7({token:i,factory:i.\u0275fac}),i})();const To=new _.OlP("EventManagerPlugins");let Ve=(()=>{class i{constructor(r,s){this._zone=s,this._eventNameToPlugin=new Map,r.forEach(a=>a.manager=this),this._plugins=r.slice().reverse()}addEventListener(r,s,a){return this._findPluginFor(s).addEventListener(r,s,a)}addGlobalEventListener(r,s,a){return this._findPluginFor(s).addGlobalEventListener(r,s,a)}getZone(){return this._zone}_findPluginFor(r){const s=this._eventNameToPlugin.get(r);if(s)return s;const a=this._plugins;for(let c=0;c<a.length;c++){const h=a[c];if(h.supports(r))return this._eventNameToPlugin.set(r,h),h}throw new Error(`No event manager plugin found for event ${r}`)}}return i.\u0275fac=function(r){return new(r||i)(_.LFG(To),_.LFG(_.R0b))},i.\u0275prov=_.Yz7({token:i,factory:i.\u0275fac}),i})();class zt{constructor(n){this._doc=n}addGlobalEventListener(n,r,s){const a=L().getGlobalEventTarget(this._doc,n);if(!a)throw new Error(`Unsupported event target ${a} for event ${r}`);return this.addEventListener(a,r,s)}}let xl=(()=>{class i{constructor(){this._stylesSet=new Set}addStyles(r){const s=new Set;r.forEach(a=>{this._stylesSet.has(a)||(this._stylesSet.add(a),s.add(a))}),this.onStylesAdded(s)}onStylesAdded(r){}getAllStyles(){return Array.from(this._stylesSet)}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=_.Yz7({token:i,factory:i.\u0275fac}),i})(),Fn=(()=>{class i extends xl{constructor(r){super(),this._doc=r,this._hostNodes=new Map,this._hostNodes.set(r.head,[])}_addStylesToHost(r,s,a){r.forEach(c=>{const h=this._doc.createElement("style");h.textContent=c,a.push(s.appendChild(h))})}addHost(r){const s=[];this._addStylesToHost(this._stylesSet,r,s),this._hostNodes.set(r,s)}removeHost(r){const s=this._hostNodes.get(r);s&&s.forEach(Pl),this._hostNodes.delete(r)}onStylesAdded(r){this._hostNodes.forEach((s,a)=>{this._addStylesToHost(r,a,s)})}ngOnDestroy(){this._hostNodes.forEach(r=>r.forEach(Pl))}}return i.\u0275fac=function(r){return new(r||i)(_.LFG(Re))},i.\u0275prov=_.Yz7({token:i,factory:i.\u0275fac}),i})();function Pl(i){L().remove(i)}const Io={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Fi=/%COMP%/g;function Er(i,n,r){for(let s=0;s<n.length;s++){let a=n[s];Array.isArray(a)?Er(i,a,r):(a=a.replace(Fi,i),r.push(a))}return r}function pi(i){return n=>{if("__ngUnwrap__"===n)return i;!1===i(n)&&(n.preventDefault(),n.returnValue=!1)}}let ss=(()=>{class i{constructor(r,s,a){this.eventManager=r,this.sharedStylesHost=s,this.appId=a,this.rendererByCompId=new Map,this.defaultRenderer=new Ri(r)}createRenderer(r,s){if(!r||!s)return this.defaultRenderer;switch(s.encapsulation){case _.ifc.Emulated:{let a=this.rendererByCompId.get(s.id);return a||(a=new nd(this.eventManager,this.sharedStylesHost,s,this.appId),this.rendererByCompId.set(s.id,a)),a.applyToHost(r),a}case 1:case _.ifc.ShadowDom:return new Ol(this.eventManager,this.sharedStylesHost,r,s);default:if(!this.rendererByCompId.has(s.id)){const a=Er(s.id,s.styles,[]);this.sharedStylesHost.addStyles(a),this.rendererByCompId.set(s.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return i.\u0275fac=function(r){return new(r||i)(_.LFG(Ve),_.LFG(Fn),_.LFG(_.AFp))},i.\u0275prov=_.Yz7({token:i,factory:i.\u0275fac}),i})();class Ri{constructor(n){this.eventManager=n,this.data=Object.create(null)}destroy(){}createElement(n,r){return r?document.createElementNS(Io[r]||r,n):document.createElement(n)}createComment(n){return document.createComment(n)}createText(n){return document.createTextNode(n)}appendChild(n,r){n.appendChild(r)}insertBefore(n,r,s){n&&n.insertBefore(r,s)}removeChild(n,r){n&&n.removeChild(r)}selectRootElement(n,r){let s="string"==typeof n?document.querySelector(n):n;if(!s)throw new Error(`The selector "${n}" did not match any elements`);return r||(s.textContent=""),s}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,r,s,a){if(a){r=a+":"+r;const c=Io[a];c?n.setAttributeNS(c,r,s):n.setAttribute(r,s)}else n.setAttribute(r,s)}removeAttribute(n,r,s){if(s){const a=Io[s];a?n.removeAttributeNS(a,r):n.removeAttribute(`${s}:${r}`)}else n.removeAttribute(r)}addClass(n,r){n.classList.add(r)}removeClass(n,r){n.classList.remove(r)}setStyle(n,r,s,a){a&(_.JOm.DashCase|_.JOm.Important)?n.style.setProperty(r,s,a&_.JOm.Important?"important":""):n.style[r]=s}removeStyle(n,r,s){s&_.JOm.DashCase?n.style.removeProperty(r):n.style[r]=""}setProperty(n,r,s){n[r]=s}setValue(n,r){n.nodeValue=r}listen(n,r,s){return"string"==typeof n?this.eventManager.addGlobalEventListener(n,r,pi(s)):this.eventManager.addEventListener(n,r,pi(s))}}class nd extends Ri{constructor(n,r,s,a){super(n),this.component=s;const c=Er(a+"-"+s.id,s.styles,[]);r.addStyles(c),this.contentAttr="_ngcontent-%COMP%".replace(Fi,a+"-"+s.id),this.hostAttr=function(i){return"_nghost-%COMP%".replace(Fi,i)}(a+"-"+s.id)}applyToHost(n){super.setAttribute(n,this.hostAttr,"")}createElement(n,r){const s=super.createElement(n,r);return super.setAttribute(s,this.contentAttr,""),s}}class Ol extends Ri{constructor(n,r,s,a){super(n),this.sharedStylesHost=r,this.hostEl=s,this.shadowRoot=s.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=Er(a.id,a.styles,[]);for(let h=0;h<c.length;h++){const m=document.createElement("style");m.textContent=c[h],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(n,r){return super.appendChild(this.nodeOrShadowRoot(n),r)}insertBefore(n,r,s){return super.insertBefore(this.nodeOrShadowRoot(n),r,s)}removeChild(n,r){return super.removeChild(this.nodeOrShadowRoot(n),r)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}}let kl=(()=>{class i extends zt{constructor(r){super(r)}supports(r){return!0}addEventListener(r,s,a){return r.addEventListener(s,a,!1),()=>this.removeEventListener(r,s,a)}removeEventListener(r,s,a){return r.removeEventListener(s,a)}}return i.\u0275fac=function(r){return new(r||i)(_.LFG(Re))},i.\u0275prov=_.Yz7({token:i,factory:i.\u0275fac}),i})();const ra=["alt","control","meta","shift"],iE={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},gi={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},d_={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey};let id=(()=>{class i extends zt{constructor(r){super(r)}supports(r){return null!=i.parseEventName(r)}addEventListener(r,s,a){const c=i.parseEventName(s),h=i.eventCallback(c.fullKey,a,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>L().onAndCancel(r,c.domEventName,h))}static parseEventName(r){const s=r.toLowerCase().split("."),a=s.shift();if(0===s.length||"keydown"!==a&&"keyup"!==a)return null;const c=i._normalizeKey(s.pop());let h="";if(ra.forEach(E=>{const C=s.indexOf(E);C>-1&&(s.splice(C,1),h+=E+".")}),h+=c,0!=s.length||0===c.length)return null;const m={};return m.domEventName=a,m.fullKey=h,m}static getEventFullKey(r){let s="",a=function(i){let n=i.key;if(null==n){if(n=i.keyIdentifier,null==n)return"Unidentified";n.startsWith("U+")&&(n=String.fromCharCode(parseInt(n.substring(2),16)),3===i.location&&gi.hasOwnProperty(n)&&(n=gi[n]))}return iE[n]||n}(r);return a=a.toLowerCase()," "===a?a="space":"."===a&&(a="dot"),ra.forEach(c=>{c!=a&&d_[c](r)&&(s+=c+".")}),s+=a,s}static eventCallback(r,s,a){return c=>{i.getEventFullKey(c)===r&&a.runGuarded(()=>s(c))}}static _normalizeKey(r){switch(r){case"esc":return"escape";default:return r}}}return i.\u0275fac=function(r){return new(r||i)(_.LFG(Re))},i.\u0275prov=_.Yz7({token:i,factory:i.\u0275fac}),i})(),sa=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=(0,_.Yz7)({factory:function(){return(0,_.LFG)(qn)},token:i,providedIn:"root"}),i})(),qn=(()=>{class i extends sa{constructor(r){super(),this._doc=r}sanitize(r,s){if(null==s)return null;switch(r){case _.q3G.NONE:return s;case _.q3G.HTML:return(0,_.qzn)(s,"HTML")?(0,_.z3N)(s):(0,_.EiD)(this._doc,String(s)).toString();case _.q3G.STYLE:return(0,_.qzn)(s,"Style")?(0,_.z3N)(s):s;case _.q3G.SCRIPT:if((0,_.qzn)(s,"Script"))return(0,_.z3N)(s);throw new Error("unsafe value used in a script context");case _.q3G.URL:return(0,_.yhl)(s),(0,_.qzn)(s,"URL")?(0,_.z3N)(s):(0,_.mCW)(String(s));case _.q3G.RESOURCE_URL:if((0,_.qzn)(s,"ResourceURL"))return(0,_.z3N)(s);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${r} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(r){return(0,_.JVY)(r)}bypassSecurityTrustStyle(r){return(0,_.L6k)(r)}bypassSecurityTrustScript(r){return(0,_.eBb)(r)}bypassSecurityTrustUrl(r){return(0,_.LAX)(r)}bypassSecurityTrustResourceUrl(r){return(0,_.pB0)(r)}}return i.\u0275fac=function(r){return new(r||i)(_.LFG(Re))},i.\u0275prov=(0,_.Yz7)({factory:function(){return function(i){return new qn(i.get(Re))}((0,_.LFG)(_.gxx))},token:i,providedIn:"root"}),i})();const Vl=(0,_.eFA)(_._c5,"browser",[{provide:_.Lbi,useValue:"browser"},{provide:_.g9A,useValue:function(){Ba.makeCurrent(),or.init()},multi:!0},{provide:Re,useFactory:function(){return(0,_.RDi)(document),document},deps:[]}]),ld=[[],{provide:_.zSh,useValue:"root"},{provide:_.qLn,useFactory:function(){return new _.qLn},deps:[]},{provide:To,useClass:kl,multi:!0,deps:[Re,_.R0b,_.Lbi]},{provide:To,useClass:id,multi:!0,deps:[Re]},[],{provide:ss,useClass:ss,deps:[Ve,Fn,_.AFp]},{provide:_.FYo,useExisting:ss},{provide:xl,useExisting:Fn},{provide:Fn,useClass:Fn,deps:[Re]},{provide:_.dDg,useClass:_.dDg,deps:[_.R0b]},{provide:Ve,useClass:Ve,deps:[To,_.R0b]},{provide:class{},useClass:Rl,deps:[]},[]];let Wh=(()=>{class i{constructor(r){if(r)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(r){return{ngModule:i,providers:[{provide:_.AFp,useValue:r.appId},{provide:Al,useExisting:_.AFp},fi]}}}return i.\u0275fac=function(r){return new(r||i)(_.LFG(i,12))},i.\u0275mod=_.oAB({type:i}),i.\u0275inj=_.cJS({providers:ld,imports:[hi,_.hGG]}),i})();"undefined"!=typeof window&&window;var Un=$(8939),Ro=$(3637),tr=$(7574),Rn=$(4402),gt=$(5917),Kt=$(6643),aa=$(3282);function Zh(...i){return(0,aa.J)(1)((0,gt.of)(...i))}var dd=$(4869);function la(...i){const n=i[i.length-1];return(0,dd.K)(n)?(i.pop(),r=>Zh(i,r,n)):r=>Zh(i,r)}var fr=$(7393);function hd(){return i=>i.lift(new za)}class za{call(n,r){return r.subscribe(new Yh(n))}}class Yh extends fr.L{constructor(n){super(n),this.hasPrev=!1}_next(n){let r;this.hasPrev?r=[this.prev,n]:this.hasPrev=!0,this.prev=n,r&&this.destination.next(r)}}var mt=$(8002);function zs(i,n){let r=!1;return arguments.length>=2&&(r=!0),function(a){return a.lift(new Ul(i,n,r))}}class Ul{constructor(n,r,s=!1){this.accumulator=n,this.seed=r,this.hasSeed=s}call(n,r){return r.subscribe(new fd(n,this.accumulator,this.seed,this.hasSeed))}}class fd extends fr.L{constructor(n,r,s,a){super(n),this.accumulator=r,this._seed=s,this.hasSeed=a,this.index=0}get seed(){return this._seed}set seed(n){this.hasSeed=!0,this._seed=n}_next(n){if(this.hasSeed)return this._tryNext(n);this.seed=n,this.destination.next(n)}_tryNext(n){const r=this.index++;let s;try{s=this.accumulator(this.seed,n,r)}catch(a){this.destination.error(a)}this.seed=s,this.destination.next(s)}}function Li(i,n){return r=>r.lift(new Bl(i,n))}class Bl{constructor(n,r){this.compare=n,this.keySelector=r}call(n,r){return r.subscribe(new Ka(n,this.compare,this.keySelector))}}class Ka extends fr.L{constructor(n,r,s){super(n),this.keySelector=s,this.hasKey=!1,"function"==typeof r&&(this.compare=r)}compare(n,r){return n===r}_next(n){let r;try{const{keySelector:a}=this;r=a?a(n):n}catch(a){return this.destination.error(a)}let s=!1;if(this.hasKey)try{const{compare:a}=this;s=a(this.key,r)}catch(a){return this.destination.error(a)}else this.hasKey=!0;s||(this.key=r,this.destination.next(n))}}function xi(i,n){return function(s){return s.lift(new ua(i,n))}}class ua{constructor(n,r){this.predicate=n,this.thisArg=r}call(n,r){return r.subscribe(new Za(n,this.predicate,this.thisArg))}}class Za extends fr.L{constructor(n,r,s){super(n),this.predicate=r,this.thisArg=s,this.count=0}_next(n){let r;try{r=this.predicate.call(this.thisArg,n,this.count++)}catch(s){return void this.destination.error(s)}r&&this.destination.next(n)}}$(4828);var it,Qp=$(4486),Se=$(8239),as=$(5452),Vi=$(6034),cn=$(5601),V=$(3854),Qh="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ns={},jl=jl||{},Mt=Qh||self;function $l(){}function pd(i){var n=typeof i;return"array"==(n="object"!=n?n:i?Array.isArray(i)?"array":n:"null")||"object"==n&&"number"==typeof i.length}function No(i){var n=typeof i;return"object"==n&&null!=i||"function"==n}var Ya="closure_uid_"+(1e9*Math.random()>>>0),Qa=0;function Vu(i,n,r){return i.call.apply(i.bind,arguments)}function nr(i,n,r){if(!i)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,s),i.apply(n,a)}}return function(){return i.apply(n,arguments)}}function Ln(i,n,r){return(Ln=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Vu:nr).apply(null,arguments)}function xo(i,n){var r=Array.prototype.slice.call(arguments,1);return function(){var s=r.slice();return s.push.apply(s,arguments),i.apply(this,s)}}function Zr(i,n){function r(){}r.prototype=n.prototype,i.Z=n.prototype,i.prototype=new r,i.prototype.constructor=i,i.Vb=function(s,a,c){for(var h=Array(arguments.length-2),m=2;m<arguments.length;m++)h[m-2]=arguments[m];return n.prototype[a].apply(s,h)}}function Po(){this.s=this.s,this.o=this.o}var xr={};Po.prototype.s=!1,Po.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function(i){return Object.prototype.hasOwnProperty.call(i,Ya)&&i[Ya]||(i[Ya]=++Qa)}(this);delete xr[i]}},Po.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ca=Array.prototype.indexOf?function(i,n){return Array.prototype.indexOf.call(i,n,void 0)}:function(i,n){if("string"==typeof i)return"string"!=typeof n||1!=n.length?-1:i.indexOf(n,0);for(let r=0;r<i.length;r++)if(r in i&&i[r]===n)return r;return-1},Mo=Array.prototype.forEach?function(i,n,r){Array.prototype.forEach.call(i,n,r)}:function(i,n,r){const s=i.length,a="string"==typeof i?i.split(""):i;for(let c=0;c<s;c++)c in a&&n.call(r,a[c],c,i)};function ls(i){return Array.prototype.concat.apply([],arguments)}function gd(i){const n=i.length;if(0<n){const r=Array(n);for(let s=0;s<n;s++)r[s]=i[s];return r}return[]}function Bi(i){return/^[\s\xa0]*$/.test(i)}var Nn,Jp=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function Yr(i,n){return-1!=i.indexOf(n)}function da(i,n){return i<n?-1:i>n?1:0}e:{var Ja=Mt.navigator;if(Ja){var Xa=Ja.userAgent;if(Xa){Nn=Xa;break e}}Nn=""}function A(i,n,r){for(const s in i)n.call(r,i[s],s,i)}function x(i){const n={};for(const r in i)n[r]=i[r];return n}var k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function q(i,n){let r,s;for(let a=1;a<arguments.length;a++){for(r in s=arguments[a],s)i[r]=s[r];for(let c=0;c<k.length;c++)r=k[c],Object.prototype.hasOwnProperty.call(s,r)&&(i[r]=s[r])}}function oe(i){return oe[" "](i),i}oe[" "]=$l;var Vn,i,je=Yr(Nn,"Opera"),Qe=Yr(Nn,"Trident")||Yr(Nn,"MSIE"),Xe=Yr(Nn,"Edge"),Ht=Xe||Qe,kn=Yr(Nn,"Gecko")&&!(Yr(Nn.toLowerCase(),"webkit")&&!Yr(Nn,"Edge"))&&!(Yr(Nn,"Trident")||Yr(Nn,"MSIE"))&&!Yr(Nn,"Edge"),Pr=Yr(Nn.toLowerCase(),"webkit")&&!Yr(Nn,"Edge");function Mr(){var i=Mt.document;return i?i.documentMode:void 0}e:{var el="",ha=(i=Nn,kn?/rv:([^\);]+)(\)|;)/.exec(i):Xe?/Edge\/([\d\.]+)/.exec(i):Qe?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):Pr?/WebKit\/(\S+)/.exec(i):je?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(ha&&(el=ha?ha[1]:""),Qe){var fa=Mr();if(null!=fa&&fa>parseFloat(el)){Vn=String(fa);break e}}Vn=el}var us={};function pa(){return n=us,Object.prototype.hasOwnProperty.call(n,9)?n[9]:n[9]=function(){let i=0;const n=Jp(String(Vn)).split("."),r=Jp("9").split("."),s=Math.max(n.length,r.length);for(let h=0;0==i&&h<s;h++){var a=n[h]||"",c=r[h]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],0==a[0].length&&0==c[0].length)break;i=da(0==a[1].length?0:parseInt(a[1],10),0==c[1].length?0:parseInt(c[1],10))||da(0==a[2].length,0==c[2].length)||da(a[2],c[2]),a=a[3],c=c[3]}while(0==i)}return 0<=i}();var n}var tl=Mt.document&&Qe&&(Mr()||parseInt(Vn,10))||void 0,oE=function(){if(!Mt.addEventListener||!Object.defineProperty)return!1;var i=!1,n=Object.defineProperty({},"passive",{get:function(){i=!0}});try{Mt.addEventListener("test",$l,n),Mt.removeEventListener("test",$l,n)}catch(r){}return i}();function tn(i,n){this.type=i,this.g=this.target=n,this.defaultPrevented=!1}function Gl(i,n){if(tn.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var r=this.type=i.type,s=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=n,n=i.relatedTarget){if(kn){e:{try{oe(n.nodeName);var a=!0;break e}catch(c){}a=!1}a||(n=null)}}else"mouseover"==r?n=i.fromElement:"mouseout"==r&&(n=i.toElement);this.relatedTarget=n,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:aE[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Gl.Z.h.call(this)}}tn.prototype.h=function(){this.defaultPrevented=!0},Zr(Gl,tn);var aE={2:"touch",3:"pen",4:"mouse"};Gl.prototype.h=function(){Gl.Z.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var Ks="closure_listenable_"+(1e6*Math.random()|0),Uu=0;function Xp(i,n,r,s,a){this.listener=i,this.proxy=null,this.src=n,this.type=r,this.capture=!!s,this.ia=a,this.key=++Uu,this.ca=this.fa=!1}function md(i){i.ca=!0,i.listener=null,i.proxy=null,i.src=null,i.ia=null}function _d(i){this.src=i,this.g={},this.h=0}function f_(i,n){var r=n.type;if(r in i.g){var c,s=i.g[r],a=ca(s,n);(c=0<=a)&&Array.prototype.splice.call(s,a,1),c&&(md(n),0==i.g[r].length&&(delete i.g[r],i.h--))}}function Fo(i,n,r,s){for(var a=0;a<i.length;++a){var c=i[a];if(!c.ca&&c.listener==n&&c.capture==!!r&&c.ia==s)return a}return-1}_d.prototype.add=function(i,n,r,s,a){var c=i.toString();(i=this.g[c])||(i=this.g[c]=[],this.h++);var h=Fo(i,n,s,a);return-1<h?(n=i[h],r||(n.fa=!1)):((n=new Xp(n,this.src,c,!!s,a)).fa=r,i.push(n)),n};var Zs="closure_lm_"+(1e6*Math.random()|0),Bu={};function Lo(i,n,r,s,a){if(s&&s.once)return Jh(i,n,r,s,a);if(Array.isArray(n)){for(var c=0;c<n.length;c++)Lo(i,n[c],r,s,a);return null}return r=eg(r),i&&i[Ks]?i.N(n,r,No(s)?!!s.capture:!!s,a):p_(i,n,r,!1,s,a)}function p_(i,n,r,s,a,c){if(!n)throw Error("Invalid event type");var h=No(a)?!!a.capture:!!a,m=nl(i);if(m||(i[Zs]=m=new _d(i)),(r=m.add(n,r,s,h,c)).proxy)return r;if(s=function(){var n=lE;return function i(r){return n.call(i.src,i.listener,r)}}(),r.proxy=s,s.src=i,s.listener=r,i.addEventListener)oE||(a=h),void 0===a&&(a=!1),i.addEventListener(n.toString(),s,a);else if(i.attachEvent)i.attachEvent(g_(n.toString()),s);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(s)}return r}function Jh(i,n,r,s,a){if(Array.isArray(n)){for(var c=0;c<n.length;c++)Jh(i,n[c],r,s,a);return null}return r=eg(r),i&&i[Ks]?i.O(n,r,No(s)?!!s.capture:!!s,a):p_(i,n,r,!0,s,a)}function vd(i,n,r,s,a){if(Array.isArray(n))for(var c=0;c<n.length;c++)vd(i,n[c],r,s,a);else s=No(s)?!!s.capture:!!s,r=eg(r),i&&i[Ks]?(i=i.i,(n=String(n).toString())in i.g&&-1<(r=Fo(c=i.g[n],r,s,a))&&(md(c[r]),Array.prototype.splice.call(c,r,1),0==c.length&&(delete i.g[n],i.h--))):i&&(i=nl(i))&&(n=i.g[n.toString()],i=-1,n&&(i=Fo(n,r,s,a)),(r=-1<i?n[i]:null)&&Xh(r))}function Xh(i){if("number"!=typeof i&&i&&!i.ca){var n=i.src;if(n&&n[Ks])f_(n.i,i);else{var r=i.type,s=i.proxy;n.removeEventListener?n.removeEventListener(r,s,i.capture):n.detachEvent?n.detachEvent(g_(r),s):n.addListener&&n.removeListener&&n.removeListener(s),(r=nl(n))?(f_(r,i),0==r.h&&(r.src=null,n[Zs]=null)):md(i)}}}function g_(i){return i in Bu?Bu[i]:Bu[i]="on"+i}function lE(i,n){if(i.ca)i=!0;else{n=new Gl(n,this);var r=i.listener,s=i.ia||i.src;i.fa&&Xh(i),i=r.call(s,n)}return i}function nl(i){return(i=i[Zs])instanceof _d?i:null}var ql="__closure_events_fn_"+(1e9*Math.random()>>>0);function eg(i){return"function"==typeof i?i:(i[ql]||(i[ql]=function(n){return i.handleEvent(n)}),i[ql])}function Or(){Po.call(this),this.i=new _d(this),this.P=this,this.I=null}function Br(i,n){var r,s=i.I;if(s)for(r=[];s;s=s.I)r.push(s);if(i=i.P,s=n.type||n,"string"==typeof n)n=new tn(n,i);else if(n instanceof tn)n.target=n.target||i;else{var a=n;q(n=new tn(s,i),a)}if(a=!0,r)for(var c=r.length-1;0<=c;c--){var h=n.g=r[c];a=ef(h,s,!0,n)&&a}if(a=ef(h=n.g=i,s,!0,n)&&a,a=ef(h,s,!1,n)&&a,r)for(c=0;c<r.length;c++)a=ef(h=n.g=r[c],s,!1,n)&&a}function ef(i,n,r,s){if(!(n=i.i.g[String(n)]))return!0;n=n.concat();for(var a=!0,c=0;c<n.length;++c){var h=n[c];if(h&&!h.ca&&h.capture==r){var m=h.listener,E=h.ia||h.src;h.fa&&f_(i.i,h),a=!1!==m.call(E,s)&&a}}return a&&!s.defaultPrevented}Zr(Or,Po),Or.prototype[Ks]=!0,Or.prototype.removeEventListener=function(i,n,r,s){vd(this,i,n,r,s)},Or.prototype.M=function(){if(Or.Z.M.call(this),this.i){var n,i=this.i;for(n in i.g){for(var r=i.g[n],s=0;s<r.length;s++)md(r[s]);delete i.g[n],i.h--}}this.I=null},Or.prototype.N=function(i,n,r,s){return this.i.add(String(i),n,!1,r,s)},Or.prototype.O=function(i,n,r,s){return this.i.add(String(i),n,!0,r,s)};var m_=Mt.JSON.stringify;function uE(){var i=Wl;let n=null;return i.g&&(n=i.g,i.g=i.g.next,i.g||(i.h=null),n.next=null),n}var rg,tg=new class{constructor(i,n){this.i=i,this.j=n,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new tf,i=>i.reset());class tf{constructor(){this.next=this.g=this.h=null}set(n,r){this.h=n,this.g=r,this.next=null}reset(){this.next=this.g=this.h=null}}function ng(i){Mt.setTimeout(()=>{throw i},0)}function rl(i,n){rg||function(){var i=Mt.Promise.resolve(void 0);rg=function(){i.then(sg)}}(),__||(rg(),__=!0),Wl.add(i,n)}var __=!1,Wl=new class{constructor(){this.h=this.g=null}add(n,r){const s=tg.get();s.set(n,r),this.h?this.h.next=s:this.g=s,this.h=s}};function sg(){for(var i;i=uE();){try{i.h.call(i.g)}catch(r){ng(r)}var n=tg;n.j(i),100>n.h&&(n.h++,i.next=n.g,n.g=i)}__=!1}function ju(i,n){Or.call(this),this.h=i||1,this.g=n||Mt,this.j=Ln(this.kb,this),this.l=Date.now()}function nf(i){i.da=!1,i.S&&(i.g.clearTimeout(i.S),i.S=null)}function $u(i,n,r){if("function"==typeof i)r&&(i=Ln(i,r));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=Ln(i.handleEvent,i)}return 2147483647<Number(n)?-1:Mt.setTimeout(i,n||0)}function il(i){i.g=$u(()=>{i.g=null,i.i&&(i.i=!1,il(i))},i.j);const n=i.h;i.h=null,i.m.apply(null,n)}Zr(ju,Or),(it=ju.prototype).da=!1,it.S=null,it.kb=function(){if(this.da){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-i):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Br(this,"tick"),this.da&&(nf(this),this.start()))}},it.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},it.M=function(){ju.Z.M.call(this),nf(this),delete this.g};class dE extends Po{constructor(n,r){super(),this.m=n,this.j=r,this.h=null,this.i=!1,this.g=null}l(n){this.h=arguments,this.g?this.i=!0:il(this)}M(){super.M(),this.g&&(Mt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ed(i){Po.call(this),this.h=i,this.g={}}Zr(Ed,Po);var y_=[];function v_(i,n,r,s){Array.isArray(r)||(r&&(y_[0]=r.toString()),r=y_);for(var a=0;a<r.length;a++){var c=Lo(n,r[a],s||i.handleEvent,!1,i.h||i);if(!c)break;i.g[c.key]=c}}function E_(i){A(i.g,function(n,r){this.g.hasOwnProperty(r)&&Xh(n)},i),i.g={}}function Ys(){this.g=!0}function w(i,n,r,s){i.info(function(){return"XMLHTTP TEXT ("+n+"): "+function(i,n){if(!i.g)return n;if(!n)return null;try{var r=JSON.parse(n);if(r)for(i=0;i<r.length;i++)if(Array.isArray(r[i])){var s=r[i];if(!(2>s.length)){var a=s[1];if(Array.isArray(a)&&!(1>a.length)){var c=a[0];if("noop"!=c&&"stop"!=c&&"close"!=c)for(var h=1;h<a.length;h++)a[h]=""}}}return m_(r)}catch(m){return n}}(i,r)+(s?" "+s:"")})}Ed.prototype.M=function(){Ed.Z.M.call(this),E_(this)},Ed.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ys.prototype.Aa=function(){this.g=!1},Ys.prototype.info=function(){};var H={},fe=null;function Be(){return fe=fe||new Or}function at(i){tn.call(this,H.Ma,i)}function Et(i){const n=Be();Br(n,new at(n,i))}function Qt(i,n){tn.call(this,H.STAT_EVENT,i),this.stat=n}function rn(i){const n=Be();Br(n,new Qt(n,i))}function Vo(i,n){tn.call(this,H.Na,i),this.size=n}function xs(i,n){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return Mt.setTimeout(function(){i()},n)}H.Ma="serverreachability",Zr(at,tn),H.STAT_EVENT="statevent",Zr(Qt,tn),H.Na="timingevent",Zr(Vo,tn);var Qs={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},rf={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function ji(){}function sf(){}ji.prototype.h=null;var af,sl={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function wd(){tn.call(this,"d")}function og(){tn.call(this,"c")}function lf(){}function Kl(i,n,r,s){this.l=i,this.j=n,this.m=r,this.X=s||1,this.V=new Ed(this),this.P=ag,this.W=new ju(i=Ht?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Hu}function Hu(){this.i=null,this.g="",this.h=!1}Zr(wd,tn),Zr(og,tn),Zr(lf,ji),lf.prototype.g=function(){return new XMLHttpRequest},lf.prototype.i=function(){return{}},af=new lf;var ag=45e3,L0={},hE={};function w_(i,n,r){i.K=1,i.v=cg(Zl(n)),i.s=r,i.U=!0,V0(i,null)}function V0(i,n){i.F=Date.now(),uf(i),i.A=Zl(i.v);var r=i.A,s=i.X;Array.isArray(s)||(s=[String(s)]),mE(r.h,"t",s),i.C=0,r=i.l.H,i.h=new Hu,i.g=aT(i.l,r?n:null,!i.s),0<i.O&&(i.L=new dE(Ln(i.Ia,i,i.g),i.O)),v_(i.V,i.g,"readystatechange",i.gb),n=i.H?x(i.H):{},i.s?(i.u||(i.u="POST"),n["Content-Type"]="application/x-www-form-urlencoded",i.g.ea(i.A,i.u,i.s,n)):(i.u="GET",i.g.ea(i.A,i.u,null,n)),Et(1),function(i,n,r,s,a,c){i.info(function(){if(i.g)if(c)for(var h="",m=c.split("&"),E=0;E<m.length;E++){var C=m[E].split("=");if(1<C.length){var S=C[0];C=C[1];var N=S.split("_");h=2<=N.length&&"type"==N[1]?h+(S+"=")+C+"&":h+(S+"=redacted&")}}else h=null;else h=c;return"XMLHTTP REQ ("+s+") [attempt "+a+"]: "+n+"\n"+r+"\n"+h})}(i.j,i.u,i.A,i.m,i.X,i.s)}function U0(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Ba}function B0(i,n,r){let a,s=!0;for(;!i.I&&i.C<r.length;){if(a=SR(i,r),a==hE){4==n&&(i.o=4,rn(14),s=!1),w(i.j,i.m,null,"[Incomplete Response]");break}if(a==L0){i.o=4,rn(15),w(i.j,i.m,r,"[Invalid Chunk]"),s=!1;break}w(i.j,i.m,a,null),ar(i,a)}U0(i)&&a!=hE&&a!=L0&&(i.h.g="",i.C=0),4!=n||0!=r.length||i.h.h||(i.o=1,rn(16),s=!1),i.i=i.i&&s,s?0<r.length&&!i.aa&&(i.aa=!0,(n=i.l).g==i&&n.$&&!n.L&&(n.h.info("Great, no buffering proxy detected. Bytes received: "+r.length),TE(n),n.L=!0,rn(11))):(w(i.j,i.m,r,"[Invalid Chunked Response]"),Cd(i),bd(i))}function SR(i,n){var r=i.C,s=n.indexOf("\n",r);return-1==s?hE:(r=Number(n.substring(r,s)),isNaN(r)?L0:(s+=1)+r>n.length?hE:(n=n.substr(s,r),i.C=s+r,n))}function uf(i){i.Y=Date.now()+i.P,lg(i,i.P)}function lg(i,n){if(null!=i.B)throw Error("WatchDog timer not null");i.B=xs(Ln(i.eb,i),n)}function ug(i){i.B&&(Mt.clearTimeout(i.B),i.B=null)}function bd(i){0==i.l.G||i.I||IE(i.l,i)}function Cd(i){ug(i);var n=i.L;n&&"function"==typeof n.na&&n.na(),i.L=null,nf(i.W),E_(i.V),i.g&&(n=i.g,i.g=null,n.abort(),n.na())}function ar(i,n){try{var r=i.l;if(0!=r.G&&(r.g==i||_E(r.i,i)))if(r.I=i.N,!i.J&&_E(r.i,i)&&3==r.G){try{var s=r.Ca.g.parse(n)}catch(C){s=null}if(Array.isArray(s)&&3==s.length){var a=s;if(0==a[0])e:if(r.u)r.ta=a[1],0<r.ta-r.U&&37500>a[2]&&r.N&&0==r.A&&!r.v&&(r.v=xs(Ln(r.ab,r),6e3));else{if(r.g){if(!(r.g.F+3e3<i.F))break e;R_(r),pg(r)}CE(r),rn(18)}if(1>=Q0(r.i)&&r.ka){try{r.ka()}catch(C){}r.ka=void 0}}else Yu(r,11)}else if((i.J||r.g==i)&&R_(r),!Bi(n))for(a=r.Ca.g.parse(n),n=0;n<a.length;n++){let C=a[n];if(r.U=C[0],C=C[1],2==r.G)if("c"==C[0]){r.J=C[1],r.la=C[2];const S=C[3];null!=S&&(r.ma=S,r.h.info("VER="+r.ma));const N=C[4];null!=N&&(r.za=N,r.h.info("SVER="+r.za));const O=C[5];null!=O&&"number"==typeof O&&0<O&&(r.K=s=1.5*O,r.h.info("backChannelRequestTimeoutMs_="+s)),s=r;const B=i.g;if(B){const W=B.g?B.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(W){var c=s.i;!c.g&&(Yr(W,"spdy")||Yr(W,"quic")||Yr(W,"h2"))&&(c.j=c.l,c.g=new Set,c.h&&(Ku(c,c.h),c.h=null))}if(s.D){const ue=B.g?B.g.getResponseHeader("X-HTTP-Session-Id"):null;ue&&(s.sa=ue,zn(s.F,s.D,ue))}}r.G=3,r.j&&r.j.xa(),r.$&&(r.O=Date.now()-i.F,r.h.info("Handshake RTT: "+r.O+"ms"));var h=i;if((s=r).oa=oT(s,s.H?s.la:null,s.W),h.J){J0(s.i,h);var m=h,E=s.K;E&&m.setTimeout(E),m.B&&(ug(m),uf(m)),s.g=h}else iT(s);0<r.l.length&&mf(r)}else"stop"!=C[0]&&"close"!=C[0]||Yu(r,7);else 3==r.G&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?Yu(r,7):fg(r):"noop"!=C[0]&&r.j&&r.j.wa(C),r.A=0)}Et(4)}catch(C){}}function fE(i,n){if(i.forEach&&"function"==typeof i.forEach)i.forEach(n,void 0);else if(pd(i)||"string"==typeof i)Mo(i,n,void 0);else{if(i.T&&"function"==typeof i.T)var r=i.T();else if(i.R&&"function"==typeof i.R)r=void 0;else if(pd(i)||"string"==typeof i){r=[];for(var s=i.length,a=0;a<s;a++)r.push(a)}else for(a in r=[],s=0,i)r[s++]=a;a=(s=function(i){if(i.R&&"function"==typeof i.R)return i.R();if("string"==typeof i)return i.split("");if(pd(i)){for(var n=[],r=i.length,s=0;s<r;s++)n.push(i[s]);return n}for(s in n=[],r=0,i)n[r++]=i[s];return n}(i)).length;for(var c=0;c<a;c++)n.call(void 0,s[c],r&&r[c],i)}}function Gu(i,n){this.h={},this.g=[],this.i=0;var r=arguments.length;if(1<r){if(r%2)throw Error("Uneven number of arguments");for(var s=0;s<r;s+=2)this.set(arguments[s],arguments[s+1])}else if(i)if(i instanceof Gu)for(r=i.T(),s=0;s<r.length;s++)this.set(r[s],i.get(r[s]));else for(s in i)this.set(s,i[s])}function b_(i){if(i.i!=i.g.length){for(var n=0,r=0;n<i.g.length;){var s=i.g[n];Td(i.h,s)&&(i.g[r++]=s),n++}i.g.length=r}if(i.i!=i.g.length){var a={};for(r=n=0;n<i.g.length;)Td(a,s=i.g[n])||(i.g[r++]=s,a[s]=1),n++;i.g.length=r}}function Td(i,n){return Object.prototype.hasOwnProperty.call(i,n)}(it=Kl.prototype).setTimeout=function(i){this.P=i},it.gb=function(i){i=i.target;const n=this.L;n&&3==Ql(i)?n.l():this.Ia(i)},it.Ia=function(i){try{if(i==this.g)e:{const S=Ql(this.g);var n=this.g.Da();const N=this.g.ba();if(!(3>S)&&(3!=S||Ht||this.g&&(this.h.h||this.g.ga()||bE(this.g)))){this.I||4!=S||7==n||Et(8==n||0>=N?3:2),ug(this);var r=this.g.ba();this.N=r;t:if(U0(this)){var s=bE(this.g);i="";var a=s.length,c=4==Ql(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Cd(this),bd(this);var h="";break t}this.h.i=new Mt.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,i+=this.h.i.decode(s[n],{stream:c&&n==a-1});s.splice(0,a),this.h.g+=i,this.C=0,h=this.h.g}else h=this.g.ga();if(this.i=200==r,function(i,n,r,s,a,c,h){i.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+a+"]: "+n+"\n"+r+"\n"+c+" "+h})}(this.j,this.u,this.A,this.m,this.X,S,r),this.i){if(this.$&&!this.J){t:{if(this.g){var m,E=this.g;if((m=E.g?E.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Bi(m)){var C=m;break t}}C=null}if(!(r=C)){this.i=!1,this.o=3,rn(12),Cd(this),bd(this);break e}w(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ar(this,r)}this.U?(B0(this,S,h),Ht&&this.i&&3==S&&(v_(this.V,this.W,"tick",this.fb),this.W.start())):(w(this.j,this.m,h,null),ar(this,h)),4==S&&Cd(this),this.i&&!this.I&&(4==S?IE(this.l,this):(this.i=!1,uf(this)))}else 400==r&&0<h.indexOf("Unknown SID")?(this.o=3,rn(12)):(this.o=0,rn(13)),Cd(this),bd(this)}}}catch(S){}},it.fb=function(){if(this.g){var i=Ql(this.g),n=this.g.ga();this.C<n.length&&(ug(this),B0(this,i,n),this.i&&4!=i&&uf(this))}},it.cancel=function(){this.I=!0,Cd(this)},it.eb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function(i,n){i.info(function(){return"TIMEOUT: "+n})}(this.j,this.A),2!=this.K&&(Et(3),rn(17)),Cd(this),this.o=2,bd(this)):lg(this,this.Y-i)},(it=Gu.prototype).R=function(){b_(this);for(var i=[],n=0;n<this.g.length;n++)i.push(this.h[this.g[n]]);return i},it.T=function(){return b_(this),this.g.concat()},it.get=function(i,n){return Td(this.h,i)?this.h[i]:n},it.set=function(i,n){Td(this.h,i)||(this.i++,this.g.push(i)),this.h[i]=n},it.forEach=function(i,n){for(var r=this.T(),s=0;s<r.length;s++){var a=r[s],c=this.get(a);i.call(n,c,a,this)}};var $0=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Id(i,n){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,i instanceof Id){this.g=void 0!==n?n:i.g,pE(this,i.j),this.s=i.s,gE(this,i.i),qu(this,i.m),this.l=i.l,n=i.h;var r=new cf;r.i=n.i,n.g&&(r.g=new Gu(n.g),r.h=n.h),$i(this,r),this.o=i.o}else i&&(r=String(i).match($0))?(this.g=!!n,pE(this,r[1]||"",!0),this.s=Yl(r[2]||""),gE(this,r[3]||"",!0),qu(this,r[4]),this.l=Yl(r[5]||"",!0),$i(this,r[6]||"",!0),this.o=Yl(r[7]||"")):(this.g=!!n,this.h=new cf(null,this.g))}function Zl(i){return new Id(i)}function pE(i,n,r){i.j=r?Yl(n,!0):n,i.j&&(i.j=i.j.replace(/:$/,""))}function gE(i,n,r){i.i=r?Yl(n,!0):n}function qu(i,n){if(n){if(n=Number(n),isNaN(n)||0>n)throw Error("Bad port number "+n);i.m=n}else i.m=null}function $i(i,n,r){n instanceof cf?(i.h=n,function(i,n){n&&!i.j&&(Wu(i),i.i=null,i.g.forEach(function(r,s){var a=s.toLowerCase();s!=a&&(z0(this,s),mE(this,a,r))},i)),i.j=n}(i.h,i.g)):(r||(n=Dd(n,W0)),i.h=new cf(n,i.g))}function zn(i,n,r){i.h.set(n,r)}function cg(i){return zn(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function Yl(i,n){return i?n?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Dd(i,n,r){return"string"==typeof i?(i=encodeURI(i).replace(n,RR),r&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function RR(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}Id.prototype.toString=function(){var i=[],n=this.j;n&&i.push(Dd(n,G0,!0),":");var r=this.i;return(r||"file"==n)&&(i.push("//"),(n=this.s)&&i.push(Dd(n,G0,!0),"@"),i.push(encodeURIComponent(String(r)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(r=this.m)&&i.push(":",String(r))),(r=this.l)&&(this.i&&"/"!=r.charAt(0)&&i.push("/"),i.push(Dd(r,"/"==r.charAt(0)?NR:q0,!0))),(r=this.h.toString())&&i.push("?",r),(r=this.o)&&i.push("#",Dd(r,xR)),i.join("")};var G0=/[#\/\?@]/g,q0=/[#\?:]/g,NR=/[#\?]/g,W0=/[#\?@]/g,xR=/#/g;function cf(i,n){this.h=this.g=null,this.i=i||null,this.j=!!n}function Wu(i){i.g||(i.g=new Gu,i.h=0,i.i&&function(i,n){if(i){i=i.split("&");for(var r=0;r<i.length;r++){var s=i[r].indexOf("="),a=null;if(0<=s){var c=i[r].substring(0,s);a=i[r].substring(s+1)}else c=i[r];n(c,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(i.i,function(n,r){i.add(decodeURIComponent(n.replace(/\+/g," ")),r)}))}function z0(i,n){Wu(i),n=zu(i,n),Td(i.g.h,n)&&(i.i=null,i.h-=i.g.get(n).length,Td((i=i.g).h,n)&&(delete i.h[n],i.i--,i.g.length>2*i.i&&b_(i)))}function K0(i,n){return Wu(i),n=zu(i,n),Td(i.g.h,n)}function mE(i,n,r){z0(i,n),0<r.length&&(i.i=null,i.g.set(zu(i,n),gd(r)),i.h+=r.length)}function zu(i,n){return n=String(n),i.j&&(n=n.toLowerCase()),n}function MR(i){this.l=i||Y0,i=Mt.PerformanceNavigationTiming?0<(i=Mt.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(Mt.g&&Mt.g.Ea&&Mt.g.Ea()&&Mt.g.Ea().Zb),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(it=cf.prototype).add=function(i,n){Wu(this),this.i=null,i=zu(this,i);var r=this.g.get(i);return r||this.g.set(i,r=[]),r.push(n),this.h+=1,this},it.forEach=function(i,n){Wu(this),this.g.forEach(function(r,s){Mo(r,function(a){i.call(n,a,s,this)},this)},this)},it.T=function(){Wu(this);for(var i=this.g.R(),n=this.g.T(),r=[],s=0;s<n.length;s++)for(var a=i[s],c=0;c<a.length;c++)r.push(n[s]);return r},it.R=function(i){Wu(this);var n=[];if("string"==typeof i)K0(this,i)&&(n=ls(n,this.g.get(zu(this,i))));else{i=this.g.R();for(var r=0;r<i.length;r++)n=ls(n,i[r])}return n},it.set=function(i,n){return Wu(this),this.i=null,K0(this,i=zu(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[n]),this.h+=1,this},it.get=function(i,n){return i&&0<(i=this.R(i)).length?String(i[0]):n},it.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var i=[],n=this.g.T(),r=0;r<n.length;r++){var s=n[r],a=encodeURIComponent(String(s));s=this.R(s);for(var c=0;c<s.length;c++){var h=a;""!==s[c]&&(h+="="+encodeURIComponent(String(s[c]))),i.push(h)}}return this.i=i.join("&")};var Y0=10;function dg(i){return!!i.h||!!i.g&&i.g.size>=i.j}function Q0(i){return i.h?1:i.g?i.g.size:0}function _E(i,n){return i.h?i.h==n:!!i.g&&i.g.has(n)}function Ku(i,n){i.g?i.g.add(n):i.h=n}function J0(i,n){i.h&&i.h==n?i.h=null:i.g&&i.g.has(n)&&i.g.delete(n)}function X0(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let n=i.i;for(const r of i.g.values())n=n.concat(r.D);return n}return gd(i.i)}function yE(){}function OR(){this.g=new yE}function kR(i,n,r){const s=r||"";try{fE(i,function(a,c){let h=a;No(a)&&(h=m_(a)),n.push(s+c+"="+encodeURIComponent(h))})}catch(a){throw n.push(s+"type="+encodeURIComponent("_badmap")),a}}function cs(i,n,r,s,a){try{n.onload=null,n.onerror=null,n.onabort=null,n.ontimeout=null,a(s)}catch(c){}}function df(i){this.l=i.$b||null,this.j=i.ib||!1}function T_(i,n){Or.call(this),this.D=i,this.u=n,this.m=void 0,this.readyState=vE,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}MR.prototype.cancel=function(){if(this.i=X0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},yE.prototype.stringify=function(i){return Mt.JSON.stringify(i,void 0)},yE.prototype.parse=function(i){return Mt.JSON.parse(i,void 0)},Zr(df,ji),df.prototype.g=function(){return new T_(this.l,this.j)},df.prototype.i=function(i){return function(){return i}}({}),Zr(T_,Or);var vE=0;function EE(i){i.j.read().then(i.Sa.bind(i)).catch(i.ha.bind(i))}function I_(i){i.readyState=4,i.l=null,i.j=null,i.A=null,hf(i)}function hf(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(it=T_.prototype).open=function(i,n){if(this.readyState!=vE)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=n,this.readyState=1,hf(this)},it.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const n={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(n.body=i),(this.D||Mt).fetch(new Request(this.B,n)).then(this.Va.bind(this),this.ha.bind(this))},it.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,I_(this)),this.readyState=vE},it.Va=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,hf(this)),this.g&&(this.readyState=3,hf(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Mt.ReadableStream&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;EE(this)}else i.text().then(this.Ua.bind(this),this.ha.bind(this))},it.Sa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var n=i.value?i.value:new Uint8Array(0);(n=this.A.decode(n,{stream:!i.done}))&&(this.response=this.responseText+=n)}i.done?I_(this):hf(this),3==this.readyState&&EE(this)}},it.Ua=function(i){this.g&&(this.response=this.responseText=i,I_(this))},it.Ta=function(i){this.g&&(this.response=i,I_(this))},it.ha=function(){this.g&&I_(this)},it.setRequestHeader=function(i,n){this.v.append(i,n)},it.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},it.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],n=this.h.entries();for(var r=n.next();!r.done;)i.push((r=r.value)[0]+": "+r[1]),r=n.next();return i.join("\r\n")},Object.defineProperty(T_.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var FR=Mt.JSON.parse;function jr(i){Or.call(this),this.headers=new Gu,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=eT,this.K=this.L=!1}Zr(jr,Or);var eT="",ff=/^https?$/i,ol=["POST","PUT"];function zk(i){return"content-type"==i.toLowerCase()}function wE(i,n){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=n,i.m=5,LR(i),pf(i)}function LR(i){i.D||(i.D=!0,Br(i,"complete"),Br(i,"error"))}function ga(i){if(i.h&&void 0!==jl&&(!i.C[1]||4!=Ql(i)||2!=i.ba()))if(i.v&&4==Ql(i))$u(i.Fa,0,i);else if(Br(i,"readystatechange"),4==Ql(i)){i.h=!1;try{const m=i.ba();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var n=!0;break e;default:n=!1}var r;if(!(r=n)){var s;if(s=0===m){var a=String(i.H).match($0)[1]||null;if(!a&&Mt.self&&Mt.self.location){var c=Mt.self.location.protocol;a=c.substr(0,c.length-1)}s=!ff.test(a?a.toLowerCase():"")}r=s}if(r)Br(i,"complete"),Br(i,"success");else{i.m=6;try{var h=2<Ql(i)?i.g.statusText:""}catch(E){h=""}i.j=h+" ["+i.ba()+"]",LR(i)}}finally{pf(i)}}}function pf(i,n){if(i.g){D_(i);const r=i.g,s=i.C[0]?$l:null;i.g=null,i.C=null,n||Br(i,"ready");try{r.onreadystatechange=s}catch(a){}}}function D_(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(Mt.clearTimeout(i.A),i.A=null)}function Ql(i){return i.g?i.g.readyState:0}function bE(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case eT:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch(n){return null}}function S_(i,n,r){e:{for(s in r){var s=!1;break e}s=!0}s||(r=function(i){let n="";return A(i,function(r,s){n+=s,n+=":",n+=r,n+="\r\n"}),n}(r),"string"==typeof i?null!=r&&encodeURIComponent(String(r)):zn(i,n,r))}function gf(i,n,r){return r&&r.internalChannelParams&&r.internalChannelParams[i]||n}function A_(i){this.za=0,this.l=[],this.h=new Ys,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=gf("failFast",!1,i),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=gf("baseRetryDelayMs",5e3,i),this.$a=gf("retryDelaySeedMs",1e4,i),this.Ya=gf("forwardChannelMaxRetries",2,i),this.ra=gf("forwardChannelRequestTimeoutMs",2e4,i),this.qa=i&&i.xmlHttpFactory||void 0,this.Ba=i&&i.Yb||!1,this.K=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.J="",this.i=new MR(i&&i.concurrentRequestLimit),this.Ca=new OR,this.ja=i&&i.fastHandshake||!1,this.Ra=i&&i.Wb||!1,i&&i.Aa&&this.h.Aa(),i&&i.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&i&&i.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!i||!1!==i.Xb}function fg(i){if(VR(i),3==i.G){var n=i.V++,r=Zl(i.F);zn(r,"SID",i.J),zn(r,"RID",n),zn(r,"TYPE","terminate"),Sd(i,r),(n=new Kl(i,i.h,n,void 0)).K=2,n.v=cg(Zl(r)),r=!1,Mt.navigator&&Mt.navigator.sendBeacon&&(r=Mt.navigator.sendBeacon(n.v.toString(),"")),!r&&Mt.Image&&((new Image).src=n.v,r=!0),r||(n.g=aT(n.l,null),n.g.ea(n.v)),n.F=Date.now(),uf(n)}x_(i)}function pg(i){i.g&&(TE(i),i.g.cancel(),i.g=null)}function VR(i){pg(i),i.u&&(Mt.clearTimeout(i.u),i.u=null),R_(i),i.i.cancel(),i.m&&("number"==typeof i.m&&Mt.clearTimeout(i.m),i.m=null)}function Zu(i,n){i.l.push(new class{constructor(i,n){this.h=i,this.g=n}}(i.Za++,n)),3==i.G&&mf(i)}function mf(i){dg(i.i)||i.m||(i.m=!0,rl(i.Ha,i),i.C=0)}function nT(i,n){var r;r=n?n.m:i.V++;const s=Zl(i.F);zn(s,"SID",i.J),zn(s,"RID",r),zn(s,"AID",i.U),Sd(i,s),i.o&&i.s&&S_(s,i.o,i.s),r=new Kl(i,i.h,r,i.C+1),null===i.o&&(r.H=i.s),n&&(i.l=n.D.concat(i.l)),n=rT(i,r,1e3),r.setTimeout(Math.round(.5*i.ra)+Math.round(.5*i.ra*Math.random())),Ku(i.i,r),w_(r,s,n)}function Sd(i,n){i.j&&fE({},function(r,s){zn(n,s,r)})}function rT(i,n,r){r=Math.min(i.l.length,r);var s=i.j?Ln(i.j.Oa,i.j,i):null;e:{var a=i.l;let c=-1;for(;;){const h=["count="+r];-1==c?0<r?(c=a[0].h,h.push("ofs="+c)):c=0:h.push("ofs="+c);let m=!0;for(let E=0;E<r;E++){let C=a[E].h;const S=a[E].g;if(C-=c,0>C)c=Math.max(0,a[E].h-100),m=!1;else try{kR(S,h,"req"+C+"_")}catch(N){s&&s(S)}}if(m){s=h.join("&");break e}}}return i=i.l.splice(0,r),n.D=i,s}function iT(i){i.g||i.u||(i.Y=1,rl(i.Ga,i),i.A=0)}function CE(i){return!(i.g||i.u||3<=i.A||(i.Y++,i.u=xs(Ln(i.Ga,i),N_(i,i.A)),i.A++,0))}function TE(i){null!=i.B&&(Mt.clearTimeout(i.B),i.B=null)}function sT(i){i.g=new Kl(i,i.h,"rpc",i.Y),null===i.o&&(i.g.H=i.s),i.g.O=0;var n=Zl(i.oa);zn(n,"RID","rpc"),zn(n,"SID",i.J),zn(n,"CI",i.N?"0":"1"),zn(n,"AID",i.U),Sd(i,n),zn(n,"TYPE","xmlhttp"),i.o&&i.s&&S_(n,i.o,i.s),i.K&&i.g.setTimeout(i.K);var r=i.g;i=i.la,r.K=1,r.v=cg(Zl(n)),r.s=null,r.U=!0,V0(r,i)}function R_(i){null!=i.v&&(Mt.clearTimeout(i.v),i.v=null)}function IE(i,n){var r=null;if(i.g==n){R_(i),TE(i),i.g=null;var s=2}else{if(!_E(i.i,n))return;r=n.D,J0(i.i,n),s=1}if(i.I=n.N,0!=i.G)if(n.i)if(1==s){r=n.s?n.s.length:0,n=Date.now()-n.F;var a=i.C;Br(s=Be(),new Vo(s,r,n,a)),mf(i)}else iT(i);else if(3==(a=n.o)||0==a&&0<i.I||!(1==s&&function(i,n){return!(Q0(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.l=n.D.concat(i.l),0):1==i.G||2==i.G||i.C>=(i.Xa?0:i.Ya)||(i.m=xs(Ln(i.Ha,i,n),N_(i,i.C)),i.C++,0)))}(i,n)||2==s&&CE(i)))switch(r&&0<r.length&&(n=i.i,n.i=n.i.concat(r)),a){case 1:Yu(i,5);break;case 4:Yu(i,10);break;case 3:Yu(i,6);break;default:Yu(i,2)}}function N_(i,n){let r=i.Pa+Math.floor(Math.random()*i.$a);return i.j||(r*=2),r*n}function Yu(i,n){if(i.h.info("Error code "+n),2==n){var r=null;i.j&&(r=null);var s=Ln(i.jb,i);r||(r=new Id("//www.google.com/images/cleardot.gif"),Mt.location&&"http"==Mt.location.protocol||pE(r,"https"),cg(r)),function(i,n){const r=new Ys;if(Mt.Image){const s=new Image;s.onload=xo(cs,r,s,"TestLoadImage: loaded",!0,n),s.onerror=xo(cs,r,s,"TestLoadImage: error",!1,n),s.onabort=xo(cs,r,s,"TestLoadImage: abort",!1,n),s.ontimeout=xo(cs,r,s,"TestLoadImage: timeout",!1,n),Mt.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=i}else n(!1)}(r.toString(),s)}else rn(2);i.G=0,i.j&&i.j.va(n),x_(i),VR(i)}function x_(i){i.G=0,i.I=-1,i.j&&((0!=X0(i.i).length||0!=i.l.length)&&(i.i.i.length=0,gd(i.l),i.l.length=0),i.j.ua())}function oT(i,n,r){let s=function(i){return i instanceof Id?Zl(i):new Id(i,void 0)}(r);if(""!=s.i)n&&gE(s,n+"."+s.i),qu(s,s.m);else{const a=Mt.location;s=function(i,n,r,s){var a=new Id(null,void 0);return i&&pE(a,i),n&&gE(a,n),r&&qu(a,r),s&&(a.l=s),a}(a.protocol,n?n+"."+a.hostname:a.hostname,+a.port,r)}return i.aa&&A(i.aa,function(a,c){zn(s,c,a)}),r=i.sa,(n=i.D)&&r&&zn(s,n,r),zn(s,"VER",i.ma),Sd(i,s),s}function aT(i,n,r){if(n&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(n=new jr(r&&i.Ba&&!i.qa?new df({ib:!0}):i.qa)).L=i.H,n}function DE(){}function gg(){if(Qe&&!(10<=Number(tl)))throw Error("Environmental error: no available transport.")}function Qr(i,n){Or.call(this),this.g=new A_(n),this.l=i,this.h=n&&n.messageUrlParams||null,i=n&&n.messageHeaders||null,n&&n.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=n&&n.initMessageHeaders||null,n&&n.messageContentType&&(i?i["X-WebChannel-Content-Type"]=n.messageContentType:i={"X-WebChannel-Content-Type":n.messageContentType}),n&&n.ya&&(i?i["X-WebChannel-Client-Profile"]=n.ya:i={"X-WebChannel-Client-Profile":n.ya}),this.g.P=i,(i=n&&n.httpHeadersOverwriteParam)&&!Bi(i)&&(this.g.o=i),this.A=n&&n.supportsCrossDomainXhr||!1,this.v=n&&n.sendRawJson||!1,(n=n&&n.httpSessionIdParam)&&!Bi(n)&&(this.g.D=n,null!==(i=this.h)&&n in i&&n in(i=this.h)&&delete i[n]),this.j=new _f(this)}function SE(i){wd.call(this);var n=i.__sm__;if(n){e:{for(const r in n){i=r;break e}i=void 0}(this.i=i)&&(i=this.i,n=null!==n&&i in n?n[i]:void 0),this.data=n}else this.data=i}function AE(){og.call(this),this.status=1}function _f(i){this.g=i}(it=jr.prototype).ea=function(i,n,r,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);n=n?n.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():af.g(),this.C=function(i){return i.h||(i.h=i.i())}(this.u?this.u:af),this.g.onreadystatechange=Ln(this.Fa,this);try{this.F=!0,this.g.open(n,String(i),!0),this.F=!1}catch(c){return void wE(this,c)}i=r||"";const a=new Gu(this.headers);s&&fE(s,function(c,h){a.set(h,c)}),s=function(i){e:{var n=zk;const r=i.length,s="string"==typeof i?i.split(""):i;for(let a=0;a<r;a++)if(a in s&&n.call(void 0,s[a],a,i)){n=a;break e}n=-1}return 0>n?null:"string"==typeof i?i.charAt(n):i[n]}(a.T()),r=Mt.FormData&&i instanceof Mt.FormData,!(0<=ca(ol,n))||s||r||a.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),a.forEach(function(c,h){this.g.setRequestHeader(h,c)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{D_(this),0<this.B&&((this.K=function(i){return Qe&&pa()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ln(this.pa,this)):this.A=$u(this.pa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(c){wE(this,c)}},it.pa=function(){void 0!==jl&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Br(this,"timeout"),this.abort(8))},it.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,Br(this,"complete"),Br(this,"abort"),pf(this))},it.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),pf(this,!0)),jr.Z.M.call(this)},it.Fa=function(){this.s||(this.F||this.v||this.l?ga(this):this.cb())},it.cb=function(){ga(this)},it.ba=function(){try{return 2<Ql(this)?this.g.status:-1}catch(i){return-1}},it.ga=function(){try{return this.g?this.g.responseText:""}catch(i){return""}},it.Qa=function(i){if(this.g){var n=this.g.responseText;return i&&0==n.indexOf(i)&&(n=n.substring(i.length)),FR(n)}},it.Da=function(){return this.m},it.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(it=A_.prototype).ma=8,it.G=1,it.hb=function(i){try{this.h.info("Origin Trials invoked: "+i)}catch(n){}},it.Ha=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.V=Math.floor(1e5*Math.random()),i=this.V++;const a=new Kl(this,this.h,i,void 0);let c=this.s;if(this.P&&(c?(c=x(c),q(c,this.P)):c=this.P),null===this.o&&(a.H=c),this.ja)e:{for(var n=0,r=0;r<this.l.length;r++){var s=this.l[r];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(n+=s)){n=r;break e}if(4096===n||r===this.l.length-1){n=r+1;break e}}n=1e3}else n=1e3;n=rT(this,a,n),zn(r=Zl(this.F),"RID",i),zn(r,"CVER",22),this.D&&zn(r,"X-HTTP-Session-Id",this.D),Sd(this,r),this.o&&c&&S_(r,this.o,c),Ku(this.i,a),this.Ra&&zn(r,"TYPE","init"),this.ja?(zn(r,"$req",n),zn(r,"SID","null"),a.$=!0,w_(a,r,null)):w_(a,r,n),this.G=2}}else 3==this.G&&(i?nT(this,i):0==this.l.length||dg(this.i)||nT(this))},it.Ga=function(){if(this.u=null,sT(this),this.$&&!(this.L||null==this.g||0>=this.O)){var i=2*this.O;this.h.info("BP detection timer enabled: "+i),this.B=xs(Ln(this.bb,this),i)}},it.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,rn(10),pg(this),sT(this))},it.ab=function(){null!=this.v&&(this.v=null,pg(this),CE(this),rn(19))},it.jb=function(i){i?(this.h.info("Successfully pinged google.com"),rn(2)):(this.h.info("Failed to ping google.com"),rn(1))},(it=DE.prototype).xa=function(){},it.wa=function(){},it.va=function(){},it.ua=function(){},it.Oa=function(){},gg.prototype.g=function(i,n){return new Qr(i,n)},Zr(Qr,Or),Qr.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var i=this.g,n=this.l,r=this.h||void 0;i.Wa&&(i.h.info("Origin Trials enabled."),rl(Ln(i.hb,i,n))),rn(0),i.W=n,i.aa=r||{},i.N=i.X,i.F=oT(i,null,i.W),mf(i)},Qr.prototype.close=function(){fg(this.g)},Qr.prototype.u=function(i){if("string"==typeof i){var n={};n.__data__=i,Zu(this.g,n)}else this.v?((n={}).__data__=m_(i),Zu(this.g,n)):Zu(this.g,i)},Qr.prototype.M=function(){this.g.j=null,delete this.j,fg(this.g),delete this.g,Qr.Z.M.call(this)},Zr(SE,wd),Zr(AE,og),Zr(_f,DE),_f.prototype.xa=function(){Br(this.g,"a")},_f.prototype.wa=function(i){Br(this.g,new SE(i))},_f.prototype.va=function(i){Br(this.g,new AE(i))},_f.prototype.ua=function(){Br(this.g,"b")},gg.prototype.createWebChannel=gg.prototype.g,Qr.prototype.send=Qr.prototype.u,Qr.prototype.open=Qr.prototype.m,Qr.prototype.close=Qr.prototype.close,Qs.NO_ERROR=0,Qs.TIMEOUT=8,Qs.HTTP_ERROR=6,rf.COMPLETE="complete",sf.EventType=sl,sl.OPEN="a",sl.CLOSE="b",sl.ERROR="c",sl.MESSAGE="d",Or.prototype.listen=Or.prototype.N,jr.prototype.listenOnce=jr.prototype.O,jr.prototype.getLastError=jr.prototype.La,jr.prototype.getLastErrorCode=jr.prototype.Da,jr.prototype.getStatus=jr.prototype.ba,jr.prototype.getResponseJson=jr.prototype.Qa,jr.prototype.getResponseText=jr.prototype.ga,jr.prototype.send=jr.prototype.ea;var P_=Ns.createWebChannelTransport=function(){return new gg},UR=Ns.getStatEventTarget=function(){return Be()},M_=Ns.ErrorCode=Qs,lT=Ns.EventType=rf,uT=Ns.Event=H,O_=Ns.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},cT=Ns.FetchXmlHttpFactory=df,Ad=Ns.WebChannel=sf,k_=Ns.XhrIo=jr;class _i{constructor(n){this.uid=n}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(n){return n.uid===this.uid}}_i.UNAUTHENTICATED=new _i(null),_i.GOOGLE_CREDENTIALS=new _i("google-credentials-uid"),_i.FIRST_PARTY=new _i("first-party-uid"),_i.MOCK_USER=new _i("mock-user");let Qu="9.1.0";const Jl=new cn.Yd("@firebase/firestore");function mg(){return Jl.logLevel}function ze(i,...n){if(Jl.logLevel<=cn.in.DEBUG){const r=n.map(RE);Jl.debug(`Firestore (${Qu}): ${i}`,...r)}}function kr(i,...n){if(Jl.logLevel<=cn.in.ERROR){const r=n.map(RE);Jl.error(`Firestore (${Qu}): ${i}`,...r)}}function yg(i,...n){if(Jl.logLevel<=cn.in.WARN){const r=n.map(RE);Jl.warn(`Firestore (${Qu}): ${i}`,...r)}}function RE(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch(r){return i}}function ft(i="Unexpected state"){const n=`FIRESTORE (${Qu}) INTERNAL ASSERTION FAILED: `+i;throw kr(n),new Error(n)}function Nt(i,n){i||ft()}function Je(i,n){return i}const De={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $e extends Error{constructor(n,r){super(r),this.code=n,this.message=r,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Jr{constructor(){this.promise=new Promise((n,r)=>{this.resolve=n,this.reject=r})}}class hT{constructor(n,r){this.user=r,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization=`Bearer ${n}`}}class BR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(n,r){n.enqueueRetryable(()=>r(_i.UNAUTHENTICATED))}shutdown(){}}class ma{constructor(n){this.token=n,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(n,r){this.changeListener=r,n.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class jR{constructor(n){this.t=n,this.currentUser=_i.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(n,r){var s=this;let a=this.i;const c=C=>this.i!==a?(a=this.i,r(C)):Promise.resolve();let h=new Jr;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new Jr,n.enqueueRetryable(()=>c(this.currentUser))};const m=()=>{const C=h;n.enqueueRetryable((0,Se.Z)(function*(){yield C.promise,yield c(s.currentUser)}))},E=C=>{ze("FirebaseCredentialsProvider","Auth detected"),this.auth=C,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(C=>E(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?E(C):(ze("FirebaseCredentialsProvider","Auth not yet detected"),h.resolve(),h=new Jr)}},0),m()}getToken(){const n=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(s=>this.i!==n?(ze("FirebaseCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Nt("string"==typeof s.accessToken),new hT(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const n=this.auth&&this.auth.getUid();return Nt(null===n||"string"==typeof n),new _i(n)}}class fT{constructor(n,r,s){this.h=n,this.l=r,this.m=s,this.type="FirstParty",this.user=_i.FIRST_PARTY}get authHeaders(){const n={"X-Goog-AuthUser":this.l},r=this.h.auth.getAuthHeaderValueForFirstParty([]);return r&&(n.Authorization=r),this.m&&(n["X-Goog-Iam-Authorization-Token"]=this.m),n}}class $R{constructor(n,r,s){this.h=n,this.l=r,this.m=s}getToken(){return Promise.resolve(new fT(this.h,this.l,this.m))}start(n,r){n.enqueueRetryable(()=>r(_i.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Js{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=s=>this.g(s),this.p=s=>r.writeSequenceNumber(s))}g(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.p&&this.p(n),n}}function HR(i){const n="undefined"!=typeof self&&(self.crypto||self.msCrypto),r=new Uint8Array(i);if(n&&"function"==typeof n.getRandomValues)n.getRandomValues(r);else for(let s=0;s<i;s++)r[s]=Math.floor(256*Math.random());return r}Js.T=-1;class pT{static I(){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/n.length)*n.length;let s="";for(;s.length<20;){const a=HR(40);for(let c=0;c<a.length;++c)s.length<20&&a[c]<r&&(s+=n.charAt(a[c]%n.length))}return s}}function sn(i,n){return i<n?-1:i>n?1:0}function yf(i,n,r){return i.length===n.length&&i.every((s,a)=>r(s,n[a]))}function gT(i){return i+"\0"}class yi{constructor(n,r){if(this.seconds=n,this.nanoseconds=r,r<0)throw new $e(De.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new $e(De.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(n<-62135596800)throw new $e(De.INVALID_ARGUMENT,"Timestamp seconds out of range: "+n);if(n>=253402300800)throw new $e(De.INVALID_ARGUMENT,"Timestamp seconds out of range: "+n)}static now(){return yi.fromMillis(Date.now())}static fromDate(n){return yi.fromMillis(n.getTime())}static fromMillis(n){const r=Math.floor(n/1e3),s=Math.floor(1e6*(n-1e3*r));return new yi(r,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(n){return this.seconds===n.seconds?sn(this.nanoseconds,n.nanoseconds):sn(this.seconds,n.seconds)}isEqual(n){return n.seconds===this.seconds&&n.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class We{constructor(n){this.timestamp=n}static fromTimestamp(n){return new We(n)}static min(){return new We(new yi(0,0))}compareTo(n){return this.timestamp._compareTo(n.timestamp)}isEqual(n){return this.timestamp.isEqual(n.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function NE(i){let n=0;for(const r in i)Object.prototype.hasOwnProperty.call(i,r)&&n++;return n}function Ju(i,n){for(const r in i)Object.prototype.hasOwnProperty.call(i,r)&&n(r,i[r])}function vg(i){for(const n in i)if(Object.prototype.hasOwnProperty.call(i,n))return!1;return!0}class ds{constructor(n,r,s){void 0===r?r=0:r>n.length&&ft(),void 0===s?s=n.length-r:s>n.length-r&&ft(),this.segments=n,this.offset=r,this.len=s}get length(){return this.len}isEqual(n){return 0===ds.comparator(this,n)}child(n){const r=this.segments.slice(this.offset,this.limit());return n instanceof ds?n.forEach(s=>{r.push(s)}):r.push(n),this.construct(r)}limit(){return this.offset+this.length}popFirst(n){return this.construct(this.segments,this.offset+(n=void 0===n?1:n),this.length-n)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(n){return this.segments[this.offset+n]}isEmpty(){return 0===this.length}isPrefixOf(n){if(n.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==n.get(r))return!1;return!0}isImmediateParentOf(n){if(this.length+1!==n.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==n.get(r))return!1;return!0}forEach(n){for(let r=this.offset,s=this.limit();r<s;r++)n(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(n,r){const s=Math.min(n.length,r.length);for(let a=0;a<s;a++){const c=n.get(a),h=r.get(a);if(c<h)return-1;if(c>h)return 1}return n.length<r.length?-1:n.length>r.length?1:0}}class Dn extends ds{construct(n,r,s){return new Dn(n,r,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...n){const r=[];for(const s of n){if(s.indexOf("//")>=0)throw new $e(De.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);r.push(...s.split("/").filter(a=>a.length>0))}return new Dn(r)}static emptyPath(){return new Dn([])}}const GR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xr extends ds{construct(n,r,s){return new Xr(n,r,s)}static isValidIdentifier(n){return GR.test(n)}canonicalString(){return this.toArray().map(n=>(n=n.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xr.isValidIdentifier(n)||(n="`"+n+"`"),n)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Xr(["__name__"])}static fromServerFormat(n){const r=[];let s="",a=0;const c=()=>{if(0===s.length)throw new $e(De.INVALID_ARGUMENT,`Invalid field path (${n}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(s),s=""};let h=!1;for(;a<n.length;){const m=n[a];if("\\"===m){if(a+1===n.length)throw new $e(De.INVALID_ARGUMENT,"Path has trailing escape character: "+n);const E=n[a+1];if("\\"!==E&&"."!==E&&"`"!==E)throw new $e(De.INVALID_ARGUMENT,"Path has invalid escape sequence: "+n);s+=E,a+=2}else"`"===m?(h=!h,a++):"."!==m||h?(s+=m,a++):(c(),a++)}if(c(),h)throw new $e(De.INVALID_ARGUMENT,"Unterminated ` in path: "+n);return new Xr(r)}static emptyPath(){return new Xr([])}}class Ps{constructor(n){this.fields=n,n.sort(Xr.comparator)}covers(n){for(const r of this.fields)if(r.isPrefixOf(n))return!0;return!1}isEqual(n){return yf(this.fields,n.fields,(r,s)=>r.isEqual(s))}}class ei{constructor(n){this.binaryString=n}static fromBase64String(n){const r=atob(n);return new ei(r)}static fromUint8Array(n){const r=function(s){let a="";for(let c=0;c<s.length;++c)a+=String.fromCharCode(s[c]);return a}(n);return new ei(r)}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(n){return sn(this.binaryString,n.binaryString)}isEqual(n){return this.binaryString===n.binaryString}}ei.EMPTY_BYTE_STRING=new ei("");const PE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rd(i){if(Nt(!!i),"string"==typeof i){let n=0;const r=PE.exec(i);if(Nt(!!r),r[1]){let a=r[1];a=(a+"000000000").substr(0,9),n=Number(a)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:n}}return{seconds:Fr(i.seconds),nanos:Fr(i.nanos)}}function Fr(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function Eg(i){return"string"==typeof i?ei.fromBase64String(i):ei.fromUint8Array(i)}function _a(i){var n,r;return"server_timestamp"===(null===(r=((null===(n=null==i?void 0:i.mapValue)||void 0===n?void 0:n.fields)||{}).__type__)||void 0===r?void 0:r.stringValue)}function wg(i){const n=i.mapValue.fields.__previous_value__;return _a(n)?wg(n):n}function Xu(i){const n=Rd(i.mapValue.fields.__local_write_time__.timestampValue);return new yi(n.seconds,n.nanos)}function Xl(i){return null==i}function ME(i){return 0===i&&1/i==-1/0}function mT(i){return"number"==typeof i&&Number.isInteger(i)&&!ME(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}class ut{constructor(n){this.path=n}static fromPath(n){return new ut(Dn.fromString(n))}static fromName(n){return new ut(Dn.fromString(n).popFirst(5))}hasCollectionId(n){return this.path.length>=2&&this.path.get(this.path.length-2)===n}isEqual(n){return null!==n&&0===Dn.comparator(this.path,n.path)}toString(){return this.path.toString()}static comparator(n,r){return Dn.comparator(n.path,r.path)}static isDocumentKey(n){return n.length%2==0}static fromSegments(n){return new ut(new Dn(n.slice()))}}function vf(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?_a(i)?4:10:ft()}function al(i,n){const r=vf(i);if(r!==vf(n))return!1;switch(r){case 0:return!0;case 1:return i.booleanValue===n.booleanValue;case 4:return Xu(i).isEqual(Xu(n));case 3:return function(s,a){if("string"==typeof s.timestampValue&&"string"==typeof a.timestampValue&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const c=Rd(s.timestampValue),h=Rd(a.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos}(i,n);case 5:return i.stringValue===n.stringValue;case 6:return a=n,Eg(i.bytesValue).isEqual(Eg(a.bytesValue));case 7:return i.referenceValue===n.referenceValue;case 8:return function(s,a){return Fr(s.geoPointValue.latitude)===Fr(a.geoPointValue.latitude)&&Fr(s.geoPointValue.longitude)===Fr(a.geoPointValue.longitude)}(i,n);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return Fr(s.integerValue)===Fr(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const c=Fr(s.doubleValue),h=Fr(a.doubleValue);return c===h?ME(c)===ME(h):isNaN(c)&&isNaN(h)}return!1}(i,n);case 9:return yf(i.arrayValue.values||[],n.arrayValue.values||[],al);case 10:return function(s,a){const c=s.mapValue.fields||{},h=a.mapValue.fields||{};if(NE(c)!==NE(h))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(void 0===h[m]||!al(c[m],h[m])))return!1;return!0}(i,n);default:return ft()}var a}function F_(i,n){return void 0!==(i.values||[]).find(r=>al(r,n))}function Nd(i,n){const r=vf(i),s=vf(n);if(r!==s)return sn(r,s);switch(r){case 0:return 0;case 1:return sn(i.booleanValue,n.booleanValue);case 2:return function(a,c){const h=Fr(a.integerValue||a.doubleValue),m=Fr(c.integerValue||c.doubleValue);return h<m?-1:h>m?1:h===m?0:isNaN(h)?isNaN(m)?0:-1:1}(i,n);case 3:return OE(i.timestampValue,n.timestampValue);case 4:return OE(Xu(i),Xu(n));case 5:return sn(i.stringValue,n.stringValue);case 6:return function(a,c){const h=Eg(a),m=Eg(c);return h.compareTo(m)}(i.bytesValue,n.bytesValue);case 7:return function(a,c){const h=a.split("/"),m=c.split("/");for(let E=0;E<h.length&&E<m.length;E++){const C=sn(h[E],m[E]);if(0!==C)return C}return sn(h.length,m.length)}(i.referenceValue,n.referenceValue);case 8:return function(a,c){const h=sn(Fr(a.latitude),Fr(c.latitude));return 0!==h?h:sn(Fr(a.longitude),Fr(c.longitude))}(i.geoPointValue,n.geoPointValue);case 9:return function(a,c){const h=a.values||[],m=c.values||[];for(let E=0;E<h.length&&E<m.length;++E){const C=Nd(h[E],m[E]);if(C)return C}return sn(h.length,m.length)}(i.arrayValue,n.arrayValue);case 10:return function(a,c){const h=a.fields||{},m=Object.keys(h),E=c.fields||{},C=Object.keys(E);m.sort(),C.sort();for(let S=0;S<m.length&&S<C.length;++S){const N=sn(m[S],C[S]);if(0!==N)return N;const O=Nd(h[m[S]],E[C[S]]);if(0!==O)return O}return sn(m.length,C.length)}(i.mapValue,n.mapValue);default:throw ft()}}function OE(i,n){if("string"==typeof i&&"string"==typeof n&&i.length===n.length)return sn(i,n);const r=Rd(i),s=Rd(n),a=sn(r.seconds,s.seconds);return 0!==a?a:sn(r.nanos,s.nanos)}function kE(i){return bg(i)}function bg(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(s){const a=Rd(s);return`time(${a.seconds},${a.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?Eg(i.bytesValue).toBase64():"referenceValue"in i?ut.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(n=i.geoPointValue).latitude},${n.longitude})`:"arrayValue"in i?function(s){let a="[",c=!0;for(const h of s.values||[])c?c=!1:a+=",",a+=bg(h);return a+"]"}(i.arrayValue):"mapValue"in i?function(s){const a=Object.keys(s.fields||{}).sort();let c="{",h=!0;for(const m of a)h?h=!1:c+=",",c+=`${m}:${bg(s.fields[m])}`;return c+"}"}(i.mapValue):ft();var n}function FE(i,n){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`}}function _T(i){return!!i&&"integerValue"in i}function yT(i){return!!i&&"arrayValue"in i}function qR(i){return!!i&&"nullValue"in i}function WR(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function LE(i){return!!i&&"mapValue"in i}function L_(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const n={mapValue:{fields:{}}};return Ju(i.mapValue.fields,(r,s)=>n.mapValue.fields[r]=L_(s)),n}if(i.arrayValue){const n={arrayValue:{values:[]}};for(let r=0;r<(i.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=L_(i.arrayValue.values[r]);return n}return Object.assign({},i)}class hs{constructor(n){this.value=n}static empty(){return new hs({mapValue:{}})}field(n){if(n.isEmpty())return this.value;{let r=this.value;for(let s=0;s<n.length-1;++s)if(r=(r.mapValue.fields||{})[n.get(s)],!LE(r))return null;return r=(r.mapValue.fields||{})[n.lastSegment()],r||null}}set(n,r){this.getFieldsMap(n.popLast())[n.lastSegment()]=L_(r)}setAll(n){let r=Xr.emptyPath(),s={},a=[];n.forEach((h,m)=>{if(!r.isImmediateParentOf(m)){const E=this.getFieldsMap(r);this.applyChanges(E,s,a),s={},a=[],r=m.popLast()}h?s[m.lastSegment()]=L_(h):a.push(m.lastSegment())});const c=this.getFieldsMap(r);this.applyChanges(c,s,a)}delete(n){const r=this.field(n.popLast());LE(r)&&r.mapValue.fields&&delete r.mapValue.fields[n.lastSegment()]}isEqual(n){return al(this.value,n.value)}getFieldsMap(n){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let s=0;s<n.length;++s){let a=r.mapValue.fields[n.get(s)];LE(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[n.get(s)]=a),r=a}return r.mapValue.fields}applyChanges(n,r,s){Ju(r,(a,c)=>n[a]=c);for(const a of s)delete n[a]}clone(){return new hs(L_(this.value))}}function zR(i){const n=[];return Ju(i.fields,(r,s)=>{const a=new Xr([r]);if(LE(s)){const c=zR(s.mapValue).fields;if(0===c.length)n.push(a);else for(const h of c)n.push(a.child(h))}else n.push(a)}),new Ps(n)}class pr{constructor(n,r,s,a,c){this.key=n,this.documentType=r,this.version=s,this.data=a,this.documentState=c}static newInvalidDocument(n){return new pr(n,0,We.min(),hs.empty(),0)}static newFoundDocument(n,r,s){return new pr(n,1,r,s,0)}static newNoDocument(n,r){return new pr(n,2,r,hs.empty(),0)}static newUnknownDocument(n,r){return new pr(n,3,r,hs.empty(),2)}convertToFoundDocument(n,r){return this.version=n,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(n){return this.version=n,this.documentType=2,this.data=hs.empty(),this.documentState=0,this}convertToUnknownDocument(n){return this.version=n,this.documentType=3,this.data=hs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(n){return n instanceof pr&&this.key.isEqual(n.key)&&this.version.isEqual(n.version)&&this.documentType===n.documentType&&this.documentState===n.documentState&&this.data.isEqual(n.data)}clone(){return new pr(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Kk{constructor(n,r=null,s=[],a=[],c=null,h=null,m=null){this.path=n,this.collectionGroup=r,this.orderBy=s,this.filters=a,this.limit=c,this.startAt=h,this.endAt=m,this.A=null}}function eu(i,n=null,r=[],s=[],a=null,c=null,h=null){return new Kk(i,n,r,s,a,c,h)}function xd(i){const n=Je(i);if(null===n.A){let r=n.path.canonicalString();null!==n.collectionGroup&&(r+="|cg:"+n.collectionGroup),r+="|f:",r+=n.filters.map(s=>function(i){return i.field.canonicalString()+i.op.toString()+kE(i.value)}(s)).join(","),r+="|ob:",r+=n.orderBy.map(s=>{return(a=s).field.canonicalString()+a.dir;var a}).join(","),Xl(n.limit)||(r+="|l:",r+=n.limit),n.startAt&&(r+="|lb:",r+=V_(n.startAt)),n.endAt&&(r+="|ub:",r+=V_(n.endAt)),n.A=r}return n.A}function Cg(i,n){if(i.limit!==n.limit||i.orderBy.length!==n.orderBy.length)return!1;for(let a=0;a<i.orderBy.length;a++)if(!wf(i.orderBy[a],n.orderBy[a]))return!1;if(i.filters.length!==n.filters.length)return!1;for(let a=0;a<i.filters.length;a++)if((r=i.filters[a]).op!==(s=n.filters[a]).op||!r.field.isEqual(s.field)||!al(r.value,s.value))return!1;var r,s;return i.collectionGroup===n.collectionGroup&&!!i.path.isEqual(n.path)&&!!Pd(i.startAt,n.startAt)&&Pd(i.endAt,n.endAt)}function Ef(i){return ut.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}class Gi extends class{}{constructor(n,r,s){super(),this.field=n,this.op=r,this.value=s}static create(n,r,s){return n.isKeyField()?"in"===r||"not-in"===r?this.R(n,r,s):new ZR(n,r,s):"array-contains"===r?new Zk(n,s):"in"===r?new UE(n,s):"not-in"===r?new YR(n,s):"array-contains-any"===r?new wT(n,s):new Gi(n,r,s)}static R(n,r,s){return"in"===r?new ec(n,s):new vT(n,s)}matches(n){const r=n.data.field(this.field);return"!="===this.op?null!==r&&this.P(Nd(r,this.value)):null!==r&&vf(this.value)===vf(r)&&this.P(Nd(r,this.value))}P(n){switch(this.op){case"<":return n<0;case"<=":return n<=0;case"==":return 0===n;case"!=":return 0!==n;case">":return n>0;case">=":return n>=0;default:return ft()}}v(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class ZR extends Gi{constructor(n,r,s){super(n,r,s),this.key=ut.fromName(s.referenceValue)}matches(n){const r=ut.comparator(n.key,this.key);return this.P(r)}}class ec extends Gi{constructor(n,r){super(n,"in",r),this.keys=ET(0,r)}matches(n){return this.keys.some(r=>r.isEqual(n.key))}}class vT extends Gi{constructor(n,r){super(n,"not-in",r),this.keys=ET(0,r)}matches(n){return!this.keys.some(r=>r.isEqual(n.key))}}function ET(i,n){var r;return((null===(r=n.arrayValue)||void 0===r?void 0:r.values)||[]).map(s=>ut.fromName(s.referenceValue))}class Zk extends Gi{constructor(n,r){super(n,"array-contains",r)}matches(n){const r=n.data.field(this.field);return yT(r)&&F_(r.arrayValue,this.value)}}class UE extends Gi{constructor(n,r){super(n,"in",r)}matches(n){const r=n.data.field(this.field);return null!==r&&F_(this.value.arrayValue,r)}}class YR extends Gi{constructor(n,r){super(n,"not-in",r)}matches(n){if(F_(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=n.data.field(this.field);return null!==r&&!F_(this.value.arrayValue,r)}}class wT extends Gi{constructor(n,r){super(n,"array-contains-any",r)}matches(n){const r=n.data.field(this.field);return!(!yT(r)||!r.arrayValue.values)&&r.arrayValue.values.some(s=>F_(this.value.arrayValue,s))}}class Tg{constructor(n,r){this.position=n,this.before=r}}function V_(i){return`${i.before?"b":"a"}:${i.position.map(n=>kE(n)).join(",")}`}class ll{constructor(n,r="asc"){this.field=n,this.dir=r}}function wf(i,n){return i.dir===n.dir&&i.field.isEqual(n.field)}function U_(i,n,r){let s=0;for(let a=0;a<i.position.length;a++){const c=n[a],h=i.position[a];if(s=c.field.isKeyField()?ut.comparator(ut.fromName(h.referenceValue),r.key):Nd(h,r.data.field(c.field)),"desc"===c.dir&&(s*=-1),0!==s)break}return i.before?s<=0:s<0}function Pd(i,n){if(null===i)return null===n;if(null===n||i.before!==n.before||i.position.length!==n.position.length)return!1;for(let r=0;r<i.position.length;r++)if(!al(i.position[r],n.position[r]))return!1;return!0}class Xs{constructor(n,r=null,s=[],a=[],c=null,h="F",m=null,E=null){this.path=n,this.collectionGroup=r,this.explicitOrderBy=s,this.filters=a,this.limit=c,this.limitType=h,this.startAt=m,this.endAt=E,this.V=null,this.S=null}}function Md(i,n,r,s,a,c,h,m){return new Xs(i,n,r,s,a,c,h,m)}function bf(i){return new Xs(i)}function Ig(i){return!Xl(i.limit)&&"F"===i.limitType}function Dg(i){return!Xl(i.limit)&&"L"===i.limitType}function Sg(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function Ag(i){for(const n of i.filters)if(n.v())return n.field;return null}function B_(i){return null!==i.collectionGroup}function tu(i){const n=Je(i);if(null===n.V){n.V=[];const r=Ag(n),s=Sg(n);if(null!==r&&null===s)r.isKeyField()||n.V.push(new ll(r)),n.V.push(new ll(Xr.keyField(),"asc"));else{let a=!1;for(const c of n.explicitOrderBy)n.V.push(c),c.field.isKeyField()&&(a=!0);if(!a){const c=n.explicitOrderBy.length>0?n.explicitOrderBy[n.explicitOrderBy.length-1].dir:"asc";n.V.push(new ll(Xr.keyField(),c))}}}return n.V}function Uo(i){const n=Je(i);if(!n.S)if("F"===n.limitType)n.S=eu(n.path,n.collectionGroup,tu(n),n.filters,n.limit,n.startAt,n.endAt);else{const r=[];for(const c of tu(n))r.push(new ll(c.field,"desc"===c.dir?"asc":"desc"));const s=n.endAt?new Tg(n.endAt.position,!n.endAt.before):null,a=n.startAt?new Tg(n.startAt.position,!n.startAt.before):null;n.S=eu(n.path,n.collectionGroup,r,n.filters,n.limit,s,a)}return n.S}function BE(i,n,r){return new Xs(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),n,r,i.startAt,i.endAt)}function j_(i,n){return Cg(Uo(i),Uo(n))&&i.limitType===n.limitType}function jE(i){return`${xd(Uo(i))}|lt:${i.limitType}`}function $_(i){return`Query(target=${function(i){let n=i.path.canonicalString();return null!==i.collectionGroup&&(n+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(n+=`, filters: [${i.filters.map(r=>{return`${(s=r).field.canonicalString()} ${s.op} ${kE(s.value)}`;var s}).join(", ")}]`),Xl(i.limit)||(n+=", limit: "+i.limit),i.orderBy.length>0&&(n+=`, orderBy: [${i.orderBy.map(r=>{return`${(s=r).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),i.startAt&&(n+=", startAt: "+V_(i.startAt)),i.endAt&&(n+=", endAt: "+V_(i.endAt)),`Target(${n})`}(Uo(i))}; limitType=${i.limitType})`}function Rg(i,n){return n.isFoundDocument()&&function(r,s){const a=s.key.path;return null!==r.collectionGroup?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):ut.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(i,n)&&function(r,s){for(const a of r.explicitOrderBy)if(!a.field.isKeyField()&&null===s.data.field(a.field))return!1;return!0}(i,n)&&function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0}(i,n)&&(s=n,!((r=i).startAt&&!U_(r.startAt,tu(r),s)||r.endAt&&U_(r.endAt,tu(r),s)));var r,s}function $E(i){return(n,r)=>{let s=!1;for(const a of tu(i)){const c=QR(a,n,r);if(0!==c)return c;s=s||a.field.isKeyField()}return 0}}function QR(i,n,r){const s=i.field.isKeyField()?ut.comparator(n.key,r.key):function(a,c,h){const m=c.data.field(a),E=h.data.field(a);return null!==m&&null!==E?Nd(m,E):ft()}(i.field,n,r);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return ft()}}function bT(i,n){if(i.D){if(isNaN(n))return{doubleValue:"NaN"};if(n===1/0)return{doubleValue:"Infinity"};if(n===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ME(n)?"-0":n}}function Ms(i){return{integerValue:""+i}}function CT(i,n){return mT(n)?Ms(n):bT(i,n)}class H_{constructor(){this._=void 0}}function Yk(i,n,r){return i instanceof Ng?function(s,a){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&(c.fields.__previous_value__=a),{mapValue:c}}(r,n):i instanceof Od?G_(i,n):i instanceof tc?TT(i,n):function(s,a){const c=HE(s,a),h=IT(c)+IT(s.C);return _T(c)&&_T(s.C)?Ms(h):bT(s.N,h)}(i,n)}function Qk(i,n,r){return i instanceof Od?G_(i,n):i instanceof tc?TT(i,n):r}function HE(i,n){return i instanceof Cf?_T(r=n)||(s=r)&&"doubleValue"in s?n:{integerValue:0}:null;var s,r}class Ng extends H_{}class Od extends H_{constructor(n){super(),this.elements=n}}function G_(i,n){const r=GE(n);for(const s of i.elements)r.some(a=>al(a,s))||r.push(s);return{arrayValue:{values:r}}}class tc extends H_{constructor(n){super(),this.elements=n}}function TT(i,n){let r=GE(n);for(const s of i.elements)r=r.filter(a=>!al(a,s));return{arrayValue:{values:r}}}class Cf extends H_{constructor(n,r){super(),this.N=n,this.C=r}}function IT(i){return Fr(i.integerValue||i.doubleValue)}function GE(i){return yT(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class xg{constructor(n,r){this.field=n,this.transform=r}}class JR{constructor(n,r){this.version=n,this.transformResults=r}}class $r{constructor(n,r){this.updateTime=n,this.exists=r}static none(){return new $r}static exists(n){return new $r(void 0,n)}static updateTime(n){return new $r(n)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(n){return this.exists===n.exists&&(this.updateTime?!!n.updateTime&&this.updateTime.isEqual(n.updateTime):!n.updateTime)}}function Pg(i,n){return void 0!==i.updateTime?n.isFoundDocument()&&n.version.isEqual(i.updateTime):void 0===i.exists||i.exists===n.isFoundDocument()}class Mg{}function XR(i,n,r){i instanceof q_?function(s,a,c){const h=s.value.clone(),m=NT(s.fieldTransforms,a,c.transformResults);h.setAll(m),a.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(i,n,r):i instanceof nu?function(s,a,c){if(!Pg(s.precondition,a))return void a.convertToUnknownDocument(c.version);const h=NT(s.fieldTransforms,a,c.transformResults),m=a.data;m.setAll(RT(s)),m.setAll(h),a.convertToFoundDocument(c.version,m).setHasCommittedMutations()}(i,n,r):n.convertToNoDocument(r.version).setHasCommittedMutations()}function Bo(i,n,r){var a;i instanceof q_?function(s,a,c){if(!Pg(s.precondition,a))return;const h=s.value.clone(),m=xT(s.fieldTransforms,c,a);h.setAll(m),a.convertToFoundDocument(AT(a),h).setHasLocalMutations()}(i,n,r):i instanceof nu?function(s,a,c){if(!Pg(s.precondition,a))return;const h=xT(s.fieldTransforms,c,a),m=a.data;m.setAll(RT(s)),m.setAll(h),a.convertToFoundDocument(AT(a),m).setHasLocalMutations()}(i,n,r):Pg(i.precondition,a=n)&&a.convertToNoDocument(We.min())}function qE(i,n){let r=null;for(const s of i.fieldTransforms){const a=n.data.field(s.field),c=HE(s.transform,a||null);null!=c&&(null==r&&(r=hs.empty()),r.set(s.field,c))}return r||null}function ST(i,n){return i.type===n.type&&!!i.key.isEqual(n.key)&&!!i.precondition.isEqual(n.precondition)&&(s=n.fieldTransforms,!!(void 0===(r=i.fieldTransforms)&&void 0===s||r&&s&&yf(r,s,(a,c)=>function(i,n){return i.field.isEqual(n.field)&&(s=n.transform,(r=i.transform)instanceof Od&&s instanceof Od||r instanceof tc&&s instanceof tc?yf(r.elements,s.elements,al):r instanceof Cf&&s instanceof Cf?al(r.C,s.C):r instanceof Ng&&s instanceof Ng);var r,s}(a,c))))&&(0===i.type?i.value.isEqual(n.value):1!==i.type||i.data.isEqual(n.data)&&i.fieldMask.isEqual(n.fieldMask));var r,s}function AT(i){return i.isFoundDocument()?i.version:We.min()}class q_ extends Mg{constructor(n,r,s,a=[]){super(),this.key=n,this.value=r,this.precondition=s,this.fieldTransforms=a,this.type=0}}class nu extends Mg{constructor(n,r,s,a,c=[]){super(),this.key=n,this.data=r,this.fieldMask=s,this.precondition=a,this.fieldTransforms=c,this.type=1}}function RT(i){const n=new Map;return i.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const s=i.data.field(r);n.set(r,s)}}),n}function NT(i,n,r){const s=new Map;Nt(i.length===r.length);for(let a=0;a<r.length;a++){const c=i[a],h=c.transform,m=n.data.field(c.field);s.set(c.field,Qk(h,m,r[a]))}return s}function xT(i,n,r){const s=new Map;for(const a of i){const c=a.transform,h=r.data.field(a.field);s.set(a.field,Yk(c,h,n))}return s}class kd extends Mg{constructor(n,r){super(),this.key=n,this.precondition=r,this.type=2,this.fieldTransforms=[]}}class WE extends Mg{constructor(n,r){super(),this.key=n,this.precondition=r,this.type=3,this.fieldTransforms=[]}}class eN{constructor(n){this.count=n}}var gr,dn;function PT(i){switch(i){case De.OK:return ft();case De.CANCELLED:case De.UNKNOWN:case De.DEADLINE_EXCEEDED:case De.RESOURCE_EXHAUSTED:case De.INTERNAL:case De.UNAVAILABLE:case De.UNAUTHENTICATED:return!1;case De.INVALID_ARGUMENT:case De.NOT_FOUND:case De.ALREADY_EXISTS:case De.PERMISSION_DENIED:case De.FAILED_PRECONDITION:case De.ABORTED:case De.OUT_OF_RANGE:case De.UNIMPLEMENTED:case De.DATA_LOSS:return!0;default:return ft()}}function W_(i){if(void 0===i)return kr("GRPC error has no .code"),De.UNKNOWN;switch(i){case gr.OK:return De.OK;case gr.CANCELLED:return De.CANCELLED;case gr.UNKNOWN:return De.UNKNOWN;case gr.DEADLINE_EXCEEDED:return De.DEADLINE_EXCEEDED;case gr.RESOURCE_EXHAUSTED:return De.RESOURCE_EXHAUSTED;case gr.INTERNAL:return De.INTERNAL;case gr.UNAVAILABLE:return De.UNAVAILABLE;case gr.UNAUTHENTICATED:return De.UNAUTHENTICATED;case gr.INVALID_ARGUMENT:return De.INVALID_ARGUMENT;case gr.NOT_FOUND:return De.NOT_FOUND;case gr.ALREADY_EXISTS:return De.ALREADY_EXISTS;case gr.PERMISSION_DENIED:return De.PERMISSION_DENIED;case gr.FAILED_PRECONDITION:return De.FAILED_PRECONDITION;case gr.ABORTED:return De.ABORTED;case gr.OUT_OF_RANGE:return De.OUT_OF_RANGE;case gr.UNIMPLEMENTED:return De.UNIMPLEMENTED;case gr.DATA_LOSS:return De.DATA_LOSS;default:return ft()}}(dn=gr||(gr={}))[dn.OK=0]="OK",dn[dn.CANCELLED=1]="CANCELLED",dn[dn.UNKNOWN=2]="UNKNOWN",dn[dn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dn[dn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dn[dn.NOT_FOUND=5]="NOT_FOUND",dn[dn.ALREADY_EXISTS=6]="ALREADY_EXISTS",dn[dn.PERMISSION_DENIED=7]="PERMISSION_DENIED",dn[dn.UNAUTHENTICATED=16]="UNAUTHENTICATED",dn[dn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dn[dn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dn[dn.ABORTED=10]="ABORTED",dn[dn.OUT_OF_RANGE=11]="OUT_OF_RANGE",dn[dn.UNIMPLEMENTED=12]="UNIMPLEMENTED",dn[dn.INTERNAL=13]="INTERNAL",dn[dn.UNAVAILABLE=14]="UNAVAILABLE",dn[dn.DATA_LOSS=15]="DATA_LOSS";class Lr{constructor(n,r){this.comparator=n,this.root=r||Pi.EMPTY}insert(n,r){return new Lr(this.comparator,this.root.insert(n,r,this.comparator).copy(null,null,Pi.BLACK,null,null))}remove(n){return new Lr(this.comparator,this.root.remove(n,this.comparator).copy(null,null,Pi.BLACK,null,null))}get(n){let r=this.root;for(;!r.isEmpty();){const s=this.comparator(n,r.key);if(0===s)return r.value;s<0?r=r.left:s>0&&(r=r.right)}return null}indexOf(n){let r=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(n,s.key);if(0===a)return r+s.left.size;a<0?s=s.left:(r+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(n){return this.root.inorderTraversal(n)}forEach(n){this.inorderTraversal((r,s)=>(n(r,s),!1))}toString(){const n=[];return this.inorderTraversal((r,s)=>(n.push(`${r}:${s}`),!1)),`{${n.join(", ")}}`}reverseTraversal(n){return this.root.reverseTraversal(n)}getIterator(){return new Og(this.root,null,this.comparator,!1)}getIteratorFrom(n){return new Og(this.root,n,this.comparator,!1)}getReverseIterator(){return new Og(this.root,null,this.comparator,!0)}getReverseIteratorFrom(n){return new Og(this.root,n,this.comparator,!0)}}class Og{constructor(n,r,s,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!n.isEmpty();)if(c=r?s(n.key,r):1,a&&(c*=-1),c<0)n=this.isReverse?n.left:n.right;else{if(0===c){this.nodeStack.push(n);break}this.nodeStack.push(n),n=this.isReverse?n.right:n.left}}getNext(){let n=this.nodeStack.pop();const r={key:n.key,value:n.value};if(this.isReverse)for(n=n.left;!n.isEmpty();)this.nodeStack.push(n),n=n.right;else for(n=n.right;!n.isEmpty();)this.nodeStack.push(n),n=n.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const n=this.nodeStack[this.nodeStack.length-1];return{key:n.key,value:n.value}}}class Pi{constructor(n,r,s,a,c){this.key=n,this.value=r,this.color=null!=s?s:Pi.RED,this.left=null!=a?a:Pi.EMPTY,this.right=null!=c?c:Pi.EMPTY,this.size=this.left.size+1+this.right.size}copy(n,r,s,a,c){return new Pi(null!=n?n:this.key,null!=r?r:this.value,null!=s?s:this.color,null!=a?a:this.left,null!=c?c:this.right)}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,s){let a=this;const c=s(n,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(n,r,s),null):0===c?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(n,r,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Pi.EMPTY;let n=this;return n.left.isRed()||n.left.left.isRed()||(n=n.moveRedLeft()),n=n.copy(null,null,null,n.left.removeMin(),null),n.fixUp()}remove(n,r){let s,a=this;if(r(n,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(n,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===r(n,a.key)){if(a.right.isEmpty())return Pi.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(n,r))}return a.fixUp()}isRed(){return this.color}fixUp(){let n=this;return n.right.isRed()&&!n.left.isRed()&&(n=n.rotateLeft()),n.left.isRed()&&n.left.left.isRed()&&(n=n.rotateRight()),n.left.isRed()&&n.right.isRed()&&(n=n.colorFlip()),n}moveRedLeft(){let n=this.colorFlip();return n.right.left.isRed()&&(n=n.copy(null,null,null,null,n.right.rotateRight()),n=n.rotateLeft(),n=n.colorFlip()),n}moveRedRight(){let n=this.colorFlip();return n.left.left.isRed()&&(n=n.rotateRight(),n=n.colorFlip()),n}rotateLeft(){const n=this.copy(null,null,Pi.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight(){const n=this.copy(null,null,Pi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip(){const n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth(){const n=this.check();return Math.pow(2,n)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ft();const n=this.left.check();if(n!==this.right.check())throw ft();return n+(this.isRed()?0:1)}}Pi.EMPTY=null,Pi.RED=!0,Pi.BLACK=!1,Pi.EMPTY=new class{constructor(){this.size=0}get key(){throw ft()}get value(){throw ft()}get color(){throw ft()}get left(){throw ft()}get right(){throw ft()}copy(i,n,r,s,a){return this}insert(i,n,r){return new Pi(i,n)}remove(i,n){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class wr{constructor(n){this.comparator=n,this.data=new Lr(this.comparator)}has(n){return null!==this.data.get(n)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(n){return this.data.indexOf(n)}forEach(n){this.data.inorderTraversal((r,s)=>(n(r),!1))}forEachInRange(n,r){const s=this.data.getIteratorFrom(n[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,n[1])>=0)return;r(a.key)}}forEachWhile(n,r){let s;for(s=void 0!==r?this.data.getIteratorFrom(r):this.data.getIterator();s.hasNext();)if(!n(s.getNext().key))return}firstAfterOrEqual(n){const r=this.data.getIteratorFrom(n);return r.hasNext()?r.getNext().key:null}getIterator(){return new z_(this.data.getIterator())}getIteratorFrom(n){return new z_(this.data.getIteratorFrom(n))}add(n){return this.copy(this.data.remove(n).insert(n,!0))}delete(n){return this.has(n)?this.copy(this.data.remove(n)):this}isEmpty(){return this.data.isEmpty()}unionWith(n){let r=this;return r.size<n.size&&(r=n,n=this),n.forEach(s=>{r=r.add(s)}),r}isEqual(n){if(!(n instanceof wr)||this.size!==n.size)return!1;const r=this.data.getIterator(),s=n.data.getIterator();for(;r.hasNext();){const a=r.getNext().key,c=s.getNext().key;if(0!==this.comparator(a,c))return!1}return!0}toArray(){const n=[];return this.forEach(r=>{n.push(r)}),n}toString(){const n=[];return this.forEach(r=>n.push(r)),"SortedSet("+n.toString()+")"}copy(n){const r=new wr(this.comparator);return r.data=n,r}}class z_{constructor(n){this.iter=n}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const Jk=new Lr(ut.comparator);function jo(){return Jk}const MT=new Lr(ut.comparator);function K_(){return MT}const OT=new Lr(ut.comparator);function zE(){return OT}const kT=new wr(ut.comparator);function on(...i){let n=kT;for(const r of i)n=n.add(r);return n}const Z_=new wr(sn);function Y_(){return Z_}class kg{constructor(n,r,s,a,c){this.snapshotVersion=n,this.targetChanges=r,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(n,r){const s=new Map;return s.set(n,Q_.createSynthesizedTargetChangeForCurrentChange(n,r)),new kg(We.min(),s,Y_(),jo(),on())}}class Q_{constructor(n,r,s,a,c){this.resumeToken=n,this.current=r,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(n,r){return new Q_(ei.EMPTY_BYTE_STRING,r,on(),on(),on())}}class ru{constructor(n,r,s,a){this.k=n,this.removedTargetIds=r,this.key=s,this.$=a}}class KE{constructor(n,r){this.targetId=n,this.O=r}}class Tf{constructor(n,r,s=ei.EMPTY_BYTE_STRING,a=null){this.state=n,this.targetIds=r,this.resumeToken=s,this.cause=a}}class If{constructor(){this.F=0,this.M=ZE(),this.L=ei.EMPTY_BYTE_STRING,this.B=!1,this.U=!0}get current(){return this.B}get resumeToken(){return this.L}get q(){return 0!==this.F}get K(){return this.U}j(n){n.approximateByteSize()>0&&(this.U=!0,this.L=n)}W(){let n=on(),r=on(),s=on();return this.M.forEach((a,c)=>{switch(c){case 0:n=n.add(a);break;case 2:r=r.add(a);break;case 1:s=s.add(a);break;default:ft()}}),new Q_(this.L,this.B,n,r,s)}G(){this.U=!1,this.M=ZE()}H(n,r){this.U=!0,this.M=this.M.insert(n,r)}J(n){this.U=!0,this.M=this.M.remove(n)}Y(){this.F+=1}X(){this.F-=1}Z(){this.U=!0,this.B=!0}}class tN{constructor(n){this.tt=n,this.et=new Map,this.nt=jo(),this.st=J_(),this.it=new wr(sn)}rt(n){for(const r of n.k)n.$&&n.$.isFoundDocument()?this.ot(r,n.$):this.at(r,n.key,n.$);for(const r of n.removedTargetIds)this.at(r,n.key,n.$)}ct(n){this.forEachTarget(n,r=>{const s=this.ut(r);switch(n.state){case 0:this.ht(r)&&s.j(n.resumeToken);break;case 1:s.X(),s.q||s.G(),s.j(n.resumeToken);break;case 2:s.X(),s.q||this.removeTarget(r);break;case 3:this.ht(r)&&(s.Z(),s.j(n.resumeToken));break;case 4:this.ht(r)&&(this.lt(r),s.j(n.resumeToken));break;default:ft()}})}forEachTarget(n,r){n.targetIds.length>0?n.targetIds.forEach(r):this.et.forEach((s,a)=>{this.ht(a)&&r(a)})}ft(n){const r=n.targetId,s=n.O.count,a=this.dt(r);if(a){const c=a.target;if(Ef(c))if(0===s){const h=new ut(c.path);this.at(r,h,pr.newNoDocument(h,We.min()))}else Nt(1===s);else this.wt(r)!==s&&(this.lt(r),this.it=this.it.add(r))}}_t(n){const r=new Map;this.et.forEach((c,h)=>{const m=this.dt(h);if(m){if(c.current&&Ef(m.target)){const E=new ut(m.target.path);null!==this.nt.get(E)||this.gt(h,E)||this.at(h,E,pr.newNoDocument(E,n))}c.K&&(r.set(h,c.W()),c.G())}});let s=on();this.st.forEach((c,h)=>{let m=!0;h.forEachWhile(E=>{const C=this.dt(E);return!C||2===C.purpose||(m=!1,!1)}),m&&(s=s.add(c))});const a=new kg(n,r,this.it,this.nt,s);return this.nt=jo(),this.st=J_(),this.it=new wr(sn),a}ot(n,r){if(!this.ht(n))return;const s=this.gt(n,r.key)?2:0;this.ut(n).H(r.key,s),this.nt=this.nt.insert(r.key,r),this.st=this.st.insert(r.key,this.yt(r.key).add(n))}at(n,r,s){if(!this.ht(n))return;const a=this.ut(n);this.gt(n,r)?a.H(r,1):a.J(r),this.st=this.st.insert(r,this.yt(r).delete(n)),s&&(this.nt=this.nt.insert(r,s))}removeTarget(n){this.et.delete(n)}wt(n){const r=this.ut(n).W();return this.tt.getRemoteKeysForTarget(n).size+r.addedDocuments.size-r.removedDocuments.size}Y(n){this.ut(n).Y()}ut(n){let r=this.et.get(n);return r||(r=new If,this.et.set(n,r)),r}yt(n){let r=this.st.get(n);return r||(r=new wr(sn),this.st=this.st.insert(n,r)),r}ht(n){const r=null!==this.dt(n);return r||ze("WatchChangeAggregator","Detected inactive target",n),r}dt(n){const r=this.et.get(n);return r&&r.q?null:this.tt.Et(n)}lt(n){this.et.set(n,new If),this.tt.getRemoteKeysForTarget(n).forEach(r=>{this.at(n,r,null)})}gt(n,r){return this.tt.getRemoteKeysForTarget(n).has(r)}}function J_(){return new Lr(ut.comparator)}function ZE(){return new Lr(ut.comparator)}const nN={asc:"ASCENDING",desc:"DESCENDING"},FT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class rN{constructor(n,r){this.databaseId=n,this.D=r}}function Fd(i,n){return i.D?`${new Date(1e3*n.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+n.nanoseconds).slice(-9)}Z`:{seconds:""+n.seconds,nanos:n.nanoseconds}}function LT(i,n){return i.D?n.toBase64():n.toUint8Array()}function iN(i,n){return Fd(i,n.toTimestamp())}function ti(i){return Nt(!!i),We.fromTimestamp(function(n){const r=Rd(n);return new yi(r.seconds,r.nanos)}(i))}function nc(i,n){return(r=i,new Dn(["projects",r.projectId,"databases",r.database])).child("documents").child(n).canonicalString();var r}function YE(i){const n=Dn.fromString(i);return Nt(XE(n)),n}function Fg(i,n){return nc(i.databaseId,n.path)}function ul(i,n){const r=YE(n);if(r.get(1)!==i.databaseId.projectId)throw new $e(De.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+i.databaseId.projectId);if(r.get(3)!==i.databaseId.database)throw new $e(De.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+i.databaseId.database);return new ut(UT(r))}function rc(i,n){return nc(i.databaseId,n)}function VT(i){const n=YE(i);return 4===n.length?Dn.emptyPath():UT(n)}function Lg(i){return new Dn(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function UT(i){return Nt(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function BT(i,n,r){return{name:Fg(i,n),fields:r.value.mapValue.fields}}function sN(i,n,r){const s=ul(i,n.name),a=ti(n.updateTime),c=new hs({mapValue:{fields:n.fields}}),h=pr.newFoundDocument(s,a,c);return r&&h.setHasCommittedMutations(),r?h.setHasCommittedMutations():h}function jn(i,n){let r;if(n instanceof q_)r={update:BT(i,n.key,n.value)};else if(n instanceof kd)r={delete:Fg(i,n.key)};else if(n instanceof nu)r={update:BT(i,n.key,n.data),updateMask:JE(n.fieldMask)};else{if(!(n instanceof WE))return ft();r={verify:Fg(i,n.key)}}return n.fieldTransforms.length>0&&(r.updateTransforms=n.fieldTransforms.map(s=>function(a,c){const h=c.transform;if(h instanceof Ng)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Od)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof tc)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Cf)return{fieldPath:c.field.canonicalString(),increment:h.C};throw ft()}(0,s))),n.precondition.isNone||(r.currentDocument=void 0!==(a=n.precondition).updateTime?{updateTime:iN(i,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:ft()),r;var a}function X_(i,n){const r=n.currentDocument?void 0!==(a=n.currentDocument).updateTime?$r.updateTime(ti(a.updateTime)):void 0!==a.exists?$r.exists(a.exists):$r.none():$r.none(),s=n.updateTransforms?n.updateTransforms.map(a=>function(c,h){let m=null;"setToServerValue"in h?(Nt("REQUEST_TIME"===h.setToServerValue),m=new Ng):"appendMissingElements"in h?m=new Od(h.appendMissingElements.values||[]):"removeAllFromArray"in h?m=new tc(h.removeAllFromArray.values||[]):"increment"in h?m=new Cf(c,h.increment):ft();const E=Xr.fromServerFormat(h.fieldPath);return new xg(E,m)}(i,a)):[];var a;if(n.update){const a=ul(i,n.update.name),c=new hs({mapValue:{fields:n.update.fields}});if(n.updateMask){const h=new Ps((n.updateMask.fieldPaths||[]).map(C=>Xr.fromServerFormat(C)));return new nu(a,c,h,r,s)}return new q_(a,c,r,s)}if(n.delete){const a=ul(i,n.delete);return new kd(a,r)}if(n.verify){const a=ul(i,n.verify);return new WE(a,r)}return ft()}function cl(i,n){return{documents:[rc(i,n.path)]}}function ey(i,n){const r={structuredQuery:{}},s=n.path;null!==n.collectionGroup?(r.parent=rc(i,s),r.structuredQuery.from=[{collectionId:n.collectionGroup,allDescendants:!0}]):(r.parent=rc(i,s.popLast()),r.structuredQuery.from=[{collectionId:s.lastSegment()}]);const a=function(m){if(0===m.length)return;const E=m.map(C=>function(S){if("=="===S.op){if(WR(S.value))return{unaryFilter:{field:Ld(S.field),op:"IS_NAN"}};if(qR(S.value))return{unaryFilter:{field:Ld(S.field),op:"IS_NULL"}}}else if("!="===S.op){if(WR(S.value))return{unaryFilter:{field:Ld(S.field),op:"IS_NOT_NAN"}};if(qR(S.value))return{unaryFilter:{field:Ld(S.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ld(S.field),op:qT(S.op),value:S.value}}}(C));return 1===E.length?E[0]:{compositeFilter:{op:"AND",filters:E}}}(n.filters);a&&(r.structuredQuery.where=a);const c=function(m){if(0!==m.length)return m.map(E=>{return{field:Ld((C=E).field),direction:GT(C.dir)};var C})}(n.orderBy);c&&(r.structuredQuery.orderBy=c);const h=(E=n.limit,i.D||Xl(E)?E:{value:E});var E;return null!==h&&(r.structuredQuery.limit=h),n.startAt&&(r.structuredQuery.startAt=HT(n.startAt)),n.endAt&&(r.structuredQuery.endAt=HT(n.endAt)),r}function ty(i){let n=VT(i.parent);const r=i.structuredQuery,s=r.from?r.from.length:0;let a=null;if(s>0){Nt(1===s);const S=r.from[0];S.allDescendants?a=S.collectionId:n=n.child(S.collectionId)}let c=[];r.where&&(c=$T(r.where));let h=[];r.orderBy&&(h=r.orderBy.map(S=>{return new ll(Df((N=S).field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let m=null;r.limit&&(m=function(S){let N;return N="object"==typeof S?S.value:S,Xl(N)?null:N}(r.limit));let E=null;r.startAt&&(E=QE(r.startAt));let C=null;return r.endAt&&(C=QE(r.endAt)),Md(n,a,h,c,m,"F",E,C)}function $T(i){return i?void 0!==i.unaryFilter?[Vg(i)]:void 0!==i.fieldFilter?[aN(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(n=>$T(n)).reduce((n,r)=>n.concat(r)):ft():[]}function HT(i){return{before:i.before,values:i.position}}function QE(i){return new Tg(i.values||[],!!i.before)}function GT(i){return nN[i]}function qT(i){return FT[i]}function Ld(i){return{fieldPath:i.canonicalString()}}function Df(i){return Xr.fromServerFormat(i.fieldPath)}function aN(i){return Gi.create(Df(i.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return ft()}}(i.fieldFilter.op),i.fieldFilter.value)}function Vg(i){switch(i.unaryFilter.op){case"IS_NAN":const n=Df(i.unaryFilter.field);return Gi.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=Df(i.unaryFilter.field);return Gi.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Df(i.unaryFilter.field);return Gi.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Df(i.unaryFilter.field);return Gi.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return ft()}}function JE(i){const n=[];return i.fields.forEach(r=>n.push(r.canonicalString())),{fieldPaths:n}}function XE(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function $o(i){let n="";for(let r=0;r<i.length;r++)n.length>0&&(n=ew(n)),n=WT(i.get(r),n);return ew(n)}function WT(i,n){let r=n;const s=i.length;for(let a=0;a<s;a++){const c=i.charAt(a);switch(c){case"\0":r+="\x01\x10";break;case"\x01":r+="\x01\x11";break;default:r+=c}}return r}function ew(i){return i+"\x01\x01"}function iu(i){const n=i.length;if(Nt(n>=2),2===n)return Nt("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),Dn.emptyPath();const r=n-2,s=[];let a="";for(let c=0;c<n;){const h=i.indexOf("\x01",c);switch((h<0||h>r)&&ft(),i.charAt(h+1)){case"\x01":const m=i.substring(c,h);let E;0===a.length?E=m:(a+=m,E=a,a=""),s.push(E);break;case"\x10":a+=i.substring(c,h),a+="\0";break;case"\x11":a+=i.substring(c,h+1);break;default:ft()}c=h+2}return new Dn(s)}class lN{constructor(n,r){this.seconds=n,this.nanoseconds=r}}class eo{constructor(n,r,s){this.ownerId=n,this.allowTabSynchronization=r,this.leaseTimestampMs=s}}eo.store="owner",eo.key="owner";class ic{constructor(n,r,s){this.userId=n,this.lastAcknowledgedBatchId=r,this.lastStreamToken=s}}ic.store="mutationQueues",ic.keyPath="userId";class Kn{constructor(n,r,s,a,c){this.userId=n,this.batchId=r,this.localWriteTimeMs=s,this.baseMutations=a,this.mutations=c}}Kn.store="mutations",Kn.keyPath="batchId",Kn.userMutationsIndex="userMutationsIndex",Kn.userMutationsKeyPath=["userId","batchId"];class fs{constructor(){}static prefixForUser(n){return[n]}static prefixForPath(n,r){return[n,$o(r)]}static key(n,r,s){return[n,$o(r),s]}}fs.store="documentMutations",fs.PLACEHOLDER=new fs;class zT{constructor(n,r){this.path=n,this.readTime=r}}class uN{constructor(n,r){this.path=n,this.version=r}}class br{constructor(n,r,s,a,c,h){this.unknownDocument=n,this.noDocument=r,this.document=s,this.hasCommittedMutations=a,this.readTime=c,this.parentPath=h}}br.store="remoteDocuments",br.readTimeIndex="readTimeIndex",br.readTimeIndexPath="readTime",br.collectionReadTimeIndex="collectionReadTimeIndex",br.collectionReadTimeIndexPath=["parentPath","readTime"];class su{constructor(n){this.byteSize=n}}su.store="remoteDocumentGlobal",su.key="remoteDocumentGlobalKey";class to{constructor(n,r,s,a,c,h,m){this.targetId=n,this.canonicalId=r,this.readTime=s,this.resumeToken=a,this.lastListenSequenceNumber=c,this.lastLimboFreeSnapshotVersion=h,this.query=m}}to.store="targets",to.keyPath="targetId",to.queryTargetsIndexName="queryTargetsIndex",to.queryTargetsKeyPath=["canonicalId","targetId"];class ni{constructor(n,r,s){this.targetId=n,this.path=r,this.sequenceNumber=s}}ni.store="targetDocuments",ni.keyPath=["targetId","path"],ni.documentTargetsIndex="documentTargetsIndex",ni.documentTargetsKeyPath=["path","targetId"];class no{constructor(n,r,s,a){this.highestTargetId=n,this.highestListenSequenceNumber=r,this.lastRemoteSnapshotVersion=s,this.targetCount=a}}no.key="targetGlobalKey",no.store="targetGlobal";class sc{constructor(n,r){this.collectionId=n,this.parent=r}}sc.store="collectionParents",sc.keyPath=["collectionId","parent"];class dl{constructor(n,r,s,a){this.clientId=n,this.updateTimeMs=r,this.networkEnabled=s,this.inForeground=a}}dl.store="clientMetadata",dl.keyPath="clientId";class Ug{constructor(n,r,s){this.bundleId=n,this.createTime=r,this.version=s}}Ug.store="bundles",Ug.keyPath="bundleId";class qi{constructor(n,r,s){this.name=n,this.readTime=r,this.bundledQuery=s}}qi.store="namedQueries",qi.keyPath="name";const t1=[ic.store,Kn.store,fs.store,br.store,to.store,eo.store,no.store,ni.store,dl.store,su.store,sc.store,Ug.store,qi.store],cN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class dN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(n){this.onCommittedListeners.push(n)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(n=>n())}}class Ue{constructor(n){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,n(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(n){return this.next(void 0,n)}next(n,r){return this.callbackAttached&&ft(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(n,this.result):new Ue((s,a)=>{this.nextCallback=c=>{this.wrapSuccess(n,c).next(s,a)},this.catchCallback=c=>{this.wrapFailure(r,c).next(s,a)}})}toPromise(){return new Promise((n,r)=>{this.next(n,r)})}wrapUserFunction(n){try{const r=n();return r instanceof Ue?r:Ue.resolve(r)}catch(r){return Ue.reject(r)}}wrapSuccess(n,r){return n?this.wrapUserFunction(()=>n(r)):Ue.resolve(r)}wrapFailure(n,r){return n?this.wrapUserFunction(()=>n(r)):Ue.reject(r)}static resolve(n){return new Ue((r,s)=>{r(n)})}static reject(n){return new Ue((r,s)=>{s(n)})}static waitFor(n){return new Ue((r,s)=>{let a=0,c=0,h=!1;n.forEach(m=>{++a,m.next(()=>{++c,h&&c===a&&r()},E=>s(E))}),h=!0,c===a&&r()})}static or(n){let r=Ue.resolve(!1);for(const s of n)r=r.next(a=>a?Ue.resolve(a):s());return r}static forEach(n,r){const s=[];return n.forEach((a,c)=>{s.push(r.call(this,a,c))}),this.waitFor(s)}}class Bg{constructor(n,r){this.action=n,this.transaction=r,this.aborted=!1,this.Tt=new Jr,this.transaction.oncomplete=()=>{this.Tt.resolve()},this.transaction.onabort=()=>{r.error?this.Tt.reject(new ny(n,r.error)):this.Tt.resolve()},this.transaction.onerror=s=>{const a=nw(s.target.error);this.Tt.reject(new ny(n,a))}}static open(n,r,s,a){try{return new Bg(r,n.transaction(a,s))}catch(c){throw new ny(r,c)}}get It(){return this.Tt.promise}abort(n){n&&this.Tt.reject(n),this.aborted||(ze("SimpleDb","Aborting transaction:",n?n.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(n){const r=this.transaction.objectStore(n);return new tw(r)}}class Ho{constructor(n,r,s){this.name=n,this.version=r,this.At=s,12.2===Ho.Rt((0,V.z$)())&&kr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(n){return ze("SimpleDb","Removing database:",n),Vd(window.indexedDB.deleteDatabase(n)).toPromise()}static bt(){if(!(0,V.hl)())return!1;if(Ho.Pt())return!0;const n=(0,V.z$)(),r=Ho.Rt(n),s=0<r&&r<10,a=Ho.vt(n),c=0<a&&a<4.5;return!(n.indexOf("MSIE ")>0||n.indexOf("Trident/")>0||n.indexOf("Edge/")>0||s||c)}static Pt(){var n;return"undefined"!=typeof process&&"YES"===(null===(n=process.env)||void 0===n?void 0:n.Vt)}static St(n,r){return n.store(r)}static Rt(n){const r=n.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static vt(n){const r=n.match(/Android ([\d.]+)/i),s=r?r[1].split(".").slice(0,2).join("."):"-1";return Number(s)}Dt(n){var r=this;return(0,Se.Z)(function*(){return r.db||(ze("SimpleDb","Opening database:",r.name),r.db=yield new Promise((s,a)=>{const c=indexedDB.open(r.name,r.version);c.onsuccess=h=>{s(h.target.result)},c.onblocked=()=>{a(new ny(n,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},c.onerror=h=>{const m=h.target.error;a("VersionError"===m.name?new $e(De.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new $e(De.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new ny(n,m))},c.onupgradeneeded=h=>{ze("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',h.oldVersion),r.At.Ct(h.target.result,c.transaction,h.oldVersion,r.version).next(()=>{ze("SimpleDb","Database upgrade to version "+r.version+" complete")})}})),r.Nt&&(r.db.onversionchange=s=>r.Nt(s)),r.db})()}xt(n){this.Nt=n,this.db&&(this.db.onversionchange=r=>n(r))}runTransaction(n,r,s,a){var c=this;return(0,Se.Z)(function*(){const h="readonly"===r;let m=0;for(;;){++m;try{c.db=yield c.Dt(n);const E=Bg.open(c.db,n,h?"readonly":"readwrite",s),C=a(E).catch(S=>(E.abort(S),Ue.reject(S))).toPromise();return C.catch(()=>{}),yield E.It,C}catch(E){const C="FirebaseError"!==E.name&&m<3;if(ze("SimpleDb","Transaction failed with error:",E.message,"Retrying:",C),c.close(),!C)return Promise.reject(E)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class hN{constructor(n){this.kt=n,this.$t=!1,this.Ot=null}get isDone(){return this.$t}get Ft(){return this.Ot}set cursor(n){this.kt=n}done(){this.$t=!0}Mt(n){this.Ot=n}delete(){return Vd(this.kt.delete())}}class ny extends $e{constructor(n,r){super(De.UNAVAILABLE,`IndexedDB transaction '${n}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function oc(i){return"IndexedDbTransactionError"===i.name}class tw{constructor(n){this.store=n}put(n,r){let s;return void 0!==r?(ze("SimpleDb","PUT",this.store.name,n,r),s=this.store.put(r,n)):(ze("SimpleDb","PUT",this.store.name,"<auto-key>",n),s=this.store.put(n)),Vd(s)}add(n){return ze("SimpleDb","ADD",this.store.name,n,n),Vd(this.store.add(n))}get(n){return Vd(this.store.get(n)).next(r=>(void 0===r&&(r=null),ze("SimpleDb","GET",this.store.name,n,r),r))}delete(n){return ze("SimpleDb","DELETE",this.store.name,n),Vd(this.store.delete(n))}count(){return ze("SimpleDb","COUNT",this.store.name),Vd(this.store.count())}Lt(n,r){const s=this.cursor(this.options(n,r)),a=[];return this.Bt(s,(c,h)=>{a.push(h)}).next(()=>a)}Ut(n,r){ze("SimpleDb","DELETE ALL",this.store.name);const s=this.options(n,r);s.qt=!1;const a=this.cursor(s);return this.Bt(a,(c,h,m)=>m.delete())}Kt(n,r){let s;r?s=n:(s={},r=n);const a=this.cursor(s);return this.Bt(a,r)}jt(n){const r=this.cursor({});return new Ue((s,a)=>{r.onerror=c=>{const h=nw(c.target.error);a(h)},r.onsuccess=c=>{const h=c.target.result;h?n(h.primaryKey,h.value).next(m=>{m?h.continue():s()}):s()}})}Bt(n,r){const s=[];return new Ue((a,c)=>{n.onerror=h=>{c(h.target.error)},n.onsuccess=h=>{const m=h.target.result;if(!m)return void a();const E=new hN(m),C=r(m.primaryKey,m.value,E);if(C instanceof Ue){const S=C.catch(N=>(E.done(),Ue.reject(N)));s.push(S)}E.isDone?a():null===E.Ft?m.continue():m.continue(E.Ft)}}).next(()=>Ue.waitFor(s))}options(n,r){let s;return void 0!==n&&("string"==typeof n?s=n:r=n),{index:s,range:r}}cursor(n){let r="next";if(n.reverse&&(r="prev"),n.index){const s=this.store.index(n.index);return n.qt?s.openKeyCursor(n.range,r):s.openCursor(n.range,r)}return this.store.openCursor(n.range,r)}}function Vd(i){return new Ue((n,r)=>{i.onsuccess=s=>{n(s.target.result)},i.onerror=s=>{const a=nw(s.target.error);r(a)}})}let ry=!1;function nw(i){const n=Ho.Rt((0,V.z$)());if(n>=12.2&&n<13){const r="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(r)>=0){const s=new $e("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ry||(ry=!0,setTimeout(()=>{throw s},0)),s}}return i}class KT extends dN{constructor(n,r){super(),this.Qt=n,this.currentSequenceNumber=r}}function Os(i,n){const r=Je(i);return Ho.St(r.Qt,n)}class rw{constructor(n,r,s,a){this.batchId=n,this.localWriteTime=r,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(n,r){const s=r.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(n.key)&&XR(c,n,s[a])}}applyToLocalView(n){for(const r of this.baseMutations)r.key.isEqual(n.key)&&Bo(r,n,this.localWriteTime);for(const r of this.mutations)r.key.isEqual(n.key)&&Bo(r,n,this.localWriteTime)}applyToLocalDocumentSet(n){this.mutations.forEach(r=>{const s=n.get(r.key),a=s;this.applyToLocalView(a),s.isValidDocument()||a.convertToNoDocument(We.min())})}keys(){return this.mutations.reduce((n,r)=>n.add(r.key),on())}isEqual(n){return this.batchId===n.batchId&&yf(this.mutations,n.mutations,(r,s)=>ST(r,s))&&yf(this.baseMutations,n.baseMutations,(r,s)=>ST(r,s))}}class iw{constructor(n,r,s,a){this.batch=n,this.commitVersion=r,this.mutationResults=s,this.docVersions=a}static from(n,r,s){Nt(n.mutations.length===s.length);let a=zE();const c=n.mutations;for(let h=0;h<c.length;h++)a=a.insert(c[h].key,s[h].version);return new iw(n,r,s,a)}}class ac{constructor(n,r,s,a,c=We.min(),h=We.min(),m=ei.EMPTY_BYTE_STRING){this.target=n,this.targetId=r,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m}withSequenceNumber(n){return new ac(this.target,this.targetId,this.purpose,n,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(n,r){return new ac(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,n)}withLastLimboFreeSnapshotVersion(n){return new ac(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,n,this.resumeToken)}}class jg{constructor(n){this.Wt=n}}function lc(i,n){if(n.document)return sN(i.Wt,n.document,!!n.hasCommittedMutations);if(n.noDocument){const r=ut.fromSegments(n.noDocument.path),s=Rf(n.noDocument.readTime),a=pr.newNoDocument(r,s);return n.hasCommittedMutations?a.setHasCommittedMutations():a}if(n.unknownDocument){const r=ut.fromSegments(n.unknownDocument.path),s=Rf(n.unknownDocument.version);return pr.newUnknownDocument(r,s)}return ft()}function sw(i,n,r){const s=ro(r),a=n.key.path.popLast().toArray();if(n.isFoundDocument()){const c={name:Fg(m=i.Wt,(E=n).key),fields:E.data.value.mapValue.fields,updateTime:Fd(m,E.version.toTimestamp())};return new br(null,null,c,n.hasCommittedMutations,s,a)}var m,E;if(n.isNoDocument()){const c=n.key.path.toArray(),h=Af(n.version),m=n.hasCommittedMutations;return new br(null,new zT(c,h),null,m,s,a)}if(n.isUnknownDocument()){const c=n.key.path.toArray(),h=Af(n.version);return new br(new uN(c,h),null,null,!0,s,a)}return ft()}function ro(i){const n=i.toTimestamp();return[n.seconds,n.nanoseconds]}function Sf(i){const n=new yi(i[0],i[1]);return We.fromTimestamp(n)}function Af(i){const n=i.toTimestamp();return new lN(n.seconds,n.nanoseconds)}function Rf(i){const n=new yi(i.seconds,i.nanoseconds);return We.fromTimestamp(n)}function uc(i,n){const r=(n.baseMutations||[]).map(c=>X_(i.Wt,c));for(let c=0;c<n.mutations.length-1;++c){const h=n.mutations[c];c+1<n.mutations.length&&void 0!==n.mutations[c+1].transform&&(h.updateTransforms=n.mutations[c+1].transform.fieldTransforms,n.mutations.splice(c+1,1),++c)}const s=n.mutations.map(c=>X_(i.Wt,c)),a=yi.fromMillis(n.localWriteTimeMs);return new rw(n.batchId,a,r,s)}function ks(i){const n=Rf(i.readTime),r=void 0!==i.lastLimboFreeSnapshotVersion?Rf(i.lastLimboFreeSnapshotVersion):We.min();let s;var a;return void 0!==i.query.documents?(Nt(1===(a=i.query).documents.length),s=Uo(bf(VT(a.documents[0])))):s=Uo(ty(i.query)),new ac(s,i.targetId,0,i.lastListenSequenceNumber,n,r,ei.fromBase64String(i.resumeToken))}function Nf(i,n){const r=Af(n.snapshotVersion),s=Af(n.lastLimboFreeSnapshotVersion);let a;a=Ef(n.target)?cl(i.Wt,n.target):ey(i.Wt,n.target);const c=n.resumeToken.toBase64();return new to(n.targetId,xd(n.target),r,c,n.sequenceNumber,s,a)}function vi(i){const n=ty({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?BE(n,n.limit,"L"):n}class Ud{getBundleMetadata(n,r){return $g(n).get(r).next(s=>{if(s)return{id:(a=s).bundleId,createTime:Rf(a.createTime),version:a.version};var a})}saveBundleMetadata(n,r){return $g(n).put({bundleId:(s=r).id,createTime:Af(ti(s.createTime)),version:s.version});var s}getNamedQuery(n,r){return io(n).get(r).next(s=>{if(s)return{name:(a=s).name,query:vi(a.bundledQuery),readTime:Rf(a.readTime)};var a})}saveNamedQuery(n,r){return io(n).put({name:(s=r).name,readTime:Af(ti(s.readTime)),bundledQuery:s.bundledQuery});var s}}function $g(i){return Os(i,Ug.store)}function io(i){return Os(i,qi.store)}class ow{constructor(){this.Gt=new cc}addToCollectionParentIndex(n,r){return this.Gt.add(r),Ue.resolve()}getCollectionParents(n,r){return Ue.resolve(this.Gt.getEntries(r))}}class cc{constructor(){this.index={}}add(n){const r=n.lastSegment(),s=n.popLast(),a=this.index[r]||new wr(Dn.comparator),c=!a.has(s);return this.index[r]=a.add(s),c}has(n){const r=n.lastSegment(),s=n.popLast(),a=this.index[r];return a&&a.has(s)}getEntries(n){return(this.index[n]||new wr(Dn.comparator)).toArray()}}class xf{constructor(){this.zt=new cc}addToCollectionParentIndex(n,r){if(!this.zt.has(r)){const s=r.lastSegment(),a=r.popLast();n.addOnCommittedListener(()=>{this.zt.add(r)});const c={collectionId:s,parent:$o(a)};return Bd(n).put(c)}return Ue.resolve()}getCollectionParents(n,r){const s=[],a=IDBKeyRange.bound([r,""],[gT(r),""],!1,!0);return Bd(n).Lt(a).next(c=>{for(const h of c){if(h.collectionId!==r)break;s.push(iu(h.parent))}return s})}}function Bd(i){return Os(i,sc.store)}const jd={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ri{constructor(n,r,s){this.cacheSizeCollectionThreshold=n,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=s}static withCacheSize(n){return new ri(n,ri.DEFAULT_COLLECTION_PERCENTILE,ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function $d(i,n,r){const s=i.store(Kn.store),a=i.store(fs.store),c=[],h=IDBKeyRange.only(r.batchId);let m=0;const E=s.Kt({range:h},(S,N,O)=>(m++,O.delete()));c.push(E.next(()=>{Nt(1===m)}));const C=[];for(const S of r.mutations){const N=fs.key(n,S.key.path,r.batchId);c.push(a.delete(N)),C.push(S.key)}return Ue.waitFor(c).next(()=>C)}function ou(i){if(!i)return 0;let n;if(i.document)n=i.document;else if(i.unknownDocument)n=i.unknownDocument;else{if(!i.noDocument)throw ft();n=i.noDocument}return JSON.stringify(n).length}ri.DEFAULT_COLLECTION_PERCENTILE=10,ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ri.DEFAULT=new ri(41943040,ri.DEFAULT_COLLECTION_PERCENTILE,ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ri.DISABLED=new ri(-1,0,0);class dc{constructor(n,r,s,a){this.userId=n,this.N=r,this.Ht=s,this.referenceDelegate=a,this.Jt={}}static Yt(n,r,s,a){Nt(""!==n.uid);const c=n.isAuthenticated()?n.uid:"";return new dc(c,r,s,a)}checkEmpty(n){let r=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return au(n).Kt({index:Kn.userMutationsIndex,range:s},(a,c,h)=>{r=!1,h.done()}).next(()=>r)}addMutationBatch(n,r,s,a){const c=Gd(n),h=au(n);return h.add({}).next(m=>{Nt("number"==typeof m);const E=new rw(m,r,s,a),C=function(O,B,W){const ue=W.baseMutations.map(Ze=>jn(O.Wt,Ze)),Pe=W.mutations.map(Ze=>jn(O.Wt,Ze));return new Kn(B,W.batchId,W.localWriteTime.toMillis(),ue,Pe)}(this.N,this.userId,E),S=[];let N=new wr((O,B)=>sn(O.canonicalString(),B.canonicalString()));for(const O of a){const B=fs.key(this.userId,O.key.path,m);N=N.add(O.key.path.popLast()),S.push(h.put(C)),S.push(c.put(B,fs.PLACEHOLDER))}return N.forEach(O=>{S.push(this.Ht.addToCollectionParentIndex(n,O))}),n.addOnCommittedListener(()=>{this.Jt[m]=E.keys()}),Ue.waitFor(S).next(()=>E)})}lookupMutationBatch(n,r){return au(n).get(r).next(s=>s?(Nt(s.userId===this.userId),uc(this.N,s)):null)}Xt(n,r){return this.Jt[r]?Ue.resolve(this.Jt[r]):this.lookupMutationBatch(n,r).next(s=>{if(s){const a=s.keys();return this.Jt[r]=a,a}return null})}getNextMutationBatchAfterBatchId(n,r){const s=r+1,a=IDBKeyRange.lowerBound([this.userId,s]);let c=null;return au(n).Kt({index:Kn.userMutationsIndex,range:a},(h,m,E)=>{m.userId===this.userId&&(Nt(m.batchId>=s),c=uc(this.N,m)),E.done()}).next(()=>c)}getHighestUnacknowledgedBatchId(n){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return au(n).Kt({index:Kn.userMutationsIndex,range:r,reverse:!0},(a,c,h)=>{s=c.batchId,h.done()}).next(()=>s)}getAllMutationBatches(n){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return au(n).Lt(Kn.userMutationsIndex,r).next(s=>s.map(a=>uc(this.N,a)))}getAllMutationBatchesAffectingDocumentKey(n,r){const s=fs.prefixForPath(this.userId,r.path),a=IDBKeyRange.lowerBound(s),c=[];return Gd(n).Kt({range:a},(h,m,E)=>{const[C,S,N]=h,O=iu(S);if(C===this.userId&&r.path.isEqual(O))return au(n).get(N).next(B=>{if(!B)throw ft();Nt(B.userId===this.userId),c.push(uc(this.N,B))});E.done()}).next(()=>c)}getAllMutationBatchesAffectingDocumentKeys(n,r){let s=new wr(sn);const a=[];return r.forEach(c=>{const h=fs.prefixForPath(this.userId,c.path),m=IDBKeyRange.lowerBound(h),E=Gd(n).Kt({range:m},(C,S,N)=>{const[O,B,W]=C,ue=iu(B);O===this.userId&&c.path.isEqual(ue)?s=s.add(W):N.done()});a.push(E)}),Ue.waitFor(a).next(()=>this.Zt(n,s))}getAllMutationBatchesAffectingQuery(n,r){const s=r.path,a=s.length+1,c=fs.prefixForPath(this.userId,s),h=IDBKeyRange.lowerBound(c);let m=new wr(sn);return Gd(n).Kt({range:h},(E,C,S)=>{const[N,O,B]=E,W=iu(O);N===this.userId&&s.isPrefixOf(W)?W.length===a&&(m=m.add(B)):S.done()}).next(()=>this.Zt(n,m))}Zt(n,r){const s=[],a=[];return r.forEach(c=>{a.push(au(n).get(c).next(h=>{if(null===h)throw ft();Nt(h.userId===this.userId),s.push(uc(this.N,h))}))}),Ue.waitFor(a).next(()=>s)}removeMutationBatch(n,r){return $d(n.Qt,this.userId,r).next(s=>(n.addOnCommittedListener(()=>{this.te(r.batchId)}),Ue.forEach(s,a=>this.referenceDelegate.markPotentiallyOrphaned(n,a))))}te(n){delete this.Jt[n]}performConsistencyCheck(n){return this.checkEmpty(n).next(r=>{if(!r)return Ue.resolve();const s=IDBKeyRange.lowerBound(fs.prefixForUser(this.userId)),a=[];return Gd(n).Kt({range:s},(c,h,m)=>{if(c[0]===this.userId){const E=iu(c[1]);a.push(E)}else m.done()}).next(()=>{Nt(0===a.length)})})}containsKey(n,r){return Hd(n,this.userId,r)}ee(n){return aw(n).get(this.userId).next(r=>r||new ic(this.userId,-1,""))}}function Hd(i,n,r){const s=fs.prefixForPath(n,r.path),a=s[1],c=IDBKeyRange.lowerBound(s);let h=!1;return Gd(i).Kt({range:c,qt:!0},(m,E,C)=>{const[S,N,O]=m;S===n&&N===a&&(h=!0),C.done()}).next(()=>h)}function au(i){return Os(i,Kn.store)}function Gd(i){return Os(i,fs.store)}function aw(i){return Os(i,ic.store)}class hc{constructor(n){this.ne=n}next(){return this.ne+=2,this.ne}static se(){return new hc(0)}static ie(){return new hc(-1)}}class ZT{constructor(n,r){this.referenceDelegate=n,this.N=r}allocateTargetId(n){return this.re(n).next(r=>{const s=new hc(r.highestTargetId);return r.highestTargetId=s.next(),this.oe(n,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(n){return this.re(n).next(r=>We.fromTimestamp(new yi(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(n){return this.re(n).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(n,r,s){return this.re(n).next(a=>(a.highestListenSequenceNumber=r,s&&(a.lastRemoteSnapshotVersion=s.toTimestamp()),r>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=r),this.oe(n,a)))}addTargetData(n,r){return this.ae(n,r).next(()=>this.re(n).next(s=>(s.targetCount+=1,this.ce(r,s),this.oe(n,s))))}updateTargetData(n,r){return this.ae(n,r)}removeTargetData(n,r){return this.removeMatchingKeysForTargetId(n,r.targetId).next(()=>qd(n).delete(r.targetId)).next(()=>this.re(n)).next(s=>(Nt(s.targetCount>0),s.targetCount-=1,this.oe(n,s)))}removeTargets(n,r,s){let a=0;const c=[];return qd(n).Kt((h,m)=>{const E=ks(m);E.sequenceNumber<=r&&null===s.get(E.targetId)&&(a++,c.push(this.removeTargetData(n,E)))}).next(()=>Ue.waitFor(c)).next(()=>a)}forEachTarget(n,r){return qd(n).Kt((s,a)=>{const c=ks(a);r(c)})}re(n){return lw(n).get(no.key).next(r=>(Nt(null!==r),r))}oe(n,r){return lw(n).put(no.key,r)}ae(n,r){return qd(n).put(Nf(this.N,r))}ce(n,r){let s=!1;return n.targetId>r.highestTargetId&&(r.highestTargetId=n.targetId,s=!0),n.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=n.sequenceNumber,s=!0),s}getTargetCount(n){return this.re(n).next(r=>r.targetCount)}getTargetData(n,r){const s=xd(r),a=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let c=null;return qd(n).Kt({range:a,index:to.queryTargetsIndexName},(h,m,E)=>{const C=ks(m);Cg(r,C.target)&&(c=C,E.done())}).next(()=>c)}addMatchingKeys(n,r,s){const a=[],c=lu(n);return r.forEach(h=>{const m=$o(h.path);a.push(c.put(new ni(s,m))),a.push(this.referenceDelegate.addReference(n,s,h))}),Ue.waitFor(a)}removeMatchingKeys(n,r,s){const a=lu(n);return Ue.forEach(r,c=>{const h=$o(c.path);return Ue.waitFor([a.delete([s,h]),this.referenceDelegate.removeReference(n,s,c)])})}removeMatchingKeysForTargetId(n,r){const s=lu(n),a=IDBKeyRange.bound([r],[r+1],!1,!0);return s.delete(a)}getMatchingKeysForTargetId(n,r){const s=IDBKeyRange.bound([r],[r+1],!1,!0),a=lu(n);let c=on();return a.Kt({range:s,qt:!0},(h,m,E)=>{const C=iu(h[1]),S=new ut(C);c=c.add(S)}).next(()=>c)}containsKey(n,r){const s=$o(r.path),a=IDBKeyRange.bound([s],[gT(s)],!1,!0);let c=0;return lu(n).Kt({index:ni.documentTargetsIndex,qt:!0,range:a},([h,m],E,C)=>{0!==h&&(c++,C.done())}).next(()=>c>0)}Et(n,r){return qd(n).get(r).next(s=>s?ks(s):null)}}function qd(i){return Os(i,to.store)}function lw(i){return Os(i,no.store)}function lu(i){return Os(i,ni.store)}function fc(i){return uw.apply(this,arguments)}function uw(){return(uw=(0,Se.Z)(function*(i){if(i.code!==De.FAILED_PRECONDITION||i.message!==cN)throw i;ze("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function cw([i,n],[r,s]){const a=sn(i,r);return 0===a?sn(n,s):a}class fN{constructor(n){this.ue=n,this.buffer=new wr(cw),this.he=0}le(){return++this.he}fe(n){const r=[n,this.le()];if(this.buffer.size<this.ue)this.buffer=this.buffer.add(r);else{const s=this.buffer.last();cw(r,s)<0&&(this.buffer=this.buffer.delete(s).add(r))}}get maxValue(){return this.buffer.last()[0]}}class YT{constructor(n,r){this.garbageCollector=n,this.asyncQueue=r,this.de=!1,this.we=null}start(n){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this._e(n)}stop(){this.we&&(this.we.cancel(),this.we=null)}get started(){return null!==this.we}_e(n){var r=this;const s=this.de?3e5:6e4;ze("LruGarbageCollector",`Garbage collection scheduled in ${s}ms`),this.we=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",s,(0,Se.Z)(function*(){r.we=null,r.de=!0;try{yield n.collectGarbage(r.garbageCollector)}catch(a){oc(a)?ze("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",a):yield fc(a)}yield r._e(n)}))}}class QT{constructor(n,r){this.me=n,this.params=r}calculateTargetCount(n,r){return this.me.ge(n).next(s=>Math.floor(r/100*s))}nthSequenceNumber(n,r){if(0===r)return Ue.resolve(Js.T);const s=new fN(r);return this.me.forEachTarget(n,a=>s.fe(a.sequenceNumber)).next(()=>this.me.ye(n,a=>s.fe(a))).next(()=>s.maxValue)}removeTargets(n,r,s){return this.me.removeTargets(n,r,s)}removeOrphanedDocuments(n,r){return this.me.removeOrphanedDocuments(n,r)}collect(n,r){return-1===this.params.cacheSizeCollectionThreshold?(ze("LruGarbageCollector","Garbage collection skipped; disabled"),Ue.resolve(jd)):this.getCacheSize(n).next(s=>s<this.params.cacheSizeCollectionThreshold?(ze("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jd):this.pe(n,r))}getCacheSize(n){return this.me.getCacheSize(n)}pe(n,r){let s,a,c,h,m,E,C;const S=Date.now();return this.calculateTargetCount(n,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(ze("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),a=this.params.maximumSequenceNumbersToCollect):a=N,h=Date.now(),this.nthSequenceNumber(n,a))).next(N=>(s=N,m=Date.now(),this.removeTargets(n,s,r))).next(N=>(c=N,E=Date.now(),this.removeOrphanedDocuments(n,s))).next(N=>(C=Date.now(),mg()<=cn.in.DEBUG&&ze("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${h-S}ms\n\tDetermined least recently used ${a} in `+(m-h)+`ms\n\tRemoved ${c} targets in `+(E-m)+`ms\n\tRemoved ${N} documents in `+(C-E)+`ms\nTotal Duration: ${C-S}ms`),Ue.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:N})))}}class pN{constructor(n,r){this.db=n,this.garbageCollector=new QT(this,r)}ge(n){const r=this.Ee(n);return this.db.getTargetCache().getTargetCount(n).next(s=>r.next(a=>s+a))}Ee(n){let r=0;return this.ye(n,s=>{r++}).next(()=>r)}forEachTarget(n,r){return this.db.getTargetCache().forEachTarget(n,r)}ye(n,r){return this.Te(n,(s,a)=>r(a))}addReference(n,r,s){return dw(n,s)}removeReference(n,r,s){return dw(n,s)}removeTargets(n,r,s){return this.db.getTargetCache().removeTargets(n,r,s)}markPotentiallyOrphaned(n,r){return dw(n,r)}Ie(n,r){return function(s,a){let c=!1;return aw(s).jt(h=>Hd(s,h,a).next(m=>(m&&(c=!0),Ue.resolve(!m)))).next(()=>c)}(n,r)}removeOrphanedDocuments(n,r){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let c=0;return this.Te(n,(h,m)=>{if(m<=r){const E=this.Ie(n,h).next(C=>{if(!C)return c++,s.getEntry(n,h).next(()=>(s.removeEntry(h),lu(n).delete([0,$o(h.path)])))});a.push(E)}}).next(()=>Ue.waitFor(a)).next(()=>s.apply(n)).next(()=>c)}removeTarget(n,r){const s=r.withSequenceNumber(n.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(n,s)}updateLimboDocument(n,r){return dw(n,r)}Te(n,r){const s=lu(n);let a,c=Js.T;return s.Kt({index:ni.documentTargetsIndex},([h,m],{path:E,sequenceNumber:C})=>{0===h?(c!==Js.T&&r(new ut(iu(a)),c),c=C,a=E):c=Js.T}).next(()=>{c!==Js.T&&r(new ut(iu(a)),c)})}getCacheSize(n){return this.db.getRemoteDocumentCache().getSize(n)}}function dw(i,n){return lu(i).put((s=i.currentSequenceNumber,new ni(0,$o(n.path),s)));var s}class Pf{constructor(n,r){this.mapKeyFn=n,this.equalsFn=r,this.inner={}}get(n){const r=this.mapKeyFn(n),s=this.inner[r];if(void 0!==s)for(const[a,c]of s)if(this.equalsFn(a,n))return c}has(n){return void 0!==this.get(n)}set(n,r){const s=this.mapKeyFn(n),a=this.inner[s];if(void 0!==a){for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],n))return void(a[c]=[n,r]);a.push([n,r])}else this.inner[s]=[[n,r]]}delete(n){const r=this.mapKeyFn(n),s=this.inner[r];if(void 0===s)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],n))return 1===s.length?delete this.inner[r]:s.splice(a,1),!0;return!1}forEach(n){Ju(this.inner,(r,s)=>{for(const[a,c]of s)n(a,c)})}isEmpty(){return vg(this.inner)}}class hw{constructor(){this.changes=new Pf(n=>n.toString(),(n,r)=>n.isEqual(r)),this.changesApplied=!1}getReadTime(n){const r=this.changes.get(n);return r?r.readTime:We.min()}addEntry(n,r){this.assertNotApplied(),this.changes.set(n.key,{document:n,readTime:r})}removeEntry(n,r=null){this.assertNotApplied(),this.changes.set(n,{document:pr.newInvalidDocument(n),readTime:r})}getEntry(n,r){this.assertNotApplied();const s=this.changes.get(r);return void 0!==s?Ue.resolve(s.document):this.getFromCache(n,r)}getEntries(n,r){return this.getAllFromCache(n,r)}apply(n){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(n)}assertNotApplied(){}}class gN{constructor(n,r){this.N=n,this.Ht=r}addEntry(n,r,s){return pc(n).put(fw(r),s)}removeEntry(n,r){const s=pc(n),a=fw(r);return s.delete(a)}updateMetadata(n,r){return this.getMetadata(n).next(s=>(s.byteSize+=r,this.Ae(n,s)))}getEntry(n,r){return pc(n).get(fw(r)).next(s=>this.Re(r,s))}be(n,r){return pc(n).get(fw(r)).next(s=>({document:this.Re(r,s),size:ou(s)}))}getEntries(n,r){let s=jo();return this.Pe(n,r,(a,c)=>{const h=this.Re(a,c);s=s.insert(a,h)}).next(()=>s)}ve(n,r){let s=jo(),a=new Lr(ut.comparator);return this.Pe(n,r,(c,h)=>{const m=this.Re(c,h);s=s.insert(c,m),a=a.insert(c,ou(h))}).next(()=>({documents:s,Ve:a}))}Pe(n,r,s){if(r.isEmpty())return Ue.resolve();const a=IDBKeyRange.bound(r.first().path.toArray(),r.last().path.toArray()),c=r.getIterator();let h=c.getNext();return pc(n).Kt({range:a},(m,E,C)=>{const S=ut.fromSegments(m);for(;h&&ut.comparator(h,S)<0;)s(h,null),h=c.getNext();h&&h.isEqual(S)&&(s(h,E),h=c.hasNext()?c.getNext():null),h?C.Mt(h.path.toArray()):C.done()}).next(()=>{for(;h;)s(h,null),h=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(n,r,s){let a=jo();const c=r.path.length+1,h={};if(s.isEqual(We.min())){const m=r.path.toArray();h.range=IDBKeyRange.lowerBound(m)}else{const m=r.path.toArray(),E=ro(s);h.range=IDBKeyRange.lowerBound([m,E],!0),h.index=br.collectionReadTimeIndex}return pc(n).Kt(h,(m,E,C)=>{if(m.length!==c)return;const S=lc(this.N,E);r.path.isPrefixOf(S.key.path)?Rg(r,S)&&(a=a.insert(S.key,S)):C.done()}).next(()=>a)}newChangeBuffer(n){return new JT(this,!!n&&n.trackRemovals)}getSize(n){return this.getMetadata(n).next(r=>r.byteSize)}getMetadata(n){return XT(n).get(su.key).next(r=>(Nt(!!r),r))}Ae(n,r){return XT(n).put(su.key,r)}Re(n,r){if(r){const s=lc(this.N,r);if(!s.isNoDocument()||!s.version.isEqual(We.min()))return s}return pr.newInvalidDocument(n)}}class JT extends hw{constructor(n,r){super(),this.Se=n,this.trackRemovals=r,this.De=new Pf(s=>s.toString(),(s,a)=>s.isEqual(a))}applyChanges(n){const r=[];let s=0,a=new wr((c,h)=>sn(c.canonicalString(),h.canonicalString()));return this.changes.forEach((c,h)=>{const m=this.De.get(c);if(h.document.isValidDocument()){const E=sw(this.Se.N,h.document,this.getReadTime(c));a=a.add(c.path.popLast()),s+=ou(E)-m,r.push(this.Se.addEntry(n,c,E))}else if(s-=m,this.trackRemovals){const E=sw(this.Se.N,pr.newNoDocument(c,We.min()),this.getReadTime(c));r.push(this.Se.addEntry(n,c,E))}else r.push(this.Se.removeEntry(n,c))}),a.forEach(c=>{r.push(this.Se.Ht.addToCollectionParentIndex(n,c))}),r.push(this.Se.updateMetadata(n,s)),Ue.waitFor(r)}getFromCache(n,r){return this.Se.be(n,r).next(s=>(this.De.set(r,s.size),s.document))}getAllFromCache(n,r){return this.Se.ve(n,r).next(({documents:s,Ve:a})=>(a.forEach((c,h)=>{this.De.set(c,h)}),s))}}function XT(i){return Os(i,su.store)}function pc(i){return Os(i,br.store)}function fw(i){return i.path.toArray()}class mN{constructor(n){this.N=n}Ct(n,r,s,a){Nt(s<a&&s>=0&&a<=11);const c=new Bg("createOrUpgrade",r);var m;s<1&&a>=1&&(n.createObjectStore(eo.store),(m=n).createObjectStore(ic.store,{keyPath:ic.keyPath}),m.createObjectStore(Kn.store,{keyPath:Kn.keyPath,autoIncrement:!0}).createIndex(Kn.userMutationsIndex,Kn.userMutationsKeyPath,{unique:!0}),m.createObjectStore(fs.store),pw(n),function(m){m.createObjectStore(br.store)}(n));let h=Ue.resolve();return s<3&&a>=3&&(0!==s&&(function(m){m.deleteObjectStore(ni.store),m.deleteObjectStore(to.store),m.deleteObjectStore(no.store)}(n),pw(n)),h=h.next(()=>function(m){const E=m.store(no.store),C=new no(0,0,We.min().toTimestamp(),0);return E.put(no.key,C)}(c))),s<4&&a>=4&&(0!==s&&(h=h.next(()=>function(m,E){return E.store(Kn.store).Lt().next(C=>{m.deleteObjectStore(Kn.store),m.createObjectStore(Kn.store,{keyPath:Kn.keyPath,autoIncrement:!0}).createIndex(Kn.userMutationsIndex,Kn.userMutationsKeyPath,{unique:!0});const S=E.store(Kn.store),N=C.map(O=>S.put(O));return Ue.waitFor(N)})}(n,c))),h=h.next(()=>{!function(m){m.createObjectStore(dl.store,{keyPath:dl.keyPath})}(n)})),s<5&&a>=5&&(h=h.next(()=>this.Ce(c))),s<6&&a>=6&&(h=h.next(()=>(function(m){m.createObjectStore(su.store)}(n),this.Ne(c)))),s<7&&a>=7&&(h=h.next(()=>this.xe(c))),s<8&&a>=8&&(h=h.next(()=>this.ke(n,c))),s<9&&a>=9&&(h=h.next(()=>{(function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")})(n),function(m){const E=m.objectStore(br.store);E.createIndex(br.readTimeIndex,br.readTimeIndexPath,{unique:!1}),E.createIndex(br.collectionReadTimeIndex,br.collectionReadTimeIndexPath,{unique:!1})}(r)})),s<10&&a>=10&&(h=h.next(()=>this.$e(c))),s<11&&a>=11&&(h=h.next(()=>{(function(m){m.createObjectStore(Ug.store,{keyPath:Ug.keyPath})})(n),function(m){m.createObjectStore(qi.store,{keyPath:qi.keyPath})}(n)})),h}Ne(n){let r=0;return n.store(br.store).Kt((s,a)=>{r+=ou(a)}).next(()=>{const s=new su(r);return n.store(su.store).put(su.key,s)})}Ce(n){const r=n.store(ic.store),s=n.store(Kn.store);return r.Lt().next(a=>Ue.forEach(a,c=>{const h=IDBKeyRange.bound([c.userId,-1],[c.userId,c.lastAcknowledgedBatchId]);return s.Lt(Kn.userMutationsIndex,h).next(m=>Ue.forEach(m,E=>{Nt(E.userId===c.userId);const C=uc(this.N,E);return $d(n,c.userId,C).next(()=>{})}))}))}xe(n){const r=n.store(ni.store),s=n.store(br.store);return n.store(no.store).get(no.key).next(a=>{const c=[];return s.Kt((h,m)=>{const E=new Dn(h),C=[0,$o(E)];c.push(r.get(C).next(S=>S?Ue.resolve():r.put(new ni(0,$o(E),a.highestListenSequenceNumber))))}).next(()=>Ue.waitFor(c))})}ke(n,r){n.createObjectStore(sc.store,{keyPath:sc.keyPath});const s=r.store(sc.store),a=new cc,c=h=>{if(a.add(h)){const m=h.lastSegment(),E=h.popLast();return s.put({collectionId:m,parent:$o(E)})}};return r.store(br.store).Kt({qt:!0},(h,m)=>{const E=new Dn(h);return c(E.popLast())}).next(()=>r.store(fs.store).Kt({qt:!0},([h,m,E],C)=>{const S=iu(m);return c(S.popLast())}))}$e(n){const r=n.store(to.store);return r.Kt((s,a)=>{const c=ks(a),h=Nf(this.N,c);return r.put(h)})}}function pw(i){i.createObjectStore(ni.store,{keyPath:ni.keyPath}).createIndex(ni.documentTargetsIndex,ni.documentTargetsKeyPath,{unique:!0}),i.createObjectStore(to.store,{keyPath:to.keyPath}).createIndex(to.queryTargetsIndexName,to.queryTargetsKeyPath,{unique:!0}),i.createObjectStore(no.store)}const eI="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class tI{constructor(n,r,s,a,c,h,m,E,C,S){if(this.allowTabSynchronization=n,this.persistenceKey=r,this.clientId=s,this.Oe=c,this.window=h,this.document=m,this.Fe=C,this.Me=S,this.Le=null,this.Be=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ue=null,this.inForeground=!1,this.qe=null,this.Ke=null,this.je=Number.NEGATIVE_INFINITY,this.Qe=N=>Promise.resolve(),!tI.bt())throw new $e(De.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new pN(this,a),this.We=r+"main",this.N=new jg(E),this.Ge=new Ho(this.We,11,new mN(this.N)),this.ze=new ZT(this.referenceDelegate,this.N),this.Ht=new xf,this.He=new gN(this.N,this.Ht),this.Je=new Ud,this.window&&this.window.localStorage?this.Ye=this.window.localStorage:(this.Ye=null,!1===S&&kr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Xe().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new $e(De.FAILED_PRECONDITION,eI);return this.Ze(),this.tn(),this.en(),this.runTransaction("getHighestListenSequenceNumber","readonly",n=>this.ze.getHighestSequenceNumber(n))}).then(n=>{this.Le=new Js(n,this.Fe)}).then(()=>{this.Be=!0}).catch(n=>(this.Ge&&this.Ge.close(),Promise.reject(n)))}nn(n){var r=this;return this.Qe=function(){var s=(0,Se.Z)(function*(a){if(r.started)return n(a)});return function(a){return s.apply(this,arguments)}}(),n(this.isPrimary)}setDatabaseDeletedListener(n){this.Ge.xt(function(){var r=(0,Se.Z)(function*(s){null===s.newVersion&&(yield n())});return function(s){return r.apply(this,arguments)}}())}setNetworkEnabled(n){var r=this;this.networkEnabled!==n&&(this.networkEnabled=n,this.Oe.enqueueAndForget((0,Se.Z)(function*(){r.started&&(yield r.Xe())})))}Xe(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",n=>sy(n).put(new dl(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.sn(n).next(r=>{r||(this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)))})}).next(()=>this.rn(n)).next(r=>this.isPrimary&&!r?this.on(n).next(()=>!1):!!r&&this.an(n).next(()=>!0))).catch(n=>{if(oc(n))return ze("IndexedDbPersistence","Failed to extend owner lease: ",n),this.isPrimary;if(!this.allowTabSynchronization)throw n;return ze("IndexedDbPersistence","Releasing owner lease after error during lease refresh",n),!1}).then(n=>{this.isPrimary!==n&&this.Oe.enqueueRetryable(()=>this.Qe(n)),this.isPrimary=n})}sn(n){return iy(n).get(eo.key).next(r=>Ue.resolve(this.cn(r)))}un(n){return sy(n).delete(this.clientId)}hn(){var n=this;return(0,Se.Z)(function*(){if(n.isPrimary&&!n.ln(n.je,18e5)){n.je=Date.now();const r=yield n.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const a=Os(s,dl.store);return a.Lt().next(c=>{const h=n.fn(c,18e5),m=c.filter(E=>-1===h.indexOf(E));return Ue.forEach(m,E=>a.delete(E.clientId)).next(()=>m)})}).catch(()=>[]);if(n.Ye)for(const s of r)n.Ye.removeItem(n.dn(s.clientId))}})()}en(){this.Ke=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Xe().then(()=>this.hn()).then(()=>this.en()))}cn(n){return!!n&&n.ownerId===this.clientId}rn(n){return this.Me?Ue.resolve(!0):iy(n).get(eo.key).next(r=>{if(null!==r&&this.ln(r.leaseTimestampMs,5e3)&&!this.wn(r.ownerId)){if(this.cn(r)&&this.networkEnabled)return!0;if(!this.cn(r)){if(!r.allowTabSynchronization)throw new $e(De.FAILED_PRECONDITION,eI);return!1}}return!(!this.networkEnabled||!this.inForeground)||sy(n).Lt().next(s=>void 0===this.fn(s,5e3).find(a=>{if(this.clientId!==a.clientId){const h=!this.inForeground&&a.inForeground,m=this.networkEnabled===a.networkEnabled;if(!this.networkEnabled&&a.networkEnabled||h&&m)return!0}return!1}))}).next(r=>(this.isPrimary!==r&&ze("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}shutdown(){var n=this;return(0,Se.Z)(function*(){n.Be=!1,n._n(),n.Ke&&(n.Ke.cancel(),n.Ke=null),n.mn(),n.gn(),yield n.Ge.runTransaction("shutdown","readwrite",[eo.store,dl.store],r=>{const s=new KT(r,Js.T);return n.on(s).next(()=>n.un(s))}),n.Ge.close(),n.yn()})()}fn(n,r){return n.filter(s=>this.ln(s.updateTimeMs,r)&&!this.wn(s.clientId))}pn(){return this.runTransaction("getActiveClients","readonly",n=>sy(n).Lt().next(r=>this.fn(r,18e5).map(s=>s.clientId)))}get started(){return this.Be}getMutationQueue(n){return dc.Yt(n,this.N,this.Ht,this.referenceDelegate)}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getIndexManager(){return this.Ht}getBundleCache(){return this.Je}runTransaction(n,r,s){let c;return ze("IndexedDbPersistence","Starting transaction:",n),this.Ge.runTransaction(n,"readonly"===r?"readonly":"readwrite",t1,h=>(c=new KT(h,this.Le?this.Le.next():Js.T),"readwrite-primary"===r?this.sn(c).next(m=>!!m||this.rn(c)).next(m=>{if(!m)throw kr(`Failed to obtain primary lease for action '${n}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)),new $e(De.FAILED_PRECONDITION,cN);return s(c)}).next(m=>this.an(c).next(()=>m)):this.En(c).next(()=>s(c)))).then(h=>(c.raiseOnCommittedEvent(),h))}En(n){return iy(n).get(eo.key).next(r=>{if(null!==r&&this.ln(r.leaseTimestampMs,5e3)&&!this.wn(r.ownerId)&&!this.cn(r)&&!(this.Me||this.allowTabSynchronization&&r.allowTabSynchronization))throw new $e(De.FAILED_PRECONDITION,eI)})}an(n){const r=new eo(this.clientId,this.allowTabSynchronization,Date.now());return iy(n).put(eo.key,r)}static bt(){return Ho.bt()}on(n){const r=iy(n);return r.get(eo.key).next(s=>this.cn(s)?(ze("IndexedDbPersistence","Releasing primary lease."),r.delete(eo.key)):Ue.resolve())}ln(n,r){const s=Date.now();return!(n<s-r||n>s&&(kr(`Detected an update time that is in the future: ${n} > ${s}`),1))}Ze(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=()=>{this.Oe.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Xe()))},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)}mn(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)}tn(){var n;"function"==typeof(null===(n=this.window)||void 0===n?void 0:n.addEventListener)&&(this.Ue=()=>{this._n(),(0,V.G6)()&&navigator.appVersion.match("Version/14")&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ue))}gn(){this.Ue&&(this.window.removeEventListener("pagehide",this.Ue),this.Ue=null)}wn(n){var r;try{const s=null!==(null===(r=this.Ye)||void 0===r?void 0:r.getItem(this.dn(n)));return ze("IndexedDbPersistence",`Client '${n}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return kr("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}_n(){if(this.Ye)try{this.Ye.setItem(this.dn(this.clientId),String(Date.now()))}catch(n){kr("Failed to set zombie client id.",n)}}yn(){if(this.Ye)try{this.Ye.removeItem(this.dn(this.clientId))}catch(n){}}dn(n){return`firestore_zombie_${this.persistenceKey}_${n}`}}function iy(i){return Os(i,eo.store)}function sy(i){return Os(i,dl.store)}function nI(i,n){let r=i.projectId;return i.isDefaultDatabase||(r+="."+i.database),"firestore/"+n+"/"+r+"/"}class _N{constructor(n,r){this.progress=n,this.Tn=r}}class rI{constructor(n,r,s){this.He=n,this.In=r,this.Ht=s}An(n,r){return this.In.getAllMutationBatchesAffectingDocumentKey(n,r).next(s=>this.Rn(n,r,s))}Rn(n,r,s){return this.He.getEntry(n,r).next(a=>{for(const c of s)c.applyToLocalView(a);return a})}bn(n,r){n.forEach((s,a)=>{for(const c of r)c.applyToLocalView(a)})}Pn(n,r){return this.He.getEntries(n,r).next(s=>this.vn(n,s).next(()=>s))}vn(n,r){return this.In.getAllMutationBatchesAffectingDocumentKeys(n,r).next(s=>this.bn(r,s))}getDocumentsMatchingQuery(n,r,s){return ut.isDocumentKey((a=r).path)&&null===a.collectionGroup&&0===a.filters.length?this.Vn(n,r.path):B_(r)?this.Sn(n,r,s):this.Dn(n,r,s);var a}Vn(n,r){return this.An(n,new ut(r)).next(s=>{let a=K_();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}Sn(n,r,s){const a=r.collectionGroup;let c=K_();return this.Ht.getCollectionParents(n,a).next(h=>Ue.forEach(h,m=>{const E=(C=r,S=m.child(a),new Xs(S,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt));var C,S;return this.Dn(n,E,s).next(C=>{C.forEach((S,N)=>{c=c.insert(S,N)})})}).next(()=>c))}Dn(n,r,s){let a,c;return this.He.getDocumentsMatchingQuery(n,r,s).next(h=>(a=h,this.In.getAllMutationBatchesAffectingQuery(n,r))).next(h=>(c=h,this.Cn(n,c,a).next(m=>{a=m;for(const E of c)for(const C of E.mutations){const S=C.key;let N=a.get(S);null==N&&(N=pr.newInvalidDocument(S),a=a.insert(S,N)),Bo(C,N,E.localWriteTime),N.isFoundDocument()||(a=a.remove(S))}}))).next(()=>(a.forEach((h,m)=>{Rg(r,m)||(a=a.remove(h))}),a))}Cn(n,r,s){let a=on();for(const h of r)for(const m of h.mutations)m instanceof nu&&null===s.get(m.key)&&(a=a.add(m.key));let c=s;return this.He.getEntries(n,a).next(h=>(h.forEach((m,E)=>{E.isFoundDocument()&&(c=c.insert(m,E))}),c))}}class Hg{constructor(n,r,s,a){this.targetId=n,this.fromCache=r,this.Nn=s,this.xn=a}static kn(n,r){let s=on(),a=on();for(const c of r.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new Hg(n,r.fromCache,s,a)}}class oy{$n(n){this.On=n}getDocumentsMatchingQuery(n,r,s,a){return 0===(c=r).filters.length&&null===c.limit&&null==c.startAt&&null==c.endAt&&(0===c.explicitOrderBy.length||1===c.explicitOrderBy.length&&c.explicitOrderBy[0].field.isKeyField())||s.isEqual(We.min())?this.Fn(n,r):this.On.Pn(n,a).next(c=>{const h=this.Mn(r,c);return(Ig(r)||Dg(r))&&this.Ln(r.limitType,h,a,s)?this.Fn(n,r):(mg()<=cn.in.DEBUG&&ze("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),$_(r)),this.On.getDocumentsMatchingQuery(n,r,s).next(m=>(h.forEach(E=>{m=m.insert(E.key,E)}),m)))});var c}Mn(n,r){let s=new wr($E(n));return r.forEach((a,c)=>{Rg(n,c)&&(s=s.add(c))}),s}Ln(n,r,s,a){if(s.size!==r.size)return!0;const c="F"===n?r.last():r.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}Fn(n,r){return mg()<=cn.in.DEBUG&&ze("QueryEngine","Using full collection scan to execute query:",$_(r)),this.On.getDocumentsMatchingQuery(n,r,We.min())}}class yN{constructor(n,r,s,a){this.persistence=n,this.Bn=r,this.N=a,this.Un=new Lr(sn),this.qn=new Pf(c=>xd(c),Cg),this.Kn=We.min(),this.In=n.getMutationQueue(s),this.jn=n.getRemoteDocumentCache(),this.ze=n.getTargetCache(),this.Qn=new rI(this.jn,this.In,this.persistence.getIndexManager()),this.Je=n.getBundleCache(),this.Bn.$n(this.Qn)}collectGarbage(n){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>n.collect(r,this.Un))}}function vN(i,n,r,s){return new yN(i,n,r,s)}function EN(i,n){return iI.apply(this,arguments)}function iI(){return(iI=(0,Se.Z)(function*(i,n){const r=Je(i);let s=r.In,a=r.Qn;const c=yield r.persistence.runTransaction("Handle user change","readonly",h=>{let m;return r.In.getAllMutationBatches(h).next(E=>(m=E,s=r.persistence.getMutationQueue(n),a=new rI(r.jn,s,r.persistence.getIndexManager()),s.getAllMutationBatches(h))).next(E=>{const C=[],S=[];let N=on();for(const O of m){C.push(O.batchId);for(const B of O.mutations)N=N.add(B.key)}for(const O of E){S.push(O.batchId);for(const B of O.mutations)N=N.add(B.key)}return a.Pn(h,N).next(O=>({Wn:O,removedBatchIds:C,addedBatchIds:S}))})});return r.In=s,r.Qn=a,r.Bn.$n(r.Qn),c})).apply(this,arguments)}function wN(i,n){const r=Je(i);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=n.batch.keys(),c=r.jn.newChangeBuffer({trackRemovals:!0});return function(h,m,E,C){const S=E.batch,N=S.keys();let O=Ue.resolve();return N.forEach(B=>{O=O.next(()=>C.getEntry(m,B)).next(W=>{const ue=E.docVersions.get(B);Nt(null!==ue),W.version.compareTo(ue)<0&&(S.applyToRemoteDocument(W,E),W.isValidDocument()&&C.addEntry(W,E.commitVersion))})}),O.next(()=>h.In.removeMutationBatch(m,S))}(r,s,n,c).next(()=>c.apply(s)).next(()=>r.In.performConsistencyCheck(s)).next(()=>r.Qn.Pn(s,a))})}function gw(i){const n=Je(i);return n.persistence.runTransaction("Get last remote snapshot version","readonly",r=>n.ze.getLastRemoteSnapshotVersion(r))}function n1(i,n){const r=Je(i),s=n.snapshotVersion;let a=r.Un;return r.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const h=r.jn.newChangeBuffer({trackRemovals:!0});a=r.Un;const m=[];n.targetChanges.forEach((C,S)=>{const N=a.get(S);if(!N)return;m.push(r.ze.removeMatchingKeys(c,C.removedDocuments,S).next(()=>r.ze.addMatchingKeys(c,C.addedDocuments,S)));const O=C.resumeToken;if(O.approximateByteSize()>0){const B=N.withResumeToken(O,s).withSequenceNumber(c.currentSequenceNumber);a=a.insert(S,B),W=N,Pe=C,Nt((ue=B).resumeToken.approximateByteSize()>0),(0===W.resumeToken.approximateByteSize()||ue.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=3e8||Pe.addedDocuments.size+Pe.modifiedDocuments.size+Pe.removedDocuments.size>0)&&m.push(r.ze.updateTargetData(c,B))}var W,ue,Pe});let E=jo();if(n.documentUpdates.forEach((C,S)=>{n.resolvedLimboDocuments.has(C)&&m.push(r.persistence.referenceDelegate.updateLimboDocument(c,C))}),m.push(sI(c,h,n.documentUpdates,s,void 0).next(C=>{E=C})),!s.isEqual(We.min())){const C=r.ze.getLastRemoteSnapshotVersion(c).next(S=>r.ze.setTargetsMetadata(c,c.currentSequenceNumber,s));m.push(C)}return Ue.waitFor(m).next(()=>h.apply(c)).next(()=>r.Qn.vn(c,E)).next(()=>E)}).then(c=>(r.Un=a,c))}function sI(i,n,r,s,a){let c=on();return r.forEach(h=>c=c.add(h)),n.getEntries(i,c).next(h=>{let m=jo();return r.forEach((E,C)=>{const S=h.get(E),N=(null==a?void 0:a.get(E))||s;C.isNoDocument()&&C.version.isEqual(We.min())?(n.removeEntry(E,N),m=m.insert(E,C)):!S.isValidDocument()||C.version.compareTo(S.version)>0||0===C.version.compareTo(S.version)&&S.hasPendingWrites?(n.addEntry(C,N),m=m.insert(E,C)):ze("LocalStore","Ignoring outdated watch update for ",E,". Current version:",S.version," Watch version:",C.version)}),m})}function Mf(i,n){const r=Je(i);return r.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===n&&(n=-1),r.In.getNextMutationBatchAfterBatchId(s,n)))}function Of(i,n){const r=Je(i);return r.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return r.ze.getTargetData(s,n).next(c=>c?(a=c,Ue.resolve(a)):r.ze.allocateTargetId(s).next(h=>(a=new ac(n,h,0,s.currentSequenceNumber),r.ze.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=r.Un.get(s.targetId);return(null===a||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(r.Un=r.Un.insert(s.targetId,s),r.qn.set(n,s.targetId)),s})}function Wd(i,n,r){return mw.apply(this,arguments)}function mw(){return(mw=(0,Se.Z)(function*(i,n,r){const s=Je(i),a=s.Un.get(n),c=r?"readwrite":"readwrite-primary";try{r||(yield s.persistence.runTransaction("Release target",c,h=>s.persistence.referenceDelegate.removeTarget(h,a)))}catch(h){if(!oc(h))throw h;ze("LocalStore",`Failed to update sequence numbers for target ${n}: ${h}`)}s.Un=s.Un.remove(n),s.qn.delete(a.target)})).apply(this,arguments)}function Gg(i,n,r){const s=Je(i);let a=We.min(),c=on();return s.persistence.runTransaction("Execute query","readonly",h=>function(m,E,C){const S=Je(m),N=S.qn.get(C);return void 0!==N?Ue.resolve(S.Un.get(N)):S.ze.getTargetData(E,C)}(s,h,Uo(n)).next(m=>{if(m)return a=m.lastLimboFreeSnapshotVersion,s.ze.getMatchingKeysForTargetId(h,m.targetId).next(E=>{c=E})}).next(()=>s.Bn.getDocumentsMatchingQuery(h,n,r?a:We.min(),r?c:on())).next(m=>({documents:m,Gn:c})))}function qg(i,n){const r=Je(i),s=Je(r.ze),a=r.Un.get(n);return a?Promise.resolve(a.target):r.persistence.runTransaction("Get target data","readonly",c=>s.Et(c,n).next(h=>h?h.target:null))}function oI(i){const n=Je(i);return n.persistence.runTransaction("Get new document changes","readonly",r=>function(s,a,c){const h=Je(s);let m=jo(),E=ro(c);const C=pc(a),S=IDBKeyRange.lowerBound(E,!0);return C.Kt({index:br.readTimeIndex,range:S},(N,O)=>{const B=lc(h.N,O);m=m.insert(B.key,B),E=O.readTime}).next(()=>({Tn:m,readTime:Sf(E)}))}(n.jn,r,n.Kn)).then(({Tn:r,readTime:s})=>(n.Kn=s,r))}function _w(){return(_w=(0,Se.Z)(function*(i){const n=Je(i);return n.persistence.runTransaction("Synchronize last document change read time","readonly",r=>function(s){const a=pc(s);let c=We.min();return a.Kt({index:br.readTimeIndex,reverse:!0},(h,m,E)=>{m.readTime&&(c=Sf(m.readTime)),E.done()}).next(()=>c)}(r)).then(r=>{n.Kn=r})})).apply(this,arguments)}function yw(){return(yw=(0,Se.Z)(function*(i,n,r,s){const a=Je(i);let c=on(),h=jo(),m=zE();for(const S of r){const N=n.zn(S.metadata.name);S.document&&(c=c.add(N)),h=h.insert(N,n.Hn(S)),m=m.insert(N,n.Jn(S.metadata.readTime))}const E=a.jn.newChangeBuffer({trackRemovals:!0}),C=yield Of(a,(S=s,Uo(bf(Dn.fromString(`__bundle__/docs/${S}`)))));var S;return a.persistence.runTransaction("Apply bundle documents","readwrite",S=>sI(S,E,h,We.min(),m).next(N=>(E.apply(S),N)).next(N=>a.ze.removeMatchingKeysForTargetId(S,C.targetId).next(()=>a.ze.addMatchingKeys(S,c,C.targetId)).next(()=>a.Qn.vn(S,N)).next(()=>N)))})).apply(this,arguments)}function CN(i,n){return vw.apply(this,arguments)}function vw(){return(vw=(0,Se.Z)(function*(i,n,r=on()){const s=yield Of(i,Uo(vi(n.bundledQuery))),a=Je(i);return a.persistence.runTransaction("Save named query","readwrite",c=>{const h=ti(n.readTime);if(s.snapshotVersion.compareTo(h)>=0)return a.Je.saveNamedQuery(c,n);const m=s.withResumeToken(ei.EMPTY_BYTE_STRING,h);return a.Un=a.Un.insert(m.targetId,m),a.ze.updateTargetData(c,m).next(()=>a.ze.removeMatchingKeysForTargetId(c,s.targetId)).next(()=>a.ze.addMatchingKeys(c,r,s.targetId)).next(()=>a.Je.saveNamedQuery(c,n))})})).apply(this,arguments)}class lI{constructor(n){this.N=n,this.Yn=new Map,this.Xn=new Map}getBundleMetadata(n,r){return Ue.resolve(this.Yn.get(r))}saveBundleMetadata(n,r){var s;return this.Yn.set(r.id,{id:(s=r).id,version:s.version,createTime:ti(s.createTime)}),Ue.resolve()}getNamedQuery(n,r){return Ue.resolve(this.Xn.get(r))}saveNamedQuery(n,r){return this.Xn.set(r.name,{name:(s=r).name,query:vi(s.bundledQuery),readTime:ti(s.readTime)}),Ue.resolve();var s}}class Ew{constructor(){this.Zn=new wr(ii.ts),this.es=new wr(ii.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(n,r){const s=new ii(n,r);this.Zn=this.Zn.add(s),this.es=this.es.add(s)}ss(n,r){n.forEach(s=>this.addReference(s,r))}removeReference(n,r){this.rs(new ii(n,r))}os(n,r){n.forEach(s=>this.removeReference(s,r))}cs(n){const r=new ut(new Dn([])),s=new ii(r,n),a=new ii(r,n+1),c=[];return this.es.forEachInRange([s,a],h=>{this.rs(h),c.push(h.key)}),c}us(){this.Zn.forEach(n=>this.rs(n))}rs(n){this.Zn=this.Zn.delete(n),this.es=this.es.delete(n)}hs(n){const r=new ut(new Dn([])),s=new ii(r,n),a=new ii(r,n+1);let c=on();return this.es.forEachInRange([s,a],h=>{c=c.add(h.key)}),c}containsKey(n){const r=new ii(n,0),s=this.Zn.firstAfterOrEqual(r);return null!==s&&n.isEqual(s.key)}}class ii{constructor(n,r){this.key=n,this.ls=r}static ts(n,r){return ut.comparator(n.key,r.key)||sn(n.ls,r.ls)}static ns(n,r){return sn(n.ls,r.ls)||ut.comparator(n.key,r.key)}}class uI{constructor(n,r){this.Ht=n,this.referenceDelegate=r,this.In=[],this.fs=1,this.ds=new wr(ii.ts)}checkEmpty(n){return Ue.resolve(0===this.In.length)}addMutationBatch(n,r,s,a){const c=this.fs;this.fs++;const h=new rw(c,r,s,a);this.In.push(h);for(const m of a)this.ds=this.ds.add(new ii(m.key,c)),this.Ht.addToCollectionParentIndex(n,m.key.path.popLast());return Ue.resolve(h)}lookupMutationBatch(n,r){return Ue.resolve(this.ws(r))}getNextMutationBatchAfterBatchId(n,r){const a=this._s(r+1),c=a<0?0:a;return Ue.resolve(this.In.length>c?this.In[c]:null)}getHighestUnacknowledgedBatchId(){return Ue.resolve(0===this.In.length?-1:this.fs-1)}getAllMutationBatches(n){return Ue.resolve(this.In.slice())}getAllMutationBatchesAffectingDocumentKey(n,r){const s=new ii(r,0),a=new ii(r,Number.POSITIVE_INFINITY),c=[];return this.ds.forEachInRange([s,a],h=>{const m=this.ws(h.ls);c.push(m)}),Ue.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(n,r){let s=new wr(sn);return r.forEach(a=>{const c=new ii(a,0),h=new ii(a,Number.POSITIVE_INFINITY);this.ds.forEachInRange([c,h],m=>{s=s.add(m.ls)})}),Ue.resolve(this.gs(s))}getAllMutationBatchesAffectingQuery(n,r){const s=r.path,a=s.length+1;let c=s;ut.isDocumentKey(c)||(c=c.child(""));const h=new ii(new ut(c),0);let m=new wr(sn);return this.ds.forEachWhile(E=>{const C=E.key.path;return!!s.isPrefixOf(C)&&(C.length===a&&(m=m.add(E.ls)),!0)},h),Ue.resolve(this.gs(m))}gs(n){const r=[];return n.forEach(s=>{const a=this.ws(s);null!==a&&r.push(a)}),r}removeMutationBatch(n,r){Nt(0===this.ys(r.batchId,"removed")),this.In.shift();let s=this.ds;return Ue.forEach(r.mutations,a=>{const c=new ii(a.key,r.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(n,a.key)}).next(()=>{this.ds=s})}te(n){}containsKey(n,r){const s=new ii(r,0),a=this.ds.firstAfterOrEqual(s);return Ue.resolve(r.isEqual(a&&a.key))}performConsistencyCheck(n){return Ue.resolve()}ys(n,r){return this._s(n)}_s(n){return 0===this.In.length?0:n-this.In[0].batchId}ws(n){const r=this._s(n);return r<0||r>=this.In.length?null:this.In[r]}}class ww{constructor(n,r){this.Ht=n,this.ps=r,this.docs=new Lr(ut.comparator),this.size=0}addEntry(n,r,s){const a=r.key,c=this.docs.get(a),h=c?c.size:0,m=this.ps(r);return this.docs=this.docs.insert(a,{document:r.clone(),size:m,readTime:s}),this.size+=m-h,this.Ht.addToCollectionParentIndex(n,a.path.popLast())}removeEntry(n){const r=this.docs.get(n);r&&(this.docs=this.docs.remove(n),this.size-=r.size)}getEntry(n,r){const s=this.docs.get(r);return Ue.resolve(s?s.document.clone():pr.newInvalidDocument(r))}getEntries(n,r){let s=jo();return r.forEach(a=>{const c=this.docs.get(a);s=s.insert(a,c?c.document.clone():pr.newInvalidDocument(a))}),Ue.resolve(s)}getDocumentsMatchingQuery(n,r,s){let a=jo();const c=new ut(r.path.child("")),h=this.docs.getIteratorFrom(c);for(;h.hasNext();){const{key:m,value:{document:E,readTime:C}}=h.getNext();if(!r.path.isPrefixOf(m.path))break;C.compareTo(s)<=0||Rg(r,E)&&(a=a.insert(E.key,E.clone()))}return Ue.resolve(a)}Es(n,r){return Ue.forEach(this.docs,s=>r(s))}newChangeBuffer(n){return new r1(this)}getSize(n){return Ue.resolve(this.size)}}class r1 extends hw{constructor(n){super(),this.Se=n}applyChanges(n){const r=[];return this.changes.forEach((s,a)=>{a.document.isValidDocument()?r.push(this.Se.addEntry(n,a.document,this.getReadTime(s))):this.Se.removeEntry(s)}),Ue.waitFor(r)}getFromCache(n,r){return this.Se.getEntry(n,r)}getAllFromCache(n,r){return this.Se.getEntries(n,r)}}class bw{constructor(n){this.persistence=n,this.Ts=new Pf(r=>xd(r),Cg),this.lastRemoteSnapshotVersion=We.min(),this.highestTargetId=0,this.Is=0,this.As=new Ew,this.targetCount=0,this.Rs=hc.se()}forEachTarget(n,r){return this.Ts.forEach((s,a)=>r(a)),Ue.resolve()}getLastRemoteSnapshotVersion(n){return Ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(n){return Ue.resolve(this.Is)}allocateTargetId(n){return this.highestTargetId=this.Rs.next(),Ue.resolve(this.highestTargetId)}setTargetsMetadata(n,r,s){return s&&(this.lastRemoteSnapshotVersion=s),r>this.Is&&(this.Is=r),Ue.resolve()}ae(n){this.Ts.set(n.target,n);const r=n.targetId;r>this.highestTargetId&&(this.Rs=new hc(r),this.highestTargetId=r),n.sequenceNumber>this.Is&&(this.Is=n.sequenceNumber)}addTargetData(n,r){return this.ae(r),this.targetCount+=1,Ue.resolve()}updateTargetData(n,r){return this.ae(r),Ue.resolve()}removeTargetData(n,r){return this.Ts.delete(r.target),this.As.cs(r.targetId),this.targetCount-=1,Ue.resolve()}removeTargets(n,r,s){let a=0;const c=[];return this.Ts.forEach((h,m)=>{m.sequenceNumber<=r&&null===s.get(m.targetId)&&(this.Ts.delete(h),c.push(this.removeMatchingKeysForTargetId(n,m.targetId)),a++)}),Ue.waitFor(c).next(()=>a)}getTargetCount(n){return Ue.resolve(this.targetCount)}getTargetData(n,r){const s=this.Ts.get(r)||null;return Ue.resolve(s)}addMatchingKeys(n,r,s){return this.As.ss(r,s),Ue.resolve()}removeMatchingKeys(n,r,s){this.As.os(r,s);const a=this.persistence.referenceDelegate,c=[];return a&&r.forEach(h=>{c.push(a.markPotentiallyOrphaned(n,h))}),Ue.waitFor(c)}removeMatchingKeysForTargetId(n,r){return this.As.cs(r),Ue.resolve()}getMatchingKeysForTargetId(n,r){const s=this.As.hs(r);return Ue.resolve(s)}containsKey(n,r){return Ue.resolve(this.As.containsKey(r))}}class TN{constructor(n,r){this.bs={},this.Le=new Js(0),this.Be=!1,this.Be=!0,this.referenceDelegate=n(this),this.ze=new bw(this),this.Ht=new ow,this.He=new ww(this.Ht,s=>this.referenceDelegate.Ps(s)),this.N=new jg(r),this.Je=new lI(this.N)}start(){return Promise.resolve()}shutdown(){return this.Be=!1,Promise.resolve()}get started(){return this.Be}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Ht}getMutationQueue(n){let r=this.bs[n.toKey()];return r||(r=new uI(this.Ht,this.referenceDelegate),this.bs[n.toKey()]=r),r}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getBundleCache(){return this.Je}runTransaction(n,r,s){ze("MemoryPersistence","Starting transaction:",n);const a=new i1(this.Le.next());return this.referenceDelegate.vs(),s(a).next(c=>this.referenceDelegate.Vs(a).next(()=>c)).toPromise().then(c=>(a.raiseOnCommittedEvent(),c))}Ss(n,r){return Ue.or(Object.values(this.bs).map(s=>()=>s.containsKey(n,r)))}}class i1 extends dN{constructor(n){super(),this.currentSequenceNumber=n}}class zd{constructor(n){this.persistence=n,this.Ds=new Ew,this.Cs=null}static Ns(n){return new zd(n)}get xs(){if(this.Cs)return this.Cs;throw ft()}addReference(n,r,s){return this.Ds.addReference(s,r),this.xs.delete(s.toString()),Ue.resolve()}removeReference(n,r,s){return this.Ds.removeReference(s,r),this.xs.add(s.toString()),Ue.resolve()}markPotentiallyOrphaned(n,r){return this.xs.add(r.toString()),Ue.resolve()}removeTarget(n,r){this.Ds.cs(r.targetId).forEach(a=>this.xs.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(n,r.targetId).next(a=>{a.forEach(c=>this.xs.add(c.toString()))}).next(()=>s.removeTargetData(n,r))}vs(){this.Cs=new Set}Vs(n){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ue.forEach(this.xs,s=>{const a=ut.fromPath(s);return this.ks(n,a).next(c=>{c||r.removeEntry(a)})}).next(()=>(this.Cs=null,r.apply(n)))}updateLimboDocument(n,r){return this.ks(n,r).next(s=>{s?this.xs.delete(r.toString()):this.xs.add(r.toString())})}Ps(n){return 0}ks(n,r){return Ue.or([()=>Ue.resolve(this.Ds.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(n,r),()=>this.persistence.Ss(n,r)])}}function cI(i,n){return`firestore_clients_${i}_${n}`}function ay(i,n,r){let s=`firestore_mutations_${i}_${r}`;return n.isAuthenticated()&&(s+=`_${n.uid}`),s}function Wg(i,n){return`firestore_targets_${i}_${n}`}class ly{constructor(n,r,s,a){this.user=n,this.batchId=r,this.state=s,this.error=a}static $s(n,r,s){const a=JSON.parse(s);let c,h="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return h&&a.error&&(h="string"==typeof a.error.message&&"string"==typeof a.error.code,h&&(c=new $e(a.error.code,a.error.message))),h?new ly(n,r,a.state,c):(kr("SharedClientState",`Failed to parse mutation state for ID '${r}': ${s}`),null)}Os(){const n={state:this.state,updateTimeMs:Date.now()};return this.error&&(n.error={code:this.error.code,message:this.error.message}),JSON.stringify(n)}}class Kd{constructor(n,r,s){this.targetId=n,this.state=r,this.error=s}static $s(n,r){const s=JSON.parse(r);let a,c="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return c&&s.error&&(c="string"==typeof s.error.message&&"string"==typeof s.error.code,c&&(a=new $e(s.error.code,s.error.message))),c?new Kd(n,s.state,a):(kr("SharedClientState",`Failed to parse target state for ID '${n}': ${r}`),null)}Os(){const n={state:this.state,updateTimeMs:Date.now()};return this.error&&(n.error={code:this.error.code,message:this.error.message}),JSON.stringify(n)}}class kf{constructor(n,r){this.clientId=n,this.activeTargetIds=r}static $s(n,r){const s=JSON.parse(r);let a="object"==typeof s&&s.activeTargetIds instanceof Array,c=Y_();for(let h=0;a&&h<s.activeTargetIds.length;++h)a=mT(s.activeTargetIds[h]),c=c.add(s.activeTargetIds[h]);return a?new kf(n,c):(kr("SharedClientState",`Failed to parse client data for instance '${n}': ${r}`),null)}}class uy{constructor(n,r){this.clientId=n,this.onlineState=r}static $s(n){const r=JSON.parse(n);return"object"==typeof r&&-1!==["Unknown","Online","Offline"].indexOf(r.onlineState)&&"string"==typeof r.clientId?new uy(r.clientId,r.onlineState):(kr("SharedClientState",`Failed to parse online state: ${n}`),null)}}class dI{constructor(){this.activeTargetIds=Y_()}Fs(n){this.activeTargetIds=this.activeTargetIds.add(n)}Ms(n){this.activeTargetIds=this.activeTargetIds.delete(n)}Os(){const n={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(n)}}class Cw{constructor(n,r,s,a,c){this.window=n,this.Oe=r,this.persistenceKey=s,this.Ls=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Bs=this.Us.bind(this),this.qs=new Lr(sn),this.started=!1,this.Ks=[];const h=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.js=cI(this.persistenceKey,this.Ls),this.Qs=`firestore_sequence_number_${this.persistenceKey}`,this.qs=this.qs.insert(this.Ls,new dI),this.Ws=new RegExp(`^firestore_clients_${h}_([^_]*)$`),this.Gs=new RegExp(`^firestore_mutations_${h}_(\\d+)(?:_(.*))?$`),this.zs=new RegExp(`^firestore_targets_${h}_(\\d+)$`),this.Hs=`firestore_online_state_${this.persistenceKey}`,this.Js=function(m){return`firestore_bundle_loaded_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.Bs)}static bt(n){return!(!n||!n.localStorage)}start(){var n=this;return(0,Se.Z)(function*(){const r=yield n.syncEngine.pn();for(const a of r){if(a===n.Ls)continue;const c=n.getItem(cI(n.persistenceKey,a));if(c){const h=kf.$s(a,c);h&&(n.qs=n.qs.insert(h.clientId,h))}}n.Ys();const s=n.storage.getItem(n.Hs);if(s){const a=n.Xs(s);a&&n.Zs(a)}for(const a of n.Ks)n.Us(a);n.Ks=[],n.window.addEventListener("pagehide",()=>n.shutdown()),n.started=!0})()}writeSequenceNumber(n){this.setItem(this.Qs,JSON.stringify(n))}getAllActiveQueryTargets(){return this.ti(this.qs)}isActiveQueryTarget(n){let r=!1;return this.qs.forEach((s,a)=>{a.activeTargetIds.has(n)&&(r=!0)}),r}addPendingMutation(n){this.ei(n,"pending")}updateMutationState(n,r,s){this.ei(n,r,s),this.ni(n)}addLocalQueryTarget(n){let r="not-current";if(this.isActiveQueryTarget(n)){const s=this.storage.getItem(Wg(this.persistenceKey,n));if(s){const a=Kd.$s(n,s);a&&(r=a.state)}}return this.si.Fs(n),this.Ys(),r}removeLocalQueryTarget(n){this.si.Ms(n),this.Ys()}isLocalQueryTarget(n){return this.si.activeTargetIds.has(n)}clearQueryState(n){this.removeItem(Wg(this.persistenceKey,n))}updateQueryState(n,r,s){this.ii(n,r,s)}handleUserChange(n,r,s){r.forEach(a=>{this.ni(a)}),this.currentUser=n,s.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(n){this.ri(n)}notifyBundleLoaded(){this.oi()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Bs),this.removeItem(this.js),this.started=!1)}getItem(n){const r=this.storage.getItem(n);return ze("SharedClientState","READ",n,r),r}setItem(n,r){ze("SharedClientState","SET",n,r),this.storage.setItem(n,r)}removeItem(n){ze("SharedClientState","REMOVE",n),this.storage.removeItem(n)}Us(n){var r=this;const s=n;if(s.storageArea===this.storage){if(ze("SharedClientState","EVENT",s.key,s.newValue),s.key===this.js)return void kr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((0,Se.Z)(function*(){if(r.started){if(null!==s.key)if(r.Ws.test(s.key)){if(null==s.newValue){const a=r.ai(s.key);return r.ci(a,null)}{const a=r.ui(s.key,s.newValue);if(a)return r.ci(a.clientId,a)}}else if(r.Gs.test(s.key)){if(null!==s.newValue){const a=r.hi(s.key,s.newValue);if(a)return r.li(a)}}else if(r.zs.test(s.key)){if(null!==s.newValue){const a=r.fi(s.key,s.newValue);if(a)return r.di(a)}}else if(s.key===r.Hs){if(null!==s.newValue){const a=r.Xs(s.newValue);if(a)return r.Zs(a)}}else if(s.key===r.Qs){const a=function(c){let h=Js.T;if(null!=c)try{const m=JSON.parse(c);Nt("number"==typeof m),h=m}catch(m){kr("SharedClientState","Failed to read sequence number from WebStorage",m)}return h}(s.newValue);a!==Js.T&&r.sequenceNumberHandler(a)}else if(s.key===r.Js)return r.syncEngine.wi()}else r.Ks.push(s)}))}}get si(){return this.qs.get(this.Ls)}Ys(){this.setItem(this.js,this.si.Os())}ei(n,r,s){const a=new ly(this.currentUser,n,r,s),c=ay(this.persistenceKey,this.currentUser,n);this.setItem(c,a.Os())}ni(n){const r=ay(this.persistenceKey,this.currentUser,n);this.removeItem(r)}ri(n){this.storage.setItem(this.Hs,JSON.stringify({clientId:this.Ls,onlineState:n}))}ii(n,r,s){const a=Wg(this.persistenceKey,n),c=new Kd(n,r,s);this.setItem(a,c.Os())}oi(){this.setItem(this.Js,"value-not-used")}ai(n){const r=this.Ws.exec(n);return r?r[1]:null}ui(n,r){const s=this.ai(n);return kf.$s(s,r)}hi(n,r){const s=this.Gs.exec(n),a=Number(s[1]);return ly.$s(new _i(void 0!==s[2]?s[2]:null),a,r)}fi(n,r){const s=this.zs.exec(n),a=Number(s[1]);return Kd.$s(a,r)}Xs(n){return uy.$s(n)}li(n){var r=this;return(0,Se.Z)(function*(){if(n.user.uid===r.currentUser.uid)return r.syncEngine._i(n.batchId,n.state,n.error);ze("SharedClientState",`Ignoring mutation for non-active user ${n.user.uid}`)})()}di(n){return this.syncEngine.mi(n.targetId,n.state,n.error)}ci(n,r){const s=r?this.qs.insert(n,r):this.qs.remove(n),a=this.ti(this.qs),c=this.ti(s),h=[],m=[];return c.forEach(E=>{a.has(E)||h.push(E)}),a.forEach(E=>{c.has(E)||m.push(E)}),this.syncEngine.gi(h,m).then(()=>{this.qs=s})}Zs(n){this.qs.get(n.clientId)&&this.onlineStateHandler(n.onlineState)}ti(n){let r=Y_();return n.forEach((s,a)=>{r=r.unionWith(a.activeTargetIds)}),r}}class cy{constructor(){this.yi=new dI,this.pi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(n){}updateMutationState(n,r,s){}addLocalQueryTarget(n){return this.yi.Fs(n),this.pi[n]||"not-current"}updateQueryState(n,r,s){this.pi[n]=r}removeLocalQueryTarget(n){this.yi.Ms(n)}isLocalQueryTarget(n){return this.yi.activeTargetIds.has(n)}clearQueryState(n){delete this.pi[n]}getAllActiveQueryTargets(){return this.yi.activeTargetIds}isActiveQueryTarget(n){return this.yi.activeTargetIds.has(n)}start(){return this.yi=new dI,Promise.resolve()}handleUserChange(n,r,s){}setOnlineState(n){}shutdown(){}writeSequenceNumber(n){}notifyBundleLoaded(){}}class Tw{Ei(n){}shutdown(){}}class hI{constructor(){this.Ti=()=>this.Ii(),this.Ai=()=>this.Ri(),this.bi=[],this.Pi()}Ei(n){this.bi.push(n)}shutdown(){window.removeEventListener("online",this.Ti),window.removeEventListener("offline",this.Ai)}Pi(){window.addEventListener("online",this.Ti),window.addEventListener("offline",this.Ai)}Ii(){ze("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const n of this.bi)n(0)}Ri(){ze("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const n of this.bi)n(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const fI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Iw{constructor(n){this.vi=n.vi,this.Vi=n.Vi}Si(n){this.Di=n}Ci(n){this.Ni=n}onMessage(n){this.xi=n}close(){this.Vi()}send(n){this.vi(n)}ki(){this.Di()}$i(n){this.Ni(n)}Oi(n){this.xi(n)}}class pI extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId,this.Fi=(n.ssl?"https":"http")+"://"+n.host,this.Mi="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Li(n,r,s,a){const c=this.Bi(n,r);ze("RestConnection","Sending: ",c,s);const h={};return this.Ui(h,a),this.qi(n,c,h,s).then(m=>(ze("RestConnection","Received: ",m),m),m=>{throw yg("RestConnection",`${n} failed with error: `,m,"url: ",c,"request:",s),m})}Ki(n,r,s,a){return this.Li(n,r,s,a)}Ui(n,r){if(n["X-Goog-Api-Client"]="gl-js/ fire/"+Qu,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r)for(const s in r.authHeaders)r.authHeaders.hasOwnProperty(s)&&(n[s]=r.authHeaders[s])}Bi(n,r){return`${this.Fi}/v1/${r}:${fI[n]}`}}{constructor(n){super(n),this.forceLongPolling=n.forceLongPolling,this.autoDetectLongPolling=n.autoDetectLongPolling,this.useFetchStreams=n.useFetchStreams}qi(n,r,s,a){return new Promise((c,h)=>{const m=new k_;m.listenOnce(lT.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case M_.NO_ERROR:const C=m.getResponseJson();ze("Connection","XHR received:",JSON.stringify(C)),c(C);break;case M_.TIMEOUT:ze("Connection",'RPC "'+n+'" timed out'),h(new $e(De.DEADLINE_EXCEEDED,"Request time out"));break;case M_.HTTP_ERROR:const S=m.getStatus();if(ze("Connection",'RPC "'+n+'" failed with status:',S,"response text:",m.getResponseText()),S>0){const N=m.getResponseJson().error;if(N&&N.status&&N.message){const O=function(B){const W=B.toLowerCase().replace(/_/g,"-");return Object.values(De).indexOf(W)>=0?W:De.UNKNOWN}(N.status);h(new $e(O,N.message))}else h(new $e(De.UNKNOWN,"Server responded with status "+m.getStatus()))}else h(new $e(De.UNAVAILABLE,"Connection failed."));break;default:ft()}}finally{ze("Connection",'RPC "'+n+'" completed.')}});const E=JSON.stringify(a);m.send(r,"POST",E,s,15)})}ji(n,r){const s=[this.Fi,"/","google.firestore.v1.Firestore","/",n,"/channel"],a=P_(),c=UR(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new cT({})),this.Ui(h.initMessageHeaders,r),(0,V.uI)()||(0,V.b$)()||(0,V.d)()||(0,V.w1)()||(0,V.Mn)()||(0,V.ru)()||(h.httpHeadersOverwriteParam="$httpHeaders");const m=s.join("");ze("Connection","Creating WebChannel: "+m,h);const E=a.createWebChannel(m,h);let C=!1,S=!1;const N=new Iw({vi:B=>{S?ze("Connection","Not sending because WebChannel is closed:",B):(C||(ze("Connection","Opening WebChannel transport."),E.open(),C=!0),ze("Connection","WebChannel sending:",B),E.send(B))},Vi:()=>E.close()}),O=(B,W,ue)=>{B.listen(W,Pe=>{try{ue(Pe)}catch(Ze){setTimeout(()=>{throw Ze},0)}})};return O(E,Ad.EventType.OPEN,()=>{S||ze("Connection","WebChannel transport opened.")}),O(E,Ad.EventType.CLOSE,()=>{S||(S=!0,ze("Connection","WebChannel transport closed"),N.$i())}),O(E,Ad.EventType.ERROR,B=>{S||(S=!0,yg("Connection","WebChannel transport errored:",B),N.$i(new $e(De.UNAVAILABLE,"The operation could not be completed")))}),O(E,Ad.EventType.MESSAGE,B=>{var W;if(!S){const ue=B.data[0];Nt(!!ue);const Pe=ue,Ze=Pe.error||(null===(W=Pe[0])||void 0===W?void 0:W.error);if(Ze){ze("Connection","WebChannel received error:",Ze);const rt=Ze.status;let pt=function(_n){const Bn=gr[_n];if(void 0!==Bn)return W_(Bn)}(rt),tt=Ze.message;void 0===pt&&(pt=De.INTERNAL,tt="Unknown error status: "+rt+" with message "+Ze.message),S=!0,N.$i(new $e(pt,tt)),E.close()}else ze("Connection","WebChannel received:",ue),N.Oi(ue)}}),O(c,uT.STAT_EVENT,B=>{B.stat===O_.PROXY?ze("Connection","Detected buffering proxy"):B.stat===O_.NOPROXY&&ze("Connection","Detected no buffering proxy")}),setTimeout(()=>{N.ki()},0),N}}function dy(){return"undefined"!=typeof window?window:null}function Ff(){return"undefined"!=typeof document?document:null}function Lf(i){return new rN(i,!0)}class Dw{constructor(n,r,s=1e3,a=1.5,c=6e4){this.Oe=n,this.timerId=r,this.Qi=s,this.Wi=a,this.Gi=c,this.zi=0,this.Hi=null,this.Ji=Date.now(),this.reset()}reset(){this.zi=0}Yi(){this.zi=this.Gi}Xi(n){this.cancel();const r=Math.floor(this.zi+this.Zi()),s=Math.max(0,Date.now()-this.Ji),a=Math.max(0,r-s);a>0&&ze("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.zi} ms, delay with jitter: ${r} ms, last attempt: ${s} ms ago)`),this.Hi=this.Oe.enqueueAfterDelay(this.timerId,a,()=>(this.Ji=Date.now(),n())),this.zi*=this.Wi,this.zi<this.Qi&&(this.zi=this.Qi),this.zi>this.Gi&&(this.zi=this.Gi)}tr(){null!==this.Hi&&(this.Hi.skipDelay(),this.Hi=null)}cancel(){null!==this.Hi&&(this.Hi.cancel(),this.Hi=null)}Zi(){return(Math.random()-.5)*this.zi}}class Sw{constructor(n,r,s,a,c,h){this.Oe=n,this.er=s,this.nr=a,this.credentialsProvider=c,this.listener=h,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new Dw(n,r)}ar(){return 1===this.state||2===this.state||4===this.state}cr(){return 2===this.state}start(){3!==this.state?this.auth():this.ur()}stop(){var n=this;return(0,Se.Z)(function*(){n.ar()&&(yield n.close(0))})()}hr(){this.state=0,this.rr.reset()}lr(){this.cr()&&null===this.ir&&(this.ir=this.Oe.enqueueAfterDelay(this.er,6e4,()=>this.dr()))}wr(n){this._r(),this.stream.send(n)}dr(){var n=this;return(0,Se.Z)(function*(){if(n.cr())return n.close(0)})()}_r(){this.ir&&(this.ir.cancel(),this.ir=null)}close(n,r){var s=this;return(0,Se.Z)(function*(){s._r(),s.rr.cancel(),s.sr++,3!==n?s.rr.reset():r&&r.code===De.RESOURCE_EXHAUSTED?(kr(r.toString()),kr("Using maximum backoff delay to prevent overloading the backend."),s.rr.Yi()):r&&r.code===De.UNAUTHENTICATED&&s.credentialsProvider.invalidateToken(),null!==s.stream&&(s.mr(),s.stream.close(),s.stream=null),s.state=n,yield s.listener.Ci(r)})()}mr(){}auth(){this.state=1;const n=this.gr(this.sr),r=this.sr;this.credentialsProvider.getToken().then(s=>{this.sr===r&&this.yr(s)},s=>{n(()=>{const a=new $e(De.UNKNOWN,"Fetching auth token failed: "+s.message);return this.pr(a)})})}yr(n){const r=this.gr(this.sr);this.stream=this.Er(n),this.stream.Si(()=>{r(()=>(this.state=2,this.listener.Si()))}),this.stream.Ci(s=>{r(()=>this.pr(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}ur(){var n=this;this.state=4,this.rr.Xi((0,Se.Z)(function*(){n.state=0,n.start()}))}pr(n){return ze("PersistentStream",`close with error: ${n}`),this.stream=null,this.close(3,n)}gr(n){return r=>{this.Oe.enqueueAndForget(()=>this.sr===n?r():(ze("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class gI extends Sw{constructor(n,r,s,a,c){super(n,"listen_stream_connection_backoff","listen_stream_idle",r,s,c),this.N=a}Er(n){return this.nr.ji("Listen",n)}onMessage(n){this.rr.reset();const r=function(i,n){let r;if("targetChange"in n){const s="NO_CHANGE"===(E=n.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===E?1:"REMOVE"===E?2:"CURRENT"===E?3:"RESET"===E?4:ft(),a=n.targetChange.targetIds||[],c=function(E,C){return E.D?(Nt(void 0===C||"string"==typeof C),ei.fromBase64String(C||"")):(Nt(void 0===C||C instanceof Uint8Array),ei.fromUint8Array(C||new Uint8Array))}(i,n.targetChange.resumeToken),h=n.targetChange.cause,m=h&&function(E){const C=void 0===E.code?De.UNKNOWN:W_(E.code);return new $e(C,E.message||"")}(h);r=new Tf(s,a,c,m||null)}else if("documentChange"in n){const s=n.documentChange,a=ul(i,s.document.name),c=ti(s.document.updateTime),h=new hs({mapValue:{fields:s.document.fields}}),m=pr.newFoundDocument(a,c,h);r=new ru(s.targetIds||[],s.removedTargetIds||[],m.key,m)}else if("documentDelete"in n){const s=n.documentDelete,a=ul(i,s.document),c=s.readTime?ti(s.readTime):We.min(),h=pr.newNoDocument(a,c);r=new ru([],s.removedTargetIds||[],h.key,h)}else if("documentRemove"in n){const s=n.documentRemove,a=ul(i,s.document);r=new ru([],s.removedTargetIds||[],a,null)}else{if(!("filter"in n))return ft();{const s=n.filter,c=new eN(s.count||0);r=new KE(s.targetId,c)}}var E;return r}(this.N,n),s=function(a){if(!("targetChange"in a))return We.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?We.min():c.readTime?ti(c.readTime):We.min()}(n);return this.listener.Tr(r,s)}Ir(n){const r={};r.database=Lg(this.N),r.addTarget=function(a,c){let h;const m=c.target;return h=Ef(m)?{documents:cl(a,m)}:{query:ey(a,m)},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0?h.resumeToken=LT(a,c.resumeToken):c.snapshotVersion.compareTo(We.min())>0&&(h.readTime=Fd(a,c.snapshotVersion.toTimestamp())),h}(this.N,n);const s=function(i,n){const r=function(s,a){switch(a){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ft()}}(0,n.purpose);return null==r?null:{"goog-listen-tags":r}}(0,n);s&&(r.labels=s),this.wr(r)}Ar(n){const r={};r.database=Lg(this.N),r.removeTarget=n,this.wr(r)}}class Aw extends Sw{constructor(n,r,s,a,c){super(n,"write_stream_connection_backoff","write_stream_idle",r,s,c),this.N=a,this.Rr=!1}get br(){return this.Rr}start(){this.Rr=!1,this.lastStreamToken=void 0,super.start()}mr(){this.Rr&&this.Pr([])}Er(n){return this.nr.ji("Write",n)}onMessage(n){if(Nt(!!n.streamToken),this.lastStreamToken=n.streamToken,this.Rr){this.rr.reset();const r=function(i,n){return i&&i.length>0?(Nt(void 0!==n),i.map(r=>function(s,a){let c=ti(s.updateTime?s.updateTime:a);return c.isEqual(We.min())&&(c=ti(a)),new JR(c,s.transformResults||[])}(r,n))):[]}(n.writeResults,n.commitTime),s=ti(n.commitTime);return this.listener.vr(s,r)}return Nt(!n.writeResults||0===n.writeResults.length),this.Rr=!0,this.listener.Vr()}Sr(){const n={};n.database=Lg(this.N),this.wr(n)}Pr(n){const r={streamToken:this.lastStreamToken,writes:n.map(s=>jn(this.N,s))};this.wr(r)}}class mI extends class{}{constructor(n,r,s){super(),this.credentials=n,this.nr=r,this.N=s,this.Dr=!1}Cr(){if(this.Dr)throw new $e(De.FAILED_PRECONDITION,"The client has already been terminated.")}Li(n,r,s){return this.Cr(),this.credentials.getToken().then(a=>this.nr.Li(n,r,s,a)).catch(a=>{throw"FirebaseError"===a.name?(a.code===De.UNAUTHENTICATED&&this.credentials.invalidateToken(),a):new $e(De.UNKNOWN,a.toString())})}Ki(n,r,s){return this.Cr(),this.credentials.getToken().then(a=>this.nr.Ki(n,r,s,a)).catch(a=>{throw"FirebaseError"===a.name?(a.code===De.UNAUTHENTICATED&&this.credentials.invalidateToken(),a):new $e(De.UNKNOWN,a.toString())})}terminate(){this.Dr=!0}}class IN{constructor(n,r){this.asyncQueue=n,this.onlineStateHandler=r,this.state="Unknown",this.Nr=0,this.kr=null,this.$r=!0}Or(){0===this.Nr&&(this.Fr("Unknown"),this.kr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.kr=null,this.Mr("Backend didn't respond within 10 seconds."),this.Fr("Offline"),Promise.resolve())))}Lr(n){"Online"===this.state?this.Fr("Unknown"):(this.Nr++,this.Nr>=1&&(this.Br(),this.Mr(`Connection failed 1 times. Most recent error: ${n.toString()}`),this.Fr("Offline")))}set(n){this.Br(),this.Nr=0,"Online"===n&&(this.$r=!1),this.Fr(n)}Fr(n){n!==this.state&&(this.state=n,this.onlineStateHandler(n))}Mr(n){const r=`Could not reach Cloud Firestore backend. ${n}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.$r?(kr(r),this.$r=!1):ze("OnlineStateTracker",r)}Br(){null!==this.kr&&(this.kr.cancel(),this.kr=null)}}class DN{constructor(n,r,s,a,c){var h=this;this.localStore=n,this.datastore=r,this.asyncQueue=s,this.remoteSyncer={},this.Ur=[],this.qr=new Map,this.Kr=new Set,this.jr=[],this.Qr=c,this.Qr.Ei(m=>{s.enqueueAndForget((0,Se.Z)(function*(){var E;uu(h)&&(ze("RemoteStore","Restarting streams for network reachability change."),yield(E=(0,Se.Z)(function*(C){const S=Je(C);S.Kr.add(4),yield gc(S),S.Wr.set("Unknown"),S.Kr.delete(4),yield zg(S)}),function(C){return E.apply(this,arguments)})(h))}))}),this.Wr=new IN(s,a)}}function zg(i){return hy.apply(this,arguments)}function hy(){return(hy=(0,Se.Z)(function*(i){if(uu(i))for(const n of i.jr)yield n(!0)})).apply(this,arguments)}function gc(i){return fy.apply(this,arguments)}function fy(){return(fy=(0,Se.Z)(function*(i){for(const n of i.jr)yield n(!1)})).apply(this,arguments)}function Kg(i,n){const r=Je(i);r.qr.has(n.targetId)||(r.qr.set(n.targetId,n),my(r)?gy(r):Wi(r).cr()&&py(r,n))}function Vf(i,n){const r=Je(i),s=Wi(r);r.qr.delete(n),s.cr()&&Rw(r,n),0===r.qr.size&&(s.cr()?s.lr():uu(r)&&r.Wr.set("Unknown"))}function py(i,n){i.Gr.Y(n.targetId),Wi(i).Ir(n)}function Rw(i,n){i.Gr.Y(n),Wi(i).Ar(n)}function gy(i){i.Gr=new tN({getRemoteKeysForTarget:n=>i.remoteSyncer.getRemoteKeysForTarget(n),Et:n=>i.qr.get(n)||null}),Wi(i).start(),i.Wr.Or()}function my(i){return uu(i)&&!Wi(i).ar()&&i.qr.size>0}function uu(i){return 0===Je(i).Kr.size}function SN(i){i.Gr=void 0}function AN(i){return Nw.apply(this,arguments)}function Nw(){return(Nw=(0,Se.Z)(function*(i){i.qr.forEach((n,r)=>{py(i,n)})})).apply(this,arguments)}function _I(i,n){return xw.apply(this,arguments)}function xw(){return(xw=(0,Se.Z)(function*(i,n){SN(i),my(i)?(i.Wr.Lr(n),gy(i)):i.Wr.set("Unknown")})).apply(this,arguments)}function si(i,n,r){return _y.apply(this,arguments)}function _y(){return(_y=(0,Se.Z)(function*(i,n,r){if(i.Wr.set("Online"),n instanceof Tf&&2===n.state&&n.cause)try{yield(s=(0,Se.Z)(function*(a,c){const h=c.cause;for(const m of c.targetIds)a.qr.has(m)&&(yield a.remoteSyncer.rejectListen(m,h),a.qr.delete(m),a.Gr.removeTarget(m))}),function(a,c){return s.apply(this,arguments)})(i,n)}catch(s){ze("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),s),yield yy(i,s)}else if(n instanceof ru?i.Gr.rt(n):n instanceof KE?i.Gr.ft(n):i.Gr.ct(n),!r.isEqual(We.min()))try{const s=yield gw(i.localStore);r.compareTo(s)>=0&&(yield function(a,c){const h=a.Gr._t(c);return h.targetChanges.forEach((m,E)=>{if(m.resumeToken.approximateByteSize()>0){const C=a.qr.get(E);C&&a.qr.set(E,C.withResumeToken(m.resumeToken,c))}}),h.targetMismatches.forEach(m=>{const E=a.qr.get(m);if(!E)return;a.qr.set(m,E.withResumeToken(ei.EMPTY_BYTE_STRING,E.snapshotVersion)),Rw(a,m);const C=new ac(E.target,m,1,E.sequenceNumber);py(a,C)}),a.remoteSyncer.applyRemoteEvent(h)}(i,r))}catch(s){ze("RemoteStore","Failed to raise snapshot:",s),yield yy(i,s)}var s})).apply(this,arguments)}function yy(i,n,r){return Pw.apply(this,arguments)}function Pw(){return(Pw=(0,Se.Z)(function*(i,n,r){if(!oc(n))throw n;i.Kr.add(1),yield gc(i),i.Wr.set("Offline"),r||(r=()=>gw(i.localStore)),i.asyncQueue.enqueueRetryable((0,Se.Z)(function*(){ze("RemoteStore","Retrying IndexedDB access"),yield r(),i.Kr.delete(1),yield zg(i)}))})).apply(this,arguments)}function Mw(i,n){return n().catch(r=>yy(i,r,n))}function Uf(i){return vy.apply(this,arguments)}function vy(){return(vy=(0,Se.Z)(function*(i){const n=Je(i),r=Ei(n);let s=n.Ur.length>0?n.Ur[n.Ur.length-1].batchId:-1;for(;yI(n);)try{const a=yield Mf(n.localStore,s);if(null===a){0===n.Ur.length&&r.lr();break}s=a.batchId,Bf(n,a)}catch(a){yield yy(n,a)}vI(n)&&EI(n)})).apply(this,arguments)}function yI(i){return uu(i)&&i.Ur.length<10}function Bf(i,n){i.Ur.push(n);const r=Ei(i);r.cr()&&r.br&&r.Pr(n.mutations)}function vI(i){return uu(i)&&!Ei(i).ar()&&i.Ur.length>0}function EI(i){Ei(i).start()}function wI(i){return Ow.apply(this,arguments)}function Ow(){return(Ow=(0,Se.Z)(function*(i){Ei(i).Sr()})).apply(this,arguments)}function bI(i){return CI.apply(this,arguments)}function CI(){return(CI=(0,Se.Z)(function*(i){const n=Ei(i);for(const r of i.Ur)n.Pr(r.mutations)})).apply(this,arguments)}function kw(i,n,r){return Zg.apply(this,arguments)}function Zg(){return(Zg=(0,Se.Z)(function*(i,n,r){const s=i.Ur.shift(),a=iw.from(s,n,r);yield Mw(i,()=>i.remoteSyncer.applySuccessfulWrite(a)),yield Uf(i)})).apply(this,arguments)}function hl(i,n){return Fw.apply(this,arguments)}function Fw(){return(Fw=(0,Se.Z)(function*(i,n){var r;n&&Ei(i).br&&(yield(r=(0,Se.Z)(function*(s,a){if(PT(c=a.code)&&c!==De.ABORTED){const h=s.Ur.shift();Ei(s).hr(),yield Mw(s,()=>s.remoteSyncer.rejectFailedWrite(h.batchId,a)),yield Uf(s)}var c}),function(s,a){return r.apply(this,arguments)})(i,n)),vI(i)&&EI(i)})).apply(this,arguments)}function Ey(i,n){return Go.apply(this,arguments)}function Go(){return(Go=(0,Se.Z)(function*(i,n){const r=Je(i);n?(r.Kr.delete(2),yield zg(r)):n||(r.Kr.add(2),yield gc(r),r.Wr.set("Unknown"))})).apply(this,arguments)}function Wi(i){return i.zr||(i.zr=function(n,r,s){const a=Je(n);return a.Cr(),new gI(r,a.nr,a.credentials,a.N,s)}(i.datastore,i.asyncQueue,{Si:AN.bind(null,i),Ci:_I.bind(null,i),Tr:si.bind(null,i)}),i.jr.push(function(){var n=(0,Se.Z)(function*(r){r?(i.zr.hr(),my(i)?gy(i):i.Wr.set("Unknown")):(yield i.zr.stop(),SN(i))});return function(r){return n.apply(this,arguments)}}())),i.zr}function Ei(i){return i.Hr||(i.Hr=function(n,r,s){const a=Je(n);return a.Cr(),new Aw(r,a.nr,a.credentials,a.N,s)}(i.datastore,i.asyncQueue,{Si:wI.bind(null,i),Ci:hl.bind(null,i),Vr:bI.bind(null,i),vr:kw.bind(null,i)}),i.jr.push(function(){var n=(0,Se.Z)(function*(r){r?(i.Hr.hr(),yield Uf(i)):(yield i.Hr.stop(),i.Ur.length>0&&(ze("RemoteStore",`Stopping write stream with ${i.Ur.length} pending writes`),i.Ur=[]))});return function(r){return n.apply(this,arguments)}}())),i.Hr}class wy{constructor(n,r,s,a,c){this.asyncQueue=n,this.timerId=r,this.targetTimeMs=s,this.op=a,this.removalCallback=c,this.deferred=new Jr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}static createAndSchedule(n,r,s,a,c){const h=Date.now()+s,m=new wy(n,r,h,a,c);return m.start(s),m}start(n){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),n)}skipDelay(){return this.handleDelayElapsed()}cancel(n){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new $e(De.CANCELLED,"Operation cancelled"+(n?": "+n:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(n=>this.deferred.resolve(n))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zd(i,n){if(kr("AsyncQueue",`${n}: ${i}`),oc(i))return new $e(De.UNAVAILABLE,`${n}: ${i}`);throw i}class jf{constructor(n){this.comparator=n?(r,s)=>n(r,s)||ut.comparator(r.key,s.key):(r,s)=>ut.comparator(r.key,s.key),this.keyedMap=K_(),this.sortedSet=new Lr(this.comparator)}static emptySet(n){return new jf(n.comparator)}has(n){return null!=this.keyedMap.get(n)}get(n){return this.keyedMap.get(n)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(n){const r=this.keyedMap.get(n);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(n){this.sortedSet.inorderTraversal((r,s)=>(n(r),!1))}add(n){const r=this.delete(n.key);return r.copy(r.keyedMap.insert(n.key,n),r.sortedSet.insert(n,null))}delete(n){const r=this.get(n);return r?this.copy(this.keyedMap.remove(n),this.sortedSet.remove(r)):this}isEqual(n){if(!(n instanceof jf)||this.size!==n.size)return!1;const r=this.sortedSet.getIterator(),s=n.sortedSet.getIterator();for(;r.hasNext();){const a=r.getNext().key,c=s.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const n=[];return this.forEach(r=>{n.push(r.toString())}),0===n.length?"DocumentSet ()":"DocumentSet (\n  "+n.join("  \n")+"\n)"}copy(n,r){const s=new jf;return s.comparator=this.comparator,s.keyedMap=n,s.sortedSet=r,s}}class TI{constructor(){this.Jr=new Lr(ut.comparator)}track(n){const r=n.doc.key,s=this.Jr.get(r);s?0!==n.type&&3===s.type?this.Jr=this.Jr.insert(r,n):3===n.type&&1!==s.type?this.Jr=this.Jr.insert(r,{type:s.type,doc:n.doc}):2===n.type&&2===s.type?this.Jr=this.Jr.insert(r,{type:2,doc:n.doc}):2===n.type&&0===s.type?this.Jr=this.Jr.insert(r,{type:0,doc:n.doc}):1===n.type&&0===s.type?this.Jr=this.Jr.remove(r):1===n.type&&2===s.type?this.Jr=this.Jr.insert(r,{type:1,doc:s.doc}):0===n.type&&1===s.type?this.Jr=this.Jr.insert(r,{type:2,doc:n.doc}):ft():this.Jr=this.Jr.insert(r,n)}Yr(){const n=[];return this.Jr.inorderTraversal((r,s)=>{n.push(s)}),n}}class $f{constructor(n,r,s,a,c,h,m,E){this.query=n,this.docs=r,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=c,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=E}static fromInitialDocuments(n,r,s,a){const c=[];return r.forEach(h=>{c.push({type:0,doc:h})}),new $f(n,r,jf.emptySet(r),c,s,a,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(n){if(!(this.fromCache===n.fromCache&&this.syncStateChanged===n.syncStateChanged&&this.mutatedKeys.isEqual(n.mutatedKeys)&&j_(this.query,n.query)&&this.docs.isEqual(n.docs)&&this.oldDocs.isEqual(n.oldDocs)))return!1;const r=this.docChanges,s=n.docChanges;if(r.length!==s.length)return!1;for(let a=0;a<r.length;a++)if(r[a].type!==s[a].type||!r[a].doc.isEqual(s[a].doc))return!1;return!0}}class RN{constructor(){this.Xr=void 0,this.listeners=[]}}class Lw{constructor(){this.queries=new Pf(n=>jE(n),j_),this.onlineState="Unknown",this.Zr=new Set}}function Yd(i,n){return Vw.apply(this,arguments)}function Vw(){return(Vw=(0,Se.Z)(function*(i,n){const r=Je(i),s=n.query;let a=!1,c=r.queries.get(s);if(c||(a=!0,c=new RN),a)try{c.Xr=yield r.onListen(s)}catch(h){const m=Zd(h,`Initialization of query '${$_(n.query)}' failed`);return void n.onError(m)}r.queries.set(s,c),c.listeners.push(n),n.eo(r.onlineState),c.Xr&&n.no(c.Xr)&&Hf(r)})).apply(this,arguments)}function by(i,n){return Uw.apply(this,arguments)}function Uw(){return(Uw=(0,Se.Z)(function*(i,n){const r=Je(i),s=n.query;let a=!1;const c=r.queries.get(s);if(c){const h=c.listeners.indexOf(n);h>=0&&(c.listeners.splice(h,1),a=0===c.listeners.length)}if(a)return r.queries.delete(s),r.onUnlisten(s)})).apply(this,arguments)}function II(i,n){const r=Je(i);let s=!1;for(const a of n){const h=r.queries.get(a.query);if(h){for(const m of h.listeners)m.no(a)&&(s=!0);h.Xr=a}}s&&Hf(r)}function DI(i,n,r){const s=Je(i),a=s.queries.get(n);if(a)for(const c of a.listeners)c.onError(r);s.queries.delete(n)}function Hf(i){i.Zr.forEach(n=>{n.next()})}class Bw{constructor(n,r,s){this.query=n,this.so=r,this.io=!1,this.ro=null,this.onlineState="Unknown",this.options=s||{}}no(n){if(!this.options.includeMetadataChanges){const s=[];for(const a of n.docChanges)3!==a.type&&s.push(a);n=new $f(n.query,n.docs,n.oldDocs,s,n.mutatedKeys,n.fromCache,n.syncStateChanged,!0)}let r=!1;return this.io?this.oo(n)&&(this.so.next(n),r=!0):this.ao(n,this.onlineState)&&(this.co(n),r=!0),this.ro=n,r}onError(n){this.so.error(n)}eo(n){this.onlineState=n;let r=!1;return this.ro&&!this.io&&this.ao(this.ro,n)&&(this.co(this.ro),r=!0),r}ao(n,r){return!n.fromCache||!(this.options.uo&&"Offline"!==r||n.docs.isEmpty()&&"Offline"!==r)}oo(n){return n.docChanges.length>0||!!(n.syncStateChanged||this.ro&&this.ro.hasPendingWrites!==n.hasPendingWrites)&&!0===this.options.includeMetadataChanges}co(n){n=$f.fromInitialDocuments(n.query,n.docs,n.mutatedKeys,n.fromCache),this.io=!0,this.so.next(n)}}class SI{constructor(n,r){this.payload=n,this.byteLength=r}ho(){return"metadata"in this.payload}}class jw{constructor(n){this.N=n}zn(n){return ul(this.N,n)}Hn(n){return n.metadata.exists?sN(this.N,n.document,!1):pr.newNoDocument(this.zn(n.metadata.name),this.Jn(n.metadata.readTime))}Jn(n){return ti(n)}}class $w{constructor(n,r,s){this.lo=n,this.localStore=r,this.N=s,this.queries=[],this.documents=[],this.progress=Yg(n)}fo(n){this.progress.bytesLoaded+=n.byteLength;let r=this.progress.documentsLoaded;return n.payload.namedQuery?this.queries.push(n.payload.namedQuery):n.payload.documentMetadata?(this.documents.push({metadata:n.payload.documentMetadata}),n.payload.documentMetadata.exists||++r):n.payload.document&&(this.documents[this.documents.length-1].document=n.payload.document,++r),r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null}wo(n){const r=new Map,s=new jw(this.N);for(const a of n)if(a.metadata.queries){const c=s.zn(a.metadata.name);for(const h of a.metadata.queries){const m=(r.get(h)||on()).add(c);r.set(h,m)}}return r}complete(){var n=this;return(0,Se.Z)(function*(){const r=yield function(i,n,r,s){return yw.apply(this,arguments)}(n.localStore,new jw(n.N),n.documents,n.lo.id),s=n.wo(n.documents);for(const a of n.queries)yield CN(n.localStore,a,s.get(a.name));return n.progress.taskState="Success",new _N(Object.assign({},n.progress),r)})()}}function Yg(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class Hw{constructor(n){this.key=n}}class Gw{constructor(n){this.key=n}}class qw{constructor(n,r){this.query=n,this._o=r,this.mo=null,this.current=!1,this.yo=on(),this.mutatedKeys=on(),this.po=$E(n),this.Eo=new jf(this.po)}get To(){return this._o}Io(n,r){const s=r?r.Ao:new TI,a=r?r.Eo:this.Eo;let c=r?r.mutatedKeys:this.mutatedKeys,h=a,m=!1;const E=Ig(this.query)&&a.size===this.query.limit?a.last():null,C=Dg(this.query)&&a.size===this.query.limit?a.first():null;if(n.inorderTraversal((S,N)=>{const O=a.get(S),B=Rg(this.query,N)?N:null,W=!!O&&this.mutatedKeys.has(O.key),ue=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let Pe=!1;O&&B?O.data.isEqual(B.data)?W!==ue&&(s.track({type:3,doc:B}),Pe=!0):this.Ro(O,B)||(s.track({type:2,doc:B}),Pe=!0,(E&&this.po(B,E)>0||C&&this.po(B,C)<0)&&(m=!0)):!O&&B?(s.track({type:0,doc:B}),Pe=!0):O&&!B&&(s.track({type:1,doc:O}),Pe=!0,(E||C)&&(m=!0)),Pe&&(B?(h=h.add(B),c=ue?c.add(S):c.delete(S)):(h=h.delete(S),c=c.delete(S)))}),Ig(this.query)||Dg(this.query))for(;h.size>this.query.limit;){const S=Ig(this.query)?h.last():h.first();h=h.delete(S.key),c=c.delete(S.key),s.track({type:1,doc:S})}return{Eo:h,Ao:s,Ln:m,mutatedKeys:c}}Ro(n,r){return n.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(n,r,s){const a=this.Eo;this.Eo=n.Eo,this.mutatedKeys=n.mutatedKeys;const c=n.Ao.Yr();c.sort((C,S)=>function(N,O){const B=W=>{switch(W){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ft()}};return B(N)-B(O)}(C.type,S.type)||this.po(C.doc,S.doc)),this.bo(s);const h=r?this.Po():[],m=0===this.yo.size&&this.current?1:0,E=m!==this.mo;return this.mo=m,0!==c.length||E?{snapshot:new $f(this.query,n.Eo,a,c,n.mutatedKeys,0===m,E,!1),vo:h}:{vo:h}}eo(n){return this.current&&"Offline"===n?(this.current=!1,this.applyChanges({Eo:this.Eo,Ao:new TI,mutatedKeys:this.mutatedKeys,Ln:!1},!1)):{vo:[]}}Vo(n){return!this._o.has(n)&&!!this.Eo.has(n)&&!this.Eo.get(n).hasLocalMutations}bo(n){n&&(n.addedDocuments.forEach(r=>this._o=this._o.add(r)),n.modifiedDocuments.forEach(r=>{}),n.removedDocuments.forEach(r=>this._o=this._o.delete(r)),this.current=n.current)}Po(){if(!this.current)return[];const n=this.yo;this.yo=on(),this.Eo.forEach(s=>{this.Vo(s.key)&&(this.yo=this.yo.add(s.key))});const r=[];return n.forEach(s=>{this.yo.has(s)||r.push(new Gw(s))}),this.yo.forEach(s=>{n.has(s)||r.push(new Hw(s))}),r}So(n){this._o=n.Gn,this.yo=on();const r=this.Io(n.documents);return this.applyChanges(r,!0)}Do(){return $f.fromInitialDocuments(this.query,this.Eo,this.mutatedKeys,0===this.mo)}}class AI{constructor(n,r,s){this.query=n,this.targetId=r,this.view=s}}class RI{constructor(n){this.key=n,this.Co=!1}}class NI{constructor(n,r,s,a,c,h){this.localStore=n,this.remoteStore=r,this.eventManager=s,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=h,this.No={},this.xo=new Pf(m=>jE(m),j_),this.ko=new Map,this.$o=new Set,this.Oo=new Lr(ut.comparator),this.Fo=new Map,this.Mo=new Ew,this.Lo={},this.Bo=new Map,this.Uo=hc.ie(),this.onlineState="Unknown",this.qo=void 0}get isPrimaryClient(){return!0===this.qo}}function xI(i,n){return Cy.apply(this,arguments)}function Cy(){return(Cy=(0,Se.Z)(function*(i,n){const r=Gf(i);let s,a;const c=r.xo.get(n);if(c)s=c.targetId,r.sharedClientState.addLocalQueryTarget(s),a=c.view.Do();else{const h=yield Of(r.localStore,Uo(n)),m=r.sharedClientState.addLocalQueryTarget(h.targetId);s=h.targetId,a=yield Ww(r,n,s,"current"===m),r.isPrimaryClient&&Kg(r.remoteStore,h)}return a})).apply(this,arguments)}function Ww(i,n,r,s){return zw.apply(this,arguments)}function zw(){return(zw=(0,Se.Z)(function*(i,n,r,s){i.Ko=(S,N,O)=>{return(B=(0,Se.Z)(function*(W,ue,Pe,Ze){let rt=ue.view.Io(Pe);rt.Ln&&(rt=yield Gg(W.localStore,ue.query,!1).then(({documents:_n})=>ue.view.Io(_n,rt)));const pt=Ze&&Ze.targetChanges.get(ue.targetId),tt=ue.view.applyChanges(rt,W.isPrimaryClient,pt);return Iy(W,ue.targetId,tt.vo),tt.snapshot}),function(W,ue,Pe,Ze){return B.apply(this,arguments)})(i,S,N,O);var B};const a=yield Gg(i.localStore,n,!0),c=new qw(n,a.Gn),h=c.Io(a.documents),m=Q_.createSynthesizedTargetChangeForCurrentChange(r,s&&"Offline"!==i.onlineState),E=c.applyChanges(h,i.isPrimaryClient,m);Iy(i,r,E.vo);const C=new AI(n,r,c);return i.xo.set(n,C),i.ko.has(r)?i.ko.get(r).push(n):i.ko.set(r,[n]),E.snapshot})).apply(this,arguments)}function NN(i,n){return Kw.apply(this,arguments)}function Kw(){return(Kw=(0,Se.Z)(function*(i,n){const r=Je(i),s=r.xo.get(n),a=r.ko.get(s.targetId);if(a.length>1)return r.ko.set(s.targetId,a.filter(c=>!j_(c,n))),void r.xo.delete(n);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||(yield Wd(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),Vf(r.remoteStore,s.targetId),Qd(r,s.targetId)}).catch(fc))):(Qd(r,s.targetId),yield Wd(r.localStore,s.targetId,!0))})).apply(this,arguments)}function Zw(){return(Zw=(0,Se.Z)(function*(i,n,r){const s=qf(i);try{const a=yield function(c,h){const m=Je(c),E=yi.now(),C=h.reduce((N,O)=>N.add(O.key),on());let S;return m.persistence.runTransaction("Locally write mutations","readwrite",N=>m.Qn.Pn(N,C).next(O=>{S=O;const B=[];for(const W of h){const ue=qE(W,S.get(W.key));null!=ue&&B.push(new nu(W.key,ue,zR(ue.value.mapValue),$r.exists(!0)))}return m.In.addMutationBatch(N,E,B,h)})).then(N=>(N.applyToLocalDocumentSet(S),{batchId:N.batchId,changes:S}))}(s.localStore,n);s.sharedClientState.addPendingMutation(a.batchId),function(c,h,m){let E=c.Lo[c.currentUser.toKey()];E||(E=new Lr(sn)),E=E.insert(h,m),c.Lo[c.currentUser.toKey()]=E}(s,a.batchId,r),yield fl(s,a.changes),yield Uf(s.remoteStore)}catch(a){const c=Zd(a,"Failed to persist write");r.reject(c)}})).apply(this,arguments)}function PI(i,n){return Yw.apply(this,arguments)}function Yw(){return(Yw=(0,Se.Z)(function*(i,n){const r=Je(i);try{const s=yield n1(r.localStore,n);n.targetChanges.forEach((a,c)=>{const h=r.Fo.get(c);h&&(Nt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?h.Co=!0:a.modifiedDocuments.size>0?Nt(h.Co):a.removedDocuments.size>0&&(Nt(h.Co),h.Co=!1))}),yield fl(r,s,n)}catch(s){yield fc(s)}})).apply(this,arguments)}function MI(i,n,r){const s=Je(i);if(s.isPrimaryClient&&0===r||!s.isPrimaryClient&&1===r){const a=[];s.xo.forEach((c,h)=>{const m=h.view.eo(n);m.snapshot&&a.push(m.snapshot)}),function(c,h){const m=Je(c);m.onlineState=h;let E=!1;m.queries.forEach((C,S)=>{for(const N of S.listeners)N.eo(h)&&(E=!0)}),E&&Hf(m)}(s.eventManager,n),a.length&&s.No.Tr(a),s.onlineState=n,s.isPrimaryClient&&s.sharedClientState.setOnlineState(n)}}function PN(i,n,r){return Qw.apply(this,arguments)}function Qw(){return(Qw=(0,Se.Z)(function*(i,n,r){const s=Je(i);s.sharedClientState.updateQueryState(n,"rejected",r);const a=s.Fo.get(n),c=a&&a.key;if(c){let h=new Lr(ut.comparator);h=h.insert(c,pr.newNoDocument(c,We.min()));const m=on().add(c),E=new kg(We.min(),new Map,new wr(sn),h,m);yield PI(s,E),s.Oo=s.Oo.remove(c),s.Fo.delete(n),Dy(s)}else yield Wd(s.localStore,n,!1).then(()=>Qd(s,n,r)).catch(fc)})).apply(this,arguments)}function MN(i,n){return Jw.apply(this,arguments)}function Jw(){return(Jw=(0,Se.Z)(function*(i,n){const r=Je(i),s=n.batch.batchId;try{const a=yield wN(r.localStore,n);Ty(r,s,null),tb(r,s),r.sharedClientState.updateMutationState(s,"acknowledged"),yield fl(r,a)}catch(a){yield fc(a)}})).apply(this,arguments)}function ON(i,n,r){return Xw.apply(this,arguments)}function Xw(){return(Xw=(0,Se.Z)(function*(i,n,r){const s=Je(i);try{const a=yield function(c,h){const m=Je(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",E=>{let C;return m.In.lookupMutationBatch(E,h).next(S=>(Nt(null!==S),C=S.keys(),m.In.removeMutationBatch(E,S))).next(()=>m.In.performConsistencyCheck(E)).next(()=>m.Qn.Pn(E,C))})}(s.localStore,n);Ty(s,n,r),tb(s,n),s.sharedClientState.updateMutationState(n,"rejected",r),yield fl(s,a)}catch(a){yield fc(a)}})).apply(this,arguments)}function eb(){return(eb=(0,Se.Z)(function*(i,n){const r=Je(i);uu(r.remoteStore)||ze("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(c){const h=Je(c);return h.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>h.In.getHighestUnacknowledgedBatchId(m))}(r.localStore);if(-1===s)return void n.resolve();const a=r.Bo.get(s)||[];a.push(n),r.Bo.set(s,a)}catch(s){const a=Zd(s,"Initialization of waitForPendingWrites() operation failed");n.reject(a)}})).apply(this,arguments)}function tb(i,n){(i.Bo.get(n)||[]).forEach(r=>{r.resolve()}),i.Bo.delete(n)}function Ty(i,n,r){const s=Je(i);let a=s.Lo[s.currentUser.toKey()];if(a){const c=a.get(n);c&&(r?c.reject(r):c.resolve(),a=a.remove(n)),s.Lo[s.currentUser.toKey()]=a}}function Qd(i,n,r=null){i.sharedClientState.removeLocalQueryTarget(n);for(const s of i.ko.get(n))i.xo.delete(s),r&&i.No.jo(s,r);i.ko.delete(n),i.isPrimaryClient&&i.Mo.cs(n).forEach(s=>{i.Mo.containsKey(s)||nb(i,s)})}function nb(i,n){i.$o.delete(n.path.canonicalString());const r=i.Oo.get(n);null!==r&&(Vf(i.remoteStore,r),i.Oo=i.Oo.remove(n),i.Fo.delete(r),Dy(i))}function Iy(i,n,r){for(const s of r)s instanceof Hw?(i.Mo.addReference(s.key,n),OI(i,s)):s instanceof Gw?(ze("SyncEngine","Document no longer in limbo: "+s.key),i.Mo.removeReference(s.key,n),i.Mo.containsKey(s.key)||nb(i,s.key)):ft()}function OI(i,n){const r=n.key,s=r.path.canonicalString();i.Oo.get(r)||i.$o.has(s)||(ze("SyncEngine","New document in limbo: "+r),i.$o.add(s),Dy(i))}function Dy(i){for(;i.$o.size>0&&i.Oo.size<i.maxConcurrentLimboResolutions;){const n=i.$o.values().next().value;i.$o.delete(n);const r=new ut(Dn.fromString(n)),s=i.Uo.next();i.Fo.set(s,new RI(r)),i.Oo=i.Oo.insert(r,s),Kg(i.remoteStore,new ac(Uo(bf(r.path)),s,2,Js.T))}}function fl(i,n,r){return Sy.apply(this,arguments)}function Sy(){return(Sy=(0,Se.Z)(function*(i,n,r){const s=Je(i),a=[],c=[],h=[];var m;s.xo.isEmpty()||(s.xo.forEach((m,E)=>{h.push(s.Ko(E,n,r).then(C=>{if(C){s.isPrimaryClient&&s.sharedClientState.updateQueryState(E.targetId,C.fromCache?"not-current":"current"),a.push(C);const S=Hg.kn(E.targetId,C);c.push(S)}}))}),yield Promise.all(h),s.No.Tr(a),yield(m=(0,Se.Z)(function*(E,C){const S=Je(E);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>Ue.forEach(C,O=>Ue.forEach(O.Nn,B=>S.persistence.referenceDelegate.addReference(N,O.targetId,B)).next(()=>Ue.forEach(O.xn,B=>S.persistence.referenceDelegate.removeReference(N,O.targetId,B)))))}catch(N){if(!oc(N))throw N;ze("LocalStore","Failed to update sequence numbers: "+N)}for(const N of C){const O=N.targetId;if(!N.fromCache){const B=S.Un.get(O),ue=B.withLastLimboFreeSnapshotVersion(B.snapshotVersion);S.Un=S.Un.insert(O,ue)}}}),function(E,C){return m.apply(this,arguments)})(s.localStore,c))})).apply(this,arguments)}function kI(i,n){return Qg.apply(this,arguments)}function Qg(){return(Qg=(0,Se.Z)(function*(i,n){const r=Je(i);if(!r.currentUser.isEqual(n)){ze("SyncEngine","User change. New user:",n.toKey());const s=yield EN(r.localStore,n);r.currentUser=n,(a=r).Bo.forEach(h=>{h.forEach(m=>{m.reject(new $e(De.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.Bo.clear(),r.sharedClientState.handleUserChange(n,s.removedBatchIds,s.addedBatchIds),yield fl(r,s.Wn)}var a})).apply(this,arguments)}function rb(i,n){const r=Je(i),s=r.Fo.get(n);if(s&&s.Co)return on().add(s.key);{let a=on();const c=r.ko.get(n);if(!c)return a;for(const h of c){const m=r.xo.get(h);a=a.unionWith(m.view.To)}return a}}function Jd(i,n){return ib.apply(this,arguments)}function ib(){return(ib=(0,Se.Z)(function*(i,n){const r=Je(i),s=yield Gg(r.localStore,n.query,!0),a=n.view.So(s);return r.isPrimaryClient&&Iy(r,n.targetId,a.vo),a})).apply(this,arguments)}function FN(i){return mc.apply(this,arguments)}function mc(){return(mc=(0,Se.Z)(function*(i){const n=Je(i);return oI(n.localStore).then(r=>fl(n,r))})).apply(this,arguments)}function s1(i,n,r,s){return Jg.apply(this,arguments)}function Jg(){return(Jg=(0,Se.Z)(function*(i,n,r,s){const a=Je(i),c=yield function(h,m){const E=Je(h),C=Je(E.In);return E.persistence.runTransaction("Lookup mutation documents","readonly",S=>C.Xt(S,m).next(N=>N?E.Qn.Pn(S,N):Ue.resolve(null)))}(a.localStore,n);var m;null!==c?("pending"===r?yield Uf(a.remoteStore):"acknowledged"===r||"rejected"===r?(Ty(a,n,s||null),tb(a,n),m=n,Je(Je(a.localStore).In).te(m)):ft(),yield fl(a,c)):ze("SyncEngine","Cannot apply mutation batch with id: "+n)})).apply(this,arguments)}function Ay(){return(Ay=(0,Se.Z)(function*(i,n){const r=Je(i);if(Gf(r),qf(r),!0===n&&!0!==r.qo){const s=r.sharedClientState.getAllActiveQueryTargets(),a=yield sb(r,s.toArray());r.qo=!0,yield Ey(r.remoteStore,!0);for(const c of a)Kg(r.remoteStore,c)}else if(!1===n&&!1!==r.qo){const s=[];let a=Promise.resolve();r.ko.forEach((c,h)=>{r.sharedClientState.isLocalQueryTarget(h)?s.push(h):a=a.then(()=>(Qd(r,h),Wd(r.localStore,h,!0))),Vf(r.remoteStore,h)}),yield a,yield sb(r,s),function(c){const h=Je(c);h.Fo.forEach((m,E)=>{Vf(h.remoteStore,E)}),h.Mo.us(),h.Fo=new Map,h.Oo=new Lr(ut.comparator)}(r),r.qo=!1,yield Ey(r.remoteStore,!1)}})).apply(this,arguments)}function sb(i,n,r){return FI.apply(this,arguments)}function FI(){return(FI=(0,Se.Z)(function*(i,n,r){const s=Je(i),a=[],c=[];for(const h of n){let m;const E=s.ko.get(h);if(E&&0!==E.length){m=yield Of(s.localStore,Uo(E[0]));for(const C of E){const S=s.xo.get(C),N=yield Jd(s,S);N.snapshot&&c.push(N.snapshot)}}else{const C=yield qg(s.localStore,h);m=yield Of(s.localStore,C),yield Ww(s,It(C),h,!1)}a.push(m)}return s.No.Tr(c),a})).apply(this,arguments)}function It(i){return Md(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function LN(i){const n=Je(i);return Je(Je(n.localStore).persistence).pn()}function VN(i,n,r,s){return ob.apply(this,arguments)}function ob(){return(ob=(0,Se.Z)(function*(i,n,r,s){const a=Je(i);if(a.qo)ze("SyncEngine","Ignoring unexpected query state notification.");else if(a.ko.has(n))switch(r){case"current":case"not-current":{const c=yield oI(a.localStore),h=kg.createSynthesizedRemoteEventForCurrentChange(n,"current"===r);yield fl(a,c,h);break}case"rejected":yield Wd(a.localStore,n,!0),Qd(a,n,s);break;default:ft()}})).apply(this,arguments)}function Ry(i,n,r){return ab.apply(this,arguments)}function ab(){return(ab=(0,Se.Z)(function*(i,n,r){const s=Gf(i);if(s.qo){for(const a of n){if(s.ko.has(a)){ze("SyncEngine","Adding an already active target "+a);continue}const c=yield qg(s.localStore,a),h=yield Of(s.localStore,c);yield Ww(s,It(c),h.targetId,!1),Kg(s.remoteStore,h)}for(const a of r)s.ko.has(a)&&(yield Wd(s.localStore,a,!1).then(()=>{Vf(s.remoteStore,a),Qd(s,a)}).catch(fc))}})).apply(this,arguments)}function Gf(i){const n=Je(i);return n.remoteStore.remoteSyncer.applyRemoteEvent=PI.bind(null,n),n.remoteStore.remoteSyncer.getRemoteKeysForTarget=rb.bind(null,n),n.remoteStore.remoteSyncer.rejectListen=PN.bind(null,n),n.No.Tr=II.bind(null,n.eventManager),n.No.jo=DI.bind(null,n.eventManager),n}function qf(i){const n=Je(i);return n.remoteStore.remoteSyncer.applySuccessfulWrite=MN.bind(null,n),n.remoteStore.remoteSyncer.rejectFailedWrite=ON.bind(null,n),n}class UN{constructor(){this.synchronizeTabs=!1}initialize(n){var r=this;return(0,Se.Z)(function*(){r.N=Lf(n.databaseInfo.databaseId),r.sharedClientState=r.Wo(n),r.persistence=r.Go(n),yield r.persistence.start(),r.gcScheduler=r.zo(n),r.localStore=r.Ho(n)})()}zo(n){return null}Ho(n){return vN(this.persistence,new oy,n.initialUser,this.N)}Go(n){return new TN(zd.Ns,this.N)}Wo(n){return new cy}terminate(){var n=this;return(0,Se.Z)(function*(){n.gcScheduler&&n.gcScheduler.stop(),yield n.sharedClientState.shutdown(),yield n.persistence.shutdown()})()}}class lb extends UN{constructor(n,r,s){super(),this.Jo=n,this.cacheSizeBytes=r,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(n){var r=()=>super.initialize,s=this;return(0,Se.Z)(function*(){yield r().call(s,n),yield function(i){return _w.apply(this,arguments)}(s.localStore),yield s.Jo.initialize(s,n),yield qf(s.Jo.syncEngine),yield Uf(s.Jo.remoteStore),yield s.persistence.nn(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(s.localStore),Promise.resolve()))})()}Ho(n){return vN(this.persistence,new oy,n.initialUser,this.N)}zo(n){return new YT(this.persistence.referenceDelegate.garbageCollector,n.asyncQueue)}Go(n){const r=nI(n.databaseInfo.databaseId,n.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?ri.withCacheSize(this.cacheSizeBytes):ri.DEFAULT;return new tI(this.synchronizeTabs,r,n.clientId,s,n.asyncQueue,dy(),Ff(),this.N,this.sharedClientState,!!this.forceOwnership)}Wo(n){return new cy}}class ub extends lb{constructor(n,r){super(n,r,!1),this.Jo=n,this.cacheSizeBytes=r,this.synchronizeTabs=!0}initialize(n){var r=()=>super.initialize,s=this;return(0,Se.Z)(function*(){yield r().call(s,n);const a=s.Jo.syncEngine;s.sharedClientState instanceof Cw&&(s.sharedClientState.syncEngine={_i:s1.bind(null,a),mi:VN.bind(null,a),gi:Ry.bind(null,a),pn:LN.bind(null,a),wi:FN.bind(null,a)},yield s.sharedClientState.start()),yield s.persistence.nn(function(){var c=(0,Se.Z)(function*(h){yield function(i,n){return Ay.apply(this,arguments)}(s.Jo.syncEngine,h),s.gcScheduler&&(h&&!s.gcScheduler.started?s.gcScheduler.start(s.localStore):h||s.gcScheduler.stop())});return function(h){return c.apply(this,arguments)}}())})()}Wo(n){const r=dy();if(!Cw.bt(r))throw new $e(De.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=nI(n.databaseInfo.databaseId,n.databaseInfo.persistenceKey);return new Cw(r,n.asyncQueue,s,n.clientId,n.initialUser)}}class cb{initialize(n,r){var s=this;return(0,Se.Z)(function*(){s.localStore||(s.localStore=n.localStore,s.sharedClientState=n.sharedClientState,s.datastore=s.createDatastore(r),s.remoteStore=s.createRemoteStore(r),s.eventManager=s.createEventManager(r),s.syncEngine=s.createSyncEngine(r,!n.synchronizeTabs),s.sharedClientState.onlineStateHandler=a=>MI(s.syncEngine,a,1),s.remoteStore.remoteSyncer.handleCredentialChange=kI.bind(null,s.syncEngine),yield Ey(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(n){return new Lw}createDatastore(n){const r=Lf(n.databaseInfo.databaseId),s=new pI(n.databaseInfo);return new mI(n.credentials,s,r)}createRemoteStore(n){return r=this.localStore,s=this.datastore,a=n.asyncQueue,c=m=>MI(this.syncEngine,m,0),h=hI.bt()?new hI:new Tw,new DN(r,s,a,c,h);var r,s,a,c,h}createSyncEngine(n,r){return function(s,a,c,h,m,E,C){const S=new NI(s,a,c,h,m,E);return C&&(S.qo=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return(n=(0,Se.Z)(function*(r){const s=Je(r);ze("RemoteStore","RemoteStore shutting down."),s.Kr.add(5),yield gc(s),s.Qr.shutdown(),s.Wr.set("Unknown")}),function(r){return n.apply(this,arguments)})(this.remoteStore);var n}}function db(i,n=10240){let r=0;return{read:()=>(0,Se.Z)(function*(){if(r<i.byteLength){const s={value:i.slice(r,r+n),done:!1};return r+=n,s}return{done:!0}})(),cancel:()=>(0,Se.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Xg{constructor(n){this.observer=n,this.muted=!1}next(n){this.observer.next&&this.Yo(this.observer.next,n)}error(n){this.observer.error?this.Yo(this.observer.error,n):console.error("Uncaught Error in snapshot listener:",n)}Xo(){this.muted=!0}Yo(n,r){this.muted||setTimeout(()=>{this.muted||n(r)},0)}}class LI{constructor(n,r){this.Zo=n,this.N=r,this.metadata=new Jr,this.buffer=new Uint8Array,this.ta=new TextDecoder("utf-8"),this.ea().then(s=>{s&&s.ho()?this.metadata.resolve(s.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==s?void 0:s.payload)}`))},s=>this.metadata.reject(s))}close(){return this.Zo.cancel()}getMetadata(){var n=this;return(0,Se.Z)(function*(){return n.metadata.promise})()}Qo(){var n=this;return(0,Se.Z)(function*(){return yield n.getMetadata(),n.ea()})()}ea(){var n=this;return(0,Se.Z)(function*(){const r=yield n.na();if(null===r)return null;const s=n.ta.decode(r),a=Number(s);isNaN(a)&&n.sa(`length string (${s}) is not valid number`);const c=yield n.ia(a);return new SI(JSON.parse(c),r.length+a)})()}ra(){return this.buffer.findIndex(n=>n==="{".charCodeAt(0))}na(){var n=this;return(0,Se.Z)(function*(){for(;n.ra()<0&&!(yield n.oa()););if(0===n.buffer.length)return null;const r=n.ra();r<0&&n.sa("Reached the end of bundle when a length string is expected.");const s=n.buffer.slice(0,r);return n.buffer=n.buffer.slice(r),s})()}ia(n){var r=this;return(0,Se.Z)(function*(){for(;r.buffer.length<n;)(yield r.oa())&&r.sa("Reached the end of bundle when more is expected.");const s=r.ta.decode(r.buffer.slice(0,n));return r.buffer=r.buffer.slice(n),s})()}sa(n){throw this.Zo.cancel(),new Error(`Invalid bundle format: ${n}`)}oa(){var n=this;return(0,Se.Z)(function*(){const r=yield n.Zo.read();if(!r.done){const s=new Uint8Array(n.buffer.length+r.value.length);s.set(n.buffer),s.set(r.value,n.buffer.length),n.buffer=s}return r.done})()}}class VI{constructor(n){this.datastore=n,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(n){var r=this;return(0,Se.Z)(function*(){if(r.ensureCommitNotCalled(),r.mutations.length>0)throw new $e(De.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const s=yield(a=(0,Se.Z)(function*(c,h){const m=Je(c),E=Lg(m.N)+"/documents",C={documents:h.map(B=>Fg(m.N,B))},S=yield m.Ki("BatchGetDocuments",E,C),N=new Map;S.forEach(B=>{const W=function(i,n){return"found"in n?function(r,s){Nt(!!s.found);const a=ul(r,s.found.name),c=ti(s.found.updateTime),h=new hs({mapValue:{fields:s.found.fields}});return pr.newFoundDocument(a,c,h)}(i,n):"missing"in n?function(r,s){Nt(!!s.missing),Nt(!!s.readTime);const a=ul(r,s.missing),c=ti(s.readTime);return pr.newNoDocument(a,c)}(i,n):ft()}(m.N,B);N.set(W.key.toString(),W)});const O=[];return h.forEach(B=>{const W=N.get(B.toString());Nt(!!W),O.push(W)}),O}),function(c,h){return a.apply(this,arguments)})(r.datastore,n);var a;return s.forEach(a=>r.recordVersion(a)),s})()}set(n,r){this.write(r.toMutation(n,this.precondition(n))),this.writtenDocs.add(n.toString())}update(n,r){try{this.write(r.toMutation(n,this.preconditionForUpdate(n)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(n.toString())}delete(n){this.write(new kd(n,this.precondition(n))),this.writtenDocs.add(n.toString())}commit(){var n=this;return(0,Se.Z)(function*(){if(n.ensureCommitNotCalled(),n.lastWriteError)throw n.lastWriteError;const r=n.readVersions;var s;n.mutations.forEach(s=>{r.delete(s.key.toString())}),r.forEach((s,a)=>{const c=ut.fromPath(a);n.mutations.push(new WE(c,n.precondition(c)))}),yield(s=(0,Se.Z)(function*(a,c){const h=Je(a),m=Lg(h.N)+"/documents",E={writes:c.map(C=>jn(h.N,C))};yield h.Li("Commit",m,E)}),function(a,c){return s.apply(this,arguments)})(n.datastore,n.mutations),n.committed=!0})()}recordVersion(n){let r;if(n.isFoundDocument())r=n.version;else{if(!n.isNoDocument())throw ft();r=We.min()}const s=this.readVersions.get(n.key.toString());if(s){if(!r.isEqual(s))throw new $e(De.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(n.key.toString(),r)}precondition(n){const r=this.readVersions.get(n.toString());return!this.writtenDocs.has(n.toString())&&r?$r.updateTime(r):$r.none()}preconditionForUpdate(n){const r=this.readVersions.get(n.toString());if(!this.writtenDocs.has(n.toString())&&r){if(r.isEqual(We.min()))throw new $e(De.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return $r.updateTime(r)}return $r.exists(!0)}write(n){this.ensureCommitNotCalled(),this.mutations.push(n)}ensureCommitNotCalled(){}}class BN{constructor(n,r,s,a){this.asyncQueue=n,this.datastore=r,this.updateFunction=s,this.deferred=a,this.aa=5,this.rr=new Dw(this.asyncQueue,"transaction_retry")}run(){this.aa-=1,this.ca()}ca(){var n=this;this.rr.Xi((0,Se.Z)(function*(){const r=new VI(n.datastore),s=n.ua(r);s&&s.then(a=>{n.asyncQueue.enqueueAndForget(()=>r.commit().then(()=>{n.deferred.resolve(a)}).catch(c=>{n.ha(c)}))}).catch(a=>{n.ha(a)})}))}ua(n){try{const r=this.updateFunction(n);return!Xl(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}ha(n){this.aa>0&&this.la(n)?(this.aa-=1,this.asyncQueue.enqueueAndForget(()=>(this.ca(),Promise.resolve()))):this.deferred.reject(n)}la(n){if("FirebaseError"===n.name){const r=n.code;return"aborted"===r||"failed-precondition"===r||!PT(r)}return!1}}class jN{constructor(n,r,s){var a=this;this.credentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=_i.UNAUTHENTICATED,this.clientId=pT.I(),this.credentialListener=()=>Promise.resolve(),this.credentials.start(r,function(){var c=(0,Se.Z)(function*(h){ze("FirestoreClient","Received user=",h.uid),yield a.credentialListener(h),a.user=h});return function(h){return c.apply(this,arguments)}}())}getConfiguration(){var n=this;return(0,Se.Z)(function*(){return{asyncQueue:n.asyncQueue,databaseInfo:n.databaseInfo,clientId:n.clientId,credentials:n.credentials,initialUser:n.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(n){this.credentialListener=n}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new $e(De.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var n=this;this.asyncQueue.enterRestrictedMode();const r=new Jr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Se.Z)(function*(){try{n.onlineComponents&&(yield n.onlineComponents.terminate()),n.offlineComponents&&(yield n.offlineComponents.terminate()),n.credentials.shutdown(),r.resolve()}catch(s){const a=Zd(s,"Failed to shutdown persistence");r.reject(a)}})),r.promise}}function UI(i,n){return Xd.apply(this,arguments)}function Xd(){return(Xd=(0,Se.Z)(function*(i,n){i.asyncQueue.verifyOperationInProgress(),ze("FirestoreClient","Initializing OfflineComponentProvider");const r=yield i.getConfiguration();yield n.initialize(r);let s=r.initialUser;i.setCredentialChangeListener(function(){var a=(0,Se.Z)(function*(c){s.isEqual(c)||(yield EN(n.localStore,c),s=c)});return function(c){return a.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=n})).apply(this,arguments)}function BI(i,n){return hb.apply(this,arguments)}function hb(){return(hb=(0,Se.Z)(function*(i,n){i.asyncQueue.verifyOperationInProgress();const r=yield fb(i);ze("FirestoreClient","Initializing OnlineComponentProvider");const s=yield i.getConfiguration();yield n.initialize(r,s),i.setCredentialChangeListener(a=>{return(c=(0,Se.Z)(function*(h,m){const E=Je(h);E.asyncQueue.verifyOperationInProgress(),ze("RemoteStore","RemoteStore received new credentials");const C=uu(E);E.Kr.add(3),yield gc(E),C&&E.Wr.set("Unknown"),yield E.remoteSyncer.handleCredentialChange(m),E.Kr.delete(3),yield zg(E)}),function(h,m){return c.apply(this,arguments)})(n.remoteStore,a);var c}),i.onlineComponents=n})).apply(this,arguments)}function fb(i){return Wf.apply(this,arguments)}function Wf(){return(Wf=(0,Se.Z)(function*(i){return i.offlineComponents||(ze("FirestoreClient","Using default OfflineComponentProvider"),yield UI(i,new UN)),i.offlineComponents})).apply(this,arguments)}function em(i){return Ny.apply(this,arguments)}function Ny(){return(Ny=(0,Se.Z)(function*(i){return i.onlineComponents||(ze("FirestoreClient","Using default OnlineComponentProvider"),yield BI(i,new cb)),i.onlineComponents})).apply(this,arguments)}function pb(i){return fb(i).then(n=>n.persistence)}function gb(i){return fb(i).then(n=>n.localStore)}function zf(i){return em(i).then(n=>n.remoteStore)}function eh(i){return em(i).then(n=>n.syncEngine)}function Kf(i){return mb.apply(this,arguments)}function mb(){return(mb=(0,Se.Z)(function*(i){const n=yield em(i),r=n.eventManager;return r.onListen=xI.bind(null,n.syncEngine),r.onUnlisten=NN.bind(null,n.syncEngine),r})).apply(this,arguments)}function _b(i,n,r={}){const s=new Jr;return i.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return function(a,c,h,m,E){const C=new Xg({next:N=>{c.enqueueAndForget(()=>by(a,S));const O=N.docs.has(h);!O&&N.fromCache?E.reject(new $e(De.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&N.fromCache&&m&&"server"===m.source?E.reject(new $e(De.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):E.resolve(N)},error:N=>E.reject(N)}),S=new Bw(bf(h.path),C,{includeMetadataChanges:!0,uo:!0});return Yd(a,S)}(yield Kf(i),i.asyncQueue,n,r,s)})),s.promise}function yb(i,n,r={}){const s=new Jr;return i.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return function(a,c,h,m,E){const C=new Xg({next:N=>{c.enqueueAndForget(()=>by(a,S)),N.fromCache&&"server"===m.source?E.reject(new $e(De.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):E.resolve(N)},error:N=>E.reject(N)}),S=new Bw(h,C,{includeMetadataChanges:!0,uo:!0});return Yd(a,S)}(yield Kf(i),i.asyncQueue,n,r,s)})),s.promise}class u1{constructor(n,r,s,a,c,h,m,E){this.databaseId=n,this.appId=r,this.persistenceKey=s,this.host=a,this.ssl=c,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.useFetchStreams=E}}class tm{constructor(n,r){this.projectId=n,this.database=r||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(n){return n instanceof tm&&n.projectId===this.projectId&&n.database===this.database}}const vb=new Map;function Zf(i,n,r){if(!r)throw new $e(De.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${n}.`)}function HI(i,n,r,s){if(!0===n&&!0===s)throw new $e(De.INVALID_ARGUMENT,`${i} and ${r} cannot be used together.`)}function GI(i){if(!ut.isDocumentKey(i))throw new $e(De.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Eb(i){if(ut.isDocumentKey(i))throw new $e(De.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function _c(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const n=(r=i).constructor?r.constructor.name:null;return n?`a custom ${n} object`:"an object"}}var r;return"function"==typeof i?"a function":ft()}function wn(i,n){if("_delegate"in i&&(i=i._delegate),!(i instanceof n)){if(n.name===i.constructor.name)throw new $e(De.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=_c(i);throw new $e(De.INVALID_ARGUMENT,`Expected type '${n.name}', but it was: ${r}`)}}return i}function qI(i,n){if(n<=0)throw new $e(De.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${n}.`)}class WI{constructor(n){var r;if(void 0===n.host){if(void 0!==n.ssl)throw new $e(De.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=n.host,this.ssl=null===(r=n.ssl)||void 0===r||r;if(this.credentials=n.credentials,this.ignoreUndefinedProperties=!!n.ignoreUndefinedProperties,void 0===n.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==n.cacheSizeBytes&&n.cacheSizeBytes<1048576)throw new $e(De.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=n.cacheSizeBytes}this.experimentalForceLongPolling=!!n.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!n.experimentalAutoDetectLongPolling,this.useFetchStreams=!!n.useFetchStreams,HI("experimentalForceLongPolling",n.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",n.experimentalAutoDetectLongPolling)}isEqual(n){return this.host===n.host&&this.ssl===n.ssl&&this.credentials===n.credentials&&this.cacheSizeBytes===n.cacheSizeBytes&&this.experimentalForceLongPolling===n.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===n.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===n.ignoreUndefinedProperties&&this.useFetchStreams===n.useFetchStreams}}class nm{constructor(n,r){this._credentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new WI({}),this._settingsFrozen=!1,n instanceof tm?this._databaseId=n:(this._app=n,this._databaseId=function(s){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new $e(De.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new tm(s.options.projectId)}(n))}get app(){if(!this._app)throw new $e(De.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(n){if(this._settingsFrozen)throw new $e(De.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new WI(n),void 0!==n.credentials&&(this._credentials=function(r){if(!r)return new BR;switch(r.type){case"gapi":const s=r.client;return Nt(!("object"!=typeof s||null===s||!s.auth||!s.auth.getAuthHeaderValueForFirstParty)),new $R(s,r.sessionIndex||"0",r.iamToken||null);case"provider":return r.client;default:throw new $e(De.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(n.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=vb.get(n);r&&(ze("ComponentProvider","Removing Datastore"),vb.delete(n),r.terminate())}(this),Promise.resolve()}}class Zn{constructor(n,r,s){this.converter=r,this._key=s,this.type="document",this.firestore=n}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new pl(this.firestore,this.converter,this._key.path.popLast())}withConverter(n){return new Zn(this.firestore,n,this._key)}}class zi{constructor(n,r,s){this.converter=r,this._query=s,this.type="query",this.firestore=n}withConverter(n){return new zi(this.firestore,n,this._query)}}class pl extends zi{constructor(n,r,s){super(n,r,bf(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const n=this._path.popLast();return n.isEmpty()?null:new Zn(this.firestore,null,new ut(n))}withConverter(n){return new pl(this.firestore,n,this._path)}}function th(i,n,...r){if(i=(0,V.m9)(i),Zf("collection","path",n),i instanceof nm){const s=Dn.fromString(n,...r);return Eb(s),new pl(i,null,s)}{if(!(i instanceof Zn||i instanceof pl))throw new $e(De.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Dn.fromString(n,...r));return Eb(s),new pl(i.firestore,null,s)}}function rm(i,n,...r){if(i=(0,V.m9)(i),1===arguments.length&&(n=pT.I()),Zf("doc","path",n),i instanceof nm){const s=Dn.fromString(n,...r);return GI(s),new Zn(i,null,new ut(s))}{if(!(i instanceof Zn||i instanceof pl))throw new $e(De.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Dn.fromString(n,...r));return GI(s),new Zn(i.firestore,i instanceof pl?i.converter:null,new ut(s))}}function zI(i,n){return i=(0,V.m9)(i),n=(0,V.m9)(n),(i instanceof Zn||i instanceof pl)&&(n instanceof Zn||n instanceof pl)&&i.firestore===n.firestore&&i.path===n.path&&i.converter===n.converter}function wb(i,n){return i=(0,V.m9)(i),n=(0,V.m9)(n),i instanceof zi&&n instanceof zi&&i.firestore===n.firestore&&j_(i._query,n._query)&&i.converter===n.converter}class KN{constructor(){this.fa=Promise.resolve(),this.da=[],this.wa=!1,this._a=[],this.ma=null,this.ga=!1,this.ya=!1,this.pa=[],this.rr=new Dw(this,"async_queue_retry"),this.Ea=()=>{const r=Ff();r&&ze("AsyncQueue","Visibility state changed to "+r.visibilityState),this.rr.tr()};const n=Ff();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Ea)}get isShuttingDown(){return this.wa}enqueueAndForget(n){this.enqueue(n)}enqueueAndForgetEvenWhileRestricted(n){this.Ta(),this.Ia(n)}enterRestrictedMode(n){if(!this.wa){this.wa=!0,this.ya=n||!1;const r=Ff();r&&"function"==typeof r.removeEventListener&&r.removeEventListener("visibilitychange",this.Ea)}}enqueue(n){if(this.Ta(),this.wa)return new Promise(()=>{});const r=new Jr;return this.Ia(()=>this.wa&&this.ya?Promise.resolve():(n().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(n){this.enqueueAndForget(()=>(this.da.push(n),this.Aa()))}Aa(){var n=this;return(0,Se.Z)(function*(){if(0!==n.da.length){try{yield n.da[0](),n.da.shift(),n.rr.reset()}catch(r){if(!oc(r))throw r;ze("AsyncQueue","Operation failed with retryable error: "+r)}n.da.length>0&&n.rr.Xi(()=>n.Aa())}})()}Ia(n){const r=this.fa.then(()=>(this.ga=!0,n().catch(s=>{throw this.ma=s,this.ga=!1,kr("INTERNAL UNHANDLED ERROR: ",function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),c}(s)),s}).then(s=>(this.ga=!1,s))));return this.fa=r,r}enqueueAfterDelay(n,r,s){this.Ta(),this.pa.indexOf(n)>-1&&(r=0);const a=wy.createAndSchedule(this,n,r,s,c=>this.Ra(c));return this._a.push(a),a}Ta(){this.ma&&ft()}verifyOperationInProgress(){}ba(){var n=this;return(0,Se.Z)(function*(){let r;do{r=n.fa,yield r}while(r!==n.fa)})()}Pa(n){for(const r of this._a)if(r.timerId===n)return!0;return!1}va(n){return this.ba().then(()=>{this._a.sort((r,s)=>r.targetTimeMs-s.targetTimeMs);for(const r of this._a)if(r.skipDelay(),"all"!==n&&r.timerId===n)break;return this.ba()})}Va(n){this.pa.push(n)}Ra(n){const r=this._a.indexOf(n);this._a.splice(r,1)}}function xy(i){return function(n,r){if("object"!=typeof n||null===n)return!1;const s=n;for(const a of["next","error","complete"])if(a in s&&"function"==typeof s[a])return!0;return!1}(i)}class ZN{constructor(){this._progressObserver={},this._taskCompletionResolver=new Jr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(n,r,s){this._progressObserver={next:n,error:r,complete:s}}catch(n){return this._taskCompletionResolver.promise.catch(n)}then(n,r){return this._taskCompletionResolver.promise.then(n,r)}_completeWith(n){this._updateProgress(n),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(n)}_failWith(n){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(n),this._taskCompletionResolver.reject(n)}_updateProgress(n){this._lastProgress=n,this._progressObserver.next&&this._progressObserver.next(n)}}class Tr extends nm{constructor(n,r){super(n,r),this.type="firestore",this._queue=new KN,this._persistenceKey="name"in n?n.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||KI(this),this._firestoreClient.terminate()}}function oi(i){return i._firestoreClient||KI(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function KI(i){var n;const r=i._freezeSettings(),s=(c=(null===(n=i._app)||void 0===n?void 0:n.options.appId)||"",new u1(i._databaseId,c,i._persistenceKey,(m=r).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var c,m;i._firestoreClient=new jN(i._credentials,i._queue,s)}function ZI(i,n,r){const s=new Jr;return i.asyncQueue.enqueue((0,Se.Z)(function*(){try{yield UI(i,r),yield BI(i,n),s.resolve()}catch(a){if(!("FirebaseError"===(c=a).name?c.code===De.FAILED_PRECONDITION||c.code===De.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw a;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+a),s.reject(a)}var c})).then(()=>s.promise)}function QI(i){if(i._initialized||i._terminated)throw new $e(De.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class cu{constructor(...n){for(let r=0;r<n.length;++r)if(0===n[r].length)throw new $e(De.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xr(n)}isEqual(n){return this._internalPath.isEqual(n._internalPath)}}class ya{constructor(n){this._byteString=n}static fromBase64String(n){try{return new ya(ei.fromBase64String(n))}catch(r){throw new $e(De.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(n){return new ya(ei.fromUint8Array(n))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(n){return this._byteString.isEqual(n._byteString)}}class nh{constructor(n){this._methodName=n}}class Py{constructor(n,r){if(!isFinite(n)||n<-90||n>90)throw new $e(De.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+n);if(!isFinite(r)||r<-180||r>180)throw new $e(De.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=n,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(n){return this._lat===n._lat&&this._long===n._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(n){return sn(this._lat,n._lat)||sn(this._long,n._long)}}const JI=/^__.*__$/;class sx{constructor(n,r,s){this.data=n,this.fieldMask=r,this.fieldTransforms=s}toMutation(n,r){return null!==this.fieldMask?new nu(n,this.data,this.fieldMask,r,this.fieldTransforms):new q_(n,this.data,r,this.fieldTransforms)}}class XI{constructor(n,r,s){this.data=n,this.fieldMask=r,this.fieldTransforms=s}toMutation(n,r){return new nu(n,this.data,this.fieldMask,r,this.fieldTransforms)}}function eD(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ft()}}class Yf{constructor(n,r,s,a,c,h){this.settings=n,this.databaseId=r,this.N=s,this.ignoreUndefinedProperties=a,void 0===c&&this.Sa(),this.fieldTransforms=c||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Da(){return this.settings.Da}Ca(n){return new Yf(Object.assign(Object.assign({},this.settings),n),this.databaseId,this.N,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Na(n){var r;const s=null===(r=this.path)||void 0===r?void 0:r.child(n),a=this.Ca({path:s,xa:!1});return a.ka(n),a}$a(n){var r;const s=null===(r=this.path)||void 0===r?void 0:r.child(n),a=this.Ca({path:s,xa:!1});return a.Sa(),a}Oa(n){return this.Ca({path:void 0,xa:!0})}Fa(n){return du(n,this.settings.methodName,this.settings.Ma||!1,this.path,this.settings.La)}contains(n){return void 0!==this.fieldMask.find(r=>n.isPrefixOf(r))||void 0!==this.fieldTransforms.find(r=>n.isPrefixOf(r.field))}Sa(){if(this.path)for(let n=0;n<this.path.length;n++)this.ka(this.path.get(n))}ka(n){if(0===n.length)throw this.Fa("Document fields must not be empty");if(eD(this.Da)&&JI.test(n))throw this.Fa('Document fields cannot begin and end with "__"')}}class Tb{constructor(n,r,s){this.databaseId=n,this.ignoreUndefinedProperties=r,this.N=s||Lf(n)}Ba(n,r,s,a=!1){return new Yf({Da:n,methodName:r,La:s,path:Xr.emptyPath(),xa:!1,Ma:a},this.databaseId,this.N,this.ignoreUndefinedProperties)}}function yc(i){const n=i._freezeSettings(),r=Lf(i._databaseId);return new Tb(i._databaseId,!!n.ignoreUndefinedProperties,r)}function Qf(i,n,r,s,a,c={}){const h=i.Ba(c.merge||c.mergeFields?2:0,n,r,a);iD("Data must be an object, but it was:",h,s);const m=rD(s,h);let E,C;if(c.merge)E=new Ps(h.fieldMask),C=h.fieldTransforms;else if(c.mergeFields){const S=[];for(const N of c.mergeFields){const O=om(n,N,r);if(!h.contains(O))throw new $e(De.INVALID_ARGUMENT,`Field '${O}' is specified in your field mask but missing from your input data.`);sD(S,O)||S.push(O)}E=new Ps(S),C=h.fieldTransforms.filter(N=>E.covers(N.field))}else E=null,C=h.fieldTransforms;return new sx(new hs(m),E,C)}class im extends nh{_toFieldTransform(n){if(2!==n.Da)throw n.Fa(1===n.Da?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return n.fieldMask.push(n.path),null}isEqual(n){return n instanceof im}}function tD(i,n,r){return new Yf({Da:3,La:n.settings.La,methodName:i._methodName,xa:r},n.databaseId,n.N,n.ignoreUndefinedProperties)}class sm extends nh{_toFieldTransform(n){return new xg(n.path,new Ng)}isEqual(n){return n instanceof sm}}class ox extends nh{constructor(n,r){super(n),this.Ua=r}_toFieldTransform(n){const r=tD(this,n,!0),s=this.Ua.map(c=>Jf(c,r)),a=new Od(s);return new xg(n.path,a)}isEqual(n){return this===n}}class nD extends nh{constructor(n,r){super(n),this.Ua=r}_toFieldTransform(n){const r=tD(this,n,!0),s=this.Ua.map(c=>Jf(c,r)),a=new tc(s);return new xg(n.path,a)}isEqual(n){return this===n}}class ax extends nh{constructor(n,r){super(n),this.qa=r}_toFieldTransform(n){const r=new Cf(n.N,CT(n.N,this.qa));return new xg(n.path,r)}isEqual(n){return this===n}}function My(i,n,r,s){const a=i.Ba(1,n,r);iD("Data must be an object, but it was:",a,s);const c=[],h=hs.empty();Ju(s,(E,C)=>{const S=Db(n,E,r);C=(0,V.m9)(C);const N=a.$a(S);if(C instanceof im)c.push(S);else{const O=Jf(C,N);null!=O&&(c.push(S),h.set(S,O))}});const m=new Ps(c);return new XI(h,m,a.fieldTransforms)}function Oy(i,n,r,s,a,c){const h=i.Ba(1,n,r),m=[om(n,s,r)],E=[a];if(c.length%2!=0)throw new $e(De.INVALID_ARGUMENT,`Function ${n}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let O=0;O<c.length;O+=2)m.push(om(n,c[O])),E.push(c[O+1]);const C=[],S=hs.empty();for(let O=m.length-1;O>=0;--O)if(!sD(C,m[O])){const B=m[O];let W=E[O];W=(0,V.m9)(W);const ue=h.$a(B);if(W instanceof im)C.push(B);else{const Pe=Jf(W,ue);null!=Pe&&(C.push(B),S.set(B,Pe))}}const N=new Ps(C);return new XI(S,N,h.fieldTransforms)}function Ib(i,n,r,s=!1){return Jf(r,i.Ba(s?4:3,n))}function Jf(i,n){if(rh(i=(0,V.m9)(i)))return iD("Unsupported field value:",n,i),rD(i,n);if(i instanceof nh)return function(r,s){if(!eD(s.Da))throw s.Fa(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Fa(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(i,n),null;if(void 0===i&&n.ignoreUndefinedProperties)return null;if(n.path&&n.fieldMask.push(n.path),i instanceof Array){if(n.settings.xa&&4!==n.Da)throw n.Fa("Nested arrays are not supported");return function(r,s){const a=[];let c=0;for(const h of r){let m=Jf(h,s.Oa(c));null==m&&(m={nullValue:"NULL_VALUE"}),a.push(m),c++}return{arrayValue:{values:a}}}(i,n)}return function(r,s){if(null===(r=(0,V.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return CT(s.N,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const a=yi.fromDate(r);return{timestampValue:Fd(s.N,a)}}if(r instanceof yi){const a=new yi(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Fd(s.N,a)}}if(r instanceof Py)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ya)return{bytesValue:LT(s.N,r._byteString)};if(r instanceof Zn){const a=s.databaseId,c=r.firestore._databaseId;if(!c.isEqual(a))throw s.Fa(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:nc(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.Fa(`Unsupported field value: ${_c(r)}`)}(i,n)}function rD(i,n){const r={};return vg(i)?n.path&&n.path.length>0&&n.fieldMask.push(n.path):Ju(i,(s,a)=>{const c=Jf(a,n.Na(s));null!=c&&(r[s]=c)}),{mapValue:{fields:r}}}function rh(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof yi||i instanceof Py||i instanceof ya||i instanceof Zn||i instanceof nh)}function iD(i,n,r){if(!rh(r)||"object"!=typeof(s=r)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=_c(r);throw n.Fa("an object"===s?i+" a custom object":i+" "+s)}var s}function om(i,n,r){if((n=(0,V.m9)(n))instanceof cu)return n._internalPath;if("string"==typeof n)return Db(i,n);throw du("Field path arguments must be of type string or FieldPath.",i,!1,void 0,r)}const ky=new RegExp("[~\\*/\\[\\]]");function Db(i,n,r){if(n.search(ky)>=0)throw du(`Invalid field path (${n}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,r);try{return new cu(...n.split("."))._internalPath}catch(s){throw du(`Invalid field path (${n}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,r)}}function du(i,n,r,s,a){const c=s&&!s.isEmpty(),h=void 0!==a;let m=`Function ${n}() called with invalid data`;r&&(m+=" (via `toFirestore()`)"),m+=". ";let E="";return(c||h)&&(E+=" (found",c&&(E+=` in field ${s}`),h&&(E+=` in document ${a}`),E+=")"),new $e(De.INVALID_ARGUMENT,m+i+E)}function sD(i,n){return i.some(r=>r.isEqual(n))}class Fy{constructor(n,r,s,a,c){this._firestore=n,this._userDataWriter=r,this._key=s,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Zn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const n=new lx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(n)}return this._userDataWriter.convertValue(this._document.data.value)}}get(n){if(this._document){const r=this._document.data.field(so("DocumentSnapshot.get",n));if(null!==r)return this._userDataWriter.convertValue(r)}}}class lx extends Fy{data(){return super.data()}}function so(i,n){return"string"==typeof n?Db(i,n):n instanceof cu?n._internalPath:n._delegate._internalPath}class vc{constructor(n,r){this.hasPendingWrites=n,this.fromCache=r}isEqual(n){return this.hasPendingWrites===n.hasPendingWrites&&this.fromCache===n.fromCache}}class Ec extends Fy{constructor(n,r,s,a,c,h){super(n,r,s,a,h),this._firestore=n,this._firestoreImpl=n,this.metadata=c}exists(){return super.exists()}data(n={}){if(this._document){if(this._converter){const r=new wc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,n)}return this._userDataWriter.convertValue(this._document.data.value,n.serverTimestamps)}}get(n,r={}){if(this._document){const s=this._document.data.field(so("DocumentSnapshot.get",n));if(null!==s)return this._userDataWriter.convertValue(s,r.serverTimestamps)}}}class wc extends Ec{data(n={}){return super.data(n)}}class bc{constructor(n,r,s,a){this._firestore=n,this._userDataWriter=r,this._snapshot=a,this.metadata=new vc(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const n=[];return this.forEach(r=>n.push(r)),n}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(n,r){this._snapshot.docs.forEach(s=>{n.call(r,new wc(this._firestore,this._userDataWriter,s.key,s,new vc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(n={}){const r=!!n.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new $e(De.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map(h=>({type:"added",doc:new wc(s._firestore,s._userDataWriter,h.doc.key,h.doc,new vc(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:c++}))}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(h=>a||3!==h.type).map(h=>{const m=new wc(s._firestore,s._userDataWriter,h.doc.key,h.doc,new vc(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);let E=-1,C=-1;return 0!==h.type&&(E=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),1!==h.type&&(c=c.add(h.doc),C=c.indexOf(h.doc.key)),{type:ux(h.type),doc:m,oldIndex:E,newIndex:C}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function ux(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ft()}}function cx(i,n){return i instanceof Ec&&n instanceof Ec?i._firestore===n._firestore&&i._key.isEqual(n._key)&&(null===i._document?null===n._document:i._document.isEqual(n._document))&&i._converter===n._converter:i instanceof bc&&n instanceof bc&&i._firestore===n._firestore&&wb(i.query,n.query)&&i.metadata.isEqual(n.metadata)&&i._snapshot.isEqual(n._snapshot)}function oD(i){if(Dg(i)&&0===i.explicitOrderBy.length)throw new $e(De.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class am{}function Cc(i,...n){for(const r of n)i=r._apply(i);return i}class Sb extends am{constructor(n,r,s){super(),this.Ka=n,this.ja=r,this.Qa=s,this.type="where"}_apply(n){const r=yc(n.firestore),s=function(a,c,h,m,E,C,S){let N;if(E.isKeyField()){if("array-contains"===C||"array-contains-any"===C)throw new $e(De.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on FieldPath.documentId().`);if("in"===C||"not-in"===C){lm(S,C);const B=[];for(const W of S)B.push(Nb(m,a,W));N={arrayValue:{values:B}}}else N=Nb(m,a,S)}else"in"!==C&&"not-in"!==C&&"array-contains-any"!==C||lm(S,C),N=Ib(h,"where",S,"in"===C||"not-in"===C);const O=Gi.create(E,C,N);return function(B,W){if(W.v()){const Pe=Ag(B);if(null!==Pe&&!Pe.isEqual(W.field))throw new $e(De.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Pe.toString()}' and '${W.field.toString()}'`);const Ze=Sg(B);null!==Ze&&pD(0,W.field,Ze)}const ue=function(Pe,Ze){for(const rt of Pe.filters)if(Ze.indexOf(rt.op)>=0)return rt.op;return null}(B,function(Pe){switch(Pe){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(W.op));if(null!==ue)throw new $e(De.INVALID_ARGUMENT,ue===W.op?`Invalid query. You cannot use more than one '${W.op.toString()}' filter.`:`Invalid query. You cannot use '${W.op.toString()}' filters with '${ue.toString()}' filters.`)}(a,O),O}(n._query,0,r,n.firestore._databaseId,this.Ka,this.ja,this.Qa);return new zi(n.firestore,n.converter,function(a,c){const h=a.filters.concat([c]);return new Xs(a.path,a.collectionGroup,a.explicitOrderBy.slice(),h,a.limit,a.limitType,a.startAt,a.endAt)}(n._query,s))}}class Ab extends am{constructor(n,r){super(),this.Ka=n,this.Wa=r,this.type="orderBy"}_apply(n){const r=function(s,a,c){if(null!==s.startAt)throw new $e(De.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new $e(De.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const h=new ll(a,c);return function(m,E){if(null===Sg(m)){const C=Ag(m);null!==C&&pD(0,C,E.field)}}(s,h),h}(n._query,this.Ka,this.Wa);return new zi(n.firestore,n.converter,function(s,a){const c=s.explicitOrderBy.concat([a]);return new Xs(s.path,s.collectionGroup,c,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(n._query,r))}}class uD extends am{constructor(n,r,s){super(),this.type=n,this.Ga=r,this.za=s}_apply(n){return new zi(n.firestore,n.converter,BE(n._query,this.Ga,this.za))}}class cD extends am{constructor(n,r,s){super(),this.type=n,this.Ha=r,this.Ja=s}_apply(n){const r=fD(n,this.type,this.Ha,this.Ja);return new zi(n.firestore,n.converter,(a=r,new Xs((s=n._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,a,s.endAt)));var s,a}}class Rb extends am{constructor(n,r,s){super(),this.type=n,this.Ha=r,this.Ja=s}_apply(n){const r=fD(n,this.type,this.Ha,this.Ja);return new zi(n.firestore,n.converter,(a=r,new Xs((s=n._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,a)));var s,a}}function fD(i,n,r,s){if(r[0]=(0,V.m9)(r[0]),r[0]instanceof Fy)return function(a,c,h,m,E){if(!m)throw new $e(De.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${h}().`);const C=[];for(const S of tu(a))if(S.field.isKeyField())C.push(FE(c,m.key));else{const N=m.data.field(S.field);if(_a(N))throw new $e(De.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const O=S.field.canonicalString();throw new $e(De.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${O}' (used as the orderBy) does not exist.`)}C.push(N)}return new Tg(C,E)}(i._query,i.firestore._databaseId,n,r[0]._document,s);{const a=yc(i.firestore);return function(c,h,m,E,C,S){const N=c.explicitOrderBy;if(C.length>N.length)throw new $e(De.INVALID_ARGUMENT,`Too many arguments provided to ${E}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const O=[];for(let B=0;B<C.length;B++){const W=C[B];if(N[B].field.isKeyField()){if("string"!=typeof W)throw new $e(De.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${E}(), but got a ${typeof W}`);if(!B_(c)&&-1!==W.indexOf("/"))throw new $e(De.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${E}() must be a plain document ID, but '${W}' contains a slash.`);const ue=c.path.child(Dn.fromString(W));if(!ut.isDocumentKey(ue))throw new $e(De.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${E}() must result in a valid document path, but '${ue}' is not because it contains an odd number of segments.`);const Pe=new ut(ue);O.push(FE(h,Pe))}else{const ue=Ib(m,E,W);O.push(ue)}}return new Tg(O,S)}(i._query,i.firestore._databaseId,a,n,r,s)}}function Nb(i,n,r){if("string"==typeof(r=(0,V.m9)(r))){if(""===r)throw new $e(De.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!B_(n)&&-1!==r.indexOf("/"))throw new $e(De.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const s=n.path.child(Dn.fromString(r));if(!ut.isDocumentKey(s))throw new $e(De.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return FE(i,new ut(s))}if(r instanceof Zn)return FE(i,r._key);throw new $e(De.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${_c(r)}.`)}function lm(i,n){if(!Array.isArray(i)||0===i.length)throw new $e(De.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${n.toString()}' filters.`);if(i.length>10)throw new $e(De.INVALID_ARGUMENT,`Invalid Query. '${n.toString()}' filters support a maximum of 10 elements in the value array.`)}function pD(i,n,r){if(!r.isEqual(n))throw new $e(De.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${n.toString()}' and so you must also use '${n.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${r.toString()}' instead.`)}class Ly{convertValue(n,r="none"){switch(vf(n)){case 0:return null;case 1:return n.booleanValue;case 2:return Fr(n.integerValue||n.doubleValue);case 3:return this.convertTimestamp(n.timestampValue);case 4:return this.convertServerTimestamp(n,r);case 5:return n.stringValue;case 6:return this.convertBytes(Eg(n.bytesValue));case 7:return this.convertReference(n.referenceValue);case 8:return this.convertGeoPoint(n.geoPointValue);case 9:return this.convertArray(n.arrayValue,r);case 10:return this.convertObject(n.mapValue,r);default:throw ft()}}convertObject(n,r){const s={};return Ju(n.fields,(a,c)=>{s[a]=this.convertValue(c,r)}),s}convertGeoPoint(n){return new Py(Fr(n.latitude),Fr(n.longitude))}convertArray(n,r){return(n.values||[]).map(s=>this.convertValue(s,r))}convertServerTimestamp(n,r){switch(r){case"previous":const s=wg(n);return null==s?null:this.convertValue(s,r);case"estimate":return this.convertTimestamp(Xu(n));default:return null}}convertTimestamp(n){const r=Rd(n);return new yi(r.seconds,r.nanos)}convertDocumentKey(n,r){const s=Dn.fromString(n);Nt(XE(s));const a=new tm(s.get(1),s.get(3)),c=new ut(s.popFirst(5));return a.isEqual(r)||kr(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),c}}function ih(i,n,r){let s;return s=i?r&&(r.merge||r.mergeFields)?i.toFirestore(n,r):i.toFirestore(n):n,s}class Vy extends Ly{constructor(n){super(),this.firestore=n}convertBytes(n){return new ya(n)}convertReference(n){const r=this.convertDocumentKey(n,this.firestore._databaseId);return new Zn(this.firestore,null,r)}}class Xf{constructor(n,r){this._firestore=n,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=yc(n)}set(n,r,s){this._verifyNotCommitted();const a=Tc(n,this._firestore),c=ih(a.converter,r,s),h=Qf(this._dataReader,"WriteBatch.set",a._key,c,null!==a.converter,s);return this._mutations.push(h.toMutation(a._key,$r.none())),this}update(n,r,s,...a){this._verifyNotCommitted();const c=Tc(n,this._firestore);let h;return h="string"==typeof(r=(0,V.m9)(r))||r instanceof cu?Oy(this._dataReader,"WriteBatch.update",c._key,r,s,a):My(this._dataReader,"WriteBatch.update",c._key,r),this._mutations.push(h.toMutation(c._key,$r.exists(!0))),this}delete(n){this._verifyNotCommitted();const r=Tc(n,this._firestore);return this._mutations=this._mutations.concat(new kd(r._key,$r.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new $e(De.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Tc(i,n){if((i=(0,V.m9)(i)).firestore!==n)throw new $e(De.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class ep extends Ly{constructor(n){super(),this.firestore=n}convertBytes(n){return new ya(n)}convertReference(n){const r=this.convertDocumentKey(n,this.firestore._databaseId);return new Zn(this.firestore,null,r)}}function gD(i,n,r){i=wn(i,Zn);const s=wn(i.firestore,Tr),a=ih(i.converter,n,r);return gl(s,[Qf(yc(s),"setDoc",i._key,a,null!==i.converter,r).toMutation(i._key,$r.none())])}function mD(i,n,r,...s){i=wn(i,Zn);const a=wn(i.firestore,Tr),c=yc(a);let h;return h="string"==typeof(n=(0,V.m9)(n))||n instanceof cu?Oy(c,"updateDoc",i._key,n,r,s):My(c,"updateDoc",i._key,n),gl(a,[h.toMutation(i._key,$r.exists(!0))])}function bx(i,...n){var r,s,a;i=(0,V.m9)(i);let c={includeMetadataChanges:!1},h=0;"object"!=typeof n[h]||xy(n[h])||(c=n[h],h++);const m={includeMetadataChanges:c.includeMetadataChanges};if(xy(n[h])){const N=n[h];n[h]=null===(r=N.next)||void 0===r?void 0:r.bind(N),n[h+1]=null===(s=N.error)||void 0===s?void 0:s.bind(N),n[h+2]=null===(a=N.complete)||void 0===a?void 0:a.bind(N)}let E,C,S;if(i instanceof Zn)C=wn(i.firestore,Tr),S=bf(i._key.path),E={next:N=>{n[h]&&n[h](xb(C,i,N))},error:n[h+1],complete:n[h+2]};else{const N=wn(i,zi);C=wn(N.firestore,Tr),S=N._query;const O=new ep(C);E={next:B=>{n[h]&&n[h](new bc(C,O,N,B))},error:n[h+1],complete:n[h+2]},oD(i._query)}return function(N,O,B,W){const ue=new Xg(W),Pe=new Bw(O,ue,B);return N.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return Yd(yield Kf(N),Pe)})),()=>{ue.Xo(),N.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return by(yield Kf(N),Pe)}))}}(oi(C),S,m,E)}function gl(i,n){return function(r,s){const a=new Jr;return r.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return function(i,n,r){return Zw.apply(this,arguments)}(yield eh(r),s,a)})),a.promise}(oi(i),n)}function xb(i,n,r){const s=r.docs.get(n._key),a=new ep(i);return new Ec(i,a,n._key,s,new vc(r.hasPendingWrites,r.fromCache),n.converter)}class Tx extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=yc(n)}get(n){const r=Tc(n,this._firestore),s=new Vy(this._firestore);return this._transaction.lookup([r._key]).then(a=>{if(!a||1!==a.length)return ft();const c=a[0];if(c.isFoundDocument())return new Fy(this._firestore,s,c.key,c,r.converter);if(c.isNoDocument())return new Fy(this._firestore,s,r._key,null,r.converter);throw ft()})}set(n,r,s){const a=Tc(n,this._firestore),c=ih(a.converter,r,s),h=Qf(this._dataReader,"Transaction.set",a._key,c,null!==a.converter,s);return this._transaction.set(a._key,h),this}update(n,r,s,...a){const c=Tc(n,this._firestore);let h;return h="string"==typeof(r=(0,V.m9)(r))||r instanceof cu?Oy(this._dataReader,"Transaction.update",c._key,r,s,a):My(this._dataReader,"Transaction.update",c._key,r),this._transaction.update(c._key,h),this}delete(n){const r=Tc(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(n,r){super(n,r),this._firestore=n}get(n){const r=Tc(n,this._firestore),s=new ep(this._firestore);return super.get(n).then(a=>new Ec(this._firestore,s,r._key,a._document,new vc(!1,!1),r.converter))}}function jy(i,n){if(void 0===n)return{merge:!1};if(void 0!==n.mergeFields&&void 0!==n.merge)throw new $e("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return n}function Pb(){if("undefined"==typeof Uint8Array)throw new $e("unimplemented","Uint8Arrays are not available in this environment.")}function $y(){if("undefined"==typeof atob)throw new $e("unimplemented","Blobs are unavailable in Firestore in this environment.")}(function(i){Qu=i})(as.SDK_VERSION),(0,as._registerComponent)(new Vi.wA("firestore",(i,{options:n})=>{const r=i.getProvider("app").getImmediate(),s=new Tr(r,new jR(i.getProvider("auth-internal")));return n=Object.assign({useFetchStreams:!0},n),s._setSettings(n),s},"PUBLIC")),(0,as.registerVersion)("@firebase/firestore","3.1.0",void 0);class tp{constructor(n){this._delegate=n}static fromBase64String(n){return $y(),new tp(ya.fromBase64String(n))}static fromUint8Array(n){return Pb(),new tp(ya.fromUint8Array(n))}toBase64(){return $y(),this._delegate.toBase64()}toUint8Array(){return Pb(),this._delegate.toUint8Array()}isEqual(n){return this._delegate.isEqual(n._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Hy(i){return function(i,n){if("object"!=typeof i||null===i)return!1;const r=i;for(const s of["next","error","complete"])if(s in r&&"function"==typeof r[s])return!0;return!1}(i)}class Nx{enableIndexedDbPersistence(n,r){return function(i,n){QI(i=wn(i,Tr));const r=oi(i),s=i._freezeSettings(),a=new cb;return ZI(r,a,new lb(a,s.cacheSizeBytes,null==n?void 0:n.forceOwnership))}(n._delegate,{forceOwnership:r})}enableMultiTabIndexedDbPersistence(n){return function(i){QI(i=wn(i,Tr));const n=oi(i),r=i._freezeSettings(),s=new cb;return ZI(n,s,new ub(s,r.cacheSizeBytes))}(n._delegate)}clearIndexedDbPersistence(n){return function(i){if(i._initialized&&!i._terminated)throw new $e(De.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const n=new Jr;return i._queue.enqueueAndForgetEvenWhileRestricted((0,Se.Z)(function*(){try{yield(r=(0,Se.Z)(function*(s){if(!Ho.bt())return Promise.resolve();const a=s+"main";yield Ho.delete(a)}),function(s){return r.apply(this,arguments)})(nI(i._databaseId,i._persistenceKey)),n.resolve()}catch(r){n.reject(r)}var r})),n.promise}(n._delegate)}}class Mb{constructor(n,r,s){this._delegate=r,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},n instanceof tm||(this._appCompat=n)}get _databaseId(){return this._delegate._databaseId}settings(n){const r=this._delegate._getSettings();!n.merge&&r.host!==n.host&&yg("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),n.merge&&delete(n=Object.assign(Object.assign({},r),n)).merge,this._delegate._setSettings(n)}useEmulator(n,r,s={}){!function(i,n,r,s={}){var a;const c=(i=wn(i,nm))._getSettings();if("firestore.googleapis.com"!==c.host&&c.host!==n&&yg("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},c),{host:`${n}:${r}`,ssl:!1})),s.mockUserToken){let h,m;if("string"==typeof s.mockUserToken)h=s.mockUserToken,m=_i.MOCK_USER;else{h=(0,V.Sg)(s.mockUserToken,null===(a=i._app)||void 0===a?void 0:a.options.projectId);const E=s.mockUserToken.sub||s.mockUserToken.user_id;if(!E)throw new $e(De.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new _i(E)}i._credentials=new ma(new hT(h,m))}}(this._delegate,n,r,s)}enableNetwork(){return function(i){return function(i){return i.asyncQueue.enqueue((0,Se.Z)(function*(){const n=yield pb(i),r=yield zf(i);return n.setNetworkEnabled(!0),function(s){const a=Je(s);return a.Kr.delete(0),zg(a)}(r)}))}(oi(i=wn(i,Tr)))}(this._delegate)}disableNetwork(){return function(i){return function(i){return i.asyncQueue.enqueue((0,Se.Z)(function*(){const n=yield pb(i),r=yield zf(i);return n.setNetworkEnabled(!1),(s=(0,Se.Z)(function*(a){const c=Je(a);c.Kr.add(0),yield gc(c),c.Wr.set("Offline")}),function(a){return s.apply(this,arguments)})(r);var s}))}(oi(i=wn(i,Tr)))}(this._delegate)}enablePersistence(n){let r=!1,s=!1;return n&&(r=!!n.synchronizeTabs,s=!!n.experimentalForceOwningTab,HI("synchronizeTabs",r,"experimentalForceOwningTab",s)),r?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(i){return function(n){const r=new Jr;return n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return function(i,n){return eb.apply(this,arguments)}(yield eh(n),r)})),r.promise}(oi(i=wn(i,Tr)))}(this._delegate)}onSnapshotsInSync(n){return function(i,n){return function(i,n){const r=new Xg(n);return i.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return s=yield Kf(i),a=r,Je(s).Zr.add(a),void a.next();var s,a})),()=>{r.Xo(),i.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return s=yield Kf(i),a=r,void Je(s).Zr.delete(a);var s,a}))}}(oi(i=wn(i,Tr)),xy(n)?n:{next:n})}(this._delegate,n)}get app(){if(!this._appCompat)throw new $e("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(n){try{return new Wo(this,th(this._delegate,n))}catch(r){throw jt(r,"collection()","Firestore.collection()")}}doc(n){try{return new Ki(this,rm(this._delegate,n))}catch(r){throw jt(r,"doc()","Firestore.doc()")}}collectionGroup(n){try{return new _t(this,function(i,n){if(i=wn(i,nm),Zf("collectionGroup","collection id",n),n.indexOf("/")>=0)throw new $e(De.INVALID_ARGUMENT,`Invalid collection ID '${n}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new zi(i,null,(r=n,new Xs(Dn.emptyPath(),r)));var r}(this._delegate,n))}catch(r){throw jt(r,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(n){return function(i,n){return function(i,n){const r=new Jr;return i.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){const s=yield(a=i,em(a).then(c=>c.datastore));var a;new BN(i.asyncQueue,s,n,r).run()})),r.promise}(oi(i),r=>n(new Tx(i,r)))}(this._delegate,r=>n(new um(this,r)))}batch(){return oi(this._delegate),new cm(new Xf(this._delegate,n=>gl(this._delegate,n)))}loadBundle(n){return function(i,n){const r=oi(i=wn(i,Tr)),s=new ZN;return function(i,n,r,s){const a=function(c,h){let m;return m="string"==typeof c?(new TextEncoder).encode(c):c,E=function(E,C){if(E instanceof Uint8Array)return db(E,C);if(E instanceof ArrayBuffer)return db(new Uint8Array(E),C);if(E instanceof ReadableStream)return E.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new LI(E,h);var E}(r,Lf(n));i.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){!function(i,n,r){const s=Je(i);var a;(a=(0,Se.Z)(function*(c,h,m){try{const E=yield h.getMetadata();if(yield function(O,B){const W=Je(O),ue=ti(B.createTime);return W.persistence.runTransaction("hasNewerBundle","readonly",Pe=>W.Je.getBundleMetadata(Pe,B.id)).then(Pe=>!!Pe&&Pe.createTime.compareTo(ue)>=0)}(c.localStore,E))return yield h.close(),void m._completeWith((O=E,{taskState:"Success",documentsLoaded:O.totalDocuments,bytesLoaded:O.totalBytes,totalDocuments:O.totalDocuments,totalBytes:O.totalBytes}));m._updateProgress(Yg(E));const C=new $w(E,c.localStore,h.N);let S=yield h.Qo();for(;S;){const O=yield C.fo(S);O&&m._updateProgress(O),S=yield h.Qo()}const N=yield C.complete();yield fl(c,N.Tn,void 0),yield function(O,B){const W=Je(O);return W.persistence.runTransaction("Save bundle","readwrite",ue=>W.Je.saveBundleMetadata(ue,B))}(c.localStore,E),m._completeWith(N.progress)}catch(E){yg("SyncEngine",`Loading bundle failed with ${E}`),m._failWith(E)}var O}),function(c,h,m){return a.apply(this,arguments)})(s,n,r).then(()=>{s.sharedClientState.notifyBundleLoaded()})}(yield eh(i),a,s)}))}(r,i._databaseId,n,s),s}(this._delegate,n)}namedQuery(n){return function(i,n){return function(i,n){return i.asyncQueue.enqueue((0,Se.Z)(function*(){return function(r,s){const a=Je(r);return a.persistence.runTransaction("Get named query","readonly",c=>a.Je.getNamedQuery(c,s))}(yield gb(i),n)}))}(oi(i=wn(i,Tr)),n).then(r=>r?new zi(i,null,r.query):null)}(this._delegate,n).then(r=>r?new _t(this,r):null)}}class Gy extends Ly{constructor(n){super(),this.firestore=n}convertBytes(n){return new tp(new ya(n))}convertReference(n){const r=this.convertDocumentKey(n,this.firestore._databaseId);return Ki.forKey(r,this.firestore,null)}}class um{constructor(n,r){this._firestore=n,this._delegate=r,this._userDataWriter=new Gy(n)}get(n){const r=rp(n);return this._delegate.get(r).then(s=>new fu(this._firestore,new Ec(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,r.converter)))}set(n,r,s){const a=rp(n);return s?(jy("Transaction.set",s),this._delegate.set(a,r,s)):this._delegate.set(a,r),this}update(n,r,s,...a){const c=rp(n);return 2===arguments.length?this._delegate.update(c,r):this._delegate.update(c,r,s,...a),this}delete(n){const r=rp(n);return this._delegate.delete(r),this}}class cm{constructor(n){this._delegate=n}set(n,r,s){const a=rp(n);return s?(jy("WriteBatch.set",s),this._delegate.set(a,r,s)):this._delegate.set(a,r),this}update(n,r,s,...a){const c=rp(n);return 2===arguments.length?this._delegate.update(c,r):this._delegate.update(c,r,s,...a),this}delete(n){const r=rp(n);return this._delegate.delete(r),this}commit(){return this._delegate.commit()}}class np{constructor(n,r,s){this._firestore=n,this._userDataWriter=r,this._delegate=s}fromFirestore(n,r){const s=new wc(this._firestore._delegate,this._userDataWriter,n._key,n._document,n.metadata,null);return this._delegate.fromFirestore(new qy(this._firestore,s),null!=r?r:{})}toFirestore(n,r){return r?this._delegate.toFirestore(n,r):this._delegate.toFirestore(n)}static getInstance(n,r){const s=np.INSTANCES;let a=s.get(n);a||(a=new WeakMap,s.set(n,a));let c=a.get(r);return c||(c=new np(n,new Gy(n),r),a.set(r,c)),c}}np.INSTANCES=new WeakMap;class Ki{constructor(n,r){this.firestore=n,this._delegate=r,this._userDataWriter=new Gy(n)}static forPath(n,r,s){if(n.length%2!=0)throw new $e("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${n.canonicalString()} has ${n.length}`);return new Ki(r,new Zn(r._delegate,s,new ut(n)))}static forKey(n,r,s){return new Ki(r,new Zn(r._delegate,s,n))}get id(){return this._delegate.id}get parent(){return new Wo(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(n){try{return new Wo(this.firestore,th(this._delegate,n))}catch(r){throw jt(r,"collection()","DocumentReference.collection()")}}isEqual(n){return(n=(0,V.m9)(n))instanceof Zn&&zI(this._delegate,n)}set(n,r){r=jy("DocumentReference.set",r);try{return r?gD(this._delegate,n,r):gD(this._delegate,n)}catch(s){throw jt(s,"setDoc()","DocumentReference.set()")}}update(n,r,...s){try{return 1===arguments.length?mD(this._delegate,n):mD(this._delegate,n,r,...s)}catch(a){throw jt(a,"updateDoc()","DocumentReference.update()")}}delete(){return function(i){return gl(wn(i.firestore,Tr),[new kd(i._key,$r.none())])}(this._delegate)}onSnapshot(...n){const r=hu(n),s=oh(n,a=>new fu(this.firestore,new Ec(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return bx(this._delegate,r,s)}get(n){let r;return r="cache"===(null==n?void 0:n.source)?function(i){i=wn(i,Zn);const n=wn(i.firestore,Tr),r=oi(n),s=new ep(n);return function(i,n){const r=new Jr;return i.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return(s=(0,Se.Z)(function*(a,c,h){try{const m=yield function(E,C){const S=Je(E);return S.persistence.runTransaction("read document","readonly",N=>S.Qn.An(N,C))}(a,c);m.isFoundDocument()?h.resolve(m):m.isNoDocument()?h.resolve(null):h.reject(new $e(De.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const E=Zd(m,`Failed to get document '${c} from cache`);h.reject(E)}}),function(a,c,h){return s.apply(this,arguments)})(yield gb(i),n,r);var s})),r.promise}(r,i._key).then(a=>new Ec(n,s,i._key,a,new vc(null!==a&&a.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===(null==n?void 0:n.source)?function(i){i=wn(i,Zn);const n=wn(i.firestore,Tr);return _b(oi(n),i._key,{source:"server"}).then(r=>xb(n,i,r))}(this._delegate):function(i){i=wn(i,Zn);const n=wn(i.firestore,Tr);return _b(oi(n),i._key).then(r=>xb(n,i,r))}(this._delegate),r.then(s=>new fu(this.firestore,new Ec(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(n){return new Ki(this.firestore,this._delegate.withConverter(n?np.getInstance(this.firestore,n):null))}}function jt(i,n,r){return i.message=i.message.replace(n,r),i}function hu(i){for(const n of i)if("object"==typeof n&&!Hy(n))return n;return{}}function oh(i,n){var r,s;let a;return a=Hy(i[0])?i[0]:Hy(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:c=>{a.next&&a.next(n(c))},error:null===(r=a.error)||void 0===r?void 0:r.bind(a),complete:null===(s=a.complete)||void 0===s?void 0:s.bind(a)}}class fu{constructor(n,r){this._firestore=n,this._delegate=r}get ref(){return new Ki(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(n){return this._delegate.data(n)}get(n,r){return this._delegate.get(n,r)}isEqual(n){return cx(this._delegate,n._delegate)}}class qy extends fu{data(n){const r=this._delegate.data(n);return function(i,n){i||ft()}(void 0!==r),r}}class _t{constructor(n,r){this.firestore=n,this._delegate=r,this._userDataWriter=new Gy(n)}where(n,r,s){try{return new _t(this.firestore,Cc(this._delegate,function(i,n,r){const s=n,a=so("where",i);return new Sb(a,s,r)}(n,r,s)))}catch(a){throw jt(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(n,r){try{return new _t(this.firestore,Cc(this._delegate,function(i,n="asc"){const r=n,s=so("orderBy",i);return new Ab(s,r)}(n,r)))}catch(s){throw jt(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(n){try{return new _t(this.firestore,Cc(this._delegate,function(i){return qI("limit",i),new uD("limit",i,"F")}(n)))}catch(r){throw jt(r,"limit()","Query.limit()")}}limitToLast(n){try{return new _t(this.firestore,Cc(this._delegate,function(i){return qI("limitToLast",i),new uD("limitToLast",i,"L")}(n)))}catch(r){throw jt(r,"limitToLast()","Query.limitToLast()")}}startAt(...n){try{return new _t(this.firestore,Cc(this._delegate,function(...i){return new cD("startAt",i,!0)}(...n)))}catch(r){throw jt(r,"startAt()","Query.startAt()")}}startAfter(...n){try{return new _t(this.firestore,Cc(this._delegate,function(...i){return new cD("startAfter",i,!1)}(...n)))}catch(r){throw jt(r,"startAfter()","Query.startAfter()")}}endBefore(...n){try{return new _t(this.firestore,Cc(this._delegate,function(...i){return new Rb("endBefore",i,!0)}(...n)))}catch(r){throw jt(r,"endBefore()","Query.endBefore()")}}endAt(...n){try{return new _t(this.firestore,Cc(this._delegate,function(...i){return new Rb("endAt",i,!1)}(...n)))}catch(r){throw jt(r,"endAt()","Query.endAt()")}}isEqual(n){return wb(this._delegate,n._delegate)}get(n){let r;return r="cache"===(null==n?void 0:n.source)?function(i){i=wn(i,zi);const n=wn(i.firestore,Tr),r=oi(n),s=new ep(n);return function(i,n){const r=new Jr;return i.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return(s=(0,Se.Z)(function*(a,c,h){try{const m=yield Gg(a,c,!0),E=new qw(c,m.Gn),C=E.Io(m.documents),S=E.applyChanges(C,!1);h.resolve(S.snapshot)}catch(m){const E=Zd(m,`Failed to execute query '${c} against cache`);h.reject(E)}}),function(a,c,h){return s.apply(this,arguments)})(yield gb(i),n,r);var s})),r.promise}(r,i._query).then(a=>new bc(n,s,i,a))}(this._delegate):"server"===(null==n?void 0:n.source)?function(i){i=wn(i,zi);const n=wn(i.firestore,Tr),r=oi(n),s=new ep(n);return yb(r,i._query,{source:"server"}).then(a=>new bc(n,s,i,a))}(this._delegate):function(i){i=wn(i,zi);const n=wn(i.firestore,Tr),r=oi(n),s=new ep(n);return oD(i._query),yb(r,i._query).then(a=>new bc(n,s,i,a))}(this._delegate),r.then(s=>new dm(this.firestore,new bc(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...n){const r=hu(n),s=oh(n,a=>new dm(this.firestore,new bc(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return bx(this._delegate,r,s)}withConverter(n){return new _t(this.firestore,this._delegate.withConverter(n?np.getInstance(this.firestore,n):null))}}class qo{constructor(n,r){this._firestore=n,this._delegate=r}get type(){return this._delegate.type}get doc(){return new qy(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class dm{constructor(n,r){this._firestore=n,this._delegate=r}get query(){return new _t(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(n=>new qy(this._firestore,n))}docChanges(n){return this._delegate.docChanges(n).map(r=>new qo(this._firestore,r))}forEach(n,r){this._delegate.forEach(s=>{n.call(r,new qy(this._firestore,s))})}isEqual(n){return cx(this._delegate,n._delegate)}}class Wo extends _t{constructor(n,r){super(n,r),this.firestore=n,this._delegate=r}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const n=this._delegate.parent;return n?new Ki(this.firestore,n):null}doc(n){try{return new Ki(this.firestore,void 0===n?rm(this._delegate):rm(this._delegate,n))}catch(r){throw jt(r,"doc()","CollectionReference.doc()")}}add(n){return function(i,n){const r=wn(i.firestore,Tr),s=rm(i),a=ih(i.converter,n);return gl(r,[Qf(yc(i.firestore),"addDoc",s._key,a,null!==i.converter,{}).toMutation(s._key,$r.exists(!1))]).then(()=>s)}(this._delegate,n).then(r=>new Ki(this.firestore,r))}isEqual(n){return zI(this._delegate,n._delegate)}withConverter(n){return new Wo(this.firestore,this._delegate.withConverter(n?np.getInstance(this.firestore,n):null))}}function rp(i){return wn(i,Zn)}class Wy{constructor(...n){this._delegate=new cu(...n)}static documentId(){return new Wy(Xr.keyField().canonicalString())}isEqual(n){return(n=(0,V.m9)(n))instanceof cu&&this._delegate._internalPath.isEqual(n._internalPath)}}class Ic{constructor(n){this._delegate=n}static serverTimestamp(){const n=new sm("serverTimestamp");return n._methodName="FieldValue.serverTimestamp",new Ic(n)}static delete(){const n=new im("deleteField");return n._methodName="FieldValue.delete",new Ic(n)}static arrayUnion(...n){const r=function(...i){return new ox("arrayUnion",i)}(...n);return r._methodName="FieldValue.arrayUnion",new Ic(r)}static arrayRemove(...n){const r=function(...i){return new nD("arrayRemove",i)}(...n);return r._methodName="FieldValue.arrayRemove",new Ic(r)}static increment(n){const r=function(i){return new ax("increment",i)}(n);return r._methodName="FieldValue.increment",new Ic(r)}isEqual(n){return this._delegate.isEqual(n._delegate)}}const p1={Firestore:Mb,GeoPoint:Py,Timestamp:yi,Blob:tp,Transaction:um,WriteBatch:cm,DocumentReference:Ki,DocumentSnapshot:fu,Query:_t,QueryDocumentSnapshot:qy,QuerySnapshot:dm,CollectionReference:Wo,FieldPath:Wy,FieldValue:Ic,setLogLevel:function(i){!function(i){Jl.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function(i){(function(i,n){i.INTERNAL.registerComponent(new Vi.wA("firestore-compat",r=>((n,r)=>new Mb(n,r,new Nx))(r.getProvider("app-compat").getImmediate(),r.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},p1)))})(i),i.registerVersion("@firebase/firestore-compat","0.1.3")}(Qp.Z);var Yn=$(9765),rr=$(6682),ps=$(309),ah=$(5345);function ai(i,n){return"function"==typeof n?r=>r.pipe(ai((s,a)=>(0,Rn.D)(i(s,a)).pipe((0,mt.U)((c,h)=>n(s,c,a,h))))):r=>r.lift(new vD(i))}class vD{constructor(n){this.project=n}call(n,r){return r.subscribe(new Ob(n,this.project))}}class Ob extends ah.Ds{constructor(n,r){super(n),this.project=r,this.index=0}_next(n){let r;const s=this.index++;try{r=this.project(n,s)}catch(a){return void this.destination.error(a)}this._innerSub(r)}_innerSub(n){const r=this.innerSubscription;r&&r.unsubscribe();const s=new ah.IY(this),a=this.destination;a.add(s),this.innerSubscription=(0,ah.ft)(n,s),this.innerSubscription!==s&&a.add(this.innerSubscription)}_complete(){const{innerSubscription:n}=this;(!n||n.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(n){this.destination.next(n)}}var ip=$(7771),sp=$(5319),ED=$(7971),lh=$(8858);class Mx extends Yn.xQ{constructor(n=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,s){super(),this.scheduler=s,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=n<1?1:n,this._windowTime=r<1?1:r,r===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(n){if(!this.isStopped){const r=this._events;r.push(n),r.length>this._bufferSize&&r.shift()}super.next(n)}nextTimeWindow(n){this.isStopped||(this._events.push(new wD(this._getNow(),n)),this._trimBufferThenGetEvents()),super.next(n)}_subscribe(n){const r=this._infiniteTimeWindow,s=r?this._events:this._trimBufferThenGetEvents(),a=this.scheduler,c=s.length;let h;if(this.closed)throw new ED.N;if(this.isStopped||this.hasError?h=sp.w.EMPTY:(this.observers.push(n),h=new lh.W(this,n)),a&&n.add(n=new ps.ht(n,a)),r)for(let m=0;m<c&&!n.closed;m++)n.next(s[m]);else for(let m=0;m<c&&!n.closed;m++)n.next(s[m].value);return this.hasError?n.error(this.thrownError):this.isStopped&&n.complete(),h}_getNow(){return(this.scheduler||ip.c).now()}_trimBufferThenGetEvents(){const n=this._getNow(),r=this._bufferSize,s=this._windowTime,a=this._events,c=a.length;let h=0;for(;h<c&&!(n-a[h].time<s);)h++;return c>r&&(h=Math.max(h,c-r)),h>0&&a.splice(0,h),a}}class wD{constructor(n,r){this.time=n,this.value=r}}function zy(i,n,r){let s;return s=i&&"object"==typeof i?i:{bufferSize:i,windowTime:n,refCount:!1,scheduler:r},a=>a.lift(function({bufferSize:i=Number.POSITIVE_INFINITY,windowTime:n=Number.POSITIVE_INFINITY,refCount:r,scheduler:s}){let a,h,c=0,m=!1,E=!1;return function(S){let N;c++,!a||m?(m=!1,a=new Mx(i,n,s),N=a.subscribe(this),h=S.subscribe({next(O){a.next(O)},error(O){m=!0,a.error(O)},complete(){E=!0,h=void 0,a.complete()}}),E&&(h=void 0)):N=a.subscribe(this),this.add(()=>{c--,N.unsubscribe(),N=void 0,h&&!E&&r&&0===c&&(h.unsubscribe(),h=void 0,a=void 0)})}}(s))}const fm=(()=>{function i(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return i.prototype=Object.create(Error.prototype),i})(),CD=(()=>{function i(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return i.prototype=Object.create(Error.prototype),i})();var va=$(9193);function Ky(i){return n=>0===i?(0,va.c)():n.lift(new TD(i))}class TD{constructor(n){if(this.total=n,this.total<0)throw new CD}call(n,r){return r.subscribe(new ID(n,this.total))}}class ID extends fr.L{constructor(n,r){super(n),this.total=r,this.count=0}_next(n){const r=this.total,s=++this.count;s<=r&&(this.destination.next(n),s===r&&(this.destination.complete(),this.unsubscribe()))}}function gm(i=null){return n=>n.lift(new Ox(i))}class Ox{constructor(n){this.defaultValue=n}call(n,r){return r.subscribe(new kb(n,this.defaultValue))}}class kb extends fr.L{constructor(n,r){super(n),this.defaultValue=r,this.isEmpty=!0}_next(n){this.isEmpty=!1,this.destination.next(n)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function Zy(i=Ft){return n=>n.lift(new g1(i))}class g1{constructor(n){this.errorFactory=n}call(n,r){return r.subscribe(new m1(n,this.errorFactory))}}class m1 extends fr.L{constructor(n,r){super(n),this.errorFactory=r,this.hasValue=!1}_next(n){this.hasValue=!0,this.destination.next(n)}_complete(){if(this.hasValue)return this.destination.complete();{let n;try{n=this.errorFactory()}catch(r){n=r}this.destination.error(n)}}}function Ft(){return new fm}var kx=$(4487);function Ea(i,n){const r=arguments.length>=2;return s=>s.pipe(i?xi((a,c)=>i(a,c,s)):kx.y,Ky(1),r?gm(n):Zy(()=>new fm))}function DD(i,n){return n?ai(()=>i,n):ai(()=>i)}var Fb=$(3101);$(2329);const Yy=new Map,Ux={activated:!1,tokenObservers:[]},D1={initialized:!1,enabled:!1};function gs(i){return Yy.get(i)||Ux}function ml(i,n){Yy.set(i,n)}function Qy(){return D1}class $x{constructor(n,r,s,a,c){if(this.operation=n,this.retryPolicy=r,this.getWaitDuration=s,this.lowerBound=a,this.upperBound=c,this.pending=null,this.nextErrorWaitInterval=a,a>c)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(n){var r=this;return(0,Se.Z)(function*(){r.stop();try{r.pending=new V.BH,yield function(i){return new Promise(n=>{setTimeout(n,i)})}(r.getNextRun(n)),r.pending.resolve(),yield r.pending.promise,r.pending=new V.BH,yield r.operation(),r.pending.resolve(),yield r.pending.promise,r.process(!0).catch(()=>{})}catch(s){r.retryPolicy(s)?r.process(!1).catch(()=>{}):r.stop()}})()}getNextRun(n){if(n)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const r=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),r}}}const Mi=new V.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error."});function Ub(i){if(!gs(i).activated)throw Mi.create("use-before-activation",{appName:i.name})}function PD(i,n){return Bb.apply(this,arguments)}function Bb(){return(Bb=(0,Se.Z)(function*({url:i,body:n},r){const s={"Content-Type":"application/json"},a=r.getImmediate({optional:!0});a&&(s["X-Firebase-Client"]=a.getPlatformInfoString());const c={method:"POST",body:JSON.stringify(n),headers:s};let h,m;try{h=yield fetch(i,c)}catch(N){throw Mi.create("fetch-network-error",{originalErrorMessage:N.message})}if(200!==h.status)throw Mi.create("fetch-status-error",{httpStatus:h.status});try{m=yield h.json()}catch(N){throw Mi.create("fetch-parse-error",{originalErrorMessage:N.message})}const E=m.ttl.match(/^([\d.]+)(s)$/);if(!E||!E[2]||isNaN(Number(E[1])))throw Mi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const C=1e3*Number(E[1]),S=Date.now();return{token:m.attestationToken,expireTimeMillis:S+C,issuedAtTimeMillis:S}})).apply(this,arguments)}function zx(i,n){const{projectId:r,appId:s,apiKey:a}=i.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${r}/apps/${s}:exchangeDebugToken?key=${a}`,body:{debug_token:n}}}const mm="firebase-app-check-store";let jb=null;function Yx(){return jb||(jb=new Promise((i,n)=>{try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=s=>{i(s.target.result)},r.onerror=s=>{var a;n(Mi.create("storage-open",{originalErrorMessage:null===(a=s.target.error)||void 0===a?void 0:a.message}))},r.onupgradeneeded=s=>{const a=s.target.result;switch(s.oldVersion){case 0:a.createObjectStore(mm,{keyPath:"compositeKey"})}}}catch(r){n(Mi.create("storage-open",{originalErrorMessage:r.message}))}}),jb)}function Hb(){return(Hb=(0,Se.Z)(function*(i,n){const s=(yield Yx()).transaction(mm,"readwrite"),c=s.objectStore(mm).put({compositeKey:i,value:n});return new Promise((h,m)=>{c.onsuccess=E=>{h()},s.onerror=E=>{var C;m(Mi.create("storage-set",{originalErrorMessage:null===(C=E.target.error)||void 0===C?void 0:C.message}))}})})).apply(this,arguments)}const ev=new cn.Yd("@firebase/app-check");function Gb(i,n){return(0,V.hl)()?function(i,n){return function(i,n){return Hb.apply(this,arguments)}(function(i){return`${i.options.appId}-${i.name}`}(i),n)}(i,n).catch(r=>{ev.warn(`Failed to write token to IndexedDB. Error: ${r}`)}):Promise.resolve()}function FD(){return Qy().enabled}function qb(){return tv.apply(this,arguments)}function tv(){return(tv=(0,Se.Z)(function*(){const i=Qy();if(i.enabled&&i.token)return i.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const eP={error:"UNKNOWN_ERROR"};function tP(i){return V.US.encodeString(JSON.stringify(i),!1)}function nv(i){return rv.apply(this,arguments)}function rv(){return(rv=(0,Se.Z)(function*(i,n=!1){const r=i.app;Ub(r);const s=gs(r);let c,h,a=s.token;if(!a){const m=yield s.cachedTokenPromise;m&&_l(m)&&(a=m,ml(r,Object.assign(Object.assign({},s),{token:a})),BD(r,{token:a.token}))}if(!n&&a&&_l(a))return{token:a.token};if(FD()){const m=yield PD(zx(r,yield qb()),i.platformLoggerProvider);return yield Gb(r,m),ml(r,Object.assign(Object.assign({},s),{token:m})),{token:m.token}}try{a=yield s.provider.getToken()}catch(m){ev.error(m),c=m}return a?(h={token:a.token},ml(r,Object.assign(Object.assign({},s),{token:a})),yield Gb(r,a)):h=S1(c),BD(r,h),h})).apply(this,arguments)}function UD(i,n){const r=gs(i),s=r.tokenObservers.filter(a=>a.next!==n);0===s.length&&r.tokenRefresher&&r.tokenRefresher.isRunning()&&r.tokenRefresher.stop(),ml(i,Object.assign(Object.assign({},r),{tokenObservers:s}))}function BD(i,n){const r=gs(i).tokenObservers;for(const s of r)try{"EXTERNAL"===s.type&&null!=n.error?s.error(n.error):s.next(n)}catch(a){}}function _l(i){return i.expireTimeMillis-Date.now()>0}function S1(i){return{token:tP(eP),error:i}}class jD{constructor(n,r){this.app=n,this.platformLoggerProvider=r}_delete(){const{tokenObservers:n}=gs(this.app);for(const r of n)UD(this.app,r.next);return Promise.resolve()}}const Kb="app-check-internal";(0,as._registerComponent)(new Vi.wA("app-check",i=>function(i,n){return new jD(i,n)}(i.getProvider("app").getImmediate(),i.getProvider("platform-logger")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((i,n,r)=>{i.getProvider(Kb).initialize()})),(0,as._registerComponent)(new Vi.wA(Kb,i=>function(i){return{getToken:n=>nv(i,n),addTokenListener:n=>function(i,n,r,s){const{app:a}=i,c=gs(a),h={next:r,error:s,type:n},m=Object.assign(Object.assign({},c),{tokenObservers:[...c.tokenObservers,h]});if(!m.tokenRefresher){const E=function(i){const{app:n}=i;return new $x((0,Se.Z)(function*(){let s;if(s=gs(n).token?yield nv(i,!0):yield nv(i),s.error)throw s.error}),()=>!0,()=>{const r=gs(n);if(r.token){let s=r.token.issuedAtTimeMillis+.5*(r.token.expireTimeMillis-r.token.issuedAtTimeMillis)+3e5;return s=Math.min(s,r.token.expireTimeMillis-3e5),Math.max(0,s-Date.now())}return 0},3e4,96e4)}(i);m.tokenRefresher=E}if(!m.tokenRefresher.isRunning()&&c.isTokenAutoRefreshEnabled&&m.tokenRefresher.start(),c.token&&_l(c.token)){const E=c.token;Promise.resolve().then(()=>r({token:E.token})).catch(()=>{})}else null==c.token&&c.cachedTokenPromise.then(E=>{E&&_l(E)&&r({token:E.token})}).catch(()=>{});ml(a,m)}(i,"INTERNAL",n),removeTokenListener:n=>UD(i.app,n)}}(i.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,as.registerVersion)("@firebase/app-check","0.4.2");class lp{constructor(){return(0,Kt.vb)("app-check")}}"undefined"!=typeof window&&window;var vm=$(7841);const Em=new _.OlP("angularfire2.auth.use-emulator"),wm=new _.OlP("angularfire2.auth.settings"),Xb=new _.OlP("angularfire2.auth.tenant-id"),eC=new _.OlP("angularfire2.auth.langugage-code"),tC=new _.OlP("angularfire2.auth.use-device-language"),nC=new _.OlP("angularfire.auth.persistence"),av=(i,n,r,s,a,c,h,m)=>(0,Un.cc)(`${i.name}.auth`,"AngularFireAuth",i.name,()=>{const E=n.runOutsideAngular(()=>i.auth());if(r&&E.useEmulator(...r),s&&(E.tenantId=s),E.languageCode=a,c&&E.useDeviceLanguage(),h)for(const[C,S]of Object.entries(h))E.settings[C]=S;return m&&E.setPersistence(m),E},[r,s,a,c,h,m]);let ba=(()=>{class i{constructor(r,s,a,c,h,m,E,C,S,N,O,B){const W=new Yn.xQ,ue=(0,gt.of)(void 0).pipe((0,ps.QV)(h.outsideAngular),ai(()=>c.runOutsideAngular(()=>Promise.resolve().then($.bind($,4828)))),(0,mt.U)(()=>(0,Un.on)(r,c,s)),(0,mt.U)(Pe=>av(Pe,c,m,C,S,N,E,O)),zy({bufferSize:1,refCount:!1}));if(zr(a))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,gt.of)(null);else{ue.pipe(Ea()).subscribe();const Ze=ue.pipe(ai(tt=>tt.getRedirectResult().then(_n=>_n,()=>null)),Kt.iC,zy({bufferSize:1,refCount:!1})),rt=ue.pipe(ai(tt=>new tr.y(_n=>({unsubscribe:c.runOutsideAngular(()=>tt.onAuthStateChanged(Bn=>_n.next(Bn),Bn=>_n.error(Bn),()=>_n.complete()))})))),pt=ue.pipe(ai(tt=>new tr.y(_n=>({unsubscribe:c.runOutsideAngular(()=>tt.onIdTokenChanged(Bn=>_n.next(Bn),Bn=>_n.error(Bn),()=>_n.complete()))}))));this.authState=Ze.pipe(DD(rt),(0,Fb.R)(h.outsideAngular),(0,ps.QV)(h.insideAngular)),this.user=Ze.pipe(DD(pt),(0,Fb.R)(h.outsideAngular),(0,ps.QV)(h.insideAngular)),this.idToken=this.user.pipe(ai(tt=>tt?(0,Rn.D)(tt.getIdToken()):(0,gt.of)(null))),this.idTokenResult=this.user.pipe(ai(tt=>tt?(0,Rn.D)(tt.getIdTokenResult()):(0,gt.of)(null))),this.credential=(0,rr.T)(Ze,W,this.authState.pipe(xi(tt=>!tt))).pipe((0,mt.U)(tt=>(null==tt?void 0:tt.user)?tt:null),(0,Fb.R)(h.outsideAngular),(0,ps.QV)(h.insideAngular))}return(0,Un.pX)(this,ue,c,{spy:{apply:(Pe,Ze,rt)=>{(Pe.startsWith("signIn")||Pe.startsWith("createUser"))&&rt.then(pt=>W.next(pt))}}})}}return i.\u0275fac=function(r){return new(r||i)(_.LFG(Un.Dh),_.LFG(Un.xv,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(Kt.HU),_.LFG(Em,8),_.LFG(wm,8),_.LFG(Xb,8),_.LFG(eC,8),_.LFG(tC,8),_.LFG(nC,8),_.LFG(lp,8))},i.\u0275prov=_.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),JD=(()=>{class i{constructor(){vm.Z.registerVersion("angularfire",Kt.q4.full,"auth-compat")}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=_.oAB({type:i}),i.\u0275inj=_.cJS({providers:[ba]}),i})();function rC(i,n){return function(i,n=Ro.z){return new tr.y(r=>{let s;return null!=n?n.schedule(()=>{s=i.onSnapshot({includeMetadataChanges:!0},r)}):s=i.onSnapshot({includeMetadataChanges:!0},r),()=>{null!=s&&s()}})}(i,n)}function iC(i,n){return rC(i,n).pipe((0,mt.U)(r=>({payload:r,type:"query"})))}function bm(i,n){return iC(i,n).pipe(la(void 0),hd(),(0,mt.U)(([r,s])=>{const a=s.payload.docChanges(),c=a.map(h=>({type:h.type,payload:h}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(s.payload.metadata)&&s.payload.docs.forEach((h,m)=>{const E=a.find(S=>S.doc.ref.isEqual(h.ref)),C=null==r?void 0:r.payload.docs.find(S=>S.ref.isEqual(h.ref));E&&JSON.stringify(E.doc.metadata)===JSON.stringify(h.metadata)||!E&&C&&JSON.stringify(C.metadata)===JSON.stringify(h.metadata)||c.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:h}})}),c}))}function sC(i,n,r){return bm(i,r).pipe(zs((s,a)=>function(i,n,r){return n.forEach(s=>{r.indexOf(s.type)>-1&&(i=function(i,n){switch(n.type){case"added":if(!i[n.newIndex]||!i[n.newIndex].doc.ref.isEqual(n.doc.ref))return lv(i,n.newIndex,0,n);break;case"modified":if(null==i[n.oldIndex]||i[n.oldIndex].doc.ref.isEqual(n.doc.ref)){if(n.oldIndex!==n.newIndex){const r=i.slice();return r.splice(n.oldIndex,1),r.splice(n.newIndex,0,n),r}return lv(i,n.newIndex,1,n)}break;case"removed":if(i[n.oldIndex]&&i[n.oldIndex].doc.ref.isEqual(n.doc.ref))return lv(i,n.oldIndex,1)}return i}(i,s))}),i}(s,a.map(c=>c.payload),n),[]),Li(),(0,mt.U)(s=>s.map(a=>({type:a.type,payload:a}))))}function lv(i,n,r,...s){const a=i.slice();return a.splice(n,r,...s),a}function gP(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class Yi{constructor(n,r,s){this.ref=n,this.query=r,this.afs=s}stateChanges(n){let r=bm(this.query,this.afs.schedulers.outsideAngular);return n&&n.length>0&&(r=r.pipe((0,mt.U)(s=>s.filter(a=>n.indexOf(a.type)>-1)))),r.pipe(la(void 0),hd(),xi(([s,a])=>a.length>0||!s),(0,mt.U)(([s,a])=>a),Kt.iC)}auditTrail(n){return this.stateChanges(n).pipe(zs((r,s)=>[...r,...s],[]))}snapshotChanges(n){const r=gP(n);return sC(this.query,r,this.afs.schedulers.outsideAngular).pipe(Kt.iC)}valueChanges(n={}){return iC(this.query,this.afs.schedulers.outsideAngular).pipe((0,mt.U)(r=>r.payload.docs.map(s=>n.idField?Object.assign(Object.assign({},s.data()),{[n.idField]:s.id}):s.data())),Kt.iC)}get(n){return(0,Rn.D)(this.query.get(n)).pipe(Kt.iC)}add(n){return this.ref.add(n)}doc(n){return new uh(this.ref.doc(n),this.afs)}}class uh{constructor(n,r){this.ref=n,this.afs=r}set(n,r){return this.ref.set(n,r)}update(n){return this.ref.update(n)}delete(){return this.ref.delete()}collection(n,r){const s=this.ref.collection(n),{ref:a,query:c}=uv(s,r);return new Yi(a,c,this.afs)}snapshotChanges(){return function(i,n){return rC(i,n).pipe(la(void 0),hd(),(0,mt.U)(([r,s])=>s.exists?(null==r?void 0:r.exists)?{payload:s,type:"modified"}:{payload:s,type:"added"}:{payload:s,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Kt.iC)}valueChanges(n={}){return this.snapshotChanges().pipe((0,mt.U)(({payload:r})=>n.idField?Object.assign(Object.assign({},r.data()),{[n.idField]:r.id}):r.data()))}get(n){return(0,Rn.D)(this.ref.get(n)).pipe(Kt.iC)}}class mP{constructor(n,r){this.query=n,this.afs=r}stateChanges(n){return n&&0!==n.length?bm(this.query,this.afs.schedulers.outsideAngular).pipe((0,mt.U)(r=>r.filter(s=>n.indexOf(s.type)>-1)),xi(r=>r.length>0),Kt.iC):bm(this.query,this.afs.schedulers.outsideAngular).pipe(Kt.iC)}auditTrail(n){return this.stateChanges(n).pipe(zs((r,s)=>[...r,...s],[]))}snapshotChanges(n){const r=gP(n);return sC(this.query,r,this.afs.schedulers.outsideAngular).pipe(Kt.iC)}valueChanges(n={}){return iC(this.query,this.afs.schedulers.outsideAngular).pipe((0,mt.U)(s=>s.payload.docs.map(a=>n.idField?Object.assign({[n.idField]:a.id},a.data()):a.data())),Kt.iC)}get(n){return(0,Rn.D)(this.query.get(n)).pipe(Kt.iC)}}const tS=new _.OlP("angularfire2.enableFirestorePersistence"),_P=new _.OlP("angularfire2.firestore.persistenceSettings"),Cm=new _.OlP("angularfire2.firestore.settings"),yP=new _.OlP("angularfire2.firestore.use-emulator");function uv(i,n=(r=>r)){return{query:n(i),ref:i}}let nS=(()=>{class i{constructor(r,s,a,c,h,m,E,C,S,N,O,B,W,ue,Pe,Ze,rt){this.schedulers=E;const pt=(0,Un.on)(r,m,s),tt=S;N&&av(pt,m,O,W,ue,Pe,B,Ze),[this.firestore,this.persistenceEnabled$]=(0,Un.cc)(`${pt.name}.firestore`,"AngularFirestore",pt.name,()=>{const _n=m.runOutsideAngular(()=>pt.firestore());if(c&&_n.settings(c),tt&&_n.useEmulator(...tt),a&&!zr(h)){const Bn=()=>{try{return(0,Rn.D)(_n.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(ui){return"undefined"!=typeof console&&console.warn(ui),(0,gt.of)(!1)}};return[_n,m.runOutsideAngular(Bn)]}return[_n,(0,gt.of)(!1)]},[c,tt,a])}collection(r,s){let a;a="string"==typeof r?this.firestore.collection(r):r;const{ref:c,query:h}=uv(a,s),m=this.schedulers.ngZone.run(()=>c);return new Yi(m,h,this)}collectionGroup(r,s){const a=s||(h=>h),c=this.firestore.collectionGroup(r);return new mP(a(c),this)}doc(r){let s;s="string"==typeof r?this.firestore.doc(r):r;const a=this.schedulers.ngZone.run(()=>s);return new uh(a,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(r){return new(r||i)(_.LFG(Un.Dh),_.LFG(Un.xv,8),_.LFG(tS,8),_.LFG(Cm,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(Kt.HU),_.LFG(_P,8),_.LFG(yP,8),_.LFG(ba,8),_.LFG(Em,8),_.LFG(wm,8),_.LFG(Xb,8),_.LFG(eC,8),_.LFG(tC,8),_.LFG(nC,8),_.LFG(lp,8))},i.\u0275prov=_.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),rS=(()=>{class i{constructor(){vm.Z.registerVersion("angularfire",Kt.q4.full,"fst-compat")}static enablePersistence(r){return{ngModule:i,providers:[{provide:tS,useValue:!0},{provide:_P,useValue:r}]}}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=_.oAB({type:i}),i.\u0275inj=_.cJS({providers:[nS]}),i})();var vP=$(8819);class iS extends fr.L{notifyNext(n,r,s,a,c){this.destination.next(r)}notifyError(n,r){this.destination.error(n)}notifyComplete(n){this.destination.complete()}}class oC extends fr.L{constructor(n,r,s){super(),this.parent=n,this.outerValue=r,this.outerIndex=s,this.index=0}_next(n){this.parent.notifyNext(this.outerValue,n,this.outerIndex,this.index++,this)}_error(n){this.parent.notifyError(n,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var sS=$(7444);function aC(i,n,r,s,a=new oC(i,r,s)){if(!a.closed)return n instanceof tr.y?n.subscribe(a):(0,sS.s)(n)(a)}class lC{constructor(n,r){this.observables=n,this.project=r}call(n,r){return r.subscribe(new O1(n,this.observables,this.project))}}class O1 extends iS{constructor(n,r,s){super(n),this.observables=r,this.project=s,this.toRespond=[];const a=r.length;this.values=new Array(a);for(let c=0;c<a;c++)this.toRespond.push(c);for(let c=0;c<a;c++)this.add(aC(this,r[c],void 0,c))}notifyNext(n,r,s){this.values[s]=r;const a=this.toRespond;if(a.length>0){const c=a.indexOf(s);-1!==c&&a.splice(c,1)}}notifyComplete(){}_next(n){if(0===this.toRespond.length){const r=[n,...this.values];this.project?this._tryProject(r):this.destination.next(r)}}_tryProject(n){let r;try{r=this.project.apply(this,n)}catch(s){return void this.destination.error(s)}this.destination.next(r)}}class EP{constructor(n){this.predicate=n}call(n,r){return r.subscribe(new aS(n,this.predicate))}}class aS extends fr.L{constructor(n,r){super(n),this.predicate=r,this.skipping=!0,this.index=0}_next(n){const r=this.destination;this.skipping&&this.tryCallPredicate(n),this.skipping||r.next(n)}tryCallPredicate(n){try{const r=this.predicate(n,this.index++);this.skipping=Boolean(r)}catch(r){this.destination.error(r)}}}let uC="";function hv(i){uC=i}class cC{constructor(n){this.domStorage_=n,this.prefix_="firebase:"}set(n,r){null==r?this.domStorage_.removeItem(this.prefixedName_(n)):this.domStorage_.setItem(this.prefixedName_(n),(0,V.Pz)(r))}get(n){const r=this.domStorage_.getItem(this.prefixedName_(n));return null==r?null:(0,V.cI)(r)}remove(n){this.domStorage_.removeItem(this.prefixedName_(n))}prefixedName_(n){return this.prefix_+n}toString(){return this.domStorage_.toString()}}class wP{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(n,r){null==r?delete this.cache_[n]:this.cache_[n]=r}get(n){return(0,V.r3)(this.cache_,n)?this.cache_[n]:null}remove(n){delete this.cache_[n]}}const uS=function(i){try{if("undefined"!=typeof window&&void 0!==window[i]){const n=window[i];return n.setItem("firebase:sentinel","cache"),n.removeItem("firebase:sentinel"),new cC(n)}}catch(n){}return new wP},Dc=uS("localStorage"),fv=uS("sessionStorage"),ch=new cn.Yd("@firebase/database"),cS=function(){let i=1;return function(){return i++}}(),dC=function(i){const n=(0,V.dS)(i),r=new V.gQ;r.update(n);const s=r.digest();return V.US.encodeByteArray(s)},up=function(...i){let n="";for(let r=0;r<i.length;r++){const s=i[r];Array.isArray(s)||s&&"object"==typeof s&&"number"==typeof s.length?n+=up.apply(null,s):n+="object"==typeof s?(0,V.Pz)(s):s,n+=" "}return n};let dh=null,dS=!0;const hC=function(i,n){(0,V.hu)(!n||!0===i||!1===i,"Can't turn on custom loggers persistently."),!0===i?(ch.logLevel=cn.in.VERBOSE,dh=ch.log.bind(ch),n&&fv.set("logging_enabled",!0)):"function"==typeof i?dh=i:(dh=null,fv.remove("logging_enabled"))},bi=function(...i){if(!0===dS&&(dS=!1,null===dh&&!0===fv.get("logging_enabled")&&hC(!0)),dh){const n=up.apply(null,i);dh(n)}},cp=function(i){return function(...n){bi(i,...n)}},pv=function(...i){const n="FIREBASE INTERNAL ERROR: "+up(...i);ch.error(n)},Ca=function(...i){const n=`FIREBASE FATAL ERROR: ${up(...i)}`;throw ch.error(n),new Error(n)},Qi=function(...i){const n="FIREBASE WARNING: "+up(...i);ch.warn(n)},gv=function(i){return"number"==typeof i&&(i!=i||i===Number.POSITIVE_INFINITY||i===Number.NEGATIVE_INFINITY)},yl="[MIN_NAME]",gu="[MAX_NAME]",dp=function(i,n){if(i===n)return 0;if(i===yl||n===gu)return-1;if(n===yl||i===gu)return 1;{const r=fC(i),s=fC(n);return null!==r?null!==s?r-s==0?i.length-n.length:r-s:-1:null!==s?1:i<n?-1:1}},k1=function(i,n){return i===n?0:i<n?-1:1},mv=function(i,n){if(n&&i in n)return n[i];throw new Error("Missing required key ("+i+") in object: "+(0,V.Pz)(n))},hS=function(i){if("object"!=typeof i||null===i)return(0,V.Pz)(i);const n=[];for(const s in i)n.push(s);n.sort();let r="{";for(let s=0;s<n.length;s++)0!==s&&(r+=","),r+=(0,V.Pz)(n[s]),r+=":",r+=hS(i[n[s]]);return r+="}",r},TP=function(i,n){const r=i.length;if(r<=n)return[i];const s=[];for(let a=0;a<r;a+=n)s.push(i.substring(a,a+n>r?r:a+n));return s};function Oi(i,n){for(const r in i)i.hasOwnProperty(r)&&n(r,i[r])}const IP=function(i){(0,V.hu)(!gv(i),"Invalid JSON number");const s=1023;let a,c,h,m,E;0===i?(c=0,h=0,a=1/i==-1/0?1:0):(a=i<0,(i=Math.abs(i))>=Math.pow(2,1-s)?(m=Math.min(Math.floor(Math.log(i)/Math.LN2),s),c=m+s,h=Math.round(i*Math.pow(2,52-m)-Math.pow(2,52))):(c=0,h=Math.round(i/Math.pow(2,-1074))));const C=[];for(E=52;E;E-=1)C.push(h%2?1:0),h=Math.floor(h/2);for(E=11;E;E-=1)C.push(c%2?1:0),c=Math.floor(c/2);C.push(a?1:0),C.reverse();const S=C.join("");let N="";for(E=0;E<64;E+=8){let O=parseInt(S.substr(E,8),2).toString(16);1===O.length&&(O="0"+O),N+=O}return N.toLowerCase()},U1=new RegExp("^-?(0*)\\d{1,10}$"),DP=-2147483648,fS=2147483647,fC=function(i){if(U1.test(i)){const n=Number(i);if(n>=DP&&n<=fS)return n}return null},Tm=function(i){try{i()}catch(n){setTimeout(()=>{throw Qi("Exception was thrown by user callback.",n.stack||""),n},Math.floor(0))}},Im=function(i,n){const r=setTimeout(i,n);return"object"==typeof r&&r.unref&&r.unref(),r};class SP{constructor(n,r){this.appName_=n,this.appCheckProvider=r,this.appCheck=null==r?void 0:r.getImmediate({optional:!0}),this.appCheck||null==r||r.get().then(s=>this.appCheck=s)}getToken(n){return this.appCheck?this.appCheck.getToken(n):new Promise((r,s)=>{setTimeout(()=>{this.appCheck?this.getToken(n).then(r,s):r(null)},0)})}addTokenChangeListener(n){var r;null===(r=this.appCheckProvider)||void 0===r||r.get().then(s=>s.addTokenListener(n))}notifyForInvalidToken(){Qi(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class AP{constructor(n,r,s){this.appName_=n,this.firebaseOptions_=r,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(a=>this.auth_=a)}getToken(n){return this.auth_?this.auth_.getToken(n).catch(r=>r&&"auth/token-not-initialized"===r.code?(bi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(r)):new Promise((r,s)=>{setTimeout(()=>{this.auth_?this.getToken(n).then(r,s):r(null)},0)})}addTokenChangeListener(n){this.auth_?this.auth_.addAuthTokenListener(n):this.authProvider_.get().then(r=>r.addAuthTokenListener(n))}removeTokenChangeListener(n){this.authProvider_.get().then(r=>r.removeAuthTokenListener(n))}notifyForInvalidToken(){let n='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';n+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Qi(n)}}let _v=(()=>{class i{constructor(r){this.accessToken=r}getToken(r){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(r){r(this.accessToken)}removeTokenChangeListener(r){}notifyForInvalidToken(){}}return i.OWNER="owner",i})();const NP=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,yS="websocket",PP="long_polling";class gC{constructor(n,r,s,a,c=!1,h="",m=!1){this.secure=r,this.namespace=s,this.webSocketOnly=a,this.nodeAdmin=c,this.persistenceKey=h,this.includeNamespaceInQueryParams=m,this._host=n.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Dc.get("host:"+n)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(n){n!==this.internalHost&&(this.internalHost=n,this.isCacheableHost()&&Dc.set("host:"+this._host,this.internalHost))}toString(){let n=this.toURLString();return this.persistenceKey&&(n+="<"+this.persistenceKey+">"),n}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function hh(i,n,r){let s;if((0,V.hu)("string"==typeof n,"typeof type must == string"),(0,V.hu)("object"==typeof r,"typeof params must == object"),n===yS)s=(i.secure?"wss://":"ws://")+i.internalHost+"/.ws?";else{if(n!==PP)throw new Error("Unknown connection type: "+n);s=(i.secure?"https://":"http://")+i.internalHost+"/.lp?"}(function(i){return i.host!==i.internalHost||i.isCustomHost()||i.includeNamespaceInQueryParams})(i)&&(r.ns=i.namespace);const a=[];return Oi(r,(c,h)=>{a.push(c+"="+h)}),s+a.join("&")}class vS{constructor(){this.counters_={}}incrementCounter(n,r=1){(0,V.r3)(this.counters_,n)||(this.counters_[n]=0),this.counters_[n]+=r}get(){return(0,V.p$)(this.counters_)}}const _C={},yC={};function Dm(i){const n=i.toString();return _C[n]||(_C[n]=new vS),_C[n]}class wS{constructor(n){this.onMessage_=n,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(n,r){this.closeAfterResponse=n,this.onClose=r,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(n,r){for(this.pendingResponses[n]=r;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let a=0;a<s.length;++a)s[a]&&Tm(()=>{this.onMessage_(s[a])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Sm{constructor(n,r,s,a,c,h,m){this.connId=n,this.repoInfo=r,this.applicationId=s,this.appCheckToken=a,this.authToken=c,this.transportSessionId=h,this.lastSessionId=m,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=cp(n),this.stats_=Dm(r),this.urlFn=E=>(this.appCheckToken&&(E.ac=this.appCheckToken),hh(r,PP,E))}open(n,r){this.curSegmentNum=0,this.onDisconnect_=r,this.myPacketOrderer=new wS(n),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(i){if((0,V.Yr)()||"complete"===document.readyState)i();else{let n=!1;const r=function(){document.body?n||(n=!0,i()):setTimeout(r,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",r,!1),window.addEventListener("load",r,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&r()}),window.attachEvent("onload",r))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new bC((...c)=>{const[h,m,E,C,S]=c;if(this.incrementIncomingBytes_(c),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===h)this.id=m,this.password=E;else{if("close"!==h)throw new Error("Unrecognized command received: "+h);m?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(m,()=>{this.onClosed_()})):this.onClosed_()}},(...c)=>{const[h,m]=c;this.incrementIncomingBytes_(c),this.myPacketOrderer.handleResponse(h,m)},()=>{this.onClosed_()},this.urlFn);const s={start:"t"};s.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(s.cb=this.scriptTagHolder.uniqueCallbackIdentifier),s.v="5",this.transportSessionId&&(s.s=this.transportSessionId),this.lastSessionId&&(s.ls=this.lastSessionId),this.applicationId&&(s.p=this.applicationId),this.appCheckToken&&(s.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&NP.test(location.hostname)&&(s.r="f");const a=this.urlFn(s);this.log_("Connecting via long-poll to "+a),this.scriptTagHolder.addTag(a,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Sm.forceAllow_=!0}static forceDisallow(){Sm.forceDisallow_=!0}static isAvailable(){return!((0,V.Yr)()||!Sm.forceAllow_&&(Sm.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(n){const r=(0,V.Pz)(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const s=(0,V.h$)(r),a=TP(s,1840);for(let c=0;c<a.length;c++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,a.length,a[c]),this.curSegmentNum++}addDisconnectPingFrame(n,r){if((0,V.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const s={dframe:"t"};s.id=n,s.pw=r,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(n){const r=(0,V.Pz)(n).length;this.bytesReceived+=r,this.stats_.incrementCounter("bytes_received",r)}}class bC{constructor(n,r,s,a){if(this.onDisconnect=s,this.urlFn=a,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,V.Yr)())this.commandCB=n,this.onMessageCB=r;else{this.uniqueCallbackIdentifier=cS(),window["pLPCommand"+this.uniqueCallbackIdentifier]=n,window["pRTLPCB"+this.uniqueCallbackIdentifier]=r,this.myIFrame=bC.createIFrame_();let c="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(c='<script>document.domain="'+document.domain+'";<\/script>');const h="<html><body>"+c+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(h),this.myIFrame.doc.close()}catch(m){bi("frame writing exception"),m.stack&&bi(m.stack),bi(m)}}}static createIFrame_(){const n=document.createElement("iframe");if(n.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(n);try{n.contentWindow.document||bi("No IE domain setting required")}catch(r){const s=document.domain;n.src="javascript:void((function(){document.open();document.domain='"+s+"';document.close();})())"}return n.contentDocument?n.doc=n.contentDocument:n.contentWindow?n.doc=n.contentWindow.document:n.document&&(n.doc=n.document),n}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const n=this.onDisconnect;n&&(this.onDisconnect=null,n())}startLongPoll(n,r){for(this.myID=n,this.myPW=r,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const n={};n.id=this.myID,n.pw=this.myPW,n.ser=this.currentSerial;let r=this.urlFn(n),s="",a=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+s.length<=1870;){const h=this.pendingSegs.shift();s=s+"&seg"+a+"="+h.seg+"&ts"+a+"="+h.ts+"&d"+a+"="+h.d,a++}return r+=s,this.addLongPollTag_(r,this.currentSerial),!0}return!1}enqueueSegment(n,r,s){this.pendingSegs.push({seg:n,ts:r,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(n,r){this.outstandingRequests.add(r);const s=()=>{this.outstandingRequests.delete(r),this.newRequest_()},a=setTimeout(s,Math.floor(25e3));this.addTag(n,()=>{clearTimeout(a),s()})}addTag(n,r){(0,V.Yr)()?this.doNodeLongPoll(n,r):setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=n,s.onload=s.onreadystatechange=function(){const a=s.readyState;(!a||"loaded"===a||"complete"===a)&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),r())},s.onerror=()=>{bi("Long-poll script failed to load: "+n),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch(s){}},Math.floor(1))}}let Am=null;"undefined"!=typeof MozWebSocket?Am=MozWebSocket:"undefined"!=typeof WebSocket&&(Am=WebSocket);let Ev=(()=>{class i{constructor(r,s,a,c,h,m,E){this.connId=r,this.applicationId=a,this.appCheckToken=c,this.authToken=h,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=cp(this.connId),this.stats_=Dm(s),this.connURL=i.connectionURL_(s,m,E,c),this.nodeAdmin=s.nodeAdmin}static connectionURL_(r,s,a,c){const h={v:"5"};return!(0,V.Yr)()&&"undefined"!=typeof location&&location.hostname&&NP.test(location.hostname)&&(h.r="f"),s&&(h.s=s),a&&(h.ls=a),c&&(h.ac=c),hh(r,yS,h)}open(r,s){this.onDisconnect=s,this.onMessage=r,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Dc.set("previous_websocket_failure",!0);try{if((0,V.Yr)()){const c={headers:{"User-Agent":`Firebase/5/${uC}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(c.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(c.headers["X-Firebase-AppCheck"]=this.appCheckToken);const h=process.env,m=0===this.connURL.indexOf("wss://")?h.HTTPS_PROXY||h.https_proxy:h.HTTP_PROXY||h.http_proxy;m&&(c.proxy={origin:m}),this.mySock=new Am(this.connURL,[],c)}else this.mySock=new Am(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(a){this.log_("Error instantiating WebSocket.");const c=a.message||a.data;return c&&this.log_(c),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=a=>{this.handleIncomingFrame(a)},this.mySock.onerror=a=>{this.log_("WebSocket error.  Closing connection.");const c=a.message||a.data;c&&this.log_(c),this.onClosed_()}}start(){}static forceDisallow(){i.forceDisallow_=!0}static isAvailable(){let r=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const a=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);a&&a.length>1&&parseFloat(a[1])<4.4&&(r=!0)}return!r&&null!==Am&&!i.forceDisallow_}static previouslyFailed(){return Dc.isInMemoryStorage||!0===Dc.get("previous_websocket_failure")}markConnectionHealthy(){Dc.remove("previous_websocket_failure")}appendFrame_(r){if(this.frames.push(r),this.frames.length===this.totalFrames){const s=this.frames.join("");this.frames=null;const a=(0,V.cI)(s);this.onMessage(a)}}handleNewFrameCount_(r){this.totalFrames=r,this.frames=[]}extractFrameCount_(r){if((0,V.hu)(null===this.frames,"We already have a frame buffer"),r.length<=6){const s=Number(r);if(!isNaN(s))return this.handleNewFrameCount_(s),null}return this.handleNewFrameCount_(1),r}handleIncomingFrame(r){if(null===this.mySock)return;const s=r.data;if(this.bytesReceived+=s.length,this.stats_.incrementCounter("bytes_received",s.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(s);else{const a=this.extractFrameCount_(s);null!==a&&this.appendFrame_(a)}}send(r){this.resetKeepAlive();const s=(0,V.Pz)(r);this.bytesSent+=s.length,this.stats_.incrementCounter("bytes_sent",s.length);const a=TP(s,16384);a.length>1&&this.sendString_(String(a.length));for(let c=0;c<a.length;c++)this.sendString_(a[c])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(r){try{this.mySock.send(r)}catch(s){this.log_("Exception thrown from WebSocket.send():",s.message||s.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return i.responsesRequiredToBeHealthy=2,i.healthyTimeout=3e4,i})();class TS{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[Sm,Ev]}initTransports_(n){const r=Ev&&Ev.isAvailable();let s=r&&!Ev.previouslyFailed();if(n.webSocketOnly&&(r||Qi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Ev];else{const a=this.transports_=[];for(const c of TS.ALL_TRANSPORTS)c&&c.isAvailable()&&a.push(c)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class TC{constructor(n,r,s,a,c,h,m,E,C,S){this.id=n,this.repoInfo_=r,this.applicationId_=s,this.appCheckToken_=a,this.authToken_=c,this.onMessage_=h,this.onReady_=m,this.onDisconnect_=E,this.onKill_=C,this.lastSessionId=S,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=cp("c:"+this.id+":"),this.transportManager_=new TS(r),this.log_("Connection created"),this.start_()}start_(){const n=this.transportManager_.initialTransport();this.conn_=new n(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=n.responsesRequiredToBeHealthy||0;const r=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(r,s)},Math.floor(0));const a=n.healthyTimeout||0;a>0&&(this.healthyTimeout_=Im(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(a)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(n){return r=>{n===this.conn_?this.onConnectionLost_(r):n===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(n){return r=>{2!==this.state_&&(n===this.rx_?this.onPrimaryMessageReceived_(r):n===this.secondaryConn_?this.onSecondaryMessageReceived_(r):this.log_("message on old connection"))}}sendRequest(n){this.sendData_({t:"d",d:n})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(n){if("t"in n){const r=n.t;"a"===r?this.upgradeIfSecondaryHealthy_():"r"===r?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===r&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(n){const r=mv("t",n),s=mv("d",n);if("c"===r)this.onSecondaryControl_(s);else{if("d"!==r)throw new Error("Unknown protocol layer: "+r);this.pendingDataMessages.push(s)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(n){const r=mv("t",n),s=mv("d",n);"c"===r?this.onControl_(s):"d"===r&&this.onDataMessage_(s)}onDataMessage_(n){this.onPrimaryResponse_(),this.onMessage_(n)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(n){const r=mv("t",n);if("d"in n){const s=n.d;if("h"===r)this.onHandshake_(s);else if("n"===r){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let a=0;a<this.pendingDataMessages.length;++a)this.onDataMessage_(this.pendingDataMessages[a]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===r?this.onConnectionShutdown_(s):"r"===r?this.onReset_(s):"e"===r?pv("Server Error: "+s):"o"===r?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):pv("Unknown control packet command: "+r)}}onHandshake_(n){const r=n.ts,s=n.v,a=n.h;this.sessionId=n.s,this.repoInfo_.host=a,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,r),"5"!==s&&Qi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const n=this.transportManager_.upgradeTransport();n&&this.startUpgrade_(n)}startUpgrade_(n){this.secondaryConn_=new n(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=n.responsesRequiredToBeHealthy||0;const r=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(r,s),Im(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(n){this.log_("Reset packet received.  New host: "+n),this.repoInfo_.host=n,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(n,r){this.log_("Realtime connection established."),this.conn_=n,this.state_=1,this.onReady_&&(this.onReady_(r,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Im(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const n=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===n||this.rx_===n)&&this.close()}onConnectionLost_(n){this.conn_=null,n||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Dc.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(n){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(n),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(n){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(n)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class AS{put(n,r,s,a){}merge(n,r,s,a){}refreshAuthToken(n){}refreshAppCheckToken(n){}onDisconnectPut(n,r,s){}onDisconnectMerge(n,r,s){}onDisconnectCancel(n,r){}reportStats(n){}}class IC{constructor(n){this.allowedEvents_=n,this.listeners_={},(0,V.hu)(Array.isArray(n)&&n.length>0,"Requires a non-empty array")}trigger(n,...r){if(Array.isArray(this.listeners_[n])){const s=[...this.listeners_[n]];for(let a=0;a<s.length;a++)s[a].callback.apply(s[a].context,r)}}on(n,r,s){this.validateEventType_(n),this.listeners_[n]=this.listeners_[n]||[],this.listeners_[n].push({callback:r,context:s});const a=this.getInitialEvent(n);a&&r.apply(s,a)}off(n,r,s){this.validateEventType_(n);const a=this.listeners_[n]||[];for(let c=0;c<a.length;c++)if(a[c].callback===r&&(!s||s===a[c].context))return void a.splice(c,1)}validateEventType_(n){(0,V.hu)(this.allowedEvents_.find(r=>r===n),"Unknown event: "+n)}}class Nm extends IC{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,V.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Nm}getInitialEvent(n){return(0,V.hu)("online"===n,"Unknown event type: "+n),[this.online_]}currentlyOnline(){return this.online_}}class Sn{constructor(n,r){if(void 0===r){this.pieces_=n.split("/");let s=0;for(let a=0;a<this.pieces_.length;a++)this.pieces_[a].length>0&&(this.pieces_[s]=this.pieces_[a],s++);this.pieces_.length=s,this.pieceNum_=0}else this.pieces_=n,this.pieceNum_=r}toString(){let n="";for(let r=this.pieceNum_;r<this.pieces_.length;r++)""!==this.pieces_[r]&&(n+="/"+this.pieces_[r]);return n||"/"}}function bn(){return new Sn("")}function Jt(i){return i.pieceNum_>=i.pieces_.length?null:i.pieces_[i.pieceNum_]}function vl(i){return i.pieces_.length-i.pieceNum_}function $n(i){let n=i.pieceNum_;return n<i.pieces_.length&&n++,new Sn(i.pieces_,n)}function oo(i){return i.pieceNum_<i.pieces_.length?i.pieces_[i.pieces_.length-1]:null}function Tv(i,n=0){return i.pieces_.slice(i.pieceNum_+n)}function xS(i){if(i.pieceNum_>=i.pieces_.length)return null;const n=[];for(let r=i.pieceNum_;r<i.pieces_.length-1;r++)n.push(i.pieces_[r]);return new Sn(n,0)}function mr(i,n){const r=[];for(let s=i.pieceNum_;s<i.pieces_.length;s++)r.push(i.pieces_[s]);if(n instanceof Sn)for(let s=n.pieceNum_;s<n.pieces_.length;s++)r.push(n.pieces_[s]);else{const s=n.split("/");for(let a=0;a<s.length;a++)s[a].length>0&&r.push(s[a])}return new Sn(r,0)}function en(i){return i.pieceNum_>=i.pieces_.length}function ms(i,n){const r=Jt(i),s=Jt(n);if(null===r)return n;if(r===s)return ms($n(i),$n(n));throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+i+")")}function WP(i,n){const r=Tv(i,0),s=Tv(n,0);for(let a=0;a<r.length&&a<s.length;a++){const c=dp(r[a],s[a]);if(0!==c)return c}return r.length===s.length?0:r.length<s.length?-1:1}function PS(i,n){if(vl(i)!==vl(n))return!1;for(let r=i.pieceNum_,s=n.pieceNum_;r<=i.pieces_.length;r++,s++)if(i.pieces_[r]!==n.pieces_[s])return!1;return!0}function zo(i,n){let r=i.pieceNum_,s=n.pieceNum_;if(vl(i)>vl(n))return!1;for(;r<i.pieces_.length;){if(i.pieces_[r]!==n.pieces_[s])return!1;++r,++s}return!0}class MS{constructor(n,r){this.errorPrefix_=r,this.parts_=Tv(n,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=(0,V.ug)(this.parts_[s]);DC(this)}}function DC(i){if(i.byteLength_>768)throw new Error(i.errorPrefix_+"has a key path longer than 768 bytes ("+i.byteLength_+").");if(i.parts_.length>32)throw new Error(i.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+fh(i))}function fh(i){return 0===i.parts_.length?"":"in property '"+i.parts_.join(".")+"'"}class OS extends IC{constructor(){let n,r;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(r="visibilitychange",n="hidden"):void 0!==document.mozHidden?(r="mozvisibilitychange",n="mozHidden"):void 0!==document.msHidden?(r="msvisibilitychange",n="msHidden"):void 0!==document.webkitHidden&&(r="webkitvisibilitychange",n="webkitHidden")),this.visible_=!0,r&&document.addEventListener(r,()=>{const s=!document[n];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}static getInstance(){return new OS}getInitialEvent(n){return(0,V.hu)("visible"===n,"Unknown event type: "+n),[this.visible_]}}const hp=1e3;let NC,ph=(()=>{class i extends AS{constructor(r,s,a,c,h,m,E,C){if(super(),this.repoInfo_=r,this.applicationId_=s,this.onDataUpdate_=a,this.onConnectStatus_=c,this.onServerInfoUpdate_=h,this.authTokenProvider_=m,this.appCheckTokenProvider_=E,this.authOverride_=C,this.id=i.nextPersistentConnectionId_++,this.log_=cp("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=hp,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,C&&!(0,V.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");OS.getInstance().on("visible",this.onVisible_,this),-1===r.host.indexOf("fblocal")&&Nm.getInstance().on("online",this.onOnline_,this)}sendRequest(r,s,a){const c=++this.requestNumber_,h={r:c,a:r,b:s};this.log_((0,V.Pz)(h)),(0,V.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(h),a&&(this.requestCBHash_[c]=a)}get(r){this.initConnection_();const s=new V.BH,a={p:r._path.toString(),q:r._queryObject},c={action:"g",request:a,onComplete:m=>{const E=m.d;"ok"===m.s?(this.onDataUpdate_(a.p,E,!1,null),s.resolve(E)):s.reject(E)}};this.outstandingGets_.push(c),this.outstandingGetCount_++;const h=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const m=this.outstandingGets_[h];void 0===m||c!==m||(delete this.outstandingGets_[h],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+h+" timed out on connection"),s.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(h),s.promise}listen(r,s,a,c){this.initConnection_();const h=r._queryIdentifier,m=r._path.toString();this.log_("Listen called for "+m+" "+h),this.listens.has(m)||this.listens.set(m,new Map),(0,V.hu)(r._queryParams.isDefault()||!r._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,V.hu)(!this.listens.get(m).has(h),"listen() called twice for same path/queryId.");const E={onComplete:c,hashFn:s,query:r,tag:a};this.listens.get(m).set(h,E),this.connected_&&this.sendListen_(E)}sendGet_(r){const s=this.outstandingGets_[r];this.sendRequest("g",s.request,a=>{delete this.outstandingGets_[r],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),s.onComplete&&s.onComplete(a)})}sendListen_(r){const s=r.query,a=s._path.toString(),c=s._queryIdentifier;this.log_("Listen on "+a+" for "+c);const h={p:a};r.tag&&(h.q=s._queryObject,h.t=r.tag),h.h=r.hashFn(),this.sendRequest("q",h,E=>{const C=E.d,S=E.s;i.warnOnListenWarnings_(C,s),(this.listens.get(a)&&this.listens.get(a).get(c))===r&&(this.log_("listen response",E),"ok"!==S&&this.removeListen_(a,c),r.onComplete&&r.onComplete(S,C))})}static warnOnListenWarnings_(r,s){if(r&&"object"==typeof r&&(0,V.r3)(r,"w")){const a=(0,V.DV)(r,"w");if(Array.isArray(a)&&~a.indexOf("no_index")){const c='".indexOn": "'+s._queryParams.getIndex().toString()+'"',h=s._path.toString();Qi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${c} at ${h} to your security rules for better performance.`)}}}refreshAuthToken(r){this.authToken_=r,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(r)}reduceReconnectDelayIfAdminCredential_(r){(r&&40===r.length||(0,V.GJ)(r))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(r){this.appCheckToken_=r,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const r=this.authToken_,s=(0,V.w9)(r)?"auth":"gauth",a={cred:r};null===this.authOverride_?a.noauth=!0:"object"==typeof this.authOverride_&&(a.authvar=this.authOverride_),this.sendRequest(s,a,c=>{const h=c.s,m=c.d||"error";this.authToken_===r&&("ok"===h?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(h,m))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},r=>{const s=r.s,a=r.d||"error";"ok"===s?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(s,a)})}unlisten(r,s){const a=r._path.toString(),c=r._queryIdentifier;this.log_("Unlisten called for "+a+" "+c),(0,V.hu)(r._queryParams.isDefault()||!r._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(a,c)&&this.connected_&&this.sendUnlisten_(a,c,r._queryObject,s)}sendUnlisten_(r,s,a,c){this.log_("Unlisten on "+r+" for "+s);const h={p:r};c&&(h.q=a,h.t=c),this.sendRequest("n",h)}onDisconnectPut(r,s,a){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",r,s,a):this.onDisconnectRequestQueue_.push({pathString:r,action:"o",data:s,onComplete:a})}onDisconnectMerge(r,s,a){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",r,s,a):this.onDisconnectRequestQueue_.push({pathString:r,action:"om",data:s,onComplete:a})}onDisconnectCancel(r,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",r,null,s):this.onDisconnectRequestQueue_.push({pathString:r,action:"oc",data:null,onComplete:s})}sendOnDisconnect_(r,s,a,c){const h={p:s,d:a};this.log_("onDisconnect "+r,h),this.sendRequest(r,h,m=>{c&&setTimeout(()=>{c(m.s,m.d)},Math.floor(0))})}put(r,s,a,c){this.putInternal("p",r,s,a,c)}merge(r,s,a,c){this.putInternal("m",r,s,a,c)}putInternal(r,s,a,c,h){this.initConnection_();const m={p:s,d:a};void 0!==h&&(m.h=h),this.outstandingPuts_.push({action:r,request:m,onComplete:c}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+s)}sendPut_(r){const s=this.outstandingPuts_[r].action,a=this.outstandingPuts_[r].request,c=this.outstandingPuts_[r].onComplete;this.outstandingPuts_[r].queued=this.connected_,this.sendRequest(s,a,h=>{this.log_(s+" response",h),delete this.outstandingPuts_[r],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),c&&c(h.s,h.d)})}reportStats(r){if(this.connected_){const s={c:r};this.log_("reportStats",s),this.sendRequest("s",s,a=>{"ok"!==a.s&&this.log_("reportStats","Error sending stats: "+a.d)})}}onDataMessage_(r){if("r"in r){this.log_("from server: "+(0,V.Pz)(r));const s=r.r,a=this.requestCBHash_[s];a&&(delete this.requestCBHash_[s],a(r.b))}else{if("error"in r)throw"A server-side error has occurred: "+r.error;"a"in r&&this.onDataPush_(r.a,r.b)}}onDataPush_(r,s){this.log_("handleServerMessage",r,s),"d"===r?this.onDataUpdate_(s.p,s.d,!1,s.t):"m"===r?this.onDataUpdate_(s.p,s.d,!0,s.t):"c"===r?this.onListenRevoked_(s.p,s.q):"ac"===r?this.onAuthRevoked_(s.s,s.d):"apc"===r?this.onAppCheckRevoked_(s.s,s.d):"sd"===r?this.onSecurityDebugPacket_(s):pv("Unrecognized action received from server: "+(0,V.Pz)(r)+"\nAre you using the latest client?")}onReady_(r,s){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(r),this.lastSessionId=s,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(r){(0,V.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(r))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(r){r&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=hp,this.realtime_||this.scheduleConnect_(0)),this.visible_=r}onOnline_(r){r?(this.log_("Browser went online."),this.reconnectDelay_=hp,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=hp),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const r=(new Date).getTime()-this.lastConnectionAttemptTime_;let s=Math.max(0,this.reconnectDelay_-r);s=Math.random()*s,this.log_("Trying to reconnect in "+s+"ms"),this.scheduleConnect_(s),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var r=this;return(0,Se.Z)(function*(){if(r.shouldReconnect_()){r.log_("Making a connection attempt"),r.lastConnectionAttemptTime_=(new Date).getTime(),r.lastConnectionEstablishedTime_=null;const s=r.onDataMessage_.bind(r),a=r.onReady_.bind(r),c=r.onRealtimeDisconnect_.bind(r),h=r.id+":"+i.nextConnectionId_++,m=r.lastSessionId;let E=!1,C=null;const S=function(){C?C.close():(E=!0,c())};r.realtime_={close:S,sendRequest:function(B){(0,V.hu)(C,"sendRequest call when we're not connected not allowed."),C.sendRequest(B)}};const O=r.forceTokenRefresh_;r.forceTokenRefresh_=!1;try{const[B,W]=yield Promise.all([r.authTokenProvider_.getToken(O),r.appCheckTokenProvider_.getToken(O)]);E?bi("getToken() completed but was canceled"):(bi("getToken() completed. Creating connection."),r.authToken_=B&&B.accessToken,r.appCheckToken_=W&&W.token,C=new TC(h,r.repoInfo_,r.applicationId_,r.appCheckToken_,r.authToken_,s,a,c,ue=>{Qi(ue+" ("+r.repoInfo_.toString()+")"),r.interrupt("server_kill")},m))}catch(B){r.log_("Failed to get token: "+B),E||(r.repoInfo_.nodeAdmin&&Qi(B),S())}}})()}interrupt(r){bi("Interrupting connection for reason: "+r),this.interruptReasons_[r]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(r){bi("Resuming connection for reason: "+r),delete this.interruptReasons_[r],(0,V.xb)(this.interruptReasons_)&&(this.reconnectDelay_=hp,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(r){const s=r-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:s})}cancelSentTransactions_(){for(let r=0;r<this.outstandingPuts_.length;r++){const s=this.outstandingPuts_[r];s&&"h"in s.request&&s.queued&&(s.onComplete&&s.onComplete("disconnect"),delete this.outstandingPuts_[r],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(r,s){let a;a=s?s.map(h=>hS(h)).join("$"):"default";const c=this.removeListen_(r,a);c&&c.onComplete&&c.onComplete("permission_denied")}removeListen_(r,s){const a=new Sn(r).toString();let c;if(this.listens.has(a)){const h=this.listens.get(a);c=h.get(s),h.delete(s),0===h.size&&this.listens.delete(a)}else c=void 0;return c}onAuthRevoked_(r,s){bi("Auth token revoked: "+r+"/"+s),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===r||"permission_denied"===r)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(r,s){bi("App check token revoked: "+r+"/"+s),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===r||"permission_denied"===r)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(r){this.securityDebugCallback_?this.securityDebugCallback_(r):"msg"in r&&console.log("FIREBASE: "+r.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const r of this.listens.values())for(const s of r.values())this.sendListen_(s);for(let r=0;r<this.outstandingPuts_.length;r++)this.outstandingPuts_[r]&&this.sendPut_(r);for(;this.onDisconnectRequestQueue_.length;){const r=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(r.action,r.pathString,r.data,r.onComplete)}for(let r=0;r<this.outstandingGets_.length;r++)this.outstandingGets_[r]&&this.sendGet_(r)}sendConnectStats_(){const r={};let s="js";(0,V.Yr)()&&(s=this.repoInfo_.nodeAdmin?"admin_node":"node"),r["sdk."+s+"."+uC.replace(/\./g,"-")]=1,(0,V.uI)()?r["framework.cordova"]=1:(0,V.b$)()&&(r["framework.reactnative"]=1),this.reportStats(r)}shouldReconnect_(){const r=Nm.getInstance().currentlyOnline();return(0,V.xb)(this.interruptReasons_)&&r}}return i.nextPersistentConnectionId_=0,i.nextConnectionId_=0,i})();class nn{constructor(n,r){this.name=n,this.node=r}static Wrap(n,r){return new nn(n,r)}}class RC{getCompare(){return this.compare.bind(this)}indexedValueChanged(n,r){const s=new nn(yl,n),a=new nn(yl,r);return 0!==this.compare(s,a)}minPost(){return nn.MIN}}class YP extends RC{static get __EMPTY_NODE(){return NC}static set __EMPTY_NODE(n){NC=n}compare(n,r){return dp(n.name,r.name)}isDefinedOn(n){throw(0,V.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(n,r){return!1}minPost(){return nn.MIN}maxPost(){return new nn(gu,NC)}makePost(n,r){return(0,V.hu)("string"==typeof n,"KeyIndex indexValue must always be a string."),new nn(n,NC)}toString(){return".key"}}const Ta=new YP;class Pm{constructor(n,r,s,a,c=null){this.isReverse_=a,this.resultGenerator_=c,this.nodeStack_=[];let h=1;for(;!n.isEmpty();)if(n=n,h=r?s(n.key,r):1,a&&(h*=-1),h<0)n=this.isReverse_?n.left:n.right;else{if(0===h){this.nodeStack_.push(n);break}this.nodeStack_.push(n),n=this.isReverse_?n.right:n.left}}getNext(){if(0===this.nodeStack_.length)return null;let r,n=this.nodeStack_.pop();if(r=this.resultGenerator_?this.resultGenerator_(n.key,n.value):{key:n.key,value:n.value},this.isReverse_)for(n=n.left;!n.isEmpty();)this.nodeStack_.push(n),n=n.right;else for(n=n.right;!n.isEmpty();)this.nodeStack_.push(n),n=n.left;return r}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const n=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(n.key,n.value):{key:n.key,value:n.value}}}let VS,Ia=(()=>{class i{constructor(r,s,a,c,h){this.key=r,this.value=s,this.color=null!=a?a:i.RED,this.left=null!=c?c:Ls.EMPTY_NODE,this.right=null!=h?h:Ls.EMPTY_NODE}copy(r,s,a,c,h){return new i(null!=r?r:this.key,null!=s?s:this.value,null!=a?a:this.color,null!=c?c:this.left,null!=h?h:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(r){return this.left.inorderTraversal(r)||!!r(this.key,this.value)||this.right.inorderTraversal(r)}reverseTraversal(r){return this.right.reverseTraversal(r)||r(this.key,this.value)||this.left.reverseTraversal(r)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(r,s,a){let c=this;const h=a(r,c.key);return c=h<0?c.copy(null,null,null,c.left.insert(r,s,a),null):0===h?c.copy(null,s,null,null,null):c.copy(null,null,null,null,c.right.insert(r,s,a)),c.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ls.EMPTY_NODE;let r=this;return!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.removeMin_(),null),r.fixUp_()}remove(r,s){let a,c;if(a=this,s(r,a.key)<0)!a.left.isEmpty()&&!a.left.isRed_()&&!a.left.left.isRed_()&&(a=a.moveRedLeft_()),a=a.copy(null,null,null,a.left.remove(r,s),null);else{if(a.left.isRed_()&&(a=a.rotateRight_()),!a.right.isEmpty()&&!a.right.isRed_()&&!a.right.left.isRed_()&&(a=a.moveRedRight_()),0===s(r,a.key)){if(a.right.isEmpty())return Ls.EMPTY_NODE;c=a.right.min_(),a=a.copy(c.key,c.value,null,null,a.right.removeMin_())}a=a.copy(null,null,null,null,a.right.remove(r,s))}return a.fixUp_()}isRed_(){return this.color}fixUp_(){let r=this;return r.right.isRed_()&&!r.left.isRed_()&&(r=r.rotateLeft_()),r.left.isRed_()&&r.left.left.isRed_()&&(r=r.rotateRight_()),r.left.isRed_()&&r.right.isRed_()&&(r=r.colorFlip_()),r}moveRedLeft_(){let r=this.colorFlip_();return r.right.left.isRed_()&&(r=r.copy(null,null,null,null,r.right.rotateRight_()),r=r.rotateLeft_(),r=r.colorFlip_()),r}moveRedRight_(){let r=this.colorFlip_();return r.left.left.isRed_()&&(r=r.rotateRight_(),r=r.colorFlip_()),r}rotateLeft_(){const r=this.copy(null,null,i.RED,null,this.right.left);return this.right.copy(null,null,this.color,r,null)}rotateRight_(){const r=this.copy(null,null,i.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,r)}colorFlip_(){const r=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,r,s)}checkMaxDepth_(){const r=this.check_();return Math.pow(2,r)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const r=this.left.check_();if(r!==this.right.check_())throw new Error("Black depths differ");return r+(this.isRed_()?0:1)}}return i.RED=!0,i.BLACK=!1,i})();class Ls{constructor(n,r=Ls.EMPTY_NODE){this.comparator_=n,this.root_=r}insert(n,r){return new Ls(this.comparator_,this.root_.insert(n,r,this.comparator_).copy(null,null,Ia.BLACK,null,null))}remove(n){return new Ls(this.comparator_,this.root_.remove(n,this.comparator_).copy(null,null,Ia.BLACK,null,null))}get(n){let r,s=this.root_;for(;!s.isEmpty();){if(r=this.comparator_(n,s.key),0===r)return s.value;r<0?s=s.left:r>0&&(s=s.right)}return null}getPredecessorKey(n){let r,s=this.root_,a=null;for(;!s.isEmpty();){if(r=this.comparator_(n,s.key),0===r){if(s.left.isEmpty())return a?a.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}r<0?s=s.left:r>0&&(a=s,s=s.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(n){return this.root_.inorderTraversal(n)}reverseTraversal(n){return this.root_.reverseTraversal(n)}getIterator(n){return new Pm(this.root_,null,this.comparator_,!1,n)}getIteratorFrom(n,r){return new Pm(this.root_,n,this.comparator_,!1,r)}getReverseIteratorFrom(n,r){return new Pm(this.root_,n,this.comparator_,!0,r)}getReverseIterator(n){return new Pm(this.root_,null,this.comparator_,!0,n)}}function JP(i,n){return dp(i.name,n.name)}function Iv(i,n){return dp(i,n)}Ls.EMPTY_NODE=new class{copy(n,r,s,a,c){return this}insert(n,r,s){return new Ia(n,r,null)}remove(n,r){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const US=function(i){return"number"==typeof i?"number:"+IP(i):"string:"+i},Dv=function(i){if(i.isLeafNode()){const n=i.val();(0,V.hu)("string"==typeof n||"number"==typeof n||"object"==typeof n&&(0,V.r3)(n,".sv"),"Priority must be a string or number.")}else(0,V.hu)(i===VS||i.isEmpty(),"priority of unexpected type.");(0,V.hu)(i===VS||i.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let li,xC,PC,Mm=(()=>{class i{constructor(r,s=i.__childrenNodeConstructor.EMPTY_NODE){this.value_=r,this.priorityNode_=s,this.lazyHash_=null,(0,V.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Dv(this.priorityNode_)}static set __childrenNodeConstructor(r){li=r}static get __childrenNodeConstructor(){return li}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(r){return new i(this.value_,r)}getImmediateChild(r){return".priority"===r?this.priorityNode_:i.__childrenNodeConstructor.EMPTY_NODE}getChild(r){return en(r)?this:".priority"===Jt(r)?this.priorityNode_:i.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(r,s){return null}updateImmediateChild(r,s){return".priority"===r?this.updatePriority(s):s.isEmpty()&&".priority"!==r?this:i.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(r,s).updatePriority(this.priorityNode_)}updateChild(r,s){const a=Jt(r);return null===a?s:s.isEmpty()&&".priority"!==a?this:((0,V.hu)(".priority"!==a||1===vl(r),".priority must be the last token in a path"),this.updateImmediateChild(a,i.__childrenNodeConstructor.EMPTY_NODE.updateChild($n(r),s)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(r,s){return!1}val(r){return r&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let r="";this.priorityNode_.isEmpty()||(r+="priority:"+US(this.priorityNode_.val())+":");const s=typeof this.value_;r+=s+":",r+="number"===s?IP(this.value_):this.value_,this.lazyHash_=dC(r)}return this.lazyHash_}getValue(){return this.value_}compareTo(r){return r===i.__childrenNodeConstructor.EMPTY_NODE?1:r instanceof i.__childrenNodeConstructor?-1:((0,V.hu)(r.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(r))}compareToLeafNode_(r){const s=typeof r.value_,a=typeof this.value_,c=i.VALUE_TYPE_ORDER.indexOf(s),h=i.VALUE_TYPE_ORDER.indexOf(a);return(0,V.hu)(c>=0,"Unknown leaf type: "+s),(0,V.hu)(h>=0,"Unknown leaf type: "+a),c===h?"object"===a?0:this.value_<r.value_?-1:this.value_===r.value_?0:1:h-c}withIndex(){return this}isIndexed(){return!0}equals(r){if(r===this)return!0;if(r.isLeafNode()){const s=r;return this.value_===s.value_&&this.priorityNode_.equals(s.priorityNode_)}return!1}}return i.VALUE_TYPE_ORDER=["object","boolean","number","string"],i})();const Qn=new class extends RC{compare(n,r){const s=n.node.getPriority(),a=r.node.getPriority(),c=s.compareTo(a);return 0===c?dp(n.name,r.name):c}isDefinedOn(n){return!n.getPriority().isEmpty()}indexedValueChanged(n,r){return!n.getPriority().equals(r.getPriority())}minPost(){return nn.MIN}maxPost(){return new nn(gu,new Mm("[PRIORITY-POST]",PC))}makePost(n,r){const s=xC(n);return new nn(r,new Mm("[PRIORITY-POST]",s))}toString(){return".priority"}},BS=Math.log(2);class gh{constructor(n){this.count=parseInt(Math.log(n+1)/BS,10),this.current_=this.count-1;const a=(c=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=n+1&a}nextBitIsOne(){const n=!(this.bits_&1<<this.current_);return this.current_--,n}}const Om=function(i,n,r,s){i.sort(n);const a=function(E,C){const S=C-E;let N,O;if(0===S)return null;if(1===S)return N=i[E],O=r?r(N):N,new Ia(O,N.node,Ia.BLACK,null,null);{const B=parseInt(S/2,10)+E,W=a(E,B),ue=a(B+1,C);return N=i[B],O=r?r(N):N,new Ia(O,N.node,Ia.BLACK,W,ue)}},m=function(E){let C=null,S=null,N=i.length;const O=function(W,ue){const Pe=N-W,Ze=N;N-=W;const rt=a(Pe+1,Ze),pt=i[Pe],tt=r?r(pt):pt;B(new Ia(tt,pt.node,ue,null,rt))},B=function(W){C?(C.left=W,C=W):(S=W,C=W)};for(let W=0;W<E.count;++W){const ue=E.nextBitIsOne(),Pe=Math.pow(2,E.count-(W+1));ue?O(Pe,Ia.BLACK):(O(Pe,Ia.BLACK),O(Pe,Ia.RED))}return S}(new gh(i.length));return new Ls(s||n,m)};let km;const Sc={};class mu{constructor(n,r){this.indexes_=n,this.indexSet_=r}static get Default(){return(0,V.hu)(Sc&&Qn,"ChildrenNode.ts has not been loaded"),km=km||new mu({".priority":Sc},{".priority":Qn}),km}get(n){const r=(0,V.DV)(this.indexes_,n);if(!r)throw new Error("No index defined for "+n);return r instanceof Ls?r:null}hasIndex(n){return(0,V.r3)(this.indexSet_,n.toString())}addIndex(n,r){(0,V.hu)(n!==Ta,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let a=!1;const c=r.getIterator(nn.Wrap);let m,h=c.getNext();for(;h;)a=a||n.isDefinedOn(h.node),s.push(h),h=c.getNext();m=a?Om(s,n.getCompare()):Sc;const E=n.toString(),C=Object.assign({},this.indexSet_);C[E]=n;const S=Object.assign({},this.indexes_);return S[E]=m,new mu(S,C)}addToIndexes(n,r){const s=(0,V.UI)(this.indexes_,(a,c)=>{const h=(0,V.DV)(this.indexSet_,c);if((0,V.hu)(h,"Missing index implementation for "+c),a===Sc){if(h.isDefinedOn(n.node)){const m=[],E=r.getIterator(nn.Wrap);let C=E.getNext();for(;C;)C.name!==n.name&&m.push(C),C=E.getNext();return m.push(n),Om(m,h.getCompare())}return Sc}{const m=r.get(n.name);let E=a;return m&&(E=E.remove(new nn(n.name,m))),E.insert(n,n.node)}});return new mu(s,this.indexSet_)}removeFromIndexes(n,r){const s=(0,V.UI)(this.indexes_,a=>{if(a===Sc)return a;{const c=r.get(n.name);return c?a.remove(new nn(n.name,c)):a}});return new mu(s,this.indexSet_)}}let Ac,Gt=(()=>{class i{constructor(r,s,a){this.children_=r,this.priorityNode_=s,this.indexMap_=a,this.lazyHash_=null,this.priorityNode_&&Dv(this.priorityNode_),this.children_.isEmpty()&&(0,V.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ac||(Ac=new i(new Ls(Iv),null,mu.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ac}updatePriority(r){return this.children_.isEmpty()?this:new i(this.children_,r,this.indexMap_)}getImmediateChild(r){if(".priority"===r)return this.getPriority();{const s=this.children_.get(r);return null===s?Ac:s}}getChild(r){const s=Jt(r);return null===s?this:this.getImmediateChild(s).getChild($n(r))}hasChild(r){return null!==this.children_.get(r)}updateImmediateChild(r,s){if((0,V.hu)(s,"We should always be passing snapshot nodes"),".priority"===r)return this.updatePriority(s);{const a=new nn(r,s);let c,h;s.isEmpty()?(c=this.children_.remove(r),h=this.indexMap_.removeFromIndexes(a,this.children_)):(c=this.children_.insert(r,s),h=this.indexMap_.addToIndexes(a,this.children_));const m=c.isEmpty()?Ac:this.priorityNode_;return new i(c,m,h)}}updateChild(r,s){const a=Jt(r);if(null===a)return s;{(0,V.hu)(".priority"!==Jt(r)||1===vl(r),".priority must be the last token in a path");const c=this.getImmediateChild(a).updateChild($n(r),s);return this.updateImmediateChild(a,c)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(r){if(this.isEmpty())return null;const s={};let a=0,c=0,h=!0;if(this.forEachChild(Qn,(m,E)=>{s[m]=E.val(r),a++,h&&i.INTEGER_REGEXP_.test(m)?c=Math.max(c,Number(m)):h=!1}),!r&&h&&c<2*a){const m=[];for(const E in s)m[E]=s[E];return m}return r&&!this.getPriority().isEmpty()&&(s[".priority"]=this.getPriority().val()),s}hash(){if(null===this.lazyHash_){let r="";this.getPriority().isEmpty()||(r+="priority:"+US(this.getPriority().val())+":"),this.forEachChild(Qn,(s,a)=>{const c=a.hash();""!==c&&(r+=":"+s+":"+c)}),this.lazyHash_=""===r?"":dC(r)}return this.lazyHash_}getPredecessorChildName(r,s,a){const c=this.resolveIndex_(a);if(c){const h=c.getPredecessorKey(new nn(r,s));return h?h.name:null}return this.children_.getPredecessorKey(r)}getFirstChildName(r){const s=this.resolveIndex_(r);if(s){const a=s.minKey();return a&&a.name}return this.children_.minKey()}getFirstChild(r){const s=this.getFirstChildName(r);return s?new nn(s,this.children_.get(s)):null}getLastChildName(r){const s=this.resolveIndex_(r);if(s){const a=s.maxKey();return a&&a.name}return this.children_.maxKey()}getLastChild(r){const s=this.getLastChildName(r);return s?new nn(s,this.children_.get(s)):null}forEachChild(r,s){const a=this.resolveIndex_(r);return a?a.inorderTraversal(c=>s(c.name,c.node)):this.children_.inorderTraversal(s)}getIterator(r){return this.getIteratorFrom(r.minPost(),r)}getIteratorFrom(r,s){const a=this.resolveIndex_(s);if(a)return a.getIteratorFrom(r,c=>c);{const c=this.children_.getIteratorFrom(r.name,nn.Wrap);let h=c.peek();for(;null!=h&&s.compare(h,r)<0;)c.getNext(),h=c.peek();return c}}getReverseIterator(r){return this.getReverseIteratorFrom(r.maxPost(),r)}getReverseIteratorFrom(r,s){const a=this.resolveIndex_(s);if(a)return a.getReverseIteratorFrom(r,c=>c);{const c=this.children_.getReverseIteratorFrom(r.name,nn.Wrap);let h=c.peek();for(;null!=h&&s.compare(h,r)>0;)c.getNext(),h=c.peek();return c}}compareTo(r){return this.isEmpty()?r.isEmpty()?0:-1:r.isLeafNode()||r.isEmpty()?1:r===fp?-1:0}withIndex(r){if(r===Ta||this.indexMap_.hasIndex(r))return this;{const s=this.indexMap_.addIndex(r,this.children_);return new i(this.children_,this.priorityNode_,s)}}isIndexed(r){return r===Ta||this.indexMap_.hasIndex(r)}equals(r){if(r===this)return!0;if(r.isLeafNode())return!1;{const s=r;if(this.getPriority().equals(s.getPriority())){if(this.children_.count()===s.children_.count()){const a=this.getIterator(Qn),c=s.getIterator(Qn);let h=a.getNext(),m=c.getNext();for(;h&&m;){if(h.name!==m.name||!h.node.equals(m.node))return!1;h=a.getNext(),m=c.getNext()}return null===h&&null===m}return!1}return!1}}resolveIndex_(r){return r===Ta?null:this.indexMap_.get(r.toString())}}return i.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,i})();const fp=new class extends Gt{constructor(){super(new Ls(Iv),Gt.EMPTY_NODE,mu.Default)}compareTo(n){return n===this?0:1}equals(n){return n===this}getPriority(){return this}getImmediateChild(n){return Gt.EMPTY_NODE}isEmpty(){return!1}};function Ir(i,n=null){if(null===i)return Gt.EMPTY_NODE;if("object"==typeof i&&".priority"in i&&(n=i[".priority"]),(0,V.hu)(null===n||"string"==typeof n||"number"==typeof n||"object"==typeof n&&".sv"in n,"Invalid priority type found: "+typeof n),"object"==typeof i&&".value"in i&&null!==i[".value"]&&(i=i[".value"]),"object"!=typeof i||".sv"in i)return new Mm(i,Ir(n));if(i instanceof Array){let r=Gt.EMPTY_NODE;return Oi(i,(s,a)=>{if((0,V.r3)(i,s)&&"."!==s.substring(0,1)){const c=Ir(a);(c.isLeafNode()||!c.isEmpty())&&(r=r.updateImmediateChild(s,c))}}),r.updatePriority(Ir(n))}{const r=[];let s=!1;if(Oi(i,(h,m)=>{if("."!==h.substring(0,1)){const E=Ir(m);E.isEmpty()||(s=s||!E.getPriority().isEmpty(),r.push(new nn(h,E)))}}),0===r.length)return Gt.EMPTY_NODE;const c=Om(r,JP,h=>h.name,Iv);if(s){const h=Om(r,Qn.getCompare());return new Gt(c,Ir(n),new mu({".priority":h},{".priority":Qn}))}return new Gt(c,Ir(n),mu.Default)}}Object.defineProperties(nn,{MIN:{value:new nn(yl,Gt.EMPTY_NODE)},MAX:{value:new nn(gu,fp)}}),YP.__EMPTY_NODE=Gt.EMPTY_NODE,Mm.__childrenNodeConstructor=Gt,function(i){VS=i}(fp),function(i){PC=i}(fp),function(i){xC=i}(Ir);class OC extends RC{constructor(n){super(),this.indexPath_=n,(0,V.hu)(!en(n)&&".priority"!==Jt(n),"Can't create PathIndex with empty path or .priority key")}extractChild(n){return n.getChild(this.indexPath_)}isDefinedOn(n){return!n.getChild(this.indexPath_).isEmpty()}compare(n,r){const s=this.extractChild(n.node),a=this.extractChild(r.node),c=s.compareTo(a);return 0===c?dp(n.name,r.name):c}makePost(n,r){const s=Ir(n),a=Gt.EMPTY_NODE.updateChild(this.indexPath_,s);return new nn(r,a)}maxPost(){const n=Gt.EMPTY_NODE.updateChild(this.indexPath_,fp);return new nn(gu,n)}toString(){return Tv(this.indexPath_,0).join("/")}}const jS=new class extends RC{compare(n,r){const s=n.node.compareTo(r.node);return 0===s?dp(n.name,r.name):s}isDefinedOn(n){return!0}indexedValueChanged(n,r){return!n.equals(r)}minPost(){return nn.MIN}maxPost(){return nn.MAX}makePost(n,r){const s=Ir(n);return new nn(r,s)}toString(){return".value"}},_u="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",K1=function(){let i=0;const n=[];return function(r){const s=r===i;let a;i=r;const c=new Array(8);for(a=7;a>=0;a--)c[a]=_u.charAt(r%64),r=Math.floor(r/64);(0,V.hu)(0===r,"Cannot push at time == 0");let h=c.join("");if(s){for(a=11;a>=0&&63===n[a];a--)n[a]=0;n[a]++}else for(a=0;a<12;a++)n[a]=Math.floor(64*Math.random());for(a=0;a<12;a++)h+=_u.charAt(n[a]);return(0,V.hu)(20===h.length,"nextPushId: Length should be 20."),h}}(),$S=function(i){if(i===""+fS)return"-";const n=fC(i);if(null!=n)return""+(n+1);const r=new Array(i.length);for(let h=0;h<r.length;h++)r[h]=i.charAt(h);if(r.length<786)return r.push("-"),r.join("");let s=r.length-1;for(;s>=0&&"z"===r[s];)s--;if(-1===s)return gu;const c=_u.charAt(_u.indexOf(r[s])+1);return r[s]=c,r.slice(0,s+1).join("")},HS=function(i){if(i===""+DP)return yl;const n=fC(i);if(null!=n)return""+(n-1);const r=new Array(i.length);for(let s=0;s<r.length;s++)r[s]=i.charAt(s);return"-"===r[r.length-1]?1===r.length?""+fS:(delete r[r.length-1],r.join("")):(r[r.length-1]=_u.charAt(_u.indexOf(r[r.length-1])-1),r.join("")+"z".repeat(786-r.length))};function GS(i){return{type:"value",snapshotNode:i}}function pp(i,n){return{type:"child_added",snapshotNode:n,childName:i}}function Fm(i,n){return{type:"child_removed",snapshotNode:n,childName:i}}function Av(i,n,r){return{type:"child_changed",snapshotNode:n,childName:i,oldSnap:r}}class FC{constructor(n){this.index_=n}updateChild(n,r,s,a,c,h){(0,V.hu)(n.isIndexed(this.index_),"A node must be indexed if only a child is updated");const m=n.getImmediateChild(r);return m.getChild(a).equals(s.getChild(a))&&m.isEmpty()===s.isEmpty()||(null!=h&&(s.isEmpty()?n.hasChild(r)?h.trackChildChange(Fm(r,m)):(0,V.hu)(n.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):m.isEmpty()?h.trackChildChange(pp(r,s)):h.trackChildChange(Av(r,s,m))),n.isLeafNode()&&s.isEmpty())?n:n.updateImmediateChild(r,s).withIndex(this.index_)}updateFullNode(n,r,s){return null!=s&&(n.isLeafNode()||n.forEachChild(Qn,(a,c)=>{r.hasChild(a)||s.trackChildChange(Fm(a,c))}),r.isLeafNode()||r.forEachChild(Qn,(a,c)=>{if(n.hasChild(a)){const h=n.getImmediateChild(a);h.equals(c)||s.trackChildChange(Av(a,c,h))}else s.trackChildChange(pp(a,c))})),r.withIndex(this.index_)}updatePriority(n,r){return n.isEmpty()?Gt.EMPTY_NODE:n.updatePriority(r)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Lm{constructor(n){this.indexedFilter_=new FC(n.getIndex()),this.index_=n.getIndex(),this.startPost_=Lm.getStartPost_(n),this.endPost_=Lm.getEndPost_(n)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(n){return this.index_.compare(this.getStartPost(),n)<=0&&this.index_.compare(n,this.getEndPost())<=0}updateChild(n,r,s,a,c,h){return this.matches(new nn(r,s))||(s=Gt.EMPTY_NODE),this.indexedFilter_.updateChild(n,r,s,a,c,h)}updateFullNode(n,r,s){r.isLeafNode()&&(r=Gt.EMPTY_NODE);let a=r.withIndex(this.index_);a=a.updatePriority(Gt.EMPTY_NODE);const c=this;return r.forEachChild(Qn,(h,m)=>{c.matches(new nn(h,m))||(a=a.updateImmediateChild(h,Gt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(n,a,s)}updatePriority(n,r){return n}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(n){if(n.hasStart()){const r=n.getIndexStartName();return n.getIndex().makePost(n.getIndexStartValue(),r)}return n.getIndex().minPost()}static getEndPost_(n){if(n.hasEnd()){const r=n.getIndexEndName();return n.getIndex().makePost(n.getIndexEndValue(),r)}return n.getIndex().maxPost()}}class Z1{constructor(n){this.rangedFilter_=new Lm(n),this.index_=n.getIndex(),this.limit_=n.getLimit(),this.reverse_=!n.isViewFromLeft()}updateChild(n,r,s,a,c,h){return this.rangedFilter_.matches(new nn(r,s))||(s=Gt.EMPTY_NODE),n.getImmediateChild(r).equals(s)?n:n.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(n,r,s,a,c,h):this.fullLimitUpdateChild_(n,r,s,c,h)}updateFullNode(n,r,s){let a;if(r.isLeafNode()||r.isEmpty())a=Gt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<r.numChildren()&&r.isIndexed(this.index_)){let c;a=Gt.EMPTY_NODE.withIndex(this.index_),c=this.reverse_?r.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):r.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let h=0;for(;c.hasNext()&&h<this.limit_;){const m=c.getNext();let E;if(E=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),m)<=0:this.index_.compare(m,this.rangedFilter_.getEndPost())<=0,!E)break;a=a.updateImmediateChild(m.name,m.node),h++}}else{let c,h,m,E;if(a=r.withIndex(this.index_),a=a.updatePriority(Gt.EMPTY_NODE),this.reverse_){E=a.getReverseIterator(this.index_),c=this.rangedFilter_.getEndPost(),h=this.rangedFilter_.getStartPost();const N=this.index_.getCompare();m=(O,B)=>N(B,O)}else E=a.getIterator(this.index_),c=this.rangedFilter_.getStartPost(),h=this.rangedFilter_.getEndPost(),m=this.index_.getCompare();let C=0,S=!1;for(;E.hasNext();){const N=E.getNext();!S&&m(c,N)<=0&&(S=!0),S&&C<this.limit_&&m(N,h)<=0?C++:a=a.updateImmediateChild(N.name,Gt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(n,a,s)}updatePriority(n,r){return n}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(n,r,s,a,c){let h;if(this.reverse_){const N=this.index_.getCompare();h=(O,B)=>N(B,O)}else h=this.index_.getCompare();const m=n;(0,V.hu)(m.numChildren()===this.limit_,"");const E=new nn(r,s),C=this.reverse_?m.getFirstChild(this.index_):m.getLastChild(this.index_),S=this.rangedFilter_.matches(E);if(m.hasChild(r)){const N=m.getImmediateChild(r);let O=a.getChildAfterChild(this.index_,C,this.reverse_);for(;null!=O&&(O.name===r||m.hasChild(O.name));)O=a.getChildAfterChild(this.index_,O,this.reverse_);const B=null==O?1:h(O,E);if(S&&!s.isEmpty()&&B>=0)return null!=c&&c.trackChildChange(Av(r,s,N)),m.updateImmediateChild(r,s);{null!=c&&c.trackChildChange(Fm(r,N));const ue=m.updateImmediateChild(r,Gt.EMPTY_NODE);return null!=O&&this.rangedFilter_.matches(O)?(null!=c&&c.trackChildChange(pp(O.name,O.node)),ue.updateImmediateChild(O.name,O.node)):ue}}return s.isEmpty()?n:S&&h(C,E)>=0?(null!=c&&(c.trackChildChange(Fm(C.name,C.node)),c.trackChildChange(pp(r,s))),m.updateImmediateChild(r,s).updateImmediateChild(C.name,Gt.EMPTY_NODE)):n}}class LC{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Qn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,V.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,V.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:yl}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,V.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,V.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:gu}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,V.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Qn}copy(){const n=new LC;return n.limitSet_=this.limitSet_,n.limit_=this.limit_,n.startSet_=this.startSet_,n.indexStartValue_=this.indexStartValue_,n.startNameSet_=this.startNameSet_,n.indexStartName_=this.indexStartName_,n.endSet_=this.endSet_,n.indexEndValue_=this.indexEndValue_,n.endNameSet_=this.endNameSet_,n.indexEndName_=this.indexEndName_,n.index_=this.index_,n.viewFrom_=this.viewFrom_,n}}function VC(i,n,r){const s=i.copy();return s.startSet_=!0,void 0===n&&(n=null),s.indexStartValue_=n,null!=r?(s.startNameSet_=!0,s.indexStartName_=r):(s.startNameSet_=!1,s.indexStartName_=""),s}function ao(i,n,r){const s=i.copy();return s.endSet_=!0,void 0===n&&(n=null),s.indexEndValue_=n,void 0!==r?(s.endNameSet_=!0,s.indexEndName_=r):(s.endNameSet_=!1,s.indexEndName_=""),s}function Rv(i,n){const r=i.copy();return r.index_=n,r}function qS(i){const n={};if(i.isDefault())return n;let r;return i.index_===Qn?r="$priority":i.index_===jS?r="$value":i.index_===Ta?r="$key":((0,V.hu)(i.index_ instanceof OC,"Unrecognized index type!"),r=i.index_.toString()),n.orderBy=(0,V.Pz)(r),i.startSet_&&(n.startAt=(0,V.Pz)(i.indexStartValue_),i.startNameSet_&&(n.startAt+=","+(0,V.Pz)(i.indexStartName_))),i.endSet_&&(n.endAt=(0,V.Pz)(i.indexEndValue_),i.endNameSet_&&(n.endAt+=","+(0,V.Pz)(i.indexEndName_))),i.limitSet_&&(i.isViewFromLeft()?n.limitToFirst=i.limit_:n.limitToLast=i.limit_),n}function WS(i){const n={};if(i.startSet_&&(n.sp=i.indexStartValue_,i.startNameSet_&&(n.sn=i.indexStartName_)),i.endSet_&&(n.ep=i.indexEndValue_,i.endNameSet_&&(n.en=i.indexEndName_)),i.limitSet_){n.l=i.limit_;let r=i.viewFrom_;""===r&&(r=i.isViewFromLeft()?"l":"r"),n.vf=r}return i.index_!==Qn&&(n.i=i.index_.toString()),n}class UC extends AS{constructor(n,r,s,a){super(),this.repoInfo_=n,this.onDataUpdate_=r,this.authTokenProvider_=s,this.appCheckTokenProvider_=a,this.log_=cp("p:rest:"),this.listens_={}}reportStats(n){throw new Error("Method not implemented.")}static getListenId_(n,r){return void 0!==r?"tag$"+r:((0,V.hu)(n._queryParams.isDefault(),"should have a tag if it's not a default query."),n._path.toString())}listen(n,r,s,a){const c=n._path.toString();this.log_("Listen called for "+c+" "+n._queryIdentifier);const h=UC.getListenId_(n,s),m={};this.listens_[h]=m;const E=qS(n._queryParams);this.restRequest_(c+".json",E,(C,S)=>{let N=S;if(404===C&&(N=null,C=null),null===C&&this.onDataUpdate_(c,N,!1,s),(0,V.DV)(this.listens_,h)===m){let O;O=C?401===C?"permission_denied":"rest_error:"+C:"ok",a(O,null)}})}unlisten(n,r){const s=UC.getListenId_(n,r);delete this.listens_[s]}get(n){const r=qS(n._queryParams),s=n._path.toString(),a=new V.BH;return this.restRequest_(s+".json",r,(c,h)=>{let m=h;404===c&&(m=null,c=null),null===c?(this.onDataUpdate_(s,m,!1,null),a.resolve(m)):a.reject(new Error(m))}),a.promise}refreshAuthToken(n){}restRequest_(n,r={},s){return r.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([a,c])=>{a&&a.accessToken&&(r.auth=a.accessToken),c&&c.token&&(r.ac=c.token);const h=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+n+"?ns="+this.repoInfo_.namespace+(0,V.xO)(r);this.log_("Sending REST request for "+h);const m=new XMLHttpRequest;m.onreadystatechange=()=>{if(s&&4===m.readyState){this.log_("REST Response for "+h+" received. status:",m.status,"response:",m.responseText);let E=null;if(m.status>=200&&m.status<300){try{E=(0,V.cI)(m.responseText)}catch(C){Qi("Failed to parse JSON response for "+h+": "+m.responseText)}s(null,E)}else 401!==m.status&&404!==m.status&&Qi("Got unsuccessful REST response for "+h+" Status: "+m.status),s(m.status);s=null}},m.open("GET",h,!0),m.send()})}}class cM{constructor(){this.rootNode_=Gt.EMPTY_NODE}getNode(n){return this.rootNode_.getChild(n)}updateSnapshot(n,r){this.rootNode_=this.rootNode_.updateChild(n,r)}}function Nv(){return{value:null,children:new Map}}function gp(i,n,r){if(en(n))i.value=r,i.children.clear();else if(null!==i.value)i.value=i.value.updateChild(n,r);else{const s=Jt(n);i.children.has(s)||i.children.set(s,Nv()),gp(i.children.get(s),n=$n(n),r)}}function mh(i,n){if(en(n))return i.value=null,i.children.clear(),!0;if(null!==i.value){if(i.value.isLeafNode())return!1;{const r=i.value;return i.value=null,r.forEachChild(Qn,(s,a)=>{gp(i,new Sn(s),a)}),mh(i,n)}}if(i.children.size>0){const r=Jt(n);return n=$n(n),i.children.has(r)&&mh(i.children.get(r),n)&&i.children.delete(r),0===i.children.size}return!0}function xv(i,n,r){null!==i.value?r(n,i.value):function(i,n){i.children.forEach((r,s)=>{n(s,r)})}(i,(s,a)=>{xv(a,new Sn(n.toString()+"/"+s),r)})}class dM{constructor(n){this.collection_=n,this.last_=null}get(){const n=this.collection_.get(),r=Object.assign({},n);return this.last_&&Oi(this.last_,(s,a)=>{r[s]=r[s]-a}),this.last_=n,r}}class BC{constructor(n,r){this.server_=r,this.statsToReport_={},this.statsListener_=new dM(n);const s=1e4+2e4*Math.random();Im(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const n=this.statsListener_.get(),r={};let s=!1;Oi(n,(a,c)=>{c>0&&(0,V.r3)(this.statsToReport_,a)&&(r[a]=c,s=!0)}),s&&this.server_.reportStats(r),Im(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ko=(()=>(function(i){i[i.OVERWRITE=0]="OVERWRITE",i[i.MERGE=1]="MERGE",i[i.ACK_USER_WRITE=2]="ACK_USER_WRITE",i[i.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Ko||(Ko={})),Ko))();function zS(i){return{fromUser:!1,fromServer:!0,queryId:i,tagged:!0}}class Pv{constructor(n,r,s){this.path=n,this.affectedTree=r,this.revert=s,this.type=Ko.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(n){if(en(this.path)){if(null!=this.affectedTree.value)return(0,V.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const r=this.affectedTree.subtree(new Sn(n));return new Pv(bn(),r,this.revert)}}return(0,V.hu)(Jt(this.path)===n,"operationForChild called for unrelated child."),new Pv($n(this.path),this.affectedTree,this.revert)}}class Vm{constructor(n,r){this.source=n,this.path=r,this.type=Ko.LISTEN_COMPLETE}operationForChild(n){return en(this.path)?new Vm(this.source,bn()):new Vm(this.source,$n(this.path))}}class _h{constructor(n,r,s){this.source=n,this.path=r,this.snap=s,this.type=Ko.OVERWRITE}operationForChild(n){return en(this.path)?new _h(this.source,bn(),this.snap.getImmediateChild(n)):new _h(this.source,$n(this.path),this.snap)}}class Ji{constructor(n,r,s){this.source=n,this.path=r,this.children=s,this.type=Ko.MERGE}operationForChild(n){if(en(this.path)){const r=this.children.subtree(new Sn(n));return r.isEmpty()?null:r.value?new _h(this.source,bn(),r.value):new Ji(this.source,bn(),r)}return(0,V.hu)(Jt(this.path)===n,"Can't get a merge for a child not on the path of the operation"),new Ji(this.source,$n(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class yh{constructor(n,r,s){this.node_=n,this.fullyInitialized_=r,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(n){if(en(n))return this.isFullyInitialized()&&!this.filtered_;const r=Jt(n);return this.isCompleteForChild(r)}isCompleteForChild(n){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(n)}getNode(){return this.node_}}class KS{constructor(n){this.query_=n,this.index_=this.query_._queryParams.getIndex()}}function mp(i,n,r,s,a,c){const h=s.filter(m=>m.type===r);h.sort((m,E)=>function(i,n,r){if(null==n.childName||null==r.childName)throw(0,V.g5)("Should only compare child_ events.");const s=new nn(n.childName,n.snapshotNode),a=new nn(r.childName,r.snapshotNode);return i.index_.compare(s,a)}(i,m,E)),h.forEach(m=>{const E=function(i,n,r){return"value"===n.type||"child_removed"===n.type||(n.prevName=r.getPredecessorChildName(n.childName,n.snapshotNode,i.index_)),n}(i,m,c);a.forEach(C=>{C.respondsTo(m.type)&&n.push(C.createEvent(E,i.query_))})})}function _p(i,n){return{eventCache:i,serverCache:n}}function vh(i,n,r,s){return _p(new yh(n,r,s),i.serverCache)}function Mv(i,n,r,s){return _p(i.eventCache,new yh(n,r,s))}function Eh(i){return i.eventCache.isFullyInitialized()?i.eventCache.getNode():null}function El(i){return i.serverCache.isFullyInitialized()?i.serverCache.getNode():null}let Ov;class Jn{constructor(n,r=(()=>(Ov||(Ov=new Ls(k1)),Ov))()){this.value=n,this.children=r}static fromObject(n){let r=new Jn(null);return Oi(n,(s,a)=>{r=r.set(new Sn(s),a)}),r}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(n,r){if(null!=this.value&&r(this.value))return{path:bn(),value:this.value};if(en(n))return null;{const s=Jt(n),a=this.children.get(s);if(null!==a){const c=a.findRootMostMatchingPathAndValue($n(n),r);return null!=c?{path:mr(new Sn(s),c.path),value:c.value}:null}return null}}findRootMostValueAndPath(n){return this.findRootMostMatchingPathAndValue(n,()=>!0)}subtree(n){if(en(n))return this;{const r=Jt(n),s=this.children.get(r);return null!==s?s.subtree($n(n)):new Jn(null)}}set(n,r){if(en(n))return new Jn(r,this.children);{const s=Jt(n),c=(this.children.get(s)||new Jn(null)).set($n(n),r),h=this.children.insert(s,c);return new Jn(this.value,h)}}remove(n){if(en(n))return this.children.isEmpty()?new Jn(null):new Jn(null,this.children);{const r=Jt(n),s=this.children.get(r);if(s){const a=s.remove($n(n));let c;return c=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),null===this.value&&c.isEmpty()?new Jn(null):new Jn(this.value,c)}return this}}get(n){if(en(n))return this.value;{const r=Jt(n),s=this.children.get(r);return s?s.get($n(n)):null}}setTree(n,r){if(en(n))return r;{const s=Jt(n),c=(this.children.get(s)||new Jn(null)).setTree($n(n),r);let h;return h=c.isEmpty()?this.children.remove(s):this.children.insert(s,c),new Jn(this.value,h)}}fold(n){return this.fold_(bn(),n)}fold_(n,r){const s={};return this.children.inorderTraversal((a,c)=>{s[a]=c.fold_(mr(n,a),r)}),r(n,this.value,s)}findOnPath(n,r){return this.findOnPath_(n,bn(),r)}findOnPath_(n,r,s){const a=!!this.value&&s(r,this.value);if(a)return a;if(en(n))return null;{const c=Jt(n),h=this.children.get(c);return h?h.findOnPath_($n(n),mr(r,c),s):null}}foreachOnPath(n,r){return this.foreachOnPath_(n,bn(),r)}foreachOnPath_(n,r,s){if(en(n))return this;{this.value&&s(r,this.value);const a=Jt(n),c=this.children.get(a);return c?c.foreachOnPath_($n(n),mr(r,a),s):new Jn(null)}}foreach(n){this.foreach_(bn(),n)}foreach_(n,r){this.children.inorderTraversal((s,a)=>{a.foreach_(mr(n,s),r)}),this.value&&r(n,this.value)}foreachChild(n){this.children.inorderTraversal((r,s)=>{s.value&&n(r,s.value)})}}class Da{constructor(n){this.writeTree_=n}static empty(){return new Da(new Jn(null))}}function yp(i,n,r){if(en(n))return new Da(new Jn(r));{const s=i.writeTree_.findRootMostValueAndPath(n);if(null!=s){const a=s.path;let c=s.value;const h=ms(a,n);return c=c.updateChild(h,r),new Da(i.writeTree_.set(a,c))}{const a=new Jn(r),c=i.writeTree_.setTree(n,a);return new Da(c)}}}function HC(i,n,r){let s=i;return Oi(r,(a,c)=>{s=yp(s,mr(n,a),c)}),s}function JS(i,n){if(en(n))return Da.empty();{const r=i.writeTree_.setTree(n,new Jn(null));return new Da(r)}}function GC(i,n){return null!=yu(i,n)}function yu(i,n){const r=i.writeTree_.findRootMostValueAndPath(n);return null!=r?i.writeTree_.get(r.path).getChild(ms(r.path,n)):null}function XS(i){const n=[],r=i.writeTree_.value;return null!=r?r.isLeafNode()||r.forEachChild(Qn,(s,a)=>{n.push(new nn(s,a))}):i.writeTree_.children.inorderTraversal((s,a)=>{null!=a.value&&n.push(new nn(s,a.value))}),n}function Dr(i,n){if(en(n))return i;{const r=yu(i,n);return new Da(null!=r?new Jn(r):i.writeTree_.subtree(n))}}function wh(i){return i.writeTree_.isEmpty()}function vu(i,n){return qC(bn(),i.writeTree_,n)}function qC(i,n,r){if(null!=n.value)return r.updateChild(i,n.value);{let s=null;return n.children.inorderTraversal((a,c)=>{".priority"===a?((0,V.hu)(null!==c.value,"Priority writes must always be leaf nodes"),s=c.value):r=qC(mr(i,a),c,r)}),!r.getChild(i).isEmpty()&&null!==s&&(r=r.updateChild(mr(i,".priority"),s)),r}}function bh(i,n){return iA(n,i)}function gM(i,n){if(i.snap)return zo(i.path,n);for(const r in i.children)if(i.children.hasOwnProperty(r)&&zo(mr(i.path,r),n))return!0;return!1}function _M(i){return i.visible}function zC(i,n,r){let s=Da.empty();for(let a=0;a<i.length;++a){const c=i[a];if(n(c)){const h=c.path;let m;if(c.snap)zo(r,h)?(m=ms(r,h),s=yp(s,m,c.snap)):zo(h,r)&&(m=ms(h,r),s=yp(s,bn(),c.snap.getChild(m)));else{if(!c.children)throw(0,V.g5)("WriteRecord should have .snap or .children");if(zo(r,h))m=ms(r,h),s=HC(s,m,c.children);else if(zo(h,r))if(m=ms(h,r),en(m))s=HC(s,bn(),c.children);else{const E=(0,V.DV)(c.children,Jt(m));if(E){const C=E.getChild($n(m));s=yp(s,bn(),C)}}}}}return s}function tA(i,n,r,s,a){if(s||a){const c=Dr(i.visibleWrites,n);return!a&&wh(c)?r:a||null!=r||GC(c,bn())?vu(zC(i.allWrites,function(C){return(C.visible||a)&&(!s||!~s.indexOf(C.writeId))&&(zo(C.path,n)||zo(n,C.path))},n),r||Gt.EMPTY_NODE):null}{const c=yu(i.visibleWrites,n);if(null!=c)return c;{const h=Dr(i.visibleWrites,n);return wh(h)?r:null!=r||GC(h,bn())?vu(h,r||Gt.EMPTY_NODE):null}}}function Fv(i,n,r,s){return tA(i.writeTree,i.treePath,n,r,s)}function ZC(i,n){return function(i,n,r){let s=Gt.EMPTY_NODE;const a=yu(i.visibleWrites,n);if(a)return a.isLeafNode()||a.forEachChild(Qn,(c,h)=>{s=s.updateImmediateChild(c,h)}),s;if(r){const c=Dr(i.visibleWrites,n);return r.forEachChild(Qn,(h,m)=>{const E=vu(Dr(c,new Sn(h)),m);s=s.updateImmediateChild(h,E)}),XS(c).forEach(h=>{s=s.updateImmediateChild(h.name,h.node)}),s}return XS(Dr(i.visibleWrites,n)).forEach(h=>{s=s.updateImmediateChild(h.name,h.node)}),s}(i.writeTree,i.treePath,n)}function Lv(i,n,r,s){return function(i,n,r,s,a){(0,V.hu)(s||a,"Either existingEventSnap or existingServerSnap must exist");const c=mr(n,r);if(GC(i.visibleWrites,c))return null;{const h=Dr(i.visibleWrites,c);return wh(h)?a.getChild(r):vu(h,a.getChild(r))}}(i.writeTree,i.treePath,n,r,s)}function Vv(i,n){return function(i,n){return yu(i.visibleWrites,n)}(i.writeTree,mr(i.treePath,n))}function Uv(i,n,r){return function(i,n,r,s){const a=mr(n,r),c=yu(i.visibleWrites,a);return null!=c?c:s.isCompleteForChild(r)?vu(Dr(i.visibleWrites,a),s.getNode().getImmediateChild(r)):null}(i.writeTree,i.treePath,n,r)}function rA(i,n){return iA(mr(i.treePath,n),i.writeTree)}function iA(i,n){return{treePath:i,writeTree:n}}class wM{constructor(){this.changeMap=new Map}trackChildChange(n){const r=n.type,s=n.childName;(0,V.hu)("child_added"===r||"child_changed"===r||"child_removed"===r,"Only child changes supported for tracking"),(0,V.hu)(".priority"!==s,"Only non-priority child changes can be tracked.");const a=this.changeMap.get(s);if(a){const c=a.type;if("child_added"===r&&"child_removed"===c)this.changeMap.set(s,Av(s,n.snapshotNode,a.snapshotNode));else if("child_removed"===r&&"child_added"===c)this.changeMap.delete(s);else if("child_removed"===r&&"child_changed"===c)this.changeMap.set(s,Fm(s,a.oldSnap));else if("child_changed"===r&&"child_added"===c)this.changeMap.set(s,pp(s,n.snapshotNode));else{if("child_changed"!==r||"child_changed"!==c)throw(0,V.g5)("Illegal combination of changes: "+n+" occurred after "+a);this.changeMap.set(s,Av(s,n.snapshotNode,a.oldSnap))}}else this.changeMap.set(s,n)}getChanges(){return Array.from(this.changeMap.values())}}const vp=new class{getCompleteChild(n){return null}getChildAfterChild(n,r,s){return null}};class Nc{constructor(n,r,s=null){this.writes_=n,this.viewCache_=r,this.optCompleteServerCache_=s}getCompleteChild(n){const r=this.viewCache_.eventCache;if(r.isCompleteForChild(n))return r.getNode().getImmediateChild(n);{const s=null!=this.optCompleteServerCache_?new yh(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Uv(this.writes_,n,s)}}getChildAfterChild(n,r,s){const a=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:El(this.viewCache_),c=function(i,n,r,s,a,c){return function(i,n,r,s,a,c,h){let m;const E=Dr(i.visibleWrites,n),C=yu(E,bn());if(null!=C)m=C;else{if(null==r)return[];m=vu(E,r)}if(m=m.withIndex(h),m.isEmpty()||m.isLeafNode())return[];{const S=[],N=h.getCompare(),O=c?m.getReverseIteratorFrom(s,h):m.getIteratorFrom(s,h);let B=O.getNext();for(;B&&S.length<a;)0!==N(B,s)&&S.push(B),B=O.getNext();return S}}(i.writeTree,i.treePath,n,r,s,a,c)}(this.writes_,a,r,1,s,n);return 0===c.length?null:c[0]}}function sA(i,n,r,s,a,c){const h=n.eventCache;if(null!=Vv(s,r))return n;{let m,E;if(en(r))if((0,V.hu)(n.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),n.serverCache.isFiltered()){const C=El(n),N=ZC(s,C instanceof Gt?C:Gt.EMPTY_NODE);m=i.filter.updateFullNode(n.eventCache.getNode(),N,c)}else{const C=Fv(s,El(n));m=i.filter.updateFullNode(n.eventCache.getNode(),C,c)}else{const C=Jt(r);if(".priority"===C){(0,V.hu)(1===vl(r),"Can't have a priority with additional path components");const S=h.getNode();E=n.serverCache.getNode();const N=Lv(s,r,S,E);m=null!=N?i.filter.updatePriority(S,N):h.getNode()}else{const S=$n(r);let N;if(h.isCompleteForChild(C)){E=n.serverCache.getNode();const O=Lv(s,r,h.getNode(),E);N=null!=O?h.getNode().getImmediateChild(C).updateChild(S,O):h.getNode().getImmediateChild(C)}else N=Uv(s,C,n.serverCache);m=null!=N?i.filter.updateChild(h.getNode(),C,N,S,a,c):h.getNode()}}return vh(n,m,h.isFullyInitialized()||en(r),i.filter.filtersNodes())}}function Bm(i,n,r,s,a,c,h,m){const E=n.serverCache;let C;const S=h?i.filter:i.filter.getIndexedFilter();if(en(r))C=S.updateFullNode(E.getNode(),s,null);else if(S.filtersNodes()&&!E.isFiltered()){const B=E.getNode().updateChild(r,s);C=S.updateFullNode(E.getNode(),B,null)}else{const B=Jt(r);if(!E.isCompleteForPath(r)&&vl(r)>1)return n;const W=$n(r),Pe=E.getNode().getImmediateChild(B).updateChild(W,s);C=".priority"===B?S.updatePriority(E.getNode(),Pe):S.updateChild(E.getNode(),B,Pe,W,vp,null)}const N=Mv(n,C,E.isFullyInitialized()||en(r),S.filtersNodes());return sA(i,N,r,a,new Nc(a,N,c),m)}function jv(i,n,r,s,a,c,h){const m=n.eventCache;let E,C;const S=new Nc(a,n,c);if(en(r))C=i.filter.updateFullNode(n.eventCache.getNode(),s,h),E=vh(n,C,!0,i.filter.filtersNodes());else{const N=Jt(r);if(".priority"===N)C=i.filter.updatePriority(n.eventCache.getNode(),s),E=vh(n,C,m.isFullyInitialized(),m.isFiltered());else{const O=$n(r),B=m.getNode().getImmediateChild(N);let W;if(en(O))W=s;else{const ue=S.getCompleteChild(N);W=null!=ue?".priority"===oo(O)&&ue.getChild(xS(O)).isEmpty()?ue:ue.updateChild(O,s):Gt.EMPTY_NODE}E=B.equals(W)?n:vh(n,i.filter.updateChild(m.getNode(),N,W,O,S,h),m.isFullyInitialized(),i.filter.filtersNodes())}}return E}function YC(i,n){return i.eventCache.isCompleteForChild(n)}function $v(i,n,r){return r.foreach((s,a)=>{n=n.updateChild(s,a)}),n}function QC(i,n,r,s,a,c,h,m){if(n.serverCache.getNode().isEmpty()&&!n.serverCache.isFullyInitialized())return n;let C,E=n;C=en(r)?s:new Jn(null).setTree(r,s);const S=n.serverCache.getNode();return C.children.inorderTraversal((N,O)=>{if(S.hasChild(N)){const W=$v(0,n.serverCache.getNode().getImmediateChild(N),O);E=Bm(i,E,new Sn(N),W,a,c,h,m)}}),C.children.inorderTraversal((N,O)=>{const B=!n.serverCache.isCompleteForChild(N)&&void 0===O.value;if(!S.hasChild(N)&&!B){const ue=$v(0,n.serverCache.getNode().getImmediateChild(N),O);E=Bm(i,E,new Sn(N),ue,a,c,h,m)}}),E}class JC{constructor(n,r){this.query_=n,this.eventRegistrations_=[];const s=this.query_._queryParams,a=new FC(s.getIndex()),c=function(i){return i.loadsAllData()?new FC(i.getIndex()):i.hasLimit()?new Z1(i):new Lm(i)}(s);this.processor_=function(i){return{filter:i}}(c);const h=r.serverCache,m=r.eventCache,E=a.updateFullNode(Gt.EMPTY_NODE,h.getNode(),null),C=c.updateFullNode(Gt.EMPTY_NODE,m.getNode(),null),S=new yh(E,h.isFullyInitialized(),a.filtersNodes()),N=new yh(C,m.isFullyInitialized(),c.filtersNodes());this.viewCache_=_p(N,S),this.eventGenerator_=new KS(this.query_)}get query(){return this.query_}}function X1(i,n){const r=El(i.viewCache_);return r&&(i.query._queryParams.loadsAllData()||!en(n)&&!r.getImmediateChild(Jt(n)).isEmpty())?r.getChild(n):null}function SM(i){return 0===i.eventRegistrations_.length}function AM(i,n,r){const s=[];if(r){(0,V.hu)(null==n,"A cancel should cancel all event registrations.");const a=i.query._path;i.eventRegistrations_.forEach(c=>{const h=c.createCancelEvent(r,a);h&&s.push(h)})}if(n){let a=[];for(let c=0;c<i.eventRegistrations_.length;++c){const h=i.eventRegistrations_[c];if(h.matches(n)){if(n.hasAnyCallback()){a=a.concat(i.eventRegistrations_.slice(c+1));break}}else a.push(h)}i.eventRegistrations_=a}else i.eventRegistrations_=[];return s}function lA(i,n,r,s){n.type===Ko.MERGE&&null!==n.source.queryId&&((0,V.hu)(El(i.viewCache_),"We should always have a full cache before handling merges"),(0,V.hu)(Eh(i.viewCache_),"Missing event cache, even though we have a server cache"));const a=i.viewCache_,c=function(i,n,r,s,a){const c=new wM;let h,m;if(r.type===Ko.OVERWRITE){const C=r;C.source.fromUser?h=jv(i,n,C.path,C.snap,s,a,c):((0,V.hu)(C.source.fromServer,"Unknown source."),m=C.source.tagged||n.serverCache.isFiltered()&&!en(C.path),h=Bm(i,n,C.path,C.snap,s,a,m,c))}else if(r.type===Ko.MERGE){const C=r;C.source.fromUser?h=function(i,n,r,s,a,c,h){let m=n;return s.foreach((E,C)=>{const S=mr(r,E);YC(n,Jt(S))&&(m=jv(i,m,S,C,a,c,h))}),s.foreach((E,C)=>{const S=mr(r,E);YC(n,Jt(S))||(m=jv(i,m,S,C,a,c,h))}),m}(i,n,C.path,C.children,s,a,c):((0,V.hu)(C.source.fromServer,"Unknown source."),m=C.source.tagged||n.serverCache.isFiltered(),h=QC(i,n,C.path,C.children,s,a,m,c))}else if(r.type===Ko.ACK_USER_WRITE){const C=r;h=C.revert?function(i,n,r,s,a,c){let h;if(null!=Vv(s,r))return n;{const m=new Nc(s,n,a),E=n.eventCache.getNode();let C;if(en(r)||".priority"===Jt(r)){let S;if(n.serverCache.isFullyInitialized())S=Fv(s,El(n));else{const N=n.serverCache.getNode();(0,V.hu)(N instanceof Gt,"serverChildren would be complete if leaf node"),S=ZC(s,N)}S=S,C=i.filter.updateFullNode(E,S,c)}else{const S=Jt(r);let N=Uv(s,S,n.serverCache);null==N&&n.serverCache.isCompleteForChild(S)&&(N=E.getImmediateChild(S)),C=null!=N?i.filter.updateChild(E,S,N,$n(r),m,c):n.eventCache.getNode().hasChild(S)?i.filter.updateChild(E,S,Gt.EMPTY_NODE,$n(r),m,c):E,C.isEmpty()&&n.serverCache.isFullyInitialized()&&(h=Fv(s,El(n)),h.isLeafNode()&&(C=i.filter.updateFullNode(C,h,c)))}return h=n.serverCache.isFullyInitialized()||null!=Vv(s,bn()),vh(n,C,h,i.filter.filtersNodes())}}(i,n,C.path,s,a,c):function(i,n,r,s,a,c,h){if(null!=Vv(a,r))return n;const m=n.serverCache.isFiltered(),E=n.serverCache;if(null!=s.value){if(en(r)&&E.isFullyInitialized()||E.isCompleteForPath(r))return Bm(i,n,r,E.getNode().getChild(r),a,c,m,h);if(en(r)){let C=new Jn(null);return E.getNode().forEachChild(Ta,(S,N)=>{C=C.set(new Sn(S),N)}),QC(i,n,r,C,a,c,m,h)}return n}{let C=new Jn(null);return s.foreach((S,N)=>{const O=mr(r,S);E.isCompleteForPath(O)&&(C=C.set(S,E.getNode().getChild(O)))}),QC(i,n,r,C,a,c,m,h)}}(i,n,C.path,C.affectedTree,s,a,c)}else{if(r.type!==Ko.LISTEN_COMPLETE)throw(0,V.g5)("Unknown operation type: "+r.type);h=function(i,n,r,s,a){const c=n.serverCache;return sA(i,Mv(n,c.getNode(),c.isFullyInitialized()||en(r),c.isFiltered()),r,s,vp,a)}(i,n,r.path,s,c)}const E=c.getChanges();return function(i,n,r){const s=n.eventCache;if(s.isFullyInitialized()){const a=s.getNode().isLeafNode()||s.getNode().isEmpty(),c=Eh(i);(r.length>0||!i.eventCache.isFullyInitialized()||a&&!s.getNode().equals(c)||!s.getNode().getPriority().equals(c.getPriority()))&&r.push(GS(Eh(n)))}}(n,h,E),{viewCache:h,changes:E}}(i.processor_,a,n,r,s);return function(i,n){(0,V.hu)(n.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),(0,V.hu)(n.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed")}(i.processor_,c.viewCache),(0,V.hu)(c.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),i.viewCache_=c.viewCache,NM(i,c.changes,c.viewCache.eventCache.getNode(),null)}function NM(i,n,r,s){return function(i,n,r,s){const a=[],c=[];return n.forEach(h=>{"child_changed"===h.type&&i.index_.indexedValueChanged(h.oldSnap,h.snapshotNode)&&c.push(function(i,n){return{type:"child_moved",snapshotNode:n,childName:i}}(h.childName,h.snapshotNode))}),mp(i,a,"child_removed",n,s,r),mp(i,a,"child_added",n,s,r),mp(i,a,"child_moved",c,s,r),mp(i,a,"child_changed",n,s,r),mp(i,a,"value",n,s,r),a}(i.eventGenerator_,n,r,s?[s]:i.eventRegistrations_)}let XC,b;class xM{constructor(){this.views=new Map}}function uA(i,n,r,s){const a=n.source.queryId;if(null!==a){const c=i.views.get(a);return(0,V.hu)(null!=c,"SyncTree gave us an op for an invalid query."),lA(c,n,r,s)}{let c=[];for(const h of i.views.values())c=c.concat(lA(h,n,r,s));return c}}function MM(i,n,r,s,a){const h=i.views.get(n._queryIdentifier);if(!h){let m=Fv(r,a?s:null),E=!1;m?E=!0:s instanceof Gt?(m=ZC(r,s),E=!1):(m=Gt.EMPTY_NODE,E=!1);const C=_p(new yh(m,E,!1),new yh(s,a,!1));return new JC(n,C)}return h}function l(i){const n=[];for(const r of i.views.values())r.query._queryParams.loadsAllData()||n.push(r);return n}function u(i,n){let r=null;for(const s of i.views.values())r=r||X1(s,n);return r}function d(i,n){return n._queryParams.loadsAllData()?y(i):i.views.get(n._queryIdentifier)}function f(i,n){return null!=d(i,n)}function g(i){return null!=y(i)}function y(i){for(const n of i.views.values())if(n.query._queryParams.loadsAllData())return n;return null}let P=1;class F{constructor(n){this.listenProvider_=n,this.syncPointTree_=new Jn(null),this.pendingWriteTree_={visibleWrites:Da.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function U(i,n,r,s,a){return function(i,n,r,s,a){(0,V.hu)(s>i.lastWriteId,"Stacking an older write on top of newer ones"),void 0===a&&(a=!0),i.allWrites.push({path:n,snap:r,writeId:s,visible:a}),a&&(i.visibleWrites=yp(i.visibleWrites,n,r)),i.lastWriteId=s}(i.pendingWriteTree_,n,r,s,a),a?Sa(i,new _h({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},n,r)):[]}function te(i,n,r=!1){const s=function(i,n){for(let r=0;r<i.allWrites.length;r++){const s=i.allWrites[r];if(s.writeId===n)return s}return null}(i.pendingWriteTree_,n);if(function(i,n){const r=i.allWrites.findIndex(m=>m.writeId===n);(0,V.hu)(r>=0,"removeWrite called with nonexistent writeId.");const s=i.allWrites[r];i.allWrites.splice(r,1);let a=s.visible,c=!1,h=i.allWrites.length-1;for(;a&&h>=0;){const m=i.allWrites[h];m.visible&&(h>=r&&gM(m,s.path)?a=!1:zo(s.path,m.path)&&(c=!0)),h--}return!!a&&(c?(function(i){i.visibleWrites=zC(i.allWrites,_M,bn()),i.lastWriteId=i.allWrites.length>0?i.allWrites[i.allWrites.length-1].writeId:-1}(i),!0):(s.snap?i.visibleWrites=JS(i.visibleWrites,s.path):Oi(s.children,E=>{i.visibleWrites=JS(i.visibleWrites,mr(s.path,E))}),!0))}(i.pendingWriteTree_,n)){let c=new Jn(null);return null!=s.snap?c=c.set(bn(),!0):Oi(s.children,h=>{c=c.set(new Sn(h),!0)}),Sa(i,new Pv(s.path,c,r))}return[]}function ve(i,n,r){return Sa(i,new _h({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},n,r))}function ct(i,n,r,s){const a=n._path,c=i.syncPointTree_.get(a);let h=[];if(c&&("default"===n._queryIdentifier||f(c,n))){const m=function(i,n,r,s){const a=n._queryIdentifier,c=[];let h=[];const m=g(i);if("default"===a)for(const[E,C]of i.views.entries())h=h.concat(AM(C,r,s)),SM(C)&&(i.views.delete(E),C.query._queryParams.loadsAllData()||c.push(C.query));else{const E=i.views.get(a);E&&(h=h.concat(AM(E,r,s)),SM(E)&&(i.views.delete(a),E.query._queryParams.loadsAllData()||c.push(E.query)))}return m&&!g(i)&&c.push(new((0,V.hu)(XC,"Reference.ts has not been loaded"),XC)(n._repo,n._path)),{removed:c,events:h}}(c,n,r,s);(function(i){return 0===i.views.size})(c)&&(i.syncPointTree_=i.syncPointTree_.remove(a));const E=m.removed;h=m.events;const C=-1!==E.findIndex(N=>N._queryParams.loadsAllData()),S=i.syncPointTree_.findOnPath(a,(N,O)=>g(O));if(C&&!S){const N=i.syncPointTree_.subtree(a);if(!N.isEmpty()){const O=function(i){return i.fold((n,r,s)=>{if(r&&g(r))return[y(r)];{let a=[];return r&&(a=l(r)),Oi(s,(c,h)=>{a=a.concat(h)}),a}})}(N);for(let B=0;B<O.length;++B){const W=O[B],ue=W.query,Pe=Hv(i,W);i.listenProvider_.startListening(e0(ue),wp(i,ue),Pe.hashFn,Pe.onComplete)}}}if(!S&&E.length>0&&!s)if(C){const N=null;i.listenProvider_.stopListening(e0(n),N)}else E.forEach(N=>{const O=i.queryToTagMap.get(bp(N));i.listenProvider_.stopListening(e0(N),O)});!function(i,n){for(let r=0;r<n.length;++r){const s=n[r];if(!s._queryParams.loadsAllData()){const a=bp(s),c=i.queryToTagMap.get(a);i.queryToTagMap.delete(a),i.tagToQueryMap.delete(c)}}}(i,E)}return h}function Hr(i,n,r){const s=n._path;let a=null,c=!1;i.syncPointTree_.foreachOnPath(s,(N,O)=>{const B=ms(N,s);a=a||u(O,B),c=c||g(O)});let m,h=i.syncPointTree_.get(s);h?(c=c||g(h),a=a||u(h,bn())):(h=new xM,i.syncPointTree_=i.syncPointTree_.set(s,h)),null!=a?m=!0:(m=!1,a=Gt.EMPTY_NODE,i.syncPointTree_.subtree(s).foreachChild((O,B)=>{const W=u(B,bn());W&&(a=a.updateImmediateChild(O,W))}));const E=f(h,n);if(!E&&!n._queryParams.loadsAllData()){const N=bp(n);(0,V.hu)(!i.queryToTagMap.has(N),"View does not exist, but we have a tag");const O=P++;i.queryToTagMap.set(N,O),i.tagToQueryMap.set(O,N)}let S=function(i,n,r,s,a,c){const h=MM(i,n,s,a,c);return i.views.has(n._queryIdentifier)||i.views.set(n._queryIdentifier,h),function(i,n){i.eventRegistrations_.push(n)}(h,r),function(i,n){const r=i.viewCache_.eventCache,s=[];return r.getNode().isLeafNode()||r.getNode().forEachChild(Qn,(c,h)=>{s.push(pp(c,h))}),r.isFullyInitialized()&&s.push(GS(r.getNode())),NM(i,s,r.getNode(),n)}(h,r)}(h,n,r,bh(i.pendingWriteTree_,s),a,m);if(!E&&!c){const N=d(h,n);S=S.concat(function(i,n,r){const s=n._path,a=wp(i,n),c=Hv(i,r),h=i.listenProvider_.startListening(e0(n),a,c.hashFn,c.onComplete),m=i.syncPointTree_.subtree(s);if(a)(0,V.hu)(!g(m.value),"If we're adding a query, it shouldn't be shadowed");else{const E=m.fold((C,S,N)=>{if(!en(C)&&S&&g(S))return[y(S).query];{let O=[];return S&&(O=O.concat(l(S).map(B=>B.query))),Oi(N,(B,W)=>{O=O.concat(W)}),O}});for(let C=0;C<E.length;++C){const S=E[C];i.listenProvider_.stopListening(e0(S),wp(i,S))}}return h}(i,n,N))}return S}function _s(i,n,r){const a=i.pendingWriteTree_,c=i.syncPointTree_.findOnPath(n,(h,m)=>{const C=u(m,ms(h,n));if(C)return C});return tA(a,n,c,r,!0)}function Sa(i,n){return Th(n,i.syncPointTree_,null,bh(i.pendingWriteTree_,bn()))}function Th(i,n,r,s){if(en(i.path))return Ih(i,n,r,s);{const a=n.get(bn());null==r&&null!=a&&(r=u(a,bn()));let c=[];const h=Jt(i.path),m=i.operationForChild(h),E=n.children.get(h);if(E&&m){const C=r?r.getImmediateChild(h):null,S=rA(s,h);c=c.concat(Th(m,E,C,S))}return a&&(c=c.concat(uA(a,i,s,r))),c}}function Ih(i,n,r,s){const a=n.get(bn());null==r&&null!=a&&(r=u(a,bn()));let c=[];return n.children.inorderTraversal((h,m)=>{const E=r?r.getImmediateChild(h):null,C=rA(s,h),S=i.operationForChild(h);S&&(c=c.concat(Ih(S,m,E,C)))}),a&&(c=c.concat(uA(a,i,s,r))),c}function Hv(i,n){const r=n.query,s=wp(i,r);return{hashFn:()=>(function(i){return i.viewCache_.serverCache.getNode()}(n)||Gt.EMPTY_NODE).hash(),onComplete:a=>{if("ok"===a)return s?function(i,n,r){const s=$m(i,r);if(s){const a=Hm(s),c=a.path,h=a.queryId,m=ms(c,n);return OM(i,c,new Vm(zS(h),m))}return[]}(i,r._path,s):function(i,n){return Sa(i,new Vm({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},n))}(i,r._path);{const c=function(i,n){let r="Unknown Error";"too_big"===i?r="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===i?r="Client doesn't have permission to access the desired data.":"unavailable"===i&&(r="The service is unavailable");const s=new Error(i+" at "+n._path.toString()+": "+r);return s.code=i.toUpperCase(),s}(a,r);return ct(i,r,null,c)}}}}function wp(i,n){const r=bp(n);return i.queryToTagMap.get(r)}function bp(i){return i._path.toString()+"$"+i._queryIdentifier}function $m(i,n){return i.tagToQueryMap.get(n)}function Hm(i){const n=i.indexOf("$");return(0,V.hu)(-1!==n&&n<i.length-1,"Bad queryKey."),{queryId:i.substr(n+1),path:new Sn(i.substr(0,n))}}function OM(i,n,r){const s=i.syncPointTree_.get(n);return(0,V.hu)(s,"Missing sync point for query tag that we're tracking"),uA(s,r,bh(i.pendingWriteTree_,n),null)}function e0(i){return i._queryParams.loadsAllData()&&!i._queryParams.isDefault()?new((0,V.hu)(b,"Reference.ts has not been loaded"),b)(i._repo,i._path):i}class kM{constructor(n){this.node_=n}getImmediateChild(n){const r=this.node_.getImmediateChild(n);return new kM(r)}node(){return this.node_}}class FM{constructor(n,r){this.syncTree_=n,this.path_=r}getImmediateChild(n){const r=mr(this.path_,n);return new FM(this.syncTree_,r)}node(){return _s(this.syncTree_,this.path_)}}const iF=function(i,n,r){return i&&"object"==typeof i?((0,V.hu)(".sv"in i,"Unexpected leaf node or priority contents"),"string"==typeof i[".sv"]?W2(i[".sv"],n,r):"object"==typeof i[".sv"]?z2(i[".sv"],n):void(0,V.hu)(!1,"Unexpected server value: "+JSON.stringify(i,null,2))):i},W2=function(i,n,r){switch(i){case"timestamp":return r.timestamp;default:(0,V.hu)(!1,"Unexpected server value: "+i)}},z2=function(i,n,r){i.hasOwnProperty("increment")||(0,V.hu)(!1,"Unexpected server value: "+JSON.stringify(i,null,2));const s=i.increment;"number"!=typeof s&&(0,V.hu)(!1,"Unexpected increment value: "+s);const a=n.node();if((0,V.hu)(null!=a,"Expected ChildrenNode.EMPTY_NODE for nulls"),!a.isLeafNode())return s;const h=a.getValue();return"number"!=typeof h?s:h+s},sF=function(i,n,r,s){return VM(n,new FM(r,i),s)},LM=function(i,n,r){return VM(i,new kM(n),r)};function VM(i,n,r){const s=i.getPriority().val(),a=iF(s,n.getImmediateChild(".priority"),r);let c;if(i.isLeafNode()){const h=i,m=iF(h.getValue(),n,r);return m!==h.getValue()||a!==h.getPriority().val()?new Mm(m,Ir(a)):i}{const h=i;return c=h,a!==h.getPriority().val()&&(c=c.updatePriority(new Mm(a))),h.forEachChild(Qn,(m,E)=>{const C=VM(E,n.getImmediateChild(m),r);C!==E&&(c=c.updateImmediateChild(m,C))}),c}}class UM{constructor(n="",r=null,s={children:{},childCount:0}){this.name=n,this.parent=r,this.node=s}}function cA(i,n){let r=n instanceof Sn?n:new Sn(n),s=i,a=Jt(r);for(;null!==a;){const c=(0,V.DV)(s.node.children,a)||{children:{},childCount:0};s=new UM(a,s,c),r=$n(r),a=Jt(r)}return s}function Gm(i){return i.node.value}function BM(i,n){i.node.value=n,jM(i)}function oF(i){return i.node.childCount>0}function dA(i,n){Oi(i.node.children,(r,s)=>{n(new UM(r,i,s))})}function aF(i,n,r,s){r&&!s&&n(i),dA(i,a=>{aF(a,n,!0,s)}),r&&s&&n(i)}function t0(i){return new Sn(null===i.parent?i.name:t0(i.parent)+"/"+i.name)}function jM(i){null!==i.parent&&function(i,n,r){const s=function(i){return void 0===Gm(i)&&!oF(i)}(r),a=(0,V.r3)(i.node.children,n);s&&a?(delete i.node.children[n],i.node.childCount--,jM(i)):!s&&!a&&(i.node.children[n]=r.node,i.node.childCount++,jM(i))}(i.parent,i.name,i)}const Q2=/[\[\].#$\/\u0000-\u001F\u007F]/,J2=/[\[\].#$\u0000-\u001F\u007F]/,$M=10485760,hA=function(i){return"string"==typeof i&&0!==i.length&&!Q2.test(i)},lF=function(i){return"string"==typeof i&&0!==i.length&&!J2.test(i)},n0=function(i){return null===i||"string"==typeof i||"number"==typeof i&&!gv(i)||i&&"object"==typeof i&&(0,V.r3)(i,".sv")},xc=function(i,n,r,s){s&&void 0===n||r0((0,V.gK)(i,"value"),n,r)},r0=function(i,n,r){const s=r instanceof Sn?new MS(r,i):r;if(void 0===n)throw new Error(i+"contains undefined "+fh(s));if("function"==typeof n)throw new Error(i+"contains a function "+fh(s)+" with contents = "+n.toString());if(gv(n))throw new Error(i+"contains "+n.toString()+" "+fh(s));if("string"==typeof n&&n.length>$M/3&&(0,V.ug)(n)>$M)throw new Error(i+"contains a string greater than "+$M+" utf8 bytes "+fh(s)+" ('"+n.substring(0,50)+"...')");if(n&&"object"==typeof n){let a=!1,c=!1;if(Oi(n,(h,m)=>{if(".value"===h)a=!0;else if(".priority"!==h&&".sv"!==h&&(c=!0,!hA(h)))throw new Error(i+" contains an invalid key ("+h+") "+fh(s)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(i,n){i.parts_.length>0&&(i.byteLength_+=1),i.parts_.push(n),i.byteLength_+=(0,V.ug)(n),DC(i)})(s,h),r0(i,m,s),function(i){const n=i.parts_.pop();i.byteLength_-=(0,V.ug)(n),i.parts_.length>0&&(i.byteLength_-=1)}(s)}),a&&c)throw new Error(i+' contains ".value" child '+fh(s)+" in addition to actual children.")}},uF=function(i,n,r,s){if(s&&void 0===n)return;const a=(0,V.gK)(i,"values");if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(a+" must be an object containing the children to replace.");const c=[];Oi(n,(h,m)=>{const E=new Sn(h);if(r0(a,m,mr(r,E)),".priority"===oo(E)&&!n0(m))throw new Error(a+"contains an invalid value for '"+E.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");c.push(E)}),function(i,n){let r,s;for(r=0;r<n.length;r++){s=n[r];const c=Tv(s);for(let h=0;h<c.length;h++)if((".priority"!==c[h]||h!==c.length-1)&&!hA(c[h]))throw new Error(i+"contains an invalid key ("+c[h]+") in path "+s.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}n.sort(WP);let a=null;for(r=0;r<n.length;r++){if(s=n[r],null!==a&&zo(a,s))throw new Error(i+"contains a path "+a.toString()+" that is ancestor of another path "+s.toString());a=s}}(a,c)},HM=function(i,n,r){if(!r||void 0!==n){if(gv(n))throw new Error((0,V.gK)(i,"priority")+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!n0(n))throw new Error((0,V.gK)(i,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},s0=function(i,n,r,s){if(!(s&&void 0===r||hA(r)))throw new Error((0,V.gK)(i,n)+'was an invalid key = "'+r+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},o0=function(i,n,r,s){if(!(s&&void 0===r||lF(r)))throw new Error((0,V.gK)(i,n)+'was an invalid path = "'+r+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},wl=function(i,n){if(".info"===Jt(n))throw new Error(i+" failed = Can't modify data under /.info/")},cF=function(i,n){const r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!hA(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(i){return i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),lF(i)}(r))throw new Error((0,V.gK)(i,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class nB{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function fA(i,n){let r=null;for(let s=0;s<n.length;s++){const a=n[s],c=a.getPath();null!==r&&!PS(c,r.path)&&(i.eventLists_.push(r),r=null),null===r&&(r={events:[],path:c}),r.events.push(a)}r&&i.eventLists_.push(r)}function GM(i,n,r){fA(i,r),dF(i,s=>PS(s,n))}function bl(i,n,r){fA(i,r),dF(i,s=>zo(s,n)||zo(n,s))}function dF(i,n){i.recursionDepth_++;let r=!0;for(let s=0;s<i.eventLists_.length;s++){const a=i.eventLists_[s];a&&(n(a.path)?(rB(i.eventLists_[s]),i.eventLists_[s]=null):r=!1)}r&&(i.eventLists_=[]),i.recursionDepth_--}function rB(i){for(let n=0;n<i.events.length;n++){const r=i.events[n];if(null!==r){i.events[n]=null;const s=r.getEventRunner();dh&&bi("event: "+r.toString()),Tm(s)}}}const hF="repo_interrupt";class sB{constructor(n,r,s,a){this.repoInfo_=n,this.forceRestClient_=r,this.authTokenProvider_=s,this.appCheckProvider_=a,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new nB,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Nv(),this.transactionQueueTree_=new UM,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function fF(i){const r=i.infoData_.getNode(new Sn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+r}function a0(i){return function(i){return(i=i||{}).timestamp=i.timestamp||(new Date).getTime(),i}({timestamp:fF(i)})}function pF(i,n,r,s,a){i.dataUpdateCount++;const c=new Sn(n);r=i.interceptServerDataCallback_?i.interceptServerDataCallback_(n,r):r;let h=[];if(a)if(s){const E=(0,V.UI)(r,C=>Ir(C));h=function(i,n,r,s){const a=$m(i,s);if(a){const c=Hm(a),h=c.path,m=c.queryId,E=ms(h,n),C=Jn.fromObject(r);return OM(i,h,new Ji(zS(m),E,C))}return[]}(i.serverSyncTree_,c,E,a)}else{const E=Ir(r);h=function(i,n,r,s){const a=$m(i,s);if(null!=a){const c=Hm(a),h=c.path,m=c.queryId,E=ms(h,n);return OM(i,h,new _h(zS(m),E,r))}return[]}(i.serverSyncTree_,c,E,a)}else if(s){const E=(0,V.UI)(r,C=>Ir(C));h=function(i,n,r){const s=Jn.fromObject(r);return Sa(i,new Ji({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},n,s))}(i.serverSyncTree_,c,E)}else{const E=Ir(r);h=ve(i.serverSyncTree_,c,E)}let m=c;h.length>0&&(m=qv(i,c)),bl(i.eventQueue_,m,h)}function gF(i,n){qM(i,"connected",n),!1===n&&function(i){Gv(i,"onDisconnectEvents");const n=a0(i),r=Nv();xv(i.onDisconnect_,bn(),(a,c)=>{const h=sF(a,c,i.serverSyncTree_,n);gp(r,a,h)});let s=[];xv(r,bn(),(a,c)=>{s=s.concat(ve(i.serverSyncTree_,a,c));const h=ZM(i,a);qv(i,h)}),i.onDisconnect_=Nv(),bl(i.eventQueue_,bn(),s)}(i)}function qM(i,n,r){const s=new Sn("/.info/"+n),a=Ir(r);i.infoData_.updateSnapshot(s,a);const c=ve(i.infoSyncTree_,s,a);bl(i.eventQueue_,s,c)}function pA(i){return i.nextWriteId_++}function WM(i,n,r,s,a){Gv(i,"set",{path:n.toString(),value:r,priority:s});const c=a0(i),h=Ir(r,s),m=_s(i.serverSyncTree_,n),E=LM(h,m,c),C=pA(i),S=U(i.serverSyncTree_,n,E,C,!0);fA(i.eventQueue_,S),i.server_.put(n.toString(),h.val(!0),(O,B)=>{const W="ok"===O;W||Qi("set at "+n+" failed: "+O);const ue=te(i.serverSyncTree_,C,!W);bl(i.eventQueue_,n,ue),Cp(0,a,O,B)});const N=ZM(i,n);qv(i,N),bl(i.eventQueue_,N,[])}function dB(i,n,r){i.server_.onDisconnectCancel(n.toString(),(s,a)=>{"ok"===s&&mh(i.onDisconnect_,n),Cp(0,r,s,a)})}function mF(i,n,r,s){const a=Ir(r);i.server_.onDisconnectPut(n.toString(),a.val(!0),(c,h)=>{"ok"===c&&gp(i.onDisconnect_,n,a),Cp(0,s,c,h)})}function zM(i,n,r){let s;s=".info"===Jt(n._path)?ct(i.infoSyncTree_,n,r):ct(i.serverSyncTree_,n,r),GM(i.eventQueue_,n._path,s)}function _F(i){i.persistentConnection_&&i.persistentConnection_.interrupt(hF)}function Gv(i,...n){let r="";i.persistentConnection_&&(r=i.persistentConnection_.id+":"),bi(r,...n)}function Cp(i,n,r,s){n&&Tm(()=>{if("ok"===r)n(null);else{const a=(r||"error").toUpperCase();let c=a;s&&(c+=": "+s);const h=new Error(c);h.code=a,n(h)}})}function KM(i,n,r){return _s(i.serverSyncTree_,n,r)||Gt.EMPTY_NODE}function gA(i,n=i.transactionQueueTree_){if(n||mA(i,n),Gm(n)){const r=vF(i,n);(0,V.hu)(r.length>0,"Sending zero length transaction queue"),r.every(a=>0===a.status)&&function(i,n,r){const s=r.map(C=>C.currentWriteId),a=KM(i,n,s);let c=a;const h=a.hash();for(let C=0;C<r.length;C++){const S=r[C];(0,V.hu)(0===S.status,"tryToSendTransactionQueue_: items in queue should all be run."),S.status=1,S.retryCount++;const N=ms(n,S.path);c=c.updateChild(N,S.currentOutputSnapshotRaw)}const m=c.val(!0),E=n;i.server_.put(E.toString(),m,C=>{Gv(i,"transaction put response",{path:E.toString(),status:C});let S=[];if("ok"===C){const N=[];for(let O=0;O<r.length;O++)r[O].status=2,S=S.concat(te(i.serverSyncTree_,r[O].currentWriteId)),r[O].onComplete&&N.push(()=>r[O].onComplete(null,!0,r[O].currentOutputSnapshotResolved)),r[O].unwatcher();mA(i,cA(i.transactionQueueTree_,n)),gA(i,i.transactionQueueTree_),bl(i.eventQueue_,n,S);for(let O=0;O<N.length;O++)Tm(N[O])}else{if("datastale"===C)for(let N=0;N<r.length;N++)r[N].status=3===r[N].status?4:0;else{Qi("transaction at "+E.toString()+" failed: "+C);for(let N=0;N<r.length;N++)r[N].status=4,r[N].abortReason=C}qv(i,n)}},h)}(i,t0(n),r)}else oF(n)&&dA(n,r=>{gA(i,r)})}function qv(i,n){const r=yF(i,n),s=t0(r);return function(i,n,r){if(0===n.length)return;const s=[];let a=[];const h=n.filter(m=>0===m.status).map(m=>m.currentWriteId);for(let m=0;m<n.length;m++){const E=n[m],C=ms(r,E.path);let N,S=!1;if((0,V.hu)(null!==C,"rerunTransactionsUnderNode_: relativePath should not be null."),4===E.status)S=!0,N=E.abortReason,a=a.concat(te(i.serverSyncTree_,E.currentWriteId,!0));else if(0===E.status)if(E.retryCount>=25)S=!0,N="maxretry",a=a.concat(te(i.serverSyncTree_,E.currentWriteId,!0));else{const O=KM(i,E.path,h);E.currentInputSnapshot=O;const B=n[m].update(O.val());if(void 0!==B){r0("transaction failed: Data returned ",B,E.path);let W=Ir(B);"object"==typeof B&&null!=B&&(0,V.r3)(B,".priority")||(W=W.updatePriority(O.getPriority()));const Pe=E.currentWriteId,Ze=a0(i),rt=LM(W,O,Ze);E.currentOutputSnapshotRaw=W,E.currentOutputSnapshotResolved=rt,E.currentWriteId=pA(i),h.splice(h.indexOf(Pe),1),a=a.concat(U(i.serverSyncTree_,E.path,rt,E.currentWriteId,E.applyLocally)),a=a.concat(te(i.serverSyncTree_,Pe,!0))}else S=!0,N="nodata",a=a.concat(te(i.serverSyncTree_,E.currentWriteId,!0))}bl(i.eventQueue_,r,a),a=[],S&&(n[m].status=2,setTimeout(n[m].unwatcher,Math.floor(0)),n[m].onComplete&&s.push("nodata"===N?()=>n[m].onComplete(null,!1,n[m].currentInputSnapshot):()=>n[m].onComplete(new Error(N),!1,null)))}mA(i,i.transactionQueueTree_);for(let m=0;m<s.length;m++)Tm(s[m]);gA(i,i.transactionQueueTree_)}(i,vF(i,r),s),s}function yF(i,n){let r,s=i.transactionQueueTree_;for(r=Jt(n);null!==r&&void 0===Gm(s);)s=cA(s,r),r=Jt(n=$n(n));return s}function vF(i,n){const r=[];return EF(i,n,r),r.sort((s,a)=>s.order-a.order),r}function EF(i,n,r){const s=Gm(n);if(s)for(let a=0;a<s.length;a++)r.push(s[a]);dA(n,a=>{EF(i,a,r)})}function mA(i,n){const r=Gm(n);if(r){let s=0;for(let a=0;a<r.length;a++)2!==r[a].status&&(r[s]=r[a],s++);r.length=s,BM(n,r.length>0?r:void 0)}dA(n,s=>{mA(i,s)})}function ZM(i,n){const r=t0(yF(i,n)),s=cA(i.transactionQueueTree_,n);return function(i,n,r){let s=i.parent;for(;null!==s;){if(n(s))return!0;s=s.parent}}(s,a=>{YM(i,a)}),YM(i,s),aF(s,a=>{YM(i,a)}),r}function YM(i,n){const r=Gm(n);if(r){const s=[];let a=[],c=-1;for(let h=0;h<r.length;h++)3===r[h].status||(1===r[h].status?((0,V.hu)(c===h-1,"All SENT items should be at beginning of queue."),c=h,r[h].status=3,r[h].abortReason="set"):((0,V.hu)(0===r[h].status,"Unexpected transaction status in abort"),r[h].unwatcher(),a=a.concat(te(i.serverSyncTree_,r[h].currentWriteId,!0)),r[h].onComplete&&s.push(r[h].onComplete.bind(null,new Error("set"),!1,null))));-1===c?BM(n,void 0):r.length=c+1,bl(i.eventQueue_,t0(n),a);for(let h=0;h<s.length;h++)Tm(s[h])}}const QM=function(i,n){const r=wB(i),s=r.namespace;return"firebase.com"===r.domain&&Ca(r.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||"undefined"===s)&&"localhost"!==r.domain&&Ca("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),r.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Qi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new gC(r.host,r.secure,s,n,"ws"===r.scheme||"wss"===r.scheme,"",s!==r.subdomain),path:new Sn(r.pathString)}},wB=function(i){let n="",r="",s="",a="",c="",h=!0,m="https",E=443;if("string"==typeof i){let C=i.indexOf("//");C>=0&&(m=i.substring(0,C-1),i=i.substring(C+2));let S=i.indexOf("/");-1===S&&(S=i.length);let N=i.indexOf("?");-1===N&&(N=i.length),n=i.substring(0,Math.min(S,N)),S<N&&(a=function(i){let n="";const r=i.split("/");for(let s=0;s<r.length;s++)if(r[s].length>0){let a=r[s];try{a=decodeURIComponent(a.replace(/\+/g," "))}catch(c){}n+="/"+a}return n}(i.substring(S,N)));const O=function(i){const n={};"?"===i.charAt(0)&&(i=i.substring(1));for(const r of i.split("&")){if(0===r.length)continue;const s=r.split("=");2===s.length?n[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):Qi(`Invalid query segment '${r}' in query '${i}'`)}return n}(i.substring(Math.min(i.length,N)));C=n.indexOf(":"),C>=0?(h="https"===m||"wss"===m,E=parseInt(n.substring(C+1),10)):C=n.length;const B=n.slice(0,C);if("localhost"===B.toLowerCase())r="localhost";else if(B.split(".").length<=2)r=B;else{const W=n.indexOf(".");s=n.substring(0,W).toLowerCase(),r=n.substring(W+1),c=s}"ns"in O&&(c=O.ns)}return{host:n,port:E,domain:r,subdomain:s,secure:h,scheme:m,pathString:a,namespace:c}};class wF{constructor(n,r,s,a){this.eventType=n,this.eventRegistration=r,this.snapshot=s,this.prevName=a}getPath(){const n=this.snapshot.ref;return"value"===this.eventType?n._path:n.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,V.Pz)(this.snapshot.exportVal())}}class bF{constructor(n,r,s){this.eventRegistration=n,this.error=r,this.path=s}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class CF{constructor(n,r){this.snapshotCallback=n,this.cancelCallback=r}onValue(n,r){this.snapshotCallback.call(null,n,r)}onCancel(n){return(0,V.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,n)}get hasCancelCallback(){return!!this.cancelCallback}matches(n){return this.snapshotCallback===n.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===n.snapshotCallback.userCallback&&this.snapshotCallback.context===n.snapshotCallback.context}}class TF{constructor(n,r){this._repo=n,this._path=r}cancel(){const n=new V.BH;return dB(this._repo,this._path,n.wrapCallback(()=>{})),n.promise}remove(){wl("OnDisconnect.remove",this._path);const n=new V.BH;return mF(this._repo,this._path,null,n.wrapCallback(()=>{})),n.promise}set(n){wl("OnDisconnect.set",this._path),xc("OnDisconnect.set",n,this._path,!1);const r=new V.BH;return mF(this._repo,this._path,n,r.wrapCallback(()=>{})),r.promise}setWithPriority(n,r){wl("OnDisconnect.setWithPriority",this._path),xc("OnDisconnect.setWithPriority",n,this._path,!1),HM("OnDisconnect.setWithPriority",r,!1);const s=new V.BH;return function(i,n,r,s,a){const c=Ir(r,s);i.server_.onDisconnectPut(n.toString(),c.val(!0),(h,m)=>{"ok"===h&&gp(i.onDisconnect_,n,c),Cp(0,a,h,m)})}(this._repo,this._path,n,r,s.wrapCallback(()=>{})),s.promise}update(n){wl("OnDisconnect.update",this._path),uF("OnDisconnect.update",n,this._path,!1);const r=new V.BH;return function(i,n,r,s){if((0,V.xb)(r))return bi("onDisconnect().update() called with empty data.  Don't do anything."),void Cp(0,s,"ok",void 0);i.server_.onDisconnectMerge(n.toString(),r,(a,c)=>{"ok"===a&&Oi(r,(h,m)=>{const E=Ir(m);gp(i.onDisconnect_,mr(n,h),E)}),Cp(0,s,a,c)})}(this._repo,this._path,n,r.wrapCallback(()=>{})),r.promise}}class Zo{constructor(n,r,s,a){this._repo=n,this._path=r,this._queryParams=s,this._orderByCalled=a}get key(){return en(this._path)?null:oo(this._path)}get ref(){return new Cl(this._repo,this._path)}get _queryIdentifier(){const n=WS(this._queryParams),r=hS(n);return"{}"===r?"default":r}get _queryObject(){return WS(this._queryParams)}isEqual(n){if(!((n=(0,V.m9)(n))instanceof Zo))return!1;const r=this._repo===n._repo,s=PS(this._path,n._path);return r&&s&&this._queryIdentifier===n._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(i){let n="";for(let r=i.pieceNum_;r<i.pieces_.length;r++)""!==i.pieces_[r]&&(n+="/"+encodeURIComponent(String(i.pieces_[r])));return n||"/"}(this._path)}}function _A(i,n){if(!0===i._orderByCalled)throw new Error(n+": You can't combine multiple orderBy calls.")}function Tp(i){let n=null,r=null;if(i.hasStart()&&(n=i.getIndexStartValue()),i.hasEnd()&&(r=i.getIndexEndValue()),i.getIndex()===Ta){const s="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",a="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(i.hasStart()){if(i.getIndexStartName()!==yl)throw new Error(s);if("string"!=typeof n)throw new Error(a)}if(i.hasEnd()){if(i.getIndexEndName()!==gu)throw new Error(s);if("string"!=typeof r)throw new Error(a)}}else if(i.getIndex()===Qn){if(null!=n&&!n0(n)||null!=r&&!n0(r))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,V.hu)(i.getIndex()instanceof OC||i.getIndex()===jS,"unknown index type."),null!=n&&"object"==typeof n||null!=r&&"object"==typeof r)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function yA(i){if(i.hasStart()&&i.hasEnd()&&i.hasLimit()&&!i.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Cl extends Zo{constructor(n,r){super(n,r,new LC,!1)}get parent(){const n=xS(this._path);return null===n?null:new Cl(this._repo,n)}get root(){let n=this;for(;null!==n.parent;)n=n.parent;return n}}class qm{constructor(n,r,s){this._node=n,this.ref=r,this._index=s}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(n){const r=new Sn(n),s=Wm(this.ref,n);return new qm(this._node.getChild(r),s,Qn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(n){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(s,a)=>n(new qm(a,Wm(this.ref,s),Qn)))}hasChild(n){const r=new Sn(n);return!this._node.getChild(r).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function IF(i,n){return(i=(0,V.m9)(i))._checkNotDeleted("ref"),void 0!==n?Wm(i._root,n):i._root}function DF(i,n){(i=(0,V.m9)(i))._checkNotDeleted("refFromURL");const r=QM(n,i._repo.repoInfo_.nodeAdmin);cF("refFromURL",r);const s=r.repoInfo;return!i._repo.repoInfo_.isCustomHost()&&s.host!==i._repo.repoInfo_.host&&Ca("refFromURL: Host name does not match the current database: (found "+s.host+" but expected "+i._repo.repoInfo_.host+")"),IF(i,r.path.toString())}function Wm(i,n){return null===Jt((i=(0,V.m9)(i))._path)?((r=n)&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),o0("child","path",r,!1)):o0("child","path",n,!1),new Cl(i._repo,mr(i._path,n));var r}function JM(i,n){i=(0,V.m9)(i),wl("set",i._path),xc("set",n,i._path,!1);const r=new V.BH;return WM(i._repo,i._path,n,null,r.wrapCallback(()=>{})),r.promise}function DB(i,n){uF("update",n,i._path,!1);const r=new V.BH;return function(i,n,r,s){Gv(i,"update",{path:n.toString(),value:r});let a=!0;const c=a0(i),h={};if(Oi(r,(m,E)=>{a=!1,h[m]=sF(mr(n,m),Ir(E),i.serverSyncTree_,c)}),a)bi("update() called with empty data.  Don't do anything."),Cp(0,s,"ok",void 0);else{const m=pA(i),E=function(i,n,r,s){!function(i,n,r,s){(0,V.hu)(s>i.lastWriteId,"Stacking an older merge on top of newer ones"),i.allWrites.push({path:n,children:r,writeId:s,visible:!0}),i.visibleWrites=HC(i.visibleWrites,n,r),i.lastWriteId=s}(i.pendingWriteTree_,n,r,s);const a=Jn.fromObject(r);return Sa(i,new Ji({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},n,a))}(i.serverSyncTree_,n,h,m);fA(i.eventQueue_,E),i.server_.merge(n.toString(),r,(C,S)=>{const N="ok"===C;N||Qi("update at "+n+" failed: "+C);const O=te(i.serverSyncTree_,m,!N),B=O.length>0?qv(i,n):n;bl(i.eventQueue_,B,O),Cp(0,s,C,S)}),Oi(r,C=>{const S=ZM(i,mr(n,C));qv(i,S)}),bl(i.eventQueue_,n,[])}}(i._repo,i._path,n,r.wrapCallback(()=>{})),r.promise}function SB(i){return function(i,n){const r=function(i,n){const r=n._path;let s=null;i.syncPointTree_.foreachOnPath(r,(C,S)=>{const N=ms(C,r);s=s||u(S,N)});let a=i.syncPointTree_.get(r);a?s=s||u(a,bn()):(a=new xM,i.syncPointTree_=i.syncPointTree_.set(r,a));const c=null!=s,h=c?new yh(s,!0,!1):null;return function(i){return Eh(i.viewCache_)}(MM(a,n,bh(i.pendingWriteTree_,n._path),c?h.getNode():Gt.EMPTY_NODE,c))}(i.serverSyncTree_,n);return null!=r?Promise.resolve(r):i.server_.get(n).then(s=>{const a=Ir(s).withIndex(n._queryParams.getIndex()),c=ve(i.serverSyncTree_,n._path,a);return GM(i.eventQueue_,n._path,c),Promise.resolve(a)},s=>(Gv(i,"get for query "+(0,V.Pz)(n)+" failed: "+s),Promise.reject(new Error(s))))}((i=(0,V.m9)(i))._repo,i).then(n=>new qm(n,new Cl(i._repo,i._path),i._queryParams.getIndex()))}class vA{constructor(n){this.callbackContext=n}respondsTo(n){return"value"===n}createEvent(n,r){const s=r._queryParams.getIndex();return new wF("value",this,new qm(n.snapshotNode,new Cl(r._repo,r._path),s))}getEventRunner(n){return"cancel"===n.getEventType()?()=>this.callbackContext.onCancel(n.error):()=>this.callbackContext.onValue(n.snapshot,null)}createCancelEvent(n,r){return this.callbackContext.hasCancelCallback?new bF(this,n,r):null}matches(n){return n instanceof vA&&(!n.callbackContext||!this.callbackContext||n.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class EA{constructor(n,r){this.eventType=n,this.callbackContext=r}respondsTo(n){let r="children_added"===n?"child_added":n;return r="children_removed"===r?"child_removed":r,this.eventType===r}createCancelEvent(n,r){return this.callbackContext.hasCancelCallback?new bF(this,n,r):null}createEvent(n,r){(0,V.hu)(null!=n.childName,"Child events should have a childName.");const s=Wm(new Cl(r._repo,r._path),n.childName),a=r._queryParams.getIndex();return new wF(n.type,this,new qm(n.snapshotNode,s,a),n.prevName)}getEventRunner(n){return"cancel"===n.getEventType()?()=>this.callbackContext.onCancel(n.error):()=>this.callbackContext.onValue(n.snapshot,n.prevName)}matches(n){return n instanceof EA&&this.eventType===n.eventType&&(!this.callbackContext||!n.callbackContext||this.callbackContext.matches(n.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function l0(i,n,r,s,a){let c;if("object"==typeof s&&(c=void 0,a=s),"function"==typeof s&&(c=s),a&&a.onlyOnce){const E=r,C=(S,N)=>{zM(i._repo,i,m),E(S,N)};C.userCallback=r.userCallback,C.context=r.context,r=C}const h=new CF(r,c||void 0),m="value"===n?new vA(h):new EA(n,h);return function(i,n,r){let s;s=".info"===Jt(n._path)?Hr(i.infoSyncTree_,n,r):Hr(i.serverSyncTree_,n,r),GM(i.eventQueue_,n._path,s)}(i._repo,i,m),()=>zM(i._repo,i,m)}function XM(i,n,r,s){return l0(i,"value",n,r,s)}function SF(i,n,r,s){return l0(i,"child_added",n,r,s)}function AF(i,n,r,s){return l0(i,"child_changed",n,r,s)}function RF(i,n,r,s){return l0(i,"child_moved",n,r,s)}function NF(i,n,r,s){return l0(i,"child_removed",n,r,s)}function xF(i,n,r){let s=null;const a=r?new CF(r):null;"value"===n?s=new vA(a):n&&(s=new EA(n,a)),zM(i._repo,i,s)}class wu{}class PF extends wu{constructor(n,r){super(),this._value=n,this._key=r}_apply(n){xc("endAt",this._value,n._path,!0);const r=ao(n._queryParams,this._value,this._key);if(yA(r),Tp(r),n._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Zo(n._repo,n._path,r,n._orderByCalled)}}class RB extends wu{constructor(n,r){super(),this._value=n,this._key=r}_apply(n){xc("endBefore",this._value,n._path,!1);const r=function(i,n,r){let s,a;return i.index_===Ta?("string"==typeof n&&(n=HS(n)),a=ao(i,n,r)):(s=null==r?yl:HS(r),a=ao(i,n,s)),a.endBeforeSet_=!0,a}(n._queryParams,this._value,this._key);if(yA(r),Tp(r),n._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Zo(n._repo,n._path,r,n._orderByCalled)}}class MF extends wu{constructor(n,r){super(),this._value=n,this._key=r}_apply(n){xc("startAt",this._value,n._path,!0);const r=VC(n._queryParams,this._value,this._key);if(yA(r),Tp(r),n._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Zo(n._repo,n._path,r,n._orderByCalled)}}class PB extends wu{constructor(n,r){super(),this._value=n,this._key=r}_apply(n){xc("startAfter",this._value,n._path,!1);const r=function(i,n,r){let s;if(i.index_===Ta)"string"==typeof n&&(n=$S(n)),s=VC(i,n,r);else{let a;a=null==r?gu:$S(r),s=VC(i,n,a)}return s.startAfterSet_=!0,s}(n._queryParams,this._value,this._key);if(yA(r),Tp(r),n._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Zo(n._repo,n._path,r,n._orderByCalled)}}class OB extends wu{constructor(n){super(),this._limit=n}_apply(n){if(n._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Zo(n._repo,n._path,function(i,n){const r=i.copy();return r.limitSet_=!0,r.limit_=n,r.viewFrom_="l",r}(n._queryParams,this._limit),n._orderByCalled)}}class FB extends wu{constructor(n){super(),this._limit=n}_apply(n){if(n._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Zo(n._repo,n._path,function(i,n){const r=i.copy();return r.limitSet_=!0,r.limit_=n,r.viewFrom_="r",r}(n._queryParams,this._limit),n._orderByCalled)}}class VB extends wu{constructor(n){super(),this._path=n}_apply(n){_A(n,"orderByChild");const r=new Sn(this._path);if(en(r))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const s=new OC(r),a=Rv(n._queryParams,s);return Tp(a),new Zo(n._repo,n._path,a,!0)}}class BB extends wu{_apply(n){_A(n,"orderByKey");const r=Rv(n._queryParams,Ta);return Tp(r),new Zo(n._repo,n._path,r,!0)}}class $B extends wu{_apply(n){_A(n,"orderByPriority");const r=Rv(n._queryParams,Qn);return Tp(r),new Zo(n._repo,n._path,r,!0)}}class GB extends wu{_apply(n){_A(n,"orderByValue");const r=Rv(n._queryParams,jS);return Tp(r),new Zo(n._repo,n._path,r,!0)}}class WB extends wu{constructor(n,r){super(),this._value=n,this._key=r}_apply(n){if(xc("equalTo",this._value,n._path,!1),n._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(n._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new PF(this._value,this._key)._apply(new MF(this._value,this._key)._apply(n))}}function bu(i,...n){let r=(0,V.m9)(i);for(const s of n)r=s._apply(r);return r}(function(i){(0,V.hu)(!XC,"__referenceConstructor has already been defined"),XC=i})(Cl),function(i){(0,V.hu)(!b,"__referenceConstructor has already been defined"),b=i}(Cl);const eO={};function kF(i,n,r,s,a){let c=s||i.options.databaseURL;void 0===c&&(i.options.projectId||Ca("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),bi("Using default host for project ",i.options.projectId),c=`${i.options.projectId}-default-rtdb.firebaseio.com`);let E,C,h=QM(c,a),m=h.repoInfo;"undefined"!=typeof process&&(C=process.env.FIREBASE_DATABASE_EMULATOR_HOST),C?(E=!0,c=`http://${C}?ns=${m.namespace}`,h=QM(c,a),m=h.repoInfo):E=!h.repoInfo.secure;const S=a&&E?new _v(_v.OWNER):new AP(i.name,i.options,n);cF("Invalid Firebase Database URL",h),en(h.path)||Ca("Database URL must point to the root of a Firebase Database (not including a child path).");const N=function(i,n,r,s){let a=eO[n.name];a||(a={},eO[n.name]=a);let c=a[i.toURLString()];return c&&Ca("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),c=new sB(i,false,r,s),a[i.toURLString()]=c,c}(m,i,S,new SP(i.name,r));return new XB(N,i)}class XB{constructor(n,r){this._repoInternal=n,this.app=r,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(i,n,r){if(i.stats_=Dm(i.repoInfo_),i.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)i.server_=new UC(i.repoInfo_,(s,a,c,h)=>{pF(i,s,a,c,h)},i.authTokenProvider_,i.appCheckProvider_),setTimeout(()=>gF(i,!0),0);else{if(null!=r){if("object"!=typeof r)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,V.Pz)(r)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}i.persistentConnection_=new ph(i.repoInfo_,n,(s,a,c,h)=>{pF(i,s,a,c,h)},s=>{gF(i,s)},s=>{!function(i,n){Oi(n,(r,s)=>{qM(i,r,s)})}(i,s)},i.authTokenProvider_,i.appCheckProvider_,r),i.server_=i.persistentConnection_}i.authTokenProvider_.addTokenChangeListener(s=>{i.server_.refreshAuthToken(s)}),i.appCheckProvider_.addTokenChangeListener(s=>{i.server_.refreshAppCheckToken(s.token)}),i.statsReporter_=function(i,n){const r=i.toString();return yC[r]||(yC[r]=n()),yC[r]}(i.repoInfo_,()=>new BC(i.stats_,i.server_)),i.infoData_=new cM,i.infoSyncTree_=new F({startListening:(s,a,c,h)=>{let m=[];const E=i.infoData_.getNode(s._path);return E.isEmpty()||(m=ve(i.infoSyncTree_,s._path,E),setTimeout(()=>{h("ok")},0)),m},stopListening:()=>{}}),qM(i,"connected",!1),i.serverSyncTree_=new F({startListening:(s,a,c,h)=>(i.server_.listen(s,c,a,(m,E)=>{const C=h(m,E);bl(i.eventQueue_,s._path,C)}),[]),stopListening:(s,a)=>{i.server_.unlisten(s,a)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Cl(this._repo,bn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(i,n){const r=eO[n];(!r||r[i.key]!==i)&&Ca(`Database ${n}(${i.repoInfo_}) has already been deleted.`),_F(i),delete r[i.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(n){null===this._rootInternal&&Ca("Cannot call "+n+" on a deleted database.")}}function rj(i,n){hC(i,n)}class lj{constructor(n,r){this.committed=n,this.snapshot=r}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}ph.prototype.simpleListen=function(i,n){this.sendRequest("q",{p:i},n)},ph.prototype.echo=function(i,n){this.sendRequest("echo",{d:i},n)},hv(as.SDK_VERSION),(0,as._registerComponent)(new Vi.wA("database",(n,{instanceIdentifier:r})=>kF(n.getProvider("app").getImmediate(),n.getProvider("auth-internal"),n.getProvider("app-check-internal"),r),"PUBLIC").setMultipleInstances(!0)),(0,as.registerVersion)("@firebase/database","0.12.1",void 0);const hj=new cn.Yd("@firebase/database-compat"),FF=function(i){hj.warn("FIREBASE WARNING: "+i)};class gj{constructor(n){this._delegate=n}cancel(n){(0,V.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,V.Wj)("OnDisconnect.cancel","onComplete",n,!0);const r=this._delegate.cancel();return n&&r.then(()=>n(null),s=>n(s)),r}remove(n){(0,V.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,V.Wj)("OnDisconnect.remove","onComplete",n,!0);const r=this._delegate.remove();return n&&r.then(()=>n(null),s=>n(s)),r}set(n,r){(0,V.Dv)("OnDisconnect.set",1,2,arguments.length),(0,V.Wj)("OnDisconnect.set","onComplete",r,!0);const s=this._delegate.set(n);return r&&s.then(()=>r(null),a=>r(a)),s}setWithPriority(n,r,s){(0,V.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,V.Wj)("OnDisconnect.setWithPriority","onComplete",s,!0);const a=this._delegate.setWithPriority(n,r);return s&&a.then(()=>s(null),c=>s(c)),a}update(n,r){if((0,V.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(n)){const a={};for(let c=0;c<n.length;++c)a[""+c]=n[c];n=a,FF("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,V.Wj)("OnDisconnect.update","onComplete",r,!0);const s=this._delegate.update(n);return r&&s.then(()=>r(null),a=>r(a)),s}}class mj{constructor(n,r){this.committed=n,this.snapshot=r}toJSON(){return(0,V.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Ip{constructor(n,r){this._database=n,this._delegate=r}val(){return(0,V.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,V.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,V.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,V.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(n){return(0,V.Dv)("DataSnapshot.child",0,1,arguments.length),n=String(n),o0("DataSnapshot.child","path",n,!1),new Ip(this._database,this._delegate.child(n))}hasChild(n){return(0,V.Dv)("DataSnapshot.hasChild",1,1,arguments.length),o0("DataSnapshot.hasChild","path",n,!1),this._delegate.hasChild(n)}getPriority(){return(0,V.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(n){return(0,V.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,V.Wj)("DataSnapshot.forEach","action",n,!1),this._delegate.forEach(r=>n(new Ip(this._database,r)))}hasChildren(){return(0,V.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,V.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,V.Dv)("DataSnapshot.ref",0,0,arguments.length),new Aa(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ys{constructor(n,r){this.database=n,this._delegate=r}on(n,r,s,a){var c;(0,V.Dv)("Query.on",2,4,arguments.length),(0,V.Wj)("Query.on","callback",r,!1);const h=ys.getCancelAndContextArgs_("Query.on",s,a),m=(C,S)=>{r.call(h.context,new Ip(this.database,C),S)};m.userCallback=r,m.context=h.context;const E=null===(c=h.cancel)||void 0===c?void 0:c.bind(h.context);switch(n){case"value":return XM(this._delegate,m,E),r;case"child_added":return SF(this._delegate,m,E),r;case"child_removed":return NF(this._delegate,m,E),r;case"child_changed":return AF(this._delegate,m,E),r;case"child_moved":return RF(this._delegate,m,E),r;default:throw new Error((0,V.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(n,r,s){if((0,V.Dv)("Query.off",0,3,arguments.length),function(i,n,r){if(void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,V.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,n),(0,V.Wj)("Query.off","callback",r,!0),(0,V.lb)("Query.off","context",s,!0),r){const a=()=>{};a.userCallback=r,a.context=s,xF(this._delegate,n,a)}else xF(this._delegate,n)}get(){return SB(this._delegate).then(n=>new Ip(this.database,n))}once(n,r,s,a){(0,V.Dv)("Query.once",1,4,arguments.length),(0,V.Wj)("Query.once","callback",r,!0);const c=ys.getCancelAndContextArgs_("Query.once",s,a),h=new V.BH,m=(C,S)=>{const N=new Ip(this.database,C);r&&r.call(c.context,N,S),h.resolve(N)};m.userCallback=r,m.context=c.context;const E=C=>{c.cancel&&c.cancel.call(c.context,C),h.reject(C)};switch(n){case"value":XM(this._delegate,m,E,{onlyOnce:!0});break;case"child_added":SF(this._delegate,m,E,{onlyOnce:!0});break;case"child_removed":NF(this._delegate,m,E,{onlyOnce:!0});break;case"child_changed":AF(this._delegate,m,E,{onlyOnce:!0});break;case"child_moved":RF(this._delegate,m,E,{onlyOnce:!0});break;default:throw new Error((0,V.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return h.promise}limitToFirst(n){return(0,V.Dv)("Query.limitToFirst",1,1,arguments.length),new ys(this.database,bu(this._delegate,function(i){if("number"!=typeof i||Math.floor(i)!==i||i<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new OB(i)}(n)))}limitToLast(n){return(0,V.Dv)("Query.limitToLast",1,1,arguments.length),new ys(this.database,bu(this._delegate,function(i){if("number"!=typeof i||Math.floor(i)!==i||i<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new FB(i)}(n)))}orderByChild(n){return(0,V.Dv)("Query.orderByChild",1,1,arguments.length),new ys(this.database,bu(this._delegate,function(i){if("$key"===i)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===i)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===i)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return o0("orderByChild","path",i,!1),new VB(i)}(n)))}orderByKey(){return(0,V.Dv)("Query.orderByKey",0,0,arguments.length),new ys(this.database,bu(this._delegate,new BB))}orderByPriority(){return(0,V.Dv)("Query.orderByPriority",0,0,arguments.length),new ys(this.database,bu(this._delegate,new $B))}orderByValue(){return(0,V.Dv)("Query.orderByValue",0,0,arguments.length),new ys(this.database,bu(this._delegate,new GB))}startAt(n=null,r){return(0,V.Dv)("Query.startAt",0,2,arguments.length),new ys(this.database,bu(this._delegate,function(i=null,n){return s0("startAt","key",n,!0),new MF(i,n)}(n,r)))}startAfter(n=null,r){return(0,V.Dv)("Query.startAfter",0,2,arguments.length),new ys(this.database,bu(this._delegate,function(i,n){return s0("startAfter","key",n,!0),new PB(i,n)}(n,r)))}endAt(n=null,r){return(0,V.Dv)("Query.endAt",0,2,arguments.length),new ys(this.database,bu(this._delegate,function(i,n){return s0("endAt","key",n,!0),new PF(i,n)}(n,r)))}endBefore(n=null,r){return(0,V.Dv)("Query.endBefore",0,2,arguments.length),new ys(this.database,bu(this._delegate,function(i,n){return s0("endBefore","key",n,!0),new RB(i,n)}(n,r)))}equalTo(n,r){return(0,V.Dv)("Query.equalTo",1,2,arguments.length),new ys(this.database,bu(this._delegate,function(i,n){return s0("equalTo","key",n,!0),new WB(i,n)}(n,r)))}toString(){return(0,V.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,V.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(n){if((0,V.Dv)("Query.isEqual",1,1,arguments.length),!(n instanceof ys))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(n._delegate)}static getCancelAndContextArgs_(n,r,s){const a={cancel:void 0,context:void 0};if(r&&s)a.cancel=r,(0,V.Wj)(n,"cancel",a.cancel,!0),a.context=s,(0,V.lb)(n,"context",a.context,!0);else if(r)if("object"==typeof r&&null!==r)a.context=r;else{if("function"!=typeof r)throw new Error((0,V.gK)(n,"cancelOrContext")+" must either be a cancel callback or a context object.");a.cancel=r}return a}get ref(){return new Aa(this.database,new Cl(this._delegate._repo,this._delegate._path))}}class Aa extends ys{constructor(n,r){super(n,new Zo(r._repo,r._path,new LC,!1)),this.database=n,this._delegate=r}getKey(){return(0,V.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(n){return(0,V.Dv)("Reference.child",1,1,arguments.length),"number"==typeof n&&(n=String(n)),new Aa(this.database,Wm(this._delegate,n))}getParent(){(0,V.Dv)("Reference.parent",0,0,arguments.length);const n=this._delegate.parent;return n?new Aa(this.database,n):null}getRoot(){return(0,V.Dv)("Reference.root",0,0,arguments.length),new Aa(this.database,this._delegate.root)}set(n,r){(0,V.Dv)("Reference.set",1,2,arguments.length),(0,V.Wj)("Reference.set","onComplete",r,!0);const s=JM(this._delegate,n);return r&&s.then(()=>r(null),a=>r(a)),s}update(n,r){if((0,V.Dv)("Reference.update",1,2,arguments.length),Array.isArray(n)){const a={};for(let c=0;c<n.length;++c)a[""+c]=n[c];n=a,FF("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}wl("Reference.update",this._delegate._path),(0,V.Wj)("Reference.update","onComplete",r,!0);const s=DB(this._delegate,n);return r&&s.then(()=>r(null),a=>r(a)),s}setWithPriority(n,r,s){(0,V.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,V.Wj)("Reference.setWithPriority","onComplete",s,!0);const a=function(i,n,r){if(wl("setWithPriority",i._path),xc("setWithPriority",n,i._path,!1),HM("setWithPriority",r,!1),".length"===i.key||".keys"===i.key)throw"setWithPriority failed: "+i.key+" is a read-only object.";const s=new V.BH;return WM(i._repo,i._path,n,r,s.wrapCallback(()=>{})),s.promise}(this._delegate,n,r);return s&&a.then(()=>s(null),c=>s(c)),a}remove(n){(0,V.Dv)("Reference.remove",0,1,arguments.length),(0,V.Wj)("Reference.remove","onComplete",n,!0);const r=function(i){return wl("remove",i._path),JM(i,null)}(this._delegate);return n&&r.then(()=>n(null),s=>n(s)),r}transaction(n,r,s){(0,V.Dv)("Reference.transaction",1,3,arguments.length),(0,V.Wj)("Reference.transaction","transactionUpdate",n,!1),(0,V.Wj)("Reference.transaction","onComplete",r,!0),function(i,n,r,s){if(void 0!==r&&"boolean"!=typeof r)throw new Error((0,V.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,s);const a=function(i,n,r){var s;if(i=(0,V.m9)(i),wl("Reference.transaction",i._path),".length"===i.key||".keys"===i.key)throw"Reference.transaction failed: "+i.key+" is a read-only object.";const a=null===(s=null==r?void 0:r.applyLocally)||void 0===s||s,c=new V.BH,m=XM(i,()=>{});return function(i,n,r,s,a,c){Gv(i,"transaction on "+n);const h={path:n,update:r,onComplete:s,status:null,order:cS(),applyLocally:c,retryCount:0,unwatcher:a,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},m=KM(i,n,void 0);h.currentInputSnapshot=m;const E=h.update(m.val());if(void 0===E)h.unwatcher(),h.currentOutputSnapshotRaw=null,h.currentOutputSnapshotResolved=null,h.onComplete&&h.onComplete(null,!1,h.currentInputSnapshot);else{r0("transaction failed: Data returned ",E,h.path),h.status=0;const C=cA(i.transactionQueueTree_,n),S=Gm(C)||[];let N;S.push(h),BM(C,S),"object"==typeof E&&null!==E&&(0,V.r3)(E,".priority")?(N=(0,V.DV)(E,".priority"),(0,V.hu)(n0(N),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):N=(_s(i.serverSyncTree_,n)||Gt.EMPTY_NODE).getPriority().val();const O=a0(i),B=Ir(E,N),W=LM(B,m,O);h.currentOutputSnapshotRaw=B,h.currentOutputSnapshotResolved=W,h.currentWriteId=pA(i);const ue=U(i.serverSyncTree_,n,W,h.currentWriteId,h.applyLocally);bl(i.eventQueue_,n,ue),gA(i,i.transactionQueueTree_)}}(i._repo,i._path,n,(E,C,S)=>{let N=null;E?c.reject(E):(N=new qm(S,new Cl(i._repo,i._path),Qn),c.resolve(new lj(C,N)))},m,a),c.promise}(this._delegate,n,{applyLocally:s}).then(c=>new mj(c.committed,new Ip(this.database,c.snapshot)));return r&&a.then(c=>r(null,c.committed,c.snapshot),c=>r(c,!1,null)),a}setPriority(n,r){(0,V.Dv)("Reference.setPriority",1,2,arguments.length),(0,V.Wj)("Reference.setPriority","onComplete",r,!0);const s=function(i,n){i=(0,V.m9)(i),wl("setPriority",i._path),HM("setPriority",n,!1);const r=new V.BH;return WM(i._repo,mr(i._path,".priority"),n,null,r.wrapCallback(()=>{})),r.promise}(this._delegate,n);return r&&s.then(()=>r(null),a=>r(a)),s}push(n,r){(0,V.Dv)("Reference.push",0,2,arguments.length),(0,V.Wj)("Reference.push","onComplete",r,!0);const s=function(i,n){i=(0,V.m9)(i),wl("push",i._path),xc("push",n,i._path,!0);const r=fF(i._repo),s=K1(r),a=Wm(i,s),c=Wm(i,s);let h;return h=null!=n?JM(c,n).then(()=>c):Promise.resolve(c),a.then=h.then.bind(h),a.catch=h.then.bind(h,void 0),a}(this._delegate,n),a=s.then(h=>new Aa(this.database,h));r&&a.then(()=>r(null),h=>r(h));const c=new Aa(this.database,s);return c.then=a.then.bind(a),c.catch=a.catch.bind(a,void 0),c}onDisconnect(){return wl("Reference.onDisconnect",this._delegate._path),new gj(new TF(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class u0{constructor(n,r){this._delegate=n,this.app=r,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(n,r,s={}){!function(i,n,r,s={}){(i=(0,V.m9)(i))._checkNotDeleted("useEmulator"),i._instanceStarted&&Ca("Cannot call useEmulator() after instance has already been initialized.");const a=i._repoInternal;let c;if(a.repoInfo_.nodeAdmin)s.mockUserToken&&Ca('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),c=new _v(_v.OWNER);else if(s.mockUserToken){const h="string"==typeof s.mockUserToken?s.mockUserToken:(0,V.Sg)(s.mockUserToken,i.app.options.projectId);c=new _v(h)}!function(i,n,r,s){i.repoInfo_=new gC(`${n}:${r}`,!1,i.repoInfo_.namespace,i.repoInfo_.webSocketOnly,i.repoInfo_.nodeAdmin,i.repoInfo_.persistenceKey,i.repoInfo_.includeNamespaceInQueryParams),s&&(i.authTokenProvider_=s)}(a,n,r,c)}(this._delegate,n,r,s)}ref(n){if((0,V.Dv)("database.ref",0,1,arguments.length),n instanceof Aa){const r=DF(this._delegate,n.toString());return new Aa(this,r)}{const r=IF(this._delegate,n);return new Aa(this,r)}}refFromURL(n){(0,V.Dv)("database.refFromURL",1,1,arguments.length);const s=DF(this._delegate,n);return new Aa(this,s)}goOffline(){return(0,V.Dv)("database.goOffline",0,0,arguments.length),function(i){(i=(0,V.m9)(i))._checkNotDeleted("goOffline"),_F(i._repo)}(this._delegate)}goOnline(){return(0,V.Dv)("database.goOnline",0,0,arguments.length),function(i){(i=(0,V.m9)(i))._checkNotDeleted("goOnline"),function(i){i.persistentConnection_&&i.persistentConnection_.resume(hF)}(i._repo)}(this._delegate)}}u0.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:i=>function(i){return{".sv":{increment:i}}}(i)};var yj=Object.freeze({__proto__:null,initStandalone:function({app:i,url:n,version:r,customAuthImpl:s,namespace:a,nodeAdmin:c=!1}){hv(r);const h=new Vi.zt("auth-internal",new Vi.H0("database-standalone"));return h.setComponent(new Vi.wA("auth-internal",()=>s,"PRIVATE")),{instance:new u0(kF(i,h,void 0,n,c),i),namespace:a}}});const vj=u0.ServerValue;function LF(i){return null==i}function VF(i){return"function"==typeof i.set}function UF(i,n){return VF(n)?n:i.ref(n)}function BF(i,n){if(function(i){return"string"==typeof i}(i))return n.stringCase();if(VF(i))return n.firebaseCase();if(function(i){return"function"==typeof i.exportVal}(i))return n.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof i)}function c0(i,n,r="on",s=Ro.z){return new tr.y(a=>{let c=null;return c=i[r](n,(h,m)=>{s.schedule(()=>{a.next({snapshot:h,prevKey:m})}),"once"===r&&s.schedule(()=>a.complete())},h=>{s.schedule(()=>a.error(h))}),"on"===r?{unsubscribe(){null!=c&&i.off(n,c)}}:{unsubscribe(){}}}).pipe((0,mt.U)(a=>{const{snapshot:c,prevKey:h}=a;let m=null;return c.exists()&&(m=c.key),{type:n,payload:c,prevKey:h,key:m}}),(0,vP.B)())}function jF(i,n){const r=i.length;for(let s=0;s<r;s++)if(i[s].payload.key===n)return s;return-1}function Ij(i,n){const{payload:r,prevKey:s,key:a}=n,c=jF(i,a),h=function(i,n){if(LF(n))return 0;{const r=jF(i,n);return-1===r?i.length:r+1}}(i,s);switch(n.type){case"value":if(n.payload&&n.payload.exists()){let m=null;n.payload.forEach(E=>{const C={payload:E,type:"value",prevKey:m,key:E.key};return m=E.key,i=[...i,C],!1})}return i;case"child_added":if(c>-1){const m=i[c-1];(m&&m.key||null)!==s&&(i=i.filter(E=>E.payload.key!==r.key)).splice(h,0,n)}else{if(null==s)return[n,...i];(i=i.slice()).splice(h,0,n)}return i;case"child_removed":return i.filter(m=>m.payload.key!==r.key);case"child_changed":return i.map(m=>m.payload.key===a?n:m);case"child_moved":if(c>-1){const m=i.splice(c,1)[0];return(i=i.slice()).splice(h,0,m),i}return i;default:return i}}function $F(i){return(LF(i)||0===i.length)&&(i=["child_added","child_removed","child_changed","child_moved"]),i}function HF(i,n,r){return function(i,n,r){return c0(i,"value","once",r).pipe(ai(s=>{const a=[(0,gt.of)(s)];return n.forEach(c=>a.push(c0(i,c,"on",r))),(0,rr.T)(...a).pipe(zs(Ij,[]))}),Li())}(i,n=$F(n),r)}function GF(i,n,r){const s=(n=$F(n)).map(a=>c0(i,a,"on",r));return(0,rr.T)(...s)}function qF(i,n){return function(s,a){return BF(s,{stringCase:()=>i.child(s)[n](a),firebaseCase:()=>s[n](a),snapshotCase:()=>s.ref[n](a)})}}function Rj(i){return function(r){return r?BF(r,{stringCase:()=>i.child(r).remove(),firebaseCase:()=>r.remove(),snapshotCase:()=>r.ref.remove()}):i.remove()}}function WF(i,n){return function(){return c0(i,"value","on",n)}}!function(i){i.INTERNAL.registerComponent(new Vi.wA("database-compat",(n,{instanceIdentifier:r})=>{const s=n.getProvider("app-compat").getImmediate(),a=n.getProvider("database").getImmediate({identifier:r});return new u0(a,s)},"PUBLIC").setServiceProps({Reference:Aa,Query:ys,Database:u0,DataSnapshot:Ip,enableLogging:rj,INTERNAL:yj,ServerValue:vj}).setMultipleInstances(!0)),i.registerVersion("@firebase/database-compat","0.1.1")}(Qp.Z);const Pj=new _.OlP("angularfire2.realtimeDatabaseURL"),Mj=new _.OlP("angularfire2.database.use-emulator");let Oj=(()=>{class i{constructor(r,s,a,c,h,m,E,C,S,N,O,B,W,ue,Pe){this.schedulers=m;const Ze=E,rt=(0,Un.on)(r,h,s);C&&av(rt,h,S,O,B,W,N,ue),this.database=(0,Un.cc)(`${rt.name}.database.${a}`,"AngularFireDatabase",rt.name,()=>{const pt=h.runOutsideAngular(()=>rt.database(a||void 0));return Ze&&pt.useEmulator(...Ze),pt},[Ze])}list(r,s){const a=this.schedulers.ngZone.runOutsideAngular(()=>UF(this.database,r));let c=a;return s&&(c=s(a)),function(i,n){const r=n.schedulers.outsideAngular,s=n.schedulers.ngZone.run(()=>i.ref);return{query:i,update:qF(s,"update"),set:qF(s,"set"),push:a=>s.push(a),remove:Rj(s),snapshotChanges:a=>HF(i,a,r).pipe(Kt.iC),stateChanges:a=>GF(i,a,r).pipe(Kt.iC),auditTrail:a=>function(i,n,r){return function(i,n,r){return function(i,n){return c0(i,"value","on",n).pipe((0,mt.U)(r=>{let s;return r.payload.forEach(a=>(s=a.key,!1)),{data:r,lastKeyToLoad:s}}))}(i,r).pipe(function(...i){return n=>{let r;return"function"==typeof i[i.length-1]&&(r=i.pop()),n.lift(new lC(i,r))}}(n),(0,mt.U)(([a,c])=>{const h=a.lastKeyToLoad,m=c.map(E=>E.key);return{actions:c,lastKeyToLoad:h,loadedKeys:m}}),function(i){return n=>n.lift(new EP(i))}(a=>-1===a.loadedKeys.indexOf(a.lastKeyToLoad)),(0,mt.U)(a=>a.actions))}(i,GF(i,n).pipe(zs((a,c)=>[...a,c],[])),r)}(i,a,r).pipe(Kt.iC),valueChanges:(a,c)=>HF(i,a,r).pipe((0,mt.U)(m=>m.map(E=>c&&c.idField?Object.assign(Object.assign({},E.payload.val()),{[c.idField]:E.key}):E.payload.val())),Kt.iC)}}(c,this)}object(r){return function(i,n){return{query:i,snapshotChanges:()=>WF(i,n.schedulers.outsideAngular)().pipe(Kt.iC),update:r=>i.ref.update(r),set:r=>i.ref.set(r),remove:()=>i.ref.remove(),valueChanges:()=>WF(i,n.schedulers.outsideAngular)().pipe(Kt.iC,(0,mt.U)(s=>s.payload.exists()?s.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>UF(this.database,r)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return i.\u0275fac=function(r){return new(r||i)(_.LFG(Un.Dh),_.LFG(Un.xv,8),_.LFG(Pj,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(Kt.HU),_.LFG(Mj,8),_.LFG(ba,8),_.LFG(Em,8),_.LFG(wm,8),_.LFG(Xb,8),_.LFG(eC,8),_.LFG(tC,8),_.LFG(nC,8),_.LFG(lp,8))},i.\u0275prov=_.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),kj=(()=>{class i{constructor(){vm.Z.registerVersion("angularfire",Kt.q4.full,"rtdb-compat")}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=_.oAB({type:i}),i.\u0275inj=_.cJS({providers:[Oj]}),i})();class Cu extends Yn.xQ{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const r=super._subscribe(n);return r&&!r.closed&&n.next(this._value),r}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new ED.N;return this._value}next(n){super.next(this._value=n)}}var tO=$(9796),Fj=$(6693);const zF={};class Vj{constructor(n){this.resultSelector=n}call(n,r){return r.subscribe(new Uj(n,this.resultSelector))}}class Uj extends iS{constructor(n,r){super(n),this.resultSelector=r,this.active=0,this.values=[],this.observables=[]}_next(n){this.values.push(zF),this.observables.push(n)}_complete(){const n=this.observables,r=n.length;if(0===r)this.destination.complete();else{this.active=r,this.toRespond=r;for(let s=0;s<r;s++)this.add(aC(this,n[s],void 0,s))}}notifyComplete(n){0==(this.active-=1)&&this.destination.complete()}notifyNext(n,r,s){const a=this.values,h=this.toRespond?a[s]===zF?--this.toRespond:this.toRespond:0;a[s]=r,0===h&&(this.resultSelector?this._tryResultSelector(a):this.destination.next(a.slice()))}_tryResultSelector(n){let r;try{r=this.resultSelector.apply(this,n)}catch(s){return void this.destination.error(s)}this.destination.next(r)}}function KF(i){return new tr.y(n=>{let r;try{r=i()}catch(a){return void n.error(a)}return(r?(0,Rn.D)(r):(0,va.c)()).subscribe(n)})}var Bj=$(2441);function zm(i){return function(r){const s=new jj(i),a=r.lift(s);return s.caught=a}}class jj{constructor(n){this.selector=n}call(n,r){return r.subscribe(new $j(n,this.selector,this.caught))}}class $j extends ah.Ds{constructor(n,r,s){super(n),this.selector=r,this.caught=s}error(n){if(!this.isStopped){let r;try{r=this.selector(n,this.caught)}catch(c){return void super.error(c)}this._unsubscribeAndRecycle();const s=new ah.IY(this);this.add(s);const a=(0,ah.ft)(r,s);a!==s&&this.add(a)}}}var lo=$(9773);function d0(i,n){return(0,lo.zg)(i,n,1)}function nO(i){return function(r){return 0===i?(0,va.c)():r.lift(new Hj(i))}}class Hj{constructor(n){if(this.total=n,this.total<0)throw new CD}call(n,r){return r.subscribe(new Gj(n,this.total))}}class Gj extends fr.L{constructor(n,r){super(n),this.total=r,this.ring=new Array,this.count=0}_next(n){const r=this.ring,s=this.total,a=this.count++;r.length<s?r.push(n):r[a%s]=n}_complete(){const n=this.destination;let r=this.count;if(r>0){const s=this.count>=this.total?this.total:this.count,a=this.ring;for(let c=0;c<s;c++){const h=r++%s;n.next(a[h])}}n.complete()}}var Ra=$(3342),Wj=$(1307);class Kj{constructor(n){this.callback=n}call(n,r){return r.subscribe(new Zj(n,this.callback))}}class Zj extends fr.L{constructor(n,r){super(n),this.add(new sp.w(r))}}class Dh{constructor(n,r){this.id=n,this.url=r}}class rO extends Dh{constructor(n,r,s="imperative",a=null){super(n,r),this.navigationTrigger=s,this.restoredState=a}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class h0 extends Dh{constructor(n,r,s){super(n,r),this.urlAfterRedirects=s}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ZF extends Dh{constructor(n,r,s){super(n,r),this.reason=s}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Yj extends Dh{constructor(n,r,s){super(n,r),this.error=s}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Qj extends Dh{constructor(n,r,s,a){super(n,r),this.urlAfterRedirects=s,this.state=a}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Jj extends Dh{constructor(n,r,s,a){super(n,r),this.urlAfterRedirects=s,this.state=a}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xj extends Dh{constructor(n,r,s,a,c){super(n,r),this.urlAfterRedirects=s,this.state=a,this.shouldActivate=c}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class e$ extends Dh{constructor(n,r,s,a){super(n,r),this.urlAfterRedirects=s,this.state=a}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class t$ extends Dh{constructor(n,r,s,a){super(n,r),this.urlAfterRedirects=s,this.state=a}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class YF{constructor(n){this.route=n}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class QF{constructor(n){this.route=n}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class n${constructor(n){this.snapshot=n}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class r${constructor(n){this.snapshot=n}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class i${constructor(n){this.snapshot=n}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class s${constructor(n){this.snapshot=n}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class JF{constructor(n,r,s){this.routerEvent=n,this.position=r,this.anchor=s}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const hn="primary";class o${constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){const r=this.params[n];return Array.isArray(r)?r[0]:r}return null}getAll(n){if(this.has(n)){const r=this.params[n];return Array.isArray(r)?r:[r]}return[]}get keys(){return Object.keys(this.params)}}function Wv(i){return new o$(i)}const XF="ngNavigationCancelingError";function iO(i){const n=Error("NavigationCancelingError: "+i);return n[XF]=!0,n}function l$(i,n,r){const s=r.path.split("/");if(s.length>i.length||"full"===r.pathMatch&&(n.hasChildren()||s.length<i.length))return null;const a={};for(let c=0;c<s.length;c++){const h=s[c],m=i[c];if(h.startsWith(":"))a[h.substring(1)]=m;else if(h!==m.path)return null}return{consumed:i.slice(0,s.length),posParams:a}}function Pc(i,n){const r=i?Object.keys(i):void 0,s=n?Object.keys(n):void 0;if(!r||!s||r.length!=s.length)return!1;let a;for(let c=0;c<r.length;c++)if(a=r[c],!eL(i[a],n[a]))return!1;return!0}function eL(i,n){if(Array.isArray(i)&&Array.isArray(n)){if(i.length!==n.length)return!1;const r=[...i].sort(),s=[...n].sort();return r.every((a,c)=>s[c]===a)}return i===n}function tL(i){return Array.prototype.concat.apply([],i)}function nL(i){return i.length>0?i[i.length-1]:null}function vs(i,n){for(const r in i)i.hasOwnProperty(r)&&n(i[r],r)}function Mc(i){return(0,_.CqO)(i)?i:(0,_.QGY)(i)?(0,Rn.D)(Promise.resolve(i)):(0,gt.of)(i)}const d$={exact:function sL(i,n,r){if(!Zm(i.segments,n.segments)||!wA(i.segments,n.segments,r)||i.numberOfChildren!==n.numberOfChildren)return!1;for(const s in n.children)if(!i.children[s]||!sL(i.children[s],n.children[s],r))return!1;return!0},subset:oL},rL={exact:function(i,n){return Pc(i,n)},subset:function(i,n){return Object.keys(n).length<=Object.keys(i).length&&Object.keys(n).every(r=>eL(i[r],n[r]))},ignored:()=>!0};function iL(i,n,r){return d$[r.paths](i.root,n.root,r.matrixParams)&&rL[r.queryParams](i.queryParams,n.queryParams)&&!("exact"===r.fragment&&i.fragment!==n.fragment)}function oL(i,n,r){return aL(i,n,n.segments,r)}function aL(i,n,r,s){if(i.segments.length>r.length){const a=i.segments.slice(0,r.length);return!(!Zm(a,r)||n.hasChildren()||!wA(a,r,s))}if(i.segments.length===r.length){if(!Zm(i.segments,r)||!wA(i.segments,r,s))return!1;for(const a in n.children)if(!i.children[a]||!oL(i.children[a],n.children[a],s))return!1;return!0}{const a=r.slice(0,i.segments.length),c=r.slice(i.segments.length);return!!(Zm(i.segments,a)&&wA(i.segments,a,s)&&i.children[hn])&&aL(i.children[hn],n,c,s)}}function wA(i,n,r){return n.every((s,a)=>rL[r](i[a].parameters,s.parameters))}class Km{constructor(n,r,s){this.root=n,this.queryParams=r,this.fragment=s}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Wv(this.queryParams)),this._queryParamMap}toString(){return m$.serialize(this)}}class mn{constructor(n,r){this.segments=n,this.children=r,this.parent=null,vs(r,(s,a)=>s.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return bA(this)}}class f0{constructor(n,r){this.path=n,this.parameters=r}get parameterMap(){return this._parameterMap||(this._parameterMap=Wv(this.parameters)),this._parameterMap}toString(){return dL(this)}}function Zm(i,n){return i.length===n.length&&i.every((r,s)=>r.path===n[s].path)}class sO{}class lL{parse(n){const r=new I$(n);return new Km(r.parseRootSegment(),r.parseQueryParams(),r.parseFragment())}serialize(n){return`${`/${p0(n.root,!0)}`}${function(i){const n=Object.keys(i).map(r=>{const s=i[r];return Array.isArray(s)?s.map(a=>`${CA(r)}=${CA(a)}`).join("&"):`${CA(r)}=${CA(s)}`}).filter(r=>!!r);return n.length?`?${n.join("&")}`:""}(n.queryParams)}${"string"==typeof n.fragment?`#${function(i){return encodeURI(i)}(n.fragment)}`:""}`}}const m$=new lL;function bA(i){return i.segments.map(n=>dL(n)).join("/")}function p0(i,n){if(!i.hasChildren())return bA(i);if(n){const r=i.children[hn]?p0(i.children[hn],!1):"",s=[];return vs(i.children,(a,c)=>{c!==hn&&s.push(`${c}:${p0(a,!1)}`)}),s.length>0?`${r}(${s.join("//")})`:r}{const r=function(i,n){let r=[];return vs(i.children,(s,a)=>{a===hn&&(r=r.concat(n(s,a)))}),vs(i.children,(s,a)=>{a!==hn&&(r=r.concat(n(s,a)))}),r}(i,(s,a)=>a===hn?[p0(i.children[hn],!1)]:[`${a}:${p0(s,!1)}`]);return 1===Object.keys(i.children).length&&null!=i.children[hn]?`${bA(i)}/${r[0]}`:`${bA(i)}/(${r.join("//")})`}}function uL(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function CA(i){return uL(i).replace(/%3B/gi,";")}function oO(i){return uL(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function TA(i){return decodeURIComponent(i)}function cL(i){return TA(i.replace(/\+/g,"%20"))}function dL(i){return`${oO(i.path)}${function(i){return Object.keys(i).map(n=>`;${oO(n)}=${oO(i[n])}`).join("")}(i.parameters)}`}const E$=/^[^\/()?;=#]+/;function IA(i){const n=i.match(E$);return n?n[0]:""}const w$=/^[^=?&#]+/,C$=/^[^?&#]+/;class I${constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new mn([],{}):new mn([],this.parseChildren())}parseQueryParams(){const n={};if(this.consumeOptional("?"))do{this.parseQueryParam(n)}while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let r={};this.peekStartsWith("/(")&&(this.capture("/"),r=this.parseParens(!0));let s={};return this.peekStartsWith("(")&&(s=this.parseParens(!1)),(n.length>0||Object.keys(r).length>0)&&(s[hn]=new mn(n,r)),s}parseSegment(){const n=IA(this.remaining);if(""===n&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(n),new f0(TA(n),this.parseMatrixParams())}parseMatrixParams(){const n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){const r=IA(this.remaining);if(!r)return;this.capture(r);let s="";if(this.consumeOptional("=")){const a=IA(this.remaining);a&&(s=a,this.capture(s))}n[TA(r)]=TA(s)}parseQueryParam(n){const r=function(i){const n=i.match(w$);return n?n[0]:""}(this.remaining);if(!r)return;this.capture(r);let s="";if(this.consumeOptional("=")){const h=function(i){const n=i.match(C$);return n?n[0]:""}(this.remaining);h&&(s=h,this.capture(s))}const a=cL(r),c=cL(s);if(n.hasOwnProperty(a)){let h=n[a];Array.isArray(h)||(h=[h],n[a]=h),h.push(c)}else n[a]=c}parseParens(n){const r={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const s=IA(this.remaining),a=this.remaining[s.length];if("/"!==a&&")"!==a&&";"!==a)throw new Error(`Cannot parse url '${this.url}'`);let c;s.indexOf(":")>-1?(c=s.substr(0,s.indexOf(":")),this.capture(c),this.capture(":")):n&&(c=hn);const h=this.parseChildren();r[c]=1===Object.keys(h).length?h[hn]:new mn([],h),this.consumeOptional("//")}return r}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return!!this.peekStartsWith(n)&&(this.remaining=this.remaining.substring(n.length),!0)}capture(n){if(!this.consumeOptional(n))throw new Error(`Expected "${n}".`)}}class hL{constructor(n){this._root=n}get root(){return this._root.value}parent(n){const r=this.pathFromRoot(n);return r.length>1?r[r.length-2]:null}children(n){const r=aO(n,this._root);return r?r.children.map(s=>s.value):[]}firstChild(n){const r=aO(n,this._root);return r&&r.children.length>0?r.children[0].value:null}siblings(n){const r=lO(n,this._root);return r.length<2?[]:r[r.length-2].children.map(a=>a.value).filter(a=>a!==n)}pathFromRoot(n){return lO(n,this._root).map(r=>r.value)}}function aO(i,n){if(i===n.value)return n;for(const r of n.children){const s=aO(i,r);if(s)return s}return null}function lO(i,n){if(i===n.value)return[n];for(const r of n.children){const s=lO(i,r);if(s.length)return s.unshift(n),s}return[]}class Sh{constructor(n,r){this.value=n,this.children=r}toString(){return`TreeNode(${this.value})`}}function g0(i){const n={};return i&&i.children.forEach(r=>n[r.value.outlet]=r),n}class fL extends hL{constructor(n,r){super(n),this.snapshot=r,uO(this,n)}toString(){return this.snapshot.toString()}}function pL(i,n){const r=function(i,n){const h=new DA([],{},{},"",{},hn,n,null,i.root,-1,{});return new mL("",new Sh(h,[]))}(i,n),s=new Cu([new f0("",{})]),a=new Cu({}),c=new Cu({}),h=new Cu({}),m=new Cu(""),E=new zv(s,a,h,m,c,hn,n,r.root);return E.snapshot=r.root,new fL(new Sh(E,[]),r)}class zv{constructor(n,r,s,a,c,h,m,E){this.url=n,this.params=r,this.queryParams=s,this.fragment=a,this.data=c,this.outlet=h,this.component=m,this._futureSnapshot=E}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,mt.U)(n=>Wv(n)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,mt.U)(n=>Wv(n)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function gL(i,n="emptyOnly"){const r=i.pathFromRoot;let s=0;if("always"!==n)for(s=r.length-1;s>=1;){const a=r[s],c=r[s-1];if(a.routeConfig&&""===a.routeConfig.path)s--;else{if(c.component)break;s--}}return function(i){return i.reduce((n,r)=>({params:Object.assign(Object.assign({},n.params),r.params),data:Object.assign(Object.assign({},n.data),r.data),resolve:Object.assign(Object.assign({},n.resolve),r._resolvedData)}),{params:{},data:{},resolve:{}})}(r.slice(s))}class DA{constructor(n,r,s,a,c,h,m,E,C,S,N){this.url=n,this.params=r,this.queryParams=s,this.fragment=a,this.data=c,this.outlet=h,this.component=m,this.routeConfig=E,this._urlSegment=C,this._lastPathIndex=S,this._resolve=N}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Wv(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Wv(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(s=>s.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class mL extends hL{constructor(n,r){super(r),this.url=n,uO(this,r)}toString(){return _L(this._root)}}function uO(i,n){n.value._routerState=i,n.children.forEach(r=>uO(i,r))}function _L(i){const n=i.children.length>0?` { ${i.children.map(_L).join(", ")} } `:"";return`${i.value}${n}`}function cO(i){if(i.snapshot){const n=i.snapshot,r=i._futureSnapshot;i.snapshot=r,Pc(n.queryParams,r.queryParams)||i.queryParams.next(r.queryParams),n.fragment!==r.fragment&&i.fragment.next(r.fragment),Pc(n.params,r.params)||i.params.next(r.params),function(i,n){if(i.length!==n.length)return!1;for(let r=0;r<i.length;++r)if(!Pc(i[r],n[r]))return!1;return!0}(n.url,r.url)||i.url.next(r.url),Pc(n.data,r.data)||i.data.next(r.data)}else i.snapshot=i._futureSnapshot,i.data.next(i._futureSnapshot.data)}function dO(i,n){return Pc(i.params,n.params)&&function(i,n){return Zm(i,n)&&i.every((r,s)=>Pc(r.parameters,n[s].parameters))}(i.url,n.url)&&!(!i.parent!=!n.parent)&&(!i.parent||dO(i.parent,n.parent))}function SA(i,n,r){if(r&&i.shouldReuseRoute(n.value,r.value.snapshot)){const s=r.value;s._futureSnapshot=n.value;const a=function(i,n,r){return n.children.map(s=>{for(const a of r.children)if(i.shouldReuseRoute(s.value,a.value.snapshot))return SA(i,s,a);return SA(i,s)})}(i,n,r);return new Sh(s,a)}{if(i.shouldAttach(n.value)){const c=i.retrieve(n.value);if(null!==c){const h=c.route;return yL(n,h),h}}const s=function(i){return new zv(new Cu(i.url),new Cu(i.params),new Cu(i.queryParams),new Cu(i.fragment),new Cu(i.data),i.outlet,i.component,i)}(n.value),a=n.children.map(c=>SA(i,c));return new Sh(s,a)}}function yL(i,n){if(i.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(i.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=i.value;for(let r=0;r<i.children.length;++r)yL(i.children[r],n.children[r])}function AA(i){return"object"==typeof i&&null!=i&&!i.outlets&&!i.segmentPath}function m0(i){return"object"==typeof i&&null!=i&&i.outlets}function hO(i,n,r,s,a){let c={};return s&&vs(s,(h,m)=>{c[m]=Array.isArray(h)?h.map(E=>`${E}`):`${h}`}),new Km(r.root===i?n:vL(r.root,i,n),c,a)}function vL(i,n,r){const s={};return vs(i.children,(a,c)=>{s[c]=a===n?r:vL(a,n,r)}),new mn(i.segments,s)}class EL{constructor(n,r,s){if(this.isAbsolute=n,this.numberOfDoubleDots=r,this.commands=s,n&&s.length>0&&AA(s[0]))throw new Error("Root segment cannot have matrix parameters");const a=s.find(m0);if(a&&a!==nL(s))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class fO{constructor(n,r,s){this.segmentGroup=n,this.processChildren=r,this.index=s}}function wL(i,n,r){if(i||(i=new mn([],{})),0===i.segments.length&&i.hasChildren())return RA(i,n,r);const s=function(i,n,r){let s=0,a=n;const c={match:!1,pathIndex:0,commandIndex:0};for(;a<i.segments.length;){if(s>=r.length)return c;const h=i.segments[a],m=r[s];if(m0(m))break;const E=`${m}`,C=s<r.length-1?r[s+1]:null;if(a>0&&void 0===E)break;if(E&&C&&"object"==typeof C&&void 0===C.outlets){if(!CL(E,C,h))return c;s+=2}else{if(!CL(E,{},h))return c;s++}a++}return{match:!0,pathIndex:a,commandIndex:s}}(i,n,r),a=r.slice(s.commandIndex);if(s.match&&s.pathIndex<i.segments.length){const c=new mn(i.segments.slice(0,s.pathIndex),{});return c.children[hn]=new mn(i.segments.slice(s.pathIndex),i.children),RA(c,0,a)}return s.match&&0===a.length?new mn(i.segments,{}):s.match&&!i.hasChildren()?pO(i,n,r):s.match?RA(i,0,a):pO(i,n,r)}function RA(i,n,r){if(0===r.length)return new mn(i.segments,{});{const s=function(i){return m0(i[0])?i[0].outlets:{[hn]:i}}(r),a={};return vs(s,(c,h)=>{"string"==typeof c&&(c=[c]),null!==c&&(a[h]=wL(i.children[h],n,c))}),vs(i.children,(c,h)=>{void 0===s[h]&&(a[h]=c)}),new mn(i.segments,a)}}function pO(i,n,r){const s=i.segments.slice(0,n);let a=0;for(;a<r.length;){const c=r[a];if(m0(c)){const E=L$(c.outlets);return new mn(s,E)}if(0===a&&AA(r[0])){s.push(new f0(i.segments[n].path,bL(r[0]))),a++;continue}const h=m0(c)?c.outlets[hn]:`${c}`,m=a<r.length-1?r[a+1]:null;h&&m&&AA(m)?(s.push(new f0(h,bL(m))),a+=2):(s.push(new f0(h,{})),a++)}return new mn(s,{})}function L$(i){const n={};return vs(i,(r,s)=>{"string"==typeof r&&(r=[r]),null!==r&&(n[s]=pO(new mn([],{}),0,r))}),n}function bL(i){const n={};return vs(i,(r,s)=>n[s]=`${r}`),n}function CL(i,n,r){return i==r.path&&Pc(n,r.parameters)}class U${constructor(n,r,s,a){this.routeReuseStrategy=n,this.futureState=r,this.currState=s,this.forwardEvent=a}activate(n){const r=this.futureState._root,s=this.currState?this.currState._root:null;this.deactivateChildRoutes(r,s,n),cO(this.futureState.root),this.activateChildRoutes(r,s,n)}deactivateChildRoutes(n,r,s){const a=g0(r);n.children.forEach(c=>{const h=c.value.outlet;this.deactivateRoutes(c,a[h],s),delete a[h]}),vs(a,(c,h)=>{this.deactivateRouteAndItsChildren(c,s)})}deactivateRoutes(n,r,s){const a=n.value,c=r?r.value:null;if(a===c)if(a.component){const h=s.getContext(a.outlet);h&&this.deactivateChildRoutes(n,r,h.children)}else this.deactivateChildRoutes(n,r,s);else c&&this.deactivateRouteAndItsChildren(r,s)}deactivateRouteAndItsChildren(n,r){this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,r):this.deactivateRouteAndOutlet(n,r)}detachAndStoreRouteSubtree(n,r){const s=r.getContext(n.value.outlet);if(s&&s.outlet){const a=s.outlet.detach(),c=s.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:a,route:n,contexts:c})}}deactivateRouteAndOutlet(n,r){const s=r.getContext(n.value.outlet),a=s&&n.value.component?s.children:r,c=g0(n);for(const h of Object.keys(c))this.deactivateRouteAndItsChildren(c[h],a);s&&s.outlet&&(s.outlet.deactivate(),s.children.onOutletDeactivated(),s.attachRef=null,s.resolver=null,s.route=null)}activateChildRoutes(n,r,s){const a=g0(r);n.children.forEach(c=>{this.activateRoutes(c,a[c.value.outlet],s),this.forwardEvent(new s$(c.value.snapshot))}),n.children.length&&this.forwardEvent(new r$(n.value.snapshot))}activateRoutes(n,r,s){const a=n.value,c=r?r.value:null;if(cO(a),a===c)if(a.component){const h=s.getOrCreateContext(a.outlet);this.activateChildRoutes(n,r,h.children)}else this.activateChildRoutes(n,r,s);else if(a.component){const h=s.getOrCreateContext(a.outlet);if(this.routeReuseStrategy.shouldAttach(a.snapshot)){const m=this.routeReuseStrategy.retrieve(a.snapshot);this.routeReuseStrategy.store(a.snapshot,null),h.children.onOutletReAttached(m.contexts),h.attachRef=m.componentRef,h.route=m.route.value,h.outlet&&h.outlet.attach(m.componentRef,m.route.value),TL(m.route)}else{const m=function(i){for(let n=i.parent;n;n=n.parent){const r=n.routeConfig;if(r&&r._loadedConfig)return r._loadedConfig;if(r&&r.component)return null}return null}(a.snapshot),E=m?m.module.componentFactoryResolver:null;h.attachRef=null,h.route=a,h.resolver=E,h.outlet&&h.outlet.activateWith(a,E),this.activateChildRoutes(n,null,h.children)}}else this.activateChildRoutes(n,null,s)}}function TL(i){cO(i.value),i.children.forEach(TL)}class gO{constructor(n,r){this.routes=n,this.module=r}}function Dp(i){return"function"==typeof i}function Ym(i){return i instanceof Km}const _0=Symbol("INITIAL_VALUE");function y0(){return ai(i=>function(...i){let n,r;return(0,dd.K)(i[i.length-1])&&(r=i.pop()),"function"==typeof i[i.length-1]&&(n=i.pop()),1===i.length&&(0,tO.k)(i[0])&&(i=i[0]),(0,Fj.n)(i,r).lift(new Vj(n))}(i.map(n=>n.pipe(Ky(1),la(_0)))).pipe(zs((n,r)=>{let s=!1;return r.reduce((a,c,h)=>a!==_0?a:(c===_0&&(s=!0),s||!1!==c&&h!==r.length-1&&!Ym(c)?a:c),n)},_0),xi(n=>n!==_0),(0,mt.U)(n=>Ym(n)?n:!0===n),Ky(1)))}let IL=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=_.Xpm({type:i,selectors:[["ng-component"]],decls:1,vars:0,template:function(r,s){1&r&&_._UZ(0,"router-outlet")},directives:function(){return[UA]},encapsulation:2}),i})();function DL(i,n=""){for(let r=0;r<i.length;r++){const s=i[r];W$(s,z$(n,s))}}function W$(i,n){i.children&&DL(i.children,n)}function z$(i,n){return n?i||n.path?i&&!n.path?`${i}/`:!i&&n.path?n.path:`${i}/${n.path}`:"":i}function mO(i){const n=i.children&&i.children.map(mO),r=n?Object.assign(Object.assign({},i),{children:n}):Object.assign({},i);return!r.component&&(n||r.loadChildren)&&r.outlet&&r.outlet!==hn&&(r.component=IL),r}function Tl(i){return i.outlet||hn}function SL(i,n){const r=i.filter(s=>Tl(s)===n);return r.push(...i.filter(s=>Tl(s)!==n)),r}const AL={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function NA(i,n,r){var s;if(""===n.path)return"full"===n.pathMatch&&(i.hasChildren()||r.length>0)?Object.assign({},AL):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const c=(n.matcher||l$)(r,i,n);if(!c)return Object.assign({},AL);const h={};vs(c.posParams,(E,C)=>{h[C]=E.path});const m=c.consumed.length>0?Object.assign(Object.assign({},h),c.consumed[c.consumed.length-1].parameters):h;return{matched:!0,consumedSegments:c.consumed,lastChild:c.consumed.length,parameters:m,positionalParamSegments:null!==(s=c.posParams)&&void 0!==s?s:{}}}function xA(i,n,r,s,a="corrected"){if(r.length>0&&function(i,n,r){return r.some(s=>PA(i,n,s)&&Tl(s)!==hn)}(i,r,s)){const h=new mn(n,function(i,n,r,s){const a={};a[hn]=s,s._sourceSegment=i,s._segmentIndexShift=n.length;for(const c of r)if(""===c.path&&Tl(c)!==hn){const h=new mn([],{});h._sourceSegment=i,h._segmentIndexShift=n.length,a[Tl(c)]=h}return a}(i,n,s,new mn(r,i.children)));return h._sourceSegment=i,h._segmentIndexShift=n.length,{segmentGroup:h,slicedSegments:[]}}if(0===r.length&&function(i,n,r){return r.some(s=>PA(i,n,s))}(i,r,s)){const h=new mn(i.segments,function(i,n,r,s,a,c){const h={};for(const m of s)if(PA(i,r,m)&&!a[Tl(m)]){const E=new mn([],{});E._sourceSegment=i,E._segmentIndexShift="legacy"===c?i.segments.length:n.length,h[Tl(m)]=E}return Object.assign(Object.assign({},a),h)}(i,n,r,s,i.children,a));return h._sourceSegment=i,h._segmentIndexShift=n.length,{segmentGroup:h,slicedSegments:r}}const c=new mn(i.segments,i.children);return c._sourceSegment=i,c._segmentIndexShift=n.length,{segmentGroup:c,slicedSegments:r}}function PA(i,n,r){return(!(i.hasChildren()||n.length>0)||"full"!==r.pathMatch)&&""===r.path}function RL(i,n,r,s){return!!(Tl(i)===s||s!==hn&&PA(n,r,i))&&("**"===i.path||NA(n,i,r).matched)}function NL(i,n,r){return 0===n.length&&!i.children[r]}class v0{constructor(n){this.segmentGroup=n||null}}class xL{constructor(n){this.urlTree=n}}function MA(i){return new tr.y(n=>n.error(new v0(i)))}function PL(i){return new tr.y(n=>n.error(new xL(i)))}function J$(i){return new tr.y(n=>n.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${i}'`)))}class tH{constructor(n,r,s,a,c){this.configLoader=r,this.urlSerializer=s,this.urlTree=a,this.config=c,this.allowRedirects=!0,this.ngModule=n.get(_.h0i)}apply(){const n=xA(this.urlTree.root,[],[],this.config).segmentGroup,r=new mn(n.segments,n.children);return this.expandSegmentGroup(this.ngModule,this.config,r,hn).pipe((0,mt.U)(c=>this.createUrlTree(_O(c),this.urlTree.queryParams,this.urlTree.fragment))).pipe(zm(c=>{if(c instanceof xL)return this.allowRedirects=!1,this.match(c.urlTree);throw c instanceof v0?this.noMatchError(c):c}))}match(n){return this.expandSegmentGroup(this.ngModule,this.config,n.root,hn).pipe((0,mt.U)(a=>this.createUrlTree(_O(a),n.queryParams,n.fragment))).pipe(zm(a=>{throw a instanceof v0?this.noMatchError(a):a}))}noMatchError(n){return new Error(`Cannot match any routes. URL Segment: '${n.segmentGroup}'`)}createUrlTree(n,r,s){const a=n.segments.length>0?new mn([],{[hn]:n}):n;return new Km(a,r,s)}expandSegmentGroup(n,r,s,a){return 0===s.segments.length&&s.hasChildren()?this.expandChildren(n,r,s).pipe((0,mt.U)(c=>new mn([],c))):this.expandSegment(n,s,r,s.segments,a,!0)}expandChildren(n,r,s){const a=[];for(const c of Object.keys(s.children))"primary"===c?a.unshift(c):a.push(c);return(0,Rn.D)(a).pipe(d0(c=>{const h=s.children[c],m=SL(r,c);return this.expandSegmentGroup(n,m,h,c).pipe((0,mt.U)(E=>({segment:E,outlet:c})))}),zs((c,h)=>(c[h.outlet]=h.segment,c),{}),function(i,n){const r=arguments.length>=2;return s=>s.pipe(i?xi((a,c)=>i(a,c,s)):kx.y,nO(1),r?gm(n):Zy(()=>new fm))}())}expandSegment(n,r,s,a,c,h){return(0,Rn.D)(s).pipe(d0(m=>this.expandSegmentAgainstRoute(n,r,s,m,a,c,h).pipe(zm(C=>{if(C instanceof v0)return(0,gt.of)(null);throw C}))),Ea(m=>!!m),zm((m,E)=>{if(m instanceof fm||"EmptyError"===m.name){if(NL(r,a,c))return(0,gt.of)(new mn([],{}));throw new v0(r)}throw m}))}expandSegmentAgainstRoute(n,r,s,a,c,h,m){return RL(a,r,c,h)?void 0===a.redirectTo?this.matchSegmentAgainstRoute(n,r,a,c,h):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(n,r,s,a,c,h):MA(r):MA(r)}expandSegmentAgainstRouteUsingRedirect(n,r,s,a,c,h){return"**"===a.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(n,s,a,h):this.expandRegularSegmentAgainstRouteUsingRedirect(n,r,s,a,c,h)}expandWildCardWithParamsAgainstRouteUsingRedirect(n,r,s,a){const c=this.applyRedirectCommands([],s.redirectTo,{});return s.redirectTo.startsWith("/")?PL(c):this.lineralizeSegments(s,c).pipe((0,lo.zg)(h=>{const m=new mn(h,{});return this.expandSegment(n,m,r,h,a,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(n,r,s,a,c,h){const{matched:m,consumedSegments:E,lastChild:C,positionalParamSegments:S}=NA(r,a,c);if(!m)return MA(r);const N=this.applyRedirectCommands(E,a.redirectTo,S);return a.redirectTo.startsWith("/")?PL(N):this.lineralizeSegments(a,N).pipe((0,lo.zg)(O=>this.expandSegment(n,r,s,O.concat(c.slice(C)),h,!1)))}matchSegmentAgainstRoute(n,r,s,a,c){if("**"===s.path)return s.loadChildren?(s._loadedConfig?(0,gt.of)(s._loadedConfig):this.configLoader.load(n.injector,s)).pipe((0,mt.U)(O=>(s._loadedConfig=O,new mn(a,{})))):(0,gt.of)(new mn(a,{}));const{matched:h,consumedSegments:m,lastChild:E}=NA(r,s,a);if(!h)return MA(r);const C=a.slice(E);return this.getChildConfig(n,s,a).pipe((0,lo.zg)(N=>{const O=N.module,B=N.routes,{segmentGroup:W,slicedSegments:ue}=xA(r,m,C,B),Pe=new mn(W.segments,W.children);if(0===ue.length&&Pe.hasChildren())return this.expandChildren(O,B,Pe).pipe((0,mt.U)(tt=>new mn(m,tt)));if(0===B.length&&0===ue.length)return(0,gt.of)(new mn(m,{}));const Ze=Tl(s)===c;return this.expandSegment(O,Pe,B,ue,Ze?hn:c,!0).pipe((0,mt.U)(pt=>new mn(m.concat(pt.segments),pt.children)))}))}getChildConfig(n,r,s){return r.children?(0,gt.of)(new gO(r.children,n)):r.loadChildren?void 0!==r._loadedConfig?(0,gt.of)(r._loadedConfig):this.runCanLoadGuards(n.injector,r,s).pipe((0,lo.zg)(a=>a?this.configLoader.load(n.injector,r).pipe((0,mt.U)(c=>(r._loadedConfig=c,c))):function(i){return new tr.y(n=>n.error(iO(`Cannot load children because the guard of the route "path: '${i.path}'" returned false`)))}(r))):(0,gt.of)(new gO([],n))}runCanLoadGuards(n,r,s){const a=r.canLoad;if(!a||0===a.length)return(0,gt.of)(!0);const c=a.map(h=>{const m=n.get(h);let E;if(function(i){return i&&Dp(i.canLoad)}(m))E=m.canLoad(r,s);else{if(!Dp(m))throw new Error("Invalid CanLoad guard");E=m(r,s)}return Mc(E)});return(0,gt.of)(c).pipe(y0(),(0,Ra.b)(h=>{if(!Ym(h))return;const m=iO(`Redirecting to "${this.urlSerializer.serialize(h)}"`);throw m.url=h,m}),(0,mt.U)(h=>!0===h))}lineralizeSegments(n,r){let s=[],a=r.root;for(;;){if(s=s.concat(a.segments),0===a.numberOfChildren)return(0,gt.of)(s);if(a.numberOfChildren>1||!a.children[hn])return J$(n.redirectTo);a=a.children[hn]}}applyRedirectCommands(n,r,s){return this.applyRedirectCreatreUrlTree(r,this.urlSerializer.parse(r),n,s)}applyRedirectCreatreUrlTree(n,r,s,a){const c=this.createSegmentGroup(n,r.root,s,a);return new Km(c,this.createQueryParams(r.queryParams,this.urlTree.queryParams),r.fragment)}createQueryParams(n,r){const s={};return vs(n,(a,c)=>{if("string"==typeof a&&a.startsWith(":")){const m=a.substring(1);s[c]=r[m]}else s[c]=a}),s}createSegmentGroup(n,r,s,a){const c=this.createSegments(n,r.segments,s,a);let h={};return vs(r.children,(m,E)=>{h[E]=this.createSegmentGroup(n,m,s,a)}),new mn(c,h)}createSegments(n,r,s,a){return r.map(c=>c.path.startsWith(":")?this.findPosParam(n,c,a):this.findOrReturn(c,s))}findPosParam(n,r,s){const a=s[r.path.substring(1)];if(!a)throw new Error(`Cannot redirect to '${n}'. Cannot find '${r.path}'.`);return a}findOrReturn(n,r){let s=0;for(const a of r){if(a.path===n.path)return r.splice(s),a;s++}return n}}function _O(i){const n={};for(const s of Object.keys(i.children)){const c=_O(i.children[s]);(c.segments.length>0||c.hasChildren())&&(n[s]=c)}return function(i){if(1===i.numberOfChildren&&i.children[hn]){const n=i.children[hn];return new mn(i.segments.concat(n.segments),n.children)}return i}(new mn(i.segments,n))}class ML{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}}class OA{constructor(n,r){this.component=n,this.route=r}}function iH(i,n,r){const s=i._root;return E0(s,n?n._root:null,r,[s.value])}function kA(i,n,r){const s=function(i){if(!i)return null;for(let n=i.parent;n;n=n.parent){const r=n.routeConfig;if(r&&r._loadedConfig)return r._loadedConfig}return null}(n);return(s?s.module.injector:r).get(i)}function E0(i,n,r,s,a={canDeactivateChecks:[],canActivateChecks:[]}){const c=g0(n);return i.children.forEach(h=>{(function(i,n,r,s,a={canDeactivateChecks:[],canActivateChecks:[]}){const c=i.value,h=n?n.value:null,m=r?r.getContext(i.value.outlet):null;if(h&&c.routeConfig===h.routeConfig){const E=function(i,n,r){if("function"==typeof r)return r(i,n);switch(r){case"pathParamsChange":return!Zm(i.url,n.url);case"pathParamsOrQueryParamsChange":return!Zm(i.url,n.url)||!Pc(i.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!dO(i,n)||!Pc(i.queryParams,n.queryParams);case"paramsChange":default:return!dO(i,n)}}(h,c,c.routeConfig.runGuardsAndResolvers);E?a.canActivateChecks.push(new ML(s)):(c.data=h.data,c._resolvedData=h._resolvedData),E0(i,n,c.component?m?m.children:null:r,s,a),E&&m&&m.outlet&&m.outlet.isActivated&&a.canDeactivateChecks.push(new OA(m.outlet.component,h))}else h&&w0(n,m,a),a.canActivateChecks.push(new ML(s)),E0(i,null,c.component?m?m.children:null:r,s,a)})(h,c[h.value.outlet],r,s.concat([h.value]),a),delete c[h.value.outlet]}),vs(c,(h,m)=>w0(h,r.getContext(m),a)),a}function w0(i,n,r){const s=g0(i),a=i.value;vs(s,(c,h)=>{w0(c,a.component?n?n.children.getContext(h):null:n,r)}),r.canDeactivateChecks.push(new OA(a.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,a))}class _H{}function OL(i){return new tr.y(n=>n.error(i))}class vH{constructor(n,r,s,a,c,h){this.rootComponentType=n,this.config=r,this.urlTree=s,this.url=a,this.paramsInheritanceStrategy=c,this.relativeLinkResolution=h}recognize(){const n=xA(this.urlTree.root,[],[],this.config.filter(h=>void 0===h.redirectTo),this.relativeLinkResolution).segmentGroup,r=this.processSegmentGroup(this.config,n,hn);if(null===r)return null;const s=new DA([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},hn,this.rootComponentType,null,this.urlTree.root,-1,{}),a=new Sh(s,r),c=new mL(this.url,a);return this.inheritParamsAndData(c._root),c}inheritParamsAndData(n){const r=n.value,s=gL(r,this.paramsInheritanceStrategy);r.params=Object.freeze(s.params),r.data=Object.freeze(s.data),n.children.forEach(a=>this.inheritParamsAndData(a))}processSegmentGroup(n,r,s){return 0===r.segments.length&&r.hasChildren()?this.processChildren(n,r):this.processSegment(n,r,r.segments,s)}processChildren(n,r){const s=[];for(const c of Object.keys(r.children)){const h=r.children[c],m=SL(n,c),E=this.processSegmentGroup(m,h,c);if(null===E)return null;s.push(...E)}const a=kL(s);return function(i){i.sort((n,r)=>n.value.outlet===hn?-1:r.value.outlet===hn?1:n.value.outlet.localeCompare(r.value.outlet))}(a),a}processSegment(n,r,s,a){for(const c of n){const h=this.processSegmentAgainstRoute(c,r,s,a);if(null!==h)return h}return NL(r,s,a)?[]:null}processSegmentAgainstRoute(n,r,s,a){if(n.redirectTo||!RL(n,r,s,a))return null;let c,h=[],m=[];if("**"===n.path){const B=s.length>0?nL(s).parameters:{};c=new DA(s,B,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,VL(n),Tl(n),n.component,n,FL(r),LL(r)+s.length,UL(n))}else{const B=NA(r,n,s);if(!B.matched)return null;h=B.consumedSegments,m=s.slice(B.lastChild),c=new DA(h,B.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,VL(n),Tl(n),n.component,n,FL(r),LL(r)+h.length,UL(n))}const E=function(i){return i.children?i.children:i.loadChildren?i._loadedConfig.routes:[]}(n),{segmentGroup:C,slicedSegments:S}=xA(r,h,m,E.filter(B=>void 0===B.redirectTo),this.relativeLinkResolution);if(0===S.length&&C.hasChildren()){const B=this.processChildren(E,C);return null===B?null:[new Sh(c,B)]}if(0===E.length&&0===S.length)return[new Sh(c,[])];const N=Tl(n)===a,O=this.processSegment(E,C,S,N?hn:a);return null===O?null:[new Sh(c,O)]}}function bH(i){const n=i.value.routeConfig;return n&&""===n.path&&void 0===n.redirectTo}function kL(i){const n=[],r=new Set;for(const s of i){if(!bH(s)){n.push(s);continue}const a=n.find(c=>s.value.routeConfig===c.value.routeConfig);void 0!==a?(a.children.push(...s.children),r.add(a)):n.push(s)}for(const s of r){const a=kL(s.children);n.push(new Sh(s.value,a))}return n.filter(s=>!r.has(s))}function FL(i){let n=i;for(;n._sourceSegment;)n=n._sourceSegment;return n}function LL(i){let n=i,r=n._segmentIndexShift?n._segmentIndexShift:0;for(;n._sourceSegment;)n=n._sourceSegment,r+=n._segmentIndexShift?n._segmentIndexShift:0;return r-1}function VL(i){return i.data||{}}function UL(i){return i.resolve||{}}function yO(i){return ai(n=>{const r=i(n);return r?(0,Rn.D)(r).pipe((0,mt.U)(()=>n)):(0,gt.of)(n)})}class NH extends class{shouldDetach(n){return!1}store(n,r){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,r){return n.routeConfig===r.routeConfig}}{}const vO=new _.OlP("ROUTES");class BL{constructor(n,r,s,a){this.loader=n,this.compiler=r,this.onLoadStartListener=s,this.onLoadEndListener=a}load(n,r){if(r._loader$)return r._loader$;this.onLoadStartListener&&this.onLoadStartListener(r);const a=this.loadModuleFactory(r.loadChildren).pipe((0,mt.U)(c=>{this.onLoadEndListener&&this.onLoadEndListener(r);const h=c.create(n);return new gO(tL(h.injector.get(vO,void 0,_.XFs.Self|_.XFs.Optional)).map(mO),h)}),zm(c=>{throw r._loader$=void 0,c}));return r._loader$=new Bj.c(a,()=>new Yn.xQ).pipe((0,Wj.x)()),r._loader$}loadModuleFactory(n){return"string"==typeof n?(0,Rn.D)(this.loader.load(n)):Mc(n()).pipe((0,lo.zg)(r=>r instanceof _.YKP?(0,gt.of)(r):(0,Rn.D)(this.compiler.compileModuleAsync(r))))}}class xH{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Kv,this.attachRef=null}}class Kv{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){const s=this.getOrCreateContext(n);s.outlet=r,this.contexts.set(n,s)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new xH,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}}class MH{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}}function OH(i){throw i}function kH(i,n,r){return n.parse("/")}function jL(i,n){return(0,gt.of)(null)}const FH={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},LH={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Es=(()=>{class i{constructor(r,s,a,c,h,m,E,C){this.rootComponentType=r,this.urlSerializer=s,this.rootContexts=a,this.location=c,this.config=C,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Yn.xQ,this.errorHandler=OH,this.malformedUriErrorHandler=kH,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:jL,afterPreactivation:jL},this.urlHandlingStrategy=new MH,this.routeReuseStrategy=new NH,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=h.get(_.h0i),this.console=h.get(_.c2e);const O=h.get(_.R0b);this.isNgZoneEnabled=O instanceof _.R0b&&_.R0b.isInAngularZone(),this.resetConfig(C),this.currentUrlTree=new Km(new mn([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new BL(m,E,B=>this.triggerEvent(new YF(B)),B=>this.triggerEvent(new QF(B))),this.routerState=pL(this.currentUrlTree,this.rootComponentType),this.transitions=new Cu({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var r;return null===(r=this.location.getState())||void 0===r?void 0:r.\u0275routerPageId}setupNavigations(r){const s=this.events;return r.pipe(xi(a=>0!==a.id),(0,mt.U)(a=>Object.assign(Object.assign({},a),{extractedUrl:this.urlHandlingStrategy.extract(a.rawUrl)})),ai(a=>{let c=!1,h=!1;return(0,gt.of)(a).pipe((0,Ra.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.currentRawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),ai(m=>{const E=this.browserUrlTree.toString(),C=!this.navigated||m.extractedUrl.toString()!==E||E!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||C)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return FA(m.source)&&(this.browserUrlTree=m.extractedUrl),(0,gt.of)(m).pipe(ai(N=>{const O=this.transitions.getValue();return s.next(new rO(N.id,this.serializeUrl(N.extractedUrl),N.source,N.restoredState)),O!==this.transitions.getValue()?va.E:Promise.resolve(N)}),function(i,n,r,s){return ai(a=>function(i,n,r,s,a){return new tH(i,n,r,s,a).apply()}(i,n,r,a.extractedUrl,s).pipe((0,mt.U)(c=>Object.assign(Object.assign({},a),{urlAfterRedirects:c}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Ra.b)(N=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:N.urlAfterRedirects})}),function(i,n,r,s,a){return(0,lo.zg)(c=>function(i,n,r,s,a="emptyOnly",c="legacy"){try{const h=new vH(i,n,r,s,a,c).recognize();return null===h?OL(new _H):(0,gt.of)(h)}catch(h){return OL(h)}}(i,n,c.urlAfterRedirects,r(c.urlAfterRedirects),s,a).pipe((0,mt.U)(h=>Object.assign(Object.assign({},c),{targetSnapshot:h}))))}(this.rootComponentType,this.config,N=>this.serializeUrl(N),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Ra.b)(N=>{"eager"===this.urlUpdateStrategy&&(N.extras.skipLocationChange||this.setBrowserUrl(N.urlAfterRedirects,N),this.browserUrlTree=N.urlAfterRedirects);const O=new Qj(N.id,this.serializeUrl(N.extractedUrl),this.serializeUrl(N.urlAfterRedirects),N.targetSnapshot);s.next(O)}));if(C&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:O,extractedUrl:B,source:W,restoredState:ue,extras:Pe}=m,Ze=new rO(O,this.serializeUrl(B),W,ue);s.next(Ze);const rt=pL(B,this.rootComponentType).snapshot;return(0,gt.of)(Object.assign(Object.assign({},m),{targetSnapshot:rt,urlAfterRedirects:B,extras:Object.assign(Object.assign({},Pe),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=m.rawUrl,this.browserUrlTree=m.urlAfterRedirects,m.resolve(null),va.E}),yO(m=>{const{targetSnapshot:E,id:C,extractedUrl:S,rawUrl:N,extras:{skipLocationChange:O,replaceUrl:B}}=m;return this.hooks.beforePreactivation(E,{navigationId:C,appliedUrlTree:S,rawUrlTree:N,skipLocationChange:!!O,replaceUrl:!!B})}),(0,Ra.b)(m=>{const E=new Jj(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(E)}),(0,mt.U)(m=>Object.assign(Object.assign({},m),{guards:iH(m.targetSnapshot,m.currentSnapshot,this.rootContexts)})),function(i,n){return(0,lo.zg)(r=>{const{targetSnapshot:s,currentSnapshot:a,guards:{canActivateChecks:c,canDeactivateChecks:h}}=r;return 0===h.length&&0===c.length?(0,gt.of)(Object.assign(Object.assign({},r),{guardsResult:!0})):function(i,n,r,s){return(0,Rn.D)(i).pipe((0,lo.zg)(a=>function(i,n,r,s,a){const c=n&&n.routeConfig?n.routeConfig.canDeactivate:null;if(!c||0===c.length)return(0,gt.of)(!0);const h=c.map(m=>{const E=kA(m,n,a);let C;if(function(i){return i&&Dp(i.canDeactivate)}(E))C=Mc(E.canDeactivate(i,n,r,s));else{if(!Dp(E))throw new Error("Invalid CanDeactivate guard");C=Mc(E(i,n,r,s))}return C.pipe(Ea())});return(0,gt.of)(h).pipe(y0())}(a.component,a.route,r,n,s)),Ea(a=>!0!==a,!0))}(h,s,a,i).pipe((0,lo.zg)(m=>m&&function(i){return"boolean"==typeof i}(m)?function(i,n,r,s){return(0,Rn.D)(n).pipe(d0(a=>Zh(function(i,n){return null!==i&&n&&n(new n$(i)),(0,gt.of)(!0)}(a.route.parent,s),function(i,n){return null!==i&&n&&n(new i$(i)),(0,gt.of)(!0)}(a.route,s),function(i,n,r){const s=n[n.length-1],c=n.slice(0,n.length-1).reverse().map(h=>function(i){const n=i.routeConfig?i.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:i,guards:n}:null}(h)).filter(h=>null!==h).map(h=>KF(()=>{const m=h.guards.map(E=>{const C=kA(E,h.node,r);let S;if(function(i){return i&&Dp(i.canActivateChild)}(C))S=Mc(C.canActivateChild(s,i));else{if(!Dp(C))throw new Error("Invalid CanActivateChild guard");S=Mc(C(s,i))}return S.pipe(Ea())});return(0,gt.of)(m).pipe(y0())}));return(0,gt.of)(c).pipe(y0())}(i,a.path,r),function(i,n,r){const s=n.routeConfig?n.routeConfig.canActivate:null;if(!s||0===s.length)return(0,gt.of)(!0);const a=s.map(c=>KF(()=>{const h=kA(c,n,r);let m;if(function(i){return i&&Dp(i.canActivate)}(h))m=Mc(h.canActivate(n,i));else{if(!Dp(h))throw new Error("Invalid CanActivate guard");m=Mc(h(n,i))}return m.pipe(Ea())}));return(0,gt.of)(a).pipe(y0())}(i,a.route,r))),Ea(a=>!0!==a,!0))}(s,c,i,n):(0,gt.of)(m)),(0,mt.U)(m=>Object.assign(Object.assign({},r),{guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,Ra.b)(m=>{if(Ym(m.guardsResult)){const C=iO(`Redirecting to "${this.serializeUrl(m.guardsResult)}"`);throw C.url=m.guardsResult,C}const E=new Xj(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(E)}),xi(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,""),!1)),yO(m=>{if(m.guards.canActivateChecks.length)return(0,gt.of)(m).pipe((0,Ra.b)(E=>{const C=new e$(E.id,this.serializeUrl(E.extractedUrl),this.serializeUrl(E.urlAfterRedirects),E.targetSnapshot);this.triggerEvent(C)}),ai(E=>{let C=!1;return(0,gt.of)(E).pipe(function(i,n){return(0,lo.zg)(r=>{const{targetSnapshot:s,guards:{canActivateChecks:a}}=r;if(!a.length)return(0,gt.of)(r);let c=0;return(0,Rn.D)(a).pipe(d0(h=>function(i,n,r,s){return function(i,n,r,s){const a=Object.keys(i);if(0===a.length)return(0,gt.of)({});const c={};return(0,Rn.D)(a).pipe((0,lo.zg)(h=>function(i,n,r,s){const a=kA(i,n,s);return Mc(a.resolve?a.resolve(n,r):a(n,r))}(i[h],n,r,s).pipe((0,Ra.b)(m=>{c[h]=m}))),nO(1),(0,lo.zg)(()=>Object.keys(c).length===a.length?(0,gt.of)(c):va.E))}(i._resolve,i,n,s).pipe((0,mt.U)(c=>(i._resolvedData=c,i.data=Object.assign(Object.assign({},i.data),gL(i,r).resolve),null)))}(h.route,s,i,n)),(0,Ra.b)(()=>c++),nO(1),(0,lo.zg)(h=>c===a.length?(0,gt.of)(r):va.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Ra.b)({next:()=>C=!0,complete:()=>{C||(this.restoreHistory(E),this.cancelNavigationTransition(E,"At least one route resolver didn't emit any value."))}}))}),(0,Ra.b)(E=>{const C=new t$(E.id,this.serializeUrl(E.extractedUrl),this.serializeUrl(E.urlAfterRedirects),E.targetSnapshot);this.triggerEvent(C)}))}),yO(m=>{const{targetSnapshot:E,id:C,extractedUrl:S,rawUrl:N,extras:{skipLocationChange:O,replaceUrl:B}}=m;return this.hooks.afterPreactivation(E,{navigationId:C,appliedUrlTree:S,rawUrlTree:N,skipLocationChange:!!O,replaceUrl:!!B})}),(0,mt.U)(m=>{const E=function(i,n,r){const s=SA(i,n._root,r?r._root:void 0);return new fL(s,n)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return Object.assign(Object.assign({},m),{targetRouterState:E})}),(0,Ra.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((i,n,r)=>(0,mt.U)(s=>(new U$(n,s.targetRouterState,s.currentRouterState,r).activate(i),s)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,Ra.b)({next(){c=!0},complete(){c=!0}}),function(i){return n=>n.lift(new Kj(i))}(()=>{if(!c&&!h){const m=`Navigation ID ${a.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(a),this.cancelNavigationTransition(a,m)):this.cancelNavigationTransition(a,m)}this.currentNavigation=null}),zm(m=>{if(h=!0,function(i){return i&&i[XF]}(m)){const E=Ym(m.url);E||(this.navigated=!0,this.restoreHistory(a,!0));const C=new ZF(a.id,this.serializeUrl(a.extractedUrl),m.message);s.next(C),E?setTimeout(()=>{const S=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),N={skipLocationChange:a.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||FA(a.source)};this.scheduleNavigation(S,"imperative",null,N,{resolve:a.resolve,reject:a.reject,promise:a.promise})},0):a.resolve(!1)}else{this.restoreHistory(a,!0);const E=new Yj(a.id,this.serializeUrl(a.extractedUrl),m);s.next(E);try{a.resolve(this.errorHandler(m))}catch(C){a.reject(C)}}return va.E}))}))}resetRootComponentType(r){this.rootComponentType=r,this.routerState.root.component=this.rootComponentType}getTransition(){const r=this.transitions.value;return r.urlAfterRedirects=this.browserUrlTree,r}setTransition(r){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),r))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(r=>{const s=this.extractLocationChangeInfoFromEvent(r);this.shouldScheduleNavigation(this.lastLocationChangeInfo,s)&&setTimeout(()=>{const{source:a,state:c,urlTree:h}=s,m={replaceUrl:!0};if(c){const E=Object.assign({},c);delete E.navigationId,delete E.\u0275routerPageId,0!==Object.keys(E).length&&(m.state=E)}this.scheduleNavigation(h,a,c,m)},0),this.lastLocationChangeInfo=s}))}extractLocationChangeInfoFromEvent(r){var s;return{source:"popstate"===r.type?"popstate":"hashchange",urlTree:this.parseUrl(r.url),state:(null===(s=r.state)||void 0===s?void 0:s.navigationId)?r.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(r,s){if(!r)return!0;const a=s.urlTree.toString()===r.urlTree.toString();return s.transitionId!==r.transitionId||!a||!("hashchange"===s.source&&"popstate"===r.source||"popstate"===s.source&&"hashchange"===r.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(r){this.events.next(r)}resetConfig(r){DL(r),this.config=r.map(mO),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(r,s={}){const{relativeTo:a,queryParams:c,fragment:h,queryParamsHandling:m,preserveFragment:E}=s,C=a||this.routerState.root,S=E?this.currentUrlTree.fragment:h;let N=null;switch(m){case"merge":N=Object.assign(Object.assign({},this.currentUrlTree.queryParams),c);break;case"preserve":N=this.currentUrlTree.queryParams;break;default:N=c||null}return null!==N&&(N=this.removeEmptyProps(N)),function(i,n,r,s,a){if(0===r.length)return hO(n.root,n.root,n,s,a);const c=function(i){if("string"==typeof i[0]&&1===i.length&&"/"===i[0])return new EL(!0,0,i);let n=0,r=!1;const s=i.reduce((a,c,h)=>{if("object"==typeof c&&null!=c){if(c.outlets){const m={};return vs(c.outlets,(E,C)=>{m[C]="string"==typeof E?E.split("/"):E}),[...a,{outlets:m}]}if(c.segmentPath)return[...a,c.segmentPath]}return"string"!=typeof c?[...a,c]:0===h?(c.split("/").forEach((m,E)=>{0==E&&"."===m||(0==E&&""===m?r=!0:".."===m?n++:""!=m&&a.push(m))}),a):[...a,c]},[]);return new EL(r,n,s)}(r);if(c.toRoot())return hO(n.root,new mn([],{}),n,s,a);const h=function(i,n,r){if(i.isAbsolute)return new fO(n.root,!0,0);if(-1===r.snapshot._lastPathIndex){const c=r.snapshot._urlSegment;return new fO(c,c===n.root,0)}const s=AA(i.commands[0])?0:1;return function(i,n,r){let s=i,a=n,c=r;for(;c>a;){if(c-=a,s=s.parent,!s)throw new Error("Invalid number of '../'");a=s.segments.length}return new fO(s,!1,a-c)}(r.snapshot._urlSegment,r.snapshot._lastPathIndex+s,i.numberOfDoubleDots)}(c,n,i),m=h.processChildren?RA(h.segmentGroup,h.index,c.commands):wL(h.segmentGroup,h.index,c.commands);return hO(h.segmentGroup,m,n,s,a)}(C,this.currentUrlTree,r,N,null!=S?S:null)}navigateByUrl(r,s={skipLocationChange:!1}){const a=Ym(r)?r:this.parseUrl(r),c=this.urlHandlingStrategy.merge(a,this.rawUrlTree);return this.scheduleNavigation(c,"imperative",null,s)}navigate(r,s={skipLocationChange:!1}){return function(i){for(let n=0;n<i.length;n++){const r=i[n];if(null==r)throw new Error(`The requested path contains ${r} segment at index ${n}`)}}(r),this.navigateByUrl(this.createUrlTree(r,s),s)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){let s;try{s=this.urlSerializer.parse(r)}catch(a){s=this.malformedUriErrorHandler(a,this.urlSerializer,r)}return s}isActive(r,s){let a;if(a=!0===s?Object.assign({},FH):!1===s?Object.assign({},LH):s,Ym(r))return iL(this.currentUrlTree,r,a);const c=this.parseUrl(r);return iL(this.currentUrlTree,c,a)}removeEmptyProps(r){return Object.keys(r).reduce((s,a)=>{const c=r[a];return null!=c&&(s[a]=c),s},{})}processNavigations(){this.navigations.subscribe(r=>{this.navigated=!0,this.lastSuccessfulId=r.id,this.currentPageId=r.targetPageId,this.events.next(new h0(r.id,this.serializeUrl(r.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,r.resolve(!0)},r=>{this.console.warn(`Unhandled Navigation Error: ${r}`)})}scheduleNavigation(r,s,a,c,h){var m,E;if(this.disposed)return Promise.resolve(!1);const C=this.getTransition(),S=FA(s)&&C&&!FA(C.source),B=(this.lastSuccessfulId===C.id||this.currentNavigation?C.rawUrl:C.urlAfterRedirects).toString()===r.toString();if(S&&B)return Promise.resolve(!0);let W,ue,Pe;h?(W=h.resolve,ue=h.reject,Pe=h.promise):Pe=new Promise((pt,tt)=>{W=pt,ue=tt});const Ze=++this.navigationId;let rt;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(a=this.location.getState()),rt=a&&a.\u0275routerPageId?a.\u0275routerPageId:c.replaceUrl||c.skipLocationChange?null!==(m=this.browserPageId)&&void 0!==m?m:0:(null!==(E=this.browserPageId)&&void 0!==E?E:0)+1):rt=0,this.setTransition({id:Ze,targetPageId:rt,source:s,restoredState:a,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:r,extras:c,resolve:W,reject:ue,promise:Pe,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Pe.catch(pt=>Promise.reject(pt))}setBrowserUrl(r,s){const a=this.urlSerializer.serialize(r),c=Object.assign(Object.assign({},s.extras.state),this.generateNgRouterState(s.id,s.targetPageId));this.location.isCurrentPathEqualTo(a)||s.extras.replaceUrl?this.location.replaceState(a,"",c):this.location.go(a,"",c)}restoreHistory(r,s=!1){var a,c;if("computed"===this.canceledNavigationResolution){const h=this.currentPageId-r.targetPageId;"popstate"!==r.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)||0===h?this.currentUrlTree===(null===(c=this.currentNavigation)||void 0===c?void 0:c.finalUrl)&&0===h&&(this.resetState(r),this.browserUrlTree=r.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(h)}else"replace"===this.canceledNavigationResolution&&(s&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=r.currentRouterState,this.currentUrlTree=r.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(r,s){const a=new ZF(r.id,this.serializeUrl(r.extractedUrl),s);this.triggerEvent(a),r.resolve(!1)}generateNgRouterState(r,s){return"computed"===this.canceledNavigationResolution?{navigationId:r,\u0275routerPageId:s}:{navigationId:r}}}return i.\u0275fac=function(r){return new(r||i)(_.LFG(_.DyG),_.LFG(sO),_.LFG(Kv),_.LFG(nt),_.LFG(_.zs3),_.LFG(_.v3s),_.LFG(_.Sil),_.LFG(void 0))},i.\u0275prov=_.Yz7({token:i,factory:i.\u0275fac}),i})();function FA(i){return"imperative"!==i}let LA=(()=>{class i{constructor(r,s,a,c,h){this.router=r,this.route=s,this.commands=[],this.onChanges=new Yn.xQ,null==a&&c.setAttribute(h.nativeElement,"tabindex","0")}ngOnChanges(r){this.onChanges.next(this)}set routerLink(r){this.commands=null!=r?Array.isArray(r)?r:[r]:[]}onClick(){const r={skipLocationChange:Zv(this.skipLocationChange),replaceUrl:Zv(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,r),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Zv(this.preserveFragment)})}}return i.\u0275fac=function(r){return new(r||i)(_.Y36(Es),_.Y36(zv),_.$8M("tabindex"),_.Y36(_.Qsj),_.Y36(_.SBq))},i.\u0275dir=_.lG2({type:i,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(r,s){1&r&&_.NdJ("click",function(){return s.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[_.TTD]}),i})(),VA=(()=>{class i{constructor(r,s,a){this.router=r,this.route=s,this.locationStrategy=a,this.commands=[],this.onChanges=new Yn.xQ,this.subscription=r.events.subscribe(c=>{c instanceof h0&&this.updateTargetUrlAndHref()})}set routerLink(r){this.commands=null!=r?Array.isArray(r)?r:[r]:[]}ngOnChanges(r){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(r,s,a,c,h){if(0!==r||s||a||c||h||"string"==typeof this.target&&"_self"!=this.target)return!0;const m={skipLocationChange:Zv(this.skipLocationChange),replaceUrl:Zv(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,m),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Zv(this.preserveFragment)})}}return i.\u0275fac=function(r){return new(r||i)(_.Y36(Es),_.Y36(zv),_.Y36(ye))},i.\u0275dir=_.lG2({type:i,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(r,s){1&r&&_.NdJ("click",function(c){return s.onClick(c.button,c.ctrlKey,c.shiftKey,c.altKey,c.metaKey)}),2&r&&(_.Ikx("href",s.href,_.LSH),_.uIk("target",s.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[_.TTD]}),i})();function Zv(i){return""===i||!!i}let $L=(()=>{class i{constructor(r,s,a,c,h,m){this.router=r,this.element=s,this.renderer=a,this.cdr=c,this.link=h,this.linkWithHref=m,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=r.events.subscribe(E=>{E instanceof h0&&this.update()})}ngAfterContentInit(){(0,gt.of)(this.links.changes,this.linksWithHrefs.changes,(0,gt.of)(null)).pipe((0,aa.J)()).subscribe(r=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var r;null===(r=this.linkInputChangesSubscription)||void 0===r||r.unsubscribe();const s=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(a=>!!a).map(a=>a.onChanges);this.linkInputChangesSubscription=(0,Rn.D)(s).pipe((0,aa.J)()).subscribe(a=>{this.isActive!==this.isLinkActive(this.router)(a)&&this.update()})}set routerLinkActive(r){const s=Array.isArray(r)?r:r.split(" ");this.classes=s.filter(a=>!!a)}ngOnChanges(r){this.update()}ngOnDestroy(){var r;this.routerEventsSubscription.unsubscribe(),null===(r=this.linkInputChangesSubscription)||void 0===r||r.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const r=this.hasActiveLinks();this.isActive!==r&&(this.isActive=r,this.cdr.markForCheck(),this.classes.forEach(s=>{r?this.renderer.addClass(this.element.nativeElement,s):this.renderer.removeClass(this.element.nativeElement,s)}))})}isLinkActive(r){const s=function(i){return!!i.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return a=>r.isActive(a.urlTree,s)}hasActiveLinks(){const r=this.isLinkActive(this.router);return this.link&&r(this.link)||this.linkWithHref&&r(this.linkWithHref)||this.links.some(r)||this.linksWithHrefs.some(r)}}return i.\u0275fac=function(r){return new(r||i)(_.Y36(Es),_.Y36(_.SBq),_.Y36(_.Qsj),_.Y36(_.sBO),_.Y36(LA,8),_.Y36(VA,8))},i.\u0275dir=_.lG2({type:i,selectors:[["","routerLinkActive",""]],contentQueries:function(r,s,a){if(1&r&&(_.Suo(a,LA,5),_.Suo(a,VA,5)),2&r){let c;_.iGM(c=_.CRH())&&(s.links=c),_.iGM(c=_.CRH())&&(s.linksWithHrefs=c)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[_.TTD]}),i})(),UA=(()=>{class i{constructor(r,s,a,c,h){this.parentContexts=r,this.location=s,this.resolver=a,this.changeDetector=h,this.activated=null,this._activatedRoute=null,this.activateEvents=new _.vpe,this.deactivateEvents=new _.vpe,this.name=c||hn,r.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const r=this.parentContexts.getContext(this.name);r&&r.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const r=this.activated;return this.activated=null,this._activatedRoute=null,r}attach(r,s){this.activated=r,this._activatedRoute=s,this.location.insert(r.hostView)}deactivate(){if(this.activated){const r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,s){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=r;const h=(s=s||this.resolver).resolveComponentFactory(r._futureSnapshot.routeConfig.component),m=this.parentContexts.getOrCreateContext(this.name).children,E=new BH(r,m,this.location.injector);this.activated=this.location.createComponent(h,this.location.length,E),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return i.\u0275fac=function(r){return new(r||i)(_.Y36(Kv),_.Y36(_.s_b),_.Y36(_._Vd),_.$8M("name"),_.Y36(_.sBO))},i.\u0275dir=_.lG2({type:i,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),i})();class BH{constructor(n,r,s){this.route=n,this.childContexts=r,this.parent=s}get(n,r){return n===zv?this.route:n===Kv?this.childContexts:this.parent.get(n,r)}}class HL{}class GL{preload(n,r){return(0,gt.of)(null)}}let qL=(()=>{class i{constructor(r,s,a,c,h){this.router=r,this.injector=c,this.preloadingStrategy=h,this.loader=new BL(s,a,C=>r.triggerEvent(new YF(C)),C=>r.triggerEvent(new QF(C)))}setUpPreloading(){this.subscription=this.router.events.pipe(xi(r=>r instanceof h0),d0(()=>this.preload())).subscribe(()=>{})}preload(){const r=this.injector.get(_.h0i);return this.processRoutes(r,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,s){const a=[];for(const c of s)if(c.loadChildren&&!c.canLoad&&c._loadedConfig){const h=c._loadedConfig;a.push(this.processRoutes(h.module,h.routes))}else c.loadChildren&&!c.canLoad?a.push(this.preloadConfig(r,c)):c.children&&a.push(this.processRoutes(r,c.children));return(0,Rn.D)(a).pipe((0,aa.J)(),(0,mt.U)(c=>{}))}preloadConfig(r,s){return this.preloadingStrategy.preload(s,()=>(s._loadedConfig?(0,gt.of)(s._loadedConfig):this.loader.load(r.injector,s)).pipe((0,lo.zg)(c=>(s._loadedConfig=c,this.processRoutes(c.module,c.routes)))))}}return i.\u0275fac=function(r){return new(r||i)(_.LFG(Es),_.LFG(_.v3s),_.LFG(_.Sil),_.LFG(_.zs3),_.LFG(HL))},i.\u0275prov=_.Yz7({token:i,factory:i.\u0275fac}),i})(),EO=(()=>{class i{constructor(r,s,a={}){this.router=r,this.viewportScroller=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration=a.scrollPositionRestoration||"disabled",a.anchorScrolling=a.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(r=>{r instanceof rO?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof h0&&(this.lastId=r.id,this.scheduleScrollEvent(r,this.router.parseUrl(r.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(r=>{r instanceof JF&&(r.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(r.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,s){this.router.triggerEvent(new JF(r,"popstate"===this.lastSource?this.store[this.restoredId]:null,s))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return i.\u0275fac=function(r){return new(r||i)(_.LFG(Es),_.LFG(Co),_.LFG(void 0))},i.\u0275prov=_.Yz7({token:i,factory:i.\u0275fac}),i})();const Qm=new _.OlP("ROUTER_CONFIGURATION"),WL=new _.OlP("ROUTER_FORROOT_GUARD"),HH=[nt,{provide:sO,useClass:lL},{provide:Es,useFactory:function(i,n,r,s,a,c,h,m={},E,C){const S=new Es(null,i,n,r,s,a,c,tL(h));return E&&(S.urlHandlingStrategy=E),C&&(S.routeReuseStrategy=C),function(i,n){i.errorHandler&&(n.errorHandler=i.errorHandler),i.malformedUriErrorHandler&&(n.malformedUriErrorHandler=i.malformedUriErrorHandler),i.onSameUrlNavigation&&(n.onSameUrlNavigation=i.onSameUrlNavigation),i.paramsInheritanceStrategy&&(n.paramsInheritanceStrategy=i.paramsInheritanceStrategy),i.relativeLinkResolution&&(n.relativeLinkResolution=i.relativeLinkResolution),i.urlUpdateStrategy&&(n.urlUpdateStrategy=i.urlUpdateStrategy)}(m,S),m.enableTracing&&S.events.subscribe(N=>{var O,B;null===(O=console.group)||void 0===O||O.call(console,`Router Event: ${N.constructor.name}`),console.log(N.toString()),console.log(N),null===(B=console.groupEnd)||void 0===B||B.call(console)}),S},deps:[sO,Kv,nt,_.zs3,_.v3s,_.Sil,vO,Qm,[class{},new _.FiY],[class{},new _.FiY]]},Kv,{provide:zv,useFactory:function(i){return i.routerState.root},deps:[Es]},{provide:_.v3s,useClass:_.EAV},qL,GL,class{preload(n,r){return r().pipe(zm(()=>(0,gt.of)(null)))}},{provide:Qm,useValue:{enableTracing:!1}}];function GH(){return new _.PXZ("Router",Es)}let zL=(()=>{class i{constructor(r,s){}static forRoot(r,s){return{ngModule:i,providers:[HH,KL(r),{provide:WL,useFactory:zH,deps:[[Es,new _.FiY,new _.tp0]]},{provide:Qm,useValue:s||{}},{provide:ye,useFactory:WH,deps:[re,[new _.tBr(me),new _.FiY],Qm]},{provide:EO,useFactory:qH,deps:[Es,Co,Qm]},{provide:HL,useExisting:s&&s.preloadingStrategy?s.preloadingStrategy:GL},{provide:_.PXZ,multi:!0,useFactory:GH},[wO,{provide:_.ip1,multi:!0,useFactory:QH,deps:[wO]},{provide:ZL,useFactory:JH,deps:[wO]},{provide:_.tb,multi:!0,useExisting:ZL}]]}}static forChild(r){return{ngModule:i,providers:[KL(r)]}}}return i.\u0275fac=function(r){return new(r||i)(_.LFG(WL,8),_.LFG(Es,8))},i.\u0275mod=_.oAB({type:i}),i.\u0275inj=_.cJS({}),i})();function qH(i,n,r){return r.scrollOffset&&n.setOffset(r.scrollOffset),new EO(i,n,r)}function WH(i,n,r={}){return r.useHash?new Fe(i,n):new Ee(i,n)}function zH(i){return"guarded"}function KL(i){return[{provide:_.deG,multi:!0,useValue:i},{provide:vO,multi:!0,useValue:i}]}let wO=(()=>{class i{constructor(r){this.injector=r,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Yn.xQ}appInitializer(){return this.injector.get(j,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let s=null;const a=new Promise(m=>s=m),c=this.injector.get(Es),h=this.injector.get(Qm);return"disabled"===h.initialNavigation?(c.setUpLocationChangeListener(),s(!0)):"enabled"===h.initialNavigation||"enabledBlocking"===h.initialNavigation?(c.hooks.afterPreactivation=()=>this.initNavigation?(0,gt.of)(null):(this.initNavigation=!0,s(!0),this.resultOfPreactivationDone),c.initialNavigation()):s(!0),a})}bootstrapListener(r){const s=this.injector.get(Qm),a=this.injector.get(qL),c=this.injector.get(EO),h=this.injector.get(Es),m=this.injector.get(_.z2F);r===m.components[0]&&(("enabledNonBlocking"===s.initialNavigation||void 0===s.initialNavigation)&&h.initialNavigation(),a.setUpPreloading(),c.init(),h.resetRootComponentType(m.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return i.\u0275fac=function(r){return new(r||i)(_.LFG(_.zs3))},i.\u0275prov=_.Yz7({token:i,factory:i.\u0275fac}),i})();function QH(i){return i.appInitializer.bind(i)}function JH(i){return i.bootstrapListener.bind(i)}const ZL=new _.OlP("Router Initializer");var bO=$(1093);let Yv=(()=>{class i{constructor(r,s,a){this.afAuth=r,this.route=s,this.ngZone=a,this.authState=null,this.user=null,this.afAuth.authState.subscribe(c=>this.authState=c),this.afAuth.authState.subscribe(c=>{c?(this.userData=c,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user",null),JSON.parse(localStorage.getItem("user")))})}get authenticated(){return null!==this.authState}get isLoggedIn(){return null!==JSON.parse(localStorage.getItem("user"))}get currentUserId(){return this.authenticated?this.authState.uid:null}loginGoogle(){this.afAuth.signInWithPopup(new bO.N).then(r=>{this.route.navigate(["/notes"])})}loginFacebook(){this.afAuth.signInWithPopup(new bO.M).then(r=>{this.route.navigate(["/notes"])})}loginGithub(){this.afAuth.signInWithPopup(new bO.Q).then(r=>{this.route.navigate(["/notes"])})}logout(){this.afAuth.signOut().then(r=>{localStorage.removeItem("user"),this.route.navigate(["/sign-in"])})}}return i.\u0275fac=function(r){return new(r||i)(_.LFG(ba),_.LFG(Es),_.LFG(_.R0b))},i.\u0275prov=_.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),CO=(()=>{class i{constructor(r,s,a){this.afs=r,this.auth=s,this.afAuth=a,this.userData="",this.hello="VuS3y3c8sLT6osE3sQBBwaYVAVq1",this.afAuth.onAuthStateChanged(c=>{c&&(this.userData=c.uid,this.notesCollection=this.afs.collection("notes",h=>h.where("authorId","==",this.userData).orderBy("date","desc")))})}getAllNotes(){return this.notesCollection.snapshotChanges().pipe((0,mt.U)(r=>r.map(s=>{const a=s.payload.doc.data();return Object.assign({id:s.payload.doc.id},a)})))}getNoteData(r){return this.notesDocument=this.afs.doc(`notes/${r}`),this.notesDocument.valueChanges()}createNote(r){this.notesCollection.add(r)}getNote(r){return this.afs.doc(`notes/${r}`)}updateNote(r,s){this.getNote(r).update(s)}deleteNote(r){this.getNote(r).delete()}}return i.\u0275fac=function(r){return new(r||i)(_.LFG(nS),_.LFG(Yv),_.LFG(ba))},i.\u0275prov=_.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var e3=$(1555);function BA(i,n){return new tr.y(r=>{const s=i.length;if(0===s)return void r.complete();const a=new Array(s);let c=0,h=0;for(let m=0;m<s;m++){const E=(0,Rn.D)(i[m]);let C=!1;r.add(E.subscribe({next:S=>{C||(C=!0,h++),a[m]=S},error:S=>r.error(S),complete:()=>{c++,(c===s||!C)&&(h===s&&r.next(n?n.reduce((S,N,O)=>(S[N]=a[O],S),{}):a),r.complete())}}))}})}let YL=(()=>{class i{constructor(r,s){this._renderer=r,this._elementRef=s,this.onChange=a=>{},this.onTouched=()=>{}}setProperty(r,s){this._renderer.setProperty(this._elementRef.nativeElement,r,s)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}}return i.\u0275fac=function(r){return new(r||i)(_.Y36(_.Qsj),_.Y36(_.SBq))},i.\u0275dir=_.lG2({type:i}),i})(),Jm=(()=>{class i extends YL{}return i.\u0275fac=function(){let n;return function(s){return(n||(n=_.n5z(i)))(s||i)}}(),i.\u0275dir=_.lG2({type:i,features:[_.qOj]}),i})();const Oc=new _.OlP("NgValueAccessor"),r3={provide:Oc,useExisting:(0,_.Gpc)(()=>b0),multi:!0},s3=new _.OlP("CompositionEventMode");let b0=(()=>{class i extends YL{constructor(r,s,a){super(r,s),this._compositionMode=a,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const i=L()?L().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}())}writeValue(r){this.setProperty("value",null==r?"":r)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}}return i.\u0275fac=function(r){return new(r||i)(_.Y36(_.Qsj),_.Y36(_.SBq),_.Y36(s3,8))},i.\u0275dir=_.lG2({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,s){1&r&&_.NdJ("input",function(c){return s._handleInput(c.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(c){return s._compositionEnd(c.target.value)})},features:[_._Bn([r3]),_.qOj]}),i})();const Vs=new _.OlP("NgValidators"),Ap=new _.OlP("NgAsyncValidators");function aV(i){return null!=i}function lV(i){const n=(0,_.QGY)(i)?(0,Rn.D)(i):i;return(0,_.CqO)(n),n}function uV(i){let n={};return i.forEach(r=>{n=null!=r?Object.assign(Object.assign({},n),r):n}),0===Object.keys(n).length?null:n}function cV(i,n){return n.map(r=>r(i))}function dV(i){return i.map(n=>function(i){return!i.validate}(n)?n:r=>n.validate(r))}function TO(i){return null!=i?function(i){if(!i)return null;const n=i.filter(aV);return 0==n.length?null:function(r){return uV(cV(r,n))}}(dV(i)):null}function IO(i){return null!=i?function(i){if(!i)return null;const n=i.filter(aV);return 0==n.length?null:function(r){return function(...i){if(1===i.length){const n=i[0];if((0,tO.k)(n))return BA(n,null);if((0,e3.K)(n)&&Object.getPrototypeOf(n)===Object.prototype){const r=Object.keys(n);return BA(r.map(s=>n[s]),r)}}if("function"==typeof i[i.length-1]){const n=i.pop();return BA(i=1===i.length&&(0,tO.k)(i[0])?i[0]:i,null).pipe((0,mt.U)(r=>n(...r)))}return BA(i,null)}(cV(r,n).map(lV)).pipe((0,mt.U)(uV))}}(dV(i)):null}function pV(i,n){return null===i?[n]:Array.isArray(i)?[...i,n]:[i,n]}function DO(i){return i?Array.isArray(i)?i:[i]:[]}function jA(i,n){return Array.isArray(i)?i.includes(n):i===n}function _V(i,n){const r=DO(n);return DO(i).forEach(a=>{jA(r,a)||r.push(a)}),r}function yV(i,n){return DO(n).filter(r=>!jA(i,r))}let vV=(()=>{class i{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(r){this._rawValidators=r||[],this._composedValidatorFn=TO(this._rawValidators)}_setAsyncValidators(r){this._rawAsyncValidators=r||[],this._composedAsyncValidatorFn=IO(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(r){this._onDestroyCallbacks.push(r)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(r=>r()),this._onDestroyCallbacks=[]}reset(r){this.control&&this.control.reset(r)}hasError(r,s){return!!this.control&&this.control.hasError(r,s)}getError(r,s){return this.control?this.control.getError(r,s):null}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275dir=_.lG2({type:i}),i})(),uo=(()=>{class i extends vV{get formDirective(){return null}get path(){return null}}return i.\u0275fac=function(){let n;return function(s){return(n||(n=_.n5z(i)))(s||i)}}(),i.\u0275dir=_.lG2({type:i,features:[_.qOj]}),i})();class Np extends vV{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let SO=(()=>{class i extends class{constructor(n){this._cd=n}is(n){var r,s,a;return"submitted"===n?!!(null===(r=this._cd)||void 0===r?void 0:r.submitted):!!(null===(a=null===(s=this._cd)||void 0===s?void 0:s.control)||void 0===a?void 0:a[n])}}{constructor(r){super(r)}}return i.\u0275fac=function(r){return new(r||i)(_.Y36(Np,2))},i.\u0275dir=_.lG2({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,s){2&r&&_.ekj("ng-untouched",s.is("untouched"))("ng-touched",s.is("touched"))("ng-pristine",s.is("pristine"))("ng-dirty",s.is("dirty"))("ng-valid",s.is("valid"))("ng-invalid",s.is("invalid"))("ng-pending",s.is("pending"))},features:[_.qOj]}),i})();function C0(i,n){(function(i,n){const r=function(i){return i._rawValidators}(i);null!==n.validator?i.setValidators(pV(r,n.validator)):"function"==typeof r&&i.setValidators([r]);const s=function(i){return i._rawAsyncValidators}(i);null!==n.asyncValidator?i.setAsyncValidators(pV(s,n.asyncValidator)):"function"==typeof s&&i.setAsyncValidators([s]);const a=()=>i.updateValueAndValidity();qA(n._rawValidators,a),qA(n._rawAsyncValidators,a)})(i,n),n.valueAccessor.writeValue(i.value),function(i,n){n.valueAccessor.registerOnChange(r=>{i._pendingValue=r,i._pendingChange=!0,i._pendingDirty=!0,"change"===i.updateOn&&wV(i,n)})}(i,n),function(i,n){const r=(s,a)=>{n.valueAccessor.writeValue(s),a&&n.viewToModelUpdate(s)};i.registerOnChange(r),n._registerOnDestroy(()=>{i._unregisterOnChange(r)})}(i,n),function(i,n){n.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,"blur"===i.updateOn&&i._pendingChange&&wV(i,n),"submit"!==i.updateOn&&i.markAsTouched()})}(i,n),function(i,n){if(n.valueAccessor.setDisabledState){const r=s=>{n.valueAccessor.setDisabledState(s)};i.registerOnDisabledChange(r),n._registerOnDestroy(()=>{i._unregisterOnDisabledChange(r)})}}(i,n)}function qA(i,n){i.forEach(r=>{r.registerOnValidatorChange&&r.registerOnValidatorChange(n)})}function wV(i,n){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function zA(i,n){const r=i.indexOf(n);r>-1&&i.splice(r,1)}const T0="VALID",KA="INVALID",Qv="PENDING",I0="DISABLED";function MO(i){return(kO(i)?i.validators:i)||null}function TV(i){return Array.isArray(i)?TO(i):i||null}function OO(i,n){return(kO(n)?n.asyncValidators:i)||null}function IV(i){return Array.isArray(i)?IO(i):i||null}function kO(i){return null!=i&&!Array.isArray(i)&&"object"==typeof i}class FO{constructor(n,r){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=n,this._rawAsyncValidators=r,this._composedValidatorFn=TV(this._rawValidators),this._composedAsyncValidatorFn=IV(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get valid(){return this.status===T0}get invalid(){return this.status===KA}get pending(){return this.status==Qv}get disabled(){return this.status===I0}get enabled(){return this.status!==I0}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._rawValidators=n,this._composedValidatorFn=TV(n)}setAsyncValidators(n){this._rawAsyncValidators=n,this._composedAsyncValidatorFn=IV(n)}addValidators(n){this.setValidators(_V(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(_V(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(yV(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(yV(n,this._rawAsyncValidators))}hasValidator(n){return jA(this._rawValidators,n)}hasAsyncValidator(n){return jA(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){this.touched=!0,this._parent&&!n.onlySelf&&this._parent.markAsTouched(n)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(n=>n.markAllAsTouched())}markAsUntouched(n={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}markAsDirty(n={}){this.pristine=!1,this._parent&&!n.onlySelf&&this._parent.markAsDirty(n)}markAsPristine(n={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(r=>{r.markAsPristine({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}markAsPending(n={}){this.status=Qv,!1!==n.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!n.onlySelf&&this._parent.markAsPending(n)}disable(n={}){const r=this._parentMarkedDirty(n.onlySelf);this.status=I0,this.errors=null,this._forEachChild(s=>{s.disable(Object.assign(Object.assign({},n),{onlySelf:!0}))}),this._updateValue(),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},n),{skipPristineCheck:r})),this._onDisabledChange.forEach(s=>s(!0))}enable(n={}){const r=this._parentMarkedDirty(n.onlySelf);this.status=T0,this._forEachChild(s=>{s.enable(Object.assign(Object.assign({},n),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},n),{skipPristineCheck:r})),this._onDisabledChange.forEach(s=>s(!1))}_updateAncestors(n){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(n){this._parent=n}updateValueAndValidity(n={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===T0||this.status===Qv)&&this._runAsyncValidator(n.emitEvent)),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(n)}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(r=>r._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?I0:T0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n){if(this.asyncValidator){this.status=Qv,this._hasOwnPendingAsyncValidator=!0;const r=lV(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(s=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(s,{emitEvent:n})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(n,r={}){this.errors=n,this._updateControlsErrors(!1!==r.emitEvent)}get(n){return function(i,n,r){if(null==n||(Array.isArray(n)||(n=n.split(".")),Array.isArray(n)&&0===n.length))return null;let s=i;return n.forEach(a=>{s=s instanceof LO?s.controls.hasOwnProperty(a)?s.controls[a]:null:s instanceof E3&&s.at(a)||null}),s}(this,n)}getError(n,r){const s=r?this.get(r):this;return s&&s.errors?s.errors[n]:null}hasError(n,r){return!!this.getError(n,r)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(n)}_initObservables(){this.valueChanges=new _.vpe,this.statusChanges=new _.vpe}_calculateStatus(){return this._allControlsDisabled()?I0:this.errors?KA:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Qv)?Qv:this._anyControlsHaveStatus(KA)?KA:T0}_anyControlsHaveStatus(n){return this._anyControls(r=>r.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n={}){this.pristine=!this._anyControlsDirty(),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}_updateTouched(n={}){this.touched=this._anyControlsTouched(),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}_isBoxedValue(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){kO(n)&&null!=n.updateOn&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){return!n&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class ZA extends FO{constructor(n=null,r,s){super(MO(r),OO(s,r)),this._onChange=[],this._applyFormState(n),this._setUpdateStrategy(r),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(n,r={}){this.value=this._pendingValue=n,this._onChange.length&&!1!==r.emitModelToViewChange&&this._onChange.forEach(s=>s(this.value,!1!==r.emitViewToModelChange)),this.updateValueAndValidity(r)}patchValue(n,r={}){this.setValue(n,r)}reset(n=null,r={}){this._applyFormState(n),this.markAsPristine(r),this.markAsUntouched(r),this.setValue(this.value,r),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){zA(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){zA(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(n){this._isBoxedValue(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}}class LO extends FO{constructor(n,r,s){super(MO(r),OO(s,r)),this.controls=n,this._initObservables(),this._setUpdateStrategy(r),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(n,r){return this.controls[n]?this.controls[n]:(this.controls[n]=r,r.setParent(this),r._registerOnCollectionChange(this._onCollectionChange),r)}addControl(n,r,s={}){this.registerControl(n,r),this.updateValueAndValidity({emitEvent:s.emitEvent}),this._onCollectionChange()}removeControl(n,r={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}setControl(n,r,s={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],r&&this.registerControl(n,r),this.updateValueAndValidity({emitEvent:s.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,r={}){this._checkAllValuesPresent(n),Object.keys(n).forEach(s=>{this._throwIfControlMissing(s),this.controls[s].setValue(n[s],{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r)}patchValue(n,r={}){null!=n&&(Object.keys(n).forEach(s=>{this.controls[s]&&this.controls[s].patchValue(n[s],{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r))}reset(n={},r={}){this._forEachChild((s,a)=>{s.reset(n[a],{onlySelf:!0,emitEvent:r.emitEvent})}),this._updatePristine(r),this._updateTouched(r),this.updateValueAndValidity(r)}getRawValue(){return this._reduceChildren({},(n,r,s)=>(n[s]=r instanceof ZA?r.value:r.getRawValue(),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(r,s)=>!!s._syncPendingControls()||r);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_throwIfControlMissing(n){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[n])throw new Error(`Cannot find form control with name: ${n}.`)}_forEachChild(n){Object.keys(this.controls).forEach(r=>{const s=this.controls[r];s&&n(s,r)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(const r of Object.keys(this.controls)){const s=this.controls[r];if(this.contains(r)&&n(s))return!0}return!1}_reduceValue(){return this._reduceChildren({},(n,r,s)=>((r.enabled||this.disabled)&&(n[s]=r.value),n))}_reduceChildren(n,r){let s=n;return this._forEachChild((a,c)=>{s=r(s,a,c)}),s}_allControlsDisabled(){for(const n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(n){this._forEachChild((r,s)=>{if(void 0===n[s])throw new Error(`Must supply a value for form control with name: '${s}'.`)})}}class E3 extends FO{constructor(n,r,s){super(MO(r),OO(s,r)),this.controls=n,this._initObservables(),this._setUpdateStrategy(r),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(n){return this.controls[n]}push(n,r={}){this.controls.push(n),this._registerControl(n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}insert(n,r,s={}){this.controls.splice(n,0,r),this._registerControl(r),this.updateValueAndValidity({emitEvent:s.emitEvent})}removeAt(n,r={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),this.updateValueAndValidity({emitEvent:r.emitEvent})}setControl(n,r,s={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),r&&(this.controls.splice(n,0,r),this._registerControl(r)),this.updateValueAndValidity({emitEvent:s.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(n,r={}){this._checkAllValuesPresent(n),n.forEach((s,a)=>{this._throwIfControlMissing(a),this.at(a).setValue(s,{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r)}patchValue(n,r={}){null!=n&&(n.forEach((s,a)=>{this.at(a)&&this.at(a).patchValue(s,{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r))}reset(n=[],r={}){this._forEachChild((s,a)=>{s.reset(n[a],{onlySelf:!0,emitEvent:r.emitEvent})}),this._updatePristine(r),this._updateTouched(r),this.updateValueAndValidity(r)}getRawValue(){return this.controls.map(n=>n instanceof ZA?n.value:n.getRawValue())}clear(n={}){this.controls.length<1||(this._forEachChild(r=>r._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:n.emitEvent}))}_syncPendingControls(){let n=this.controls.reduce((r,s)=>!!s._syncPendingControls()||r,!1);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_throwIfControlMissing(n){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(n))throw new Error(`Cannot find form control at index ${n}`)}_forEachChild(n){this.controls.forEach((r,s)=>{n(r,s)})}_updateValue(){this.value=this.controls.filter(n=>n.enabled||this.disabled).map(n=>n.value)}_anyControls(n){return this.controls.some(r=>r.enabled&&n(r))}_setUpControls(){this._forEachChild(n=>this._registerControl(n))}_checkAllValuesPresent(n){this._forEachChild((r,s)=>{if(void 0===n[s])throw new Error(`Must supply a value for form control at index: ${s}.`)})}_allControlsDisabled(){for(const n of this.controls)if(n.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(n){n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)}}const C3={provide:Np,useExisting:(0,_.Gpc)(()=>YA)},AV=(()=>Promise.resolve(null))();let YA=(()=>{class i extends Np{constructor(r,s,a,c){super(),this.control=new ZA,this._registered=!1,this.update=new _.vpe,this._parent=r,this._setValidators(s),this._setAsyncValidators(a),this.valueAccessor=function(i,n){if(!n)return null;let r,s,a;return Array.isArray(n),n.forEach(c=>{c.constructor===b0?r=c:function(i){return Object.getPrototypeOf(i.constructor)===Jm}(c)?s=c:a=c}),a||s||r||null}(0,c)}ngOnChanges(r){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in r&&this._updateDisabled(r),function(i,n){if(!i.hasOwnProperty("model"))return!1;const r=i.model;return!!r.isFirstChange()||!Object.is(n,r.currentValue)}(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(i,n){return[...n.path,i]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){C0(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(r){AV.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1})})}_updateDisabled(r){const s=r.isDisabled.currentValue,a=""===s||s&&"false"!==s;AV.then(()=>{a&&!this.control.disabled?this.control.disable():!a&&this.control.disabled&&this.control.enable()})}}return i.\u0275fac=function(r){return new(r||i)(_.Y36(uo,9),_.Y36(Vs,10),_.Y36(Ap,10),_.Y36(Oc,10))},i.\u0275dir=_.lG2({type:i,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[_._Bn([C3]),_.qOj,_.TTD]}),i})(),NV=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=_.oAB({type:i}),i.\u0275inj=_.cJS({}),i})(),zV=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=_.oAB({type:i}),i.\u0275inj=_.cJS({imports:[[NV]]}),i})(),K3=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=_.oAB({type:i}),i.\u0275inj=_.cJS({imports:[zV]}),i})();function Z3(i,n){if(1&i){const r=_.EpF();_.TgZ(0,"div",3),_.TgZ(1,"div",4),_.TgZ(2,"h5",5),_._uU(3),_.qZA(),_.TgZ(4,"h6",6),_._uU(5),_.ALo(6,"date"),_.qZA(),_.TgZ(7,"p",7),_._uU(8),_.qZA(),_.qZA(),_.TgZ(9,"div",8),_.TgZ(10,"div",9),_.TgZ(11,"button",10),_.NdJ("click",function(){const c=_.CHM(r).$implicit;return _.oxw().getNoteToBeEdited(c.id)}),_._UZ(12,"i",11),_.qZA(),_.TgZ(13,"button",12),_.NdJ("click",function(){const c=_.CHM(r).$implicit;return _.oxw().noteDeleting(c.id)}),_._UZ(14,"i",13),_.qZA(),_.TgZ(15,"div",14),_.TgZ(16,"div",15),_.TgZ(17,"div",16),_.TgZ(18,"div",17),_.TgZ(19,"h5",18),_._uU(20,"Changer une note"),_.qZA(),_._UZ(21,"button",19),_.qZA(),_.TgZ(22,"div",20),_.TgZ(23,"div",21),_.TgZ(24,"label",22),_._uU(25,"Titre de la note"),_.qZA(),_.TgZ(26,"input",23),_.NdJ("ngModelChange",function(a){return _.CHM(r),_.oxw().GotNoteForUpdate.title=a}),_.qZA(),_.qZA(),_.TgZ(27,"div",21),_.TgZ(28,"label",24),_._uU(29,"Description"),_.qZA(),_.TgZ(30,"textarea",25),_.NdJ("ngModelChange",function(a){return _.CHM(r),_.oxw().GotNoteForUpdate.description=a}),_.qZA(),_.qZA(),_.qZA(),_.TgZ(31,"div",26),_.TgZ(32,"button",27),_._uU(33,"Fermer"),_.qZA(),_.TgZ(34,"button",28),_.NdJ("click",function(){return _.CHM(r),_.oxw().noteUpdating()}),_._uU(35,"Mettre \xe0 jour"),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA()}if(2&i){const r=n.$implicit,s=_.oxw();_.xp6(3),_.Oqu(r.title),_.xp6(2),_.Oqu(_.xi3(6,5,r.date.toDate(),"fullDate")),_.xp6(3),_.Oqu(r.description),_.xp6(18),_.Q6J("ngModel",s.GotNoteForUpdate.title),_.xp6(4),_.Q6J("ngModel",s.GotNoteForUpdate.description)}}let Y3=(()=>{class i{constructor(r){this.notesService=r,this.GotNoteForUpdate={}}ngOnInit(){this.notes=this.notesService.getAllNotes()||null}noteDeleting(r){this.notesService.deleteNote(r)}getNoteToBeEdited(r){this.notesService.getNoteData(r).subscribe(s=>this.GotNoteForUpdate=s),this.IdOfNoteToBeUpdated=r}noteUpdating(){this.notesService.updateNote(this.IdOfNoteToBeUpdated,{title:this.GotNoteForUpdate.title,description:this.GotNoteForUpdate.description}),this.IdOfNoteToBeUpdated="",console.log("note edited")}}return i.\u0275fac=function(r){return new(r||i)(_.Y36(CO))},i.\u0275cmp=_.Xpm({type:i,selectors:[["app-all-notes"]],decls:4,vars:3,consts:[[1,"container-lg","mt-5"],[1,"d-flex","justify-content-center","flex-wrap"],["class","card mx-3 my-3","style","width: 18rem;",4,"ngFor","ngForOf"],[1,"card","mx-3","my-3",2,"width","18rem"],[1,"card-body"],[1,"card-title"],[1,"card-subtitle","mb-2","text-muted"],[1,"card-text"],[1,"card-footer"],[1,"float-end"],["data-bs-toggle","modal","data-bs-target","#editNoteModal",1,"btn","btn-primary","mx-2",3,"click"],[1,"fas","fa-edit"],[1,"btn","btn-danger",3,"click"],[1,"fas","fa-trash"],["id","editNoteModal","tabindex","-1","aria-labelledby","editNoteModal","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"mb-3"],["for","exampleFormControlInput1",1,"form-label"],["type","text","id","inputTitleUpdate","name","inputTitleUpdate",1,"form-control",3,"ngModel","ngModelChange"],["for","exampleFormControlTextarea1",1,"form-label"],["id","inputDescriptionUpdate","name","inputDescriptionUpdate","rows","3",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button","data-bs-dismiss","modal",1,"btn","btn-primary",3,"click"]],template:function(r,s){1&r&&(_.TgZ(0,"div",0),_.TgZ(1,"div",1),_.YNc(2,Z3,36,8,"div",2),_.ALo(3,"async"),_.qZA(),_.qZA()),2&r&&(_.xp6(2),_.Q6J("ngForOf",_.lcZ(3,1,s.notes)))},directives:[un,b0,SO,YA],pipes:[kh,Vp],styles:[".fas[_ngcontent-%COMP%]{font-size:20px}"]}),i})();class J3{constructor(n,r){this.dueTime=n,this.scheduler=r}call(n,r){return r.subscribe(new X3(n,this.dueTime,this.scheduler))}}class X3 extends fr.L{constructor(n,r,s){super(n),this.dueTime=r,this.scheduler=s,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(n){this.clearDebounce(),this.lastValue=n,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(eG,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:n}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(n)}}clearDebounce(){const n=this.debouncedSubscription;null!==n&&(this.remove(n),n.unsubscribe(),this.debouncedSubscription=null)}}function eG(i){i.debouncedNext()}var xp=(()=>(function(i){i[i.NO_ERROR=0]="NO_ERROR",i[i.NETWORK_ERROR=1]="NETWORK_ERROR",i[i.ABORT=2]="ABORT"}(xp||(xp={})),xp))();const KV="firebasestorage.googleapis.com",ZV="storageBucket";class Gr extends V.ZR{constructor(n,r){super(WO(n),`Firebase Storage: ${r} (${WO(n)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Gr.prototype)}_codeEquals(n){return WO(n)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(n){this.customData.serverResponse=n,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function WO(i){return"storage/"+i}function zO(){return new Gr("unknown","An unknown error occurred, please check the error payload for server response.")}function YV(){return new Gr("canceled","User canceled the upload/download.")}function QV(){return new Gr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function fG(){return new Gr("no-download-url","The given file does not have any download URLs.")}function Jv(i){return new Gr("invalid-argument",i)}function JV(){return new Gr("app-deleted","The Firebase app was deleted.")}function XV(i){return new Gr("invalid-root-operation","The operation '"+i+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function S0(i,n){return new Gr("invalid-format","String does not match format '"+i+"': "+n)}function QA(i){throw new Gr("internal-error","Internal error: "+i)}class pG{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=xp.NO_ERROR,this.sendPromise_=new Promise(n=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=xp.ABORT,n()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=xp.NETWORK_ERROR,n()}),this.xhr_.addEventListener("load",()=>{n()})})}send(n,r,s,a){if(this.sent_)throw QA("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(r,n,!0),void 0!==a)for(const c in a)a.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,a[c].toString());return void 0!==s?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw QA("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw QA("cannot .getStatus() before sending");try{return this.xhr_.status}catch(n){return-1}}getResponseText(){if(!this.sent_)throw QA("cannot .getResponseText() before sending");return this.xhr_.responseText}abort(){this.xhr_.abort()}getResponseHeader(n){return this.xhr_.getResponseHeader(n)}addUploadProgressListener(n){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",n)}removeUploadProgressListener(n){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",n)}}class mG{createConnection(){return new pG}}class Us{constructor(n,r){this.bucket=n,this.path_=r}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const n=encodeURIComponent;return"/b/"+n(this.bucket)+"/o/"+n(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(n,r){let s;try{s=Us.makeFromUrl(n,r)}catch(a){return new Us(n,"")}if(""===s.path)return s;throw function(i){return new Gr("invalid-default-bucket","Invalid default bucket '"+i+"'.")}(n)}static makeFromUrl(n,r){let s=null;const a="([A-Za-z0-9.\\-_]+)",m=new RegExp("^gs://"+a+"(/(.*))?$","i");function C(tt){tt.path_=decodeURIComponent(tt.path)}const N=r.replace(/[.]/g,"\\."),pt=[{regex:m,indices:{bucket:1,path:3},postModify:function(tt){"/"===tt.path.charAt(tt.path.length-1)&&(tt.path_=tt.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${N}/v[A-Za-z0-9_]+/b/${a}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:C},{regex:new RegExp(`^https?://${r===KV?"(?:storage.googleapis.com|storage.cloud.google.com)":r}/${a}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:C}];for(let tt=0;tt<pt.length;tt++){const _n=pt[tt],Bn=_n.regex.exec(n);if(Bn){let fo=Bn[_n.indices.path];fo||(fo=""),s=new Us(Bn[_n.indices.bucket],fo),_n.postModify(s);break}}if(null==s)throw function(i){return new Gr("invalid-url","Invalid URL '"+i+"'.")}(n);return s}}class _G{constructor(n){this.promise_=Promise.reject(n)}getPromise(){return this.promise_}cancel(n=!1){}}function JA(i){return"string"==typeof i||i instanceof String}function eU(i){return KO()&&i instanceof Blob}function KO(){return"undefined"!=typeof Blob}function ZO(i,n,r,s){if(s<n)throw Jv(`Invalid value for '${i}'. Expected ${n} or greater.`);if(s>r)throw Jv(`Invalid value for '${i}'. Expected ${r} or less.`)}function Pp(i,n,r){let s=n;return null==r&&(s=`https://${n}`),`${r}://${s}/v0${i}`}function tU(i){const n=encodeURIComponent;let r="?";for(const s in i)i.hasOwnProperty(s)&&(r=r+(n(s)+"=")+n(i[s])+"&");return r=r.slice(0,-1),r}class CG{constructor(n,r,s,a,c,h,m,E,C,S,N){this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=n,this.method_=r,this.headers_=s,this.body_=a,this.successCodes_=c.slice(),this.additionalRetryCodes_=h.slice(),this.callback_=m,this.errorCallback_=E,this.progressCallback_=S,this.timeout_=C,this.pool_=N,this.promise_=new Promise((O,B)=>{this.resolve_=O,this.reject_=B,this.start_()})}start_(){const n=this;function s(a,c){const h=n.resolve_,m=n.reject_,E=c.connection;if(c.wasSuccessCode)try{const C=n.callback_(E,E.getResponseText());!function(i){return void 0!==i}(C)?h():h(C)}catch(C){m(C)}else if(null!==E){const C=zO();C.serverResponse=E.getResponseText(),m(n.errorCallback_?n.errorCallback_(E,C):C)}else m(c.canceled?n.appDelete_?JV():YV():new Gr("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?s(0,new XA(!1,null,!0)):this.backoffId_=function(i,n,r){let s=1,a=null,c=!1,h=0;function m(){return 2===h}let E=!1;function C(...W){E||(E=!0,n.apply(null,W))}function S(W){a=setTimeout(()=>{a=null,i(N,m())},W)}function N(W,...ue){if(E)return;if(W)return void C.call(null,W,...ue);if(m()||c)return void C.call(null,W,...ue);let Ze;s<64&&(s*=2),1===h?(h=2,Ze=0):Ze=1e3*(s+Math.random()),S(Ze)}let O=!1;function B(W){O||(O=!0,!E&&(null!==a?(W||(h=2),clearTimeout(a),S(0)):W||(h=1)))}return S(0),setTimeout(()=>{c=!0,B(!0)},r),B}(function(a,c){if(c)return void a(!1,new XA(!1,null,!0));const h=n.pool_.createConnection();function m(E){null!==n.progressCallback_&&n.progressCallback_(E.loaded,E.lengthComputable?E.total:-1)}n.pendingConnection_=h,null!==n.progressCallback_&&h.addUploadProgressListener(m),h.send(n.url_,n.method_,n.body_,n.headers_).then(()=>{null!==n.progressCallback_&&h.removeUploadProgressListener(m),n.pendingConnection_=null;const E=h.getErrorCode()===xp.NO_ERROR,C=h.getStatus();if(!E||n.isRetryStatusCode_(C)){const N=h.getErrorCode()===xp.ABORT;return void a(!1,new XA(!1,null,N))}const S=-1!==n.successCodes_.indexOf(C);a(!0,new XA(S,h))})},s,this.timeout_)}getPromise(){return this.promise_}cancel(n){this.canceled_=!0,this.appDelete_=n||!1,null!==this.backoffId_&&function(i){i(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(n){const r=n>=500&&n<600,a=-1!==[408,429].indexOf(n),c=-1!==this.additionalRetryCodes_.indexOf(n);return r||a||c}}class XA{constructor(n,r,s){this.wasSuccessCode=n,this.connection=r,this.canceled=!!s}}function NG(...i){const n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==n){const r=new n;for(let s=0;s<i.length;s++)r.append(i[s]);return r.getBlob()}if(KO())return new Blob(i);throw new Gr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Na={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class YO{constructor(n,r){this.data=n,this.contentType=r||null}}function QO(i,n){switch(i){case Na.RAW:return new YO(nU(n));case Na.BASE64:case Na.BASE64URL:return new YO(rU(i,n));case Na.DATA_URL:return new YO(function(i){const n=new iU(i);return n.base64?rU(Na.BASE64,n.rest):function(i){let n;try{n=decodeURIComponent(i)}catch(r){throw S0(Na.DATA_URL,"Malformed data URL.")}return nU(n)}(n.rest)}(n),function(i){return new iU(i).contentType}(n))}throw zO()}function nU(i){const n=[];for(let r=0;r<i.length;r++){let s=i.charCodeAt(r);s<=127?n.push(s):s<=2047?n.push(192|s>>6,128|63&s):55296==(64512&s)?r<i.length-1&&56320==(64512&i.charCodeAt(r+1))?(s=65536|(1023&s)<<10|1023&i.charCodeAt(++r),n.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|63&s)):n.push(239,191,189):56320==(64512&s)?n.push(239,191,189):n.push(224|s>>12,128|s>>6&63,128|63&s)}return new Uint8Array(n)}function rU(i,n){switch(i){case Na.BASE64:{const a=-1!==n.indexOf("-"),c=-1!==n.indexOf("_");if(a||c)throw S0(i,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case Na.BASE64URL:{const a=-1!==n.indexOf("+"),c=-1!==n.indexOf("/");if(a||c)throw S0(i,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");n=n.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=function(i){return atob(i)}(n)}catch(a){throw S0(i,"Invalid character found")}const s=new Uint8Array(r.length);for(let a=0;a<r.length;a++)s[a]=r.charCodeAt(a);return s}class iU{constructor(n){this.base64=!1,this.contentType=null;const r=n.match(/^data:([^,]+)?,/);if(null===r)throw S0(Na.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=r[1]||null;null!=s&&(this.base64=function(i,n){return i.length>=n.length&&i.substring(i.length-n.length)===n}(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-";base64".length):s),this.rest=n.substring(n.indexOf(",")+1)}}class kc{constructor(n,r){let s=0,a="";eU(n)?(this.data_=n,s=n.size,a=n.type):n instanceof ArrayBuffer?(r?this.data_=new Uint8Array(n):(this.data_=new Uint8Array(n.byteLength),this.data_.set(new Uint8Array(n))),s=this.data_.length):n instanceof Uint8Array&&(r?this.data_=n:(this.data_=new Uint8Array(n.length),this.data_.set(n)),s=n.length),this.size_=s,this.type_=a}size(){return this.size_}type(){return this.type_}slice(n,r){if(eU(this.data_)){const a=function(i,n,r){return i.webkitSlice?i.webkitSlice(n,r):i.mozSlice?i.mozSlice(n,r):i.slice?i.slice(n,r):null}(this.data_,n,r);return null===a?null:new kc(a)}{const s=new Uint8Array(this.data_.buffer,n,r-n);return new kc(s,!0)}}static getBlob(...n){if(KO()){const r=n.map(s=>s instanceof kc?s.data_:s);return new kc(NG.apply(null,r))}{const r=n.map(h=>JA(h)?QO(Na.RAW,h).data:h.data_);let s=0;r.forEach(h=>{s+=h.byteLength});const a=new Uint8Array(s);let c=0;return r.forEach(h=>{for(let m=0;m<h.length;m++)a[c++]=h[m]}),new kc(a,!0)}}uploadData(){return this.data_}}function JO(i){let n;try{n=JSON.parse(i)}catch(r){return null}return function(i){return"object"==typeof i&&!Array.isArray(i)}(n)?n:null}function sU(i){const n=i.lastIndexOf("/",i.length-2);return-1===n?i:i.slice(n+1)}function UG(i,n){return n}class co{constructor(n,r,s,a){this.server=n,this.local=r||n,this.writable=!!s,this.xform=a||UG}}let eR=null;function A0(){if(eR)return eR;const i=[];i.push(new co("bucket")),i.push(new co("generation")),i.push(new co("metageneration")),i.push(new co("name","fullPath",!0));const r=new co("name");r.xform=function(c,h){return function(i){return!JA(i)||i.length<2?i:sU(i)}(h)},i.push(r);const a=new co("size");return a.xform=function(c,h){return void 0!==h?Number(h):h},i.push(a),i.push(new co("timeCreated")),i.push(new co("updated")),i.push(new co("md5Hash",null,!0)),i.push(new co("cacheControl",null,!0)),i.push(new co("contentDisposition",null,!0)),i.push(new co("contentEncoding",null,!0)),i.push(new co("contentLanguage",null,!0)),i.push(new co("contentType",null,!0)),i.push(new co("metadata","customMetadata",!0)),eR=i,eR}function oU(i,n,r){const s=JO(n);return null===s?null:function(i,n,r){const s={type:"file"},a=r.length;for(let c=0;c<a;c++){const h=r[c];s[h.local]=h.xform(s,n[h.server])}return function(i,n){Object.defineProperty(i,"ref",{get:function(){const c=new Us(i.bucket,i.fullPath);return n._makeStorageReference(c)}})}(s,i),s}(i,s,r)}function XO(i,n){const r={},s=n.length;for(let a=0;a<s;a++){const c=n[a];c.writable&&(r[c.server]=i[c.local])}return JSON.stringify(r)}const aU="prefixes";class Ah{constructor(n,r,s,a){this.url=n,this.method=r,this.handler=s,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Fc(i){if(!i)throw zO()}function tR(i,n){return function(s,a){const c=oU(i,a,n);return Fc(null!==c),c}}function Xv(i){return function(r,s){let a;return a=401===r.getStatus()?r.getResponseText().includes("Firebase App Check token is invalid")?new Gr("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new Gr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===r.getStatus()?function(i){return new Gr("quota-exceeded","Quota for bucket '"+i+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(i.bucket):403===r.getStatus()?function(i){return new Gr("unauthorized","User does not have permission to access '"+i+"'.")}(i.path):s,a.serverResponse=s.serverResponse,a}}function nR(i){const n=Xv(i);return function(s,a){let c=n(s,a);return 404===s.getStatus()&&(c=function(i){return new Gr("object-not-found","Object '"+i+"' does not exist.")}(i.path)),c.serverResponse=a.serverResponse,c}}function uU(i,n,r){const a=Pp(n.fullServerUrl(),i.host,i._protocol),h=i.maxOperationRetryTime,m=new Ah(a,"GET",tR(i,r),h);return m.errorHandler=nR(n),m}function KG(i,n,r,s,a){const c={};c.prefix=n.isRoot?"":n.path+"/",r&&r.length>0&&(c.delimiter=r),s&&(c.pageToken=s),a&&(c.maxResults=a);const m=Pp(n.bucketOnlyServerUrl(),i.host,i._protocol),C=i.maxOperationRetryTime,S=new Ah(m,"GET",function(i,n){return function(s,a){const c=function(i,n,r){const s=JO(r);return null===s?null:function(i,n,r){const s={prefixes:[],items:[],nextPageToken:r.nextPageToken};if(r[aU])for(const a of r[aU]){const c=a.replace(/\/$/,""),h=i._makeStorageReference(new Us(n,c));s.prefixes.push(h)}if(r.items)for(const a of r.items){const c=i._makeStorageReference(new Us(n,a.name));s.items.push(c)}return s}(i,n,s)}(i,n,a);return Fc(null!==c),c}}(i,n.bucket),C);return S.urlParams=c,S.errorHandler=Xv(n),S}function ZG(i,n,r){const a=Pp(n.fullServerUrl(),i.host,i._protocol),h=i.maxOperationRetryTime,m=new Ah(a,"GET",function(i,n){return function(s,a){const c=oU(i,a,n);return Fc(null!==c),function(i,n,r,s){const a=JO(n);if(null===a||!JA(a.downloadTokens))return null;const c=a.downloadTokens;if(0===c.length)return null;const h=encodeURIComponent;return c.split(",").map(C=>{const N=i.fullPath;return Pp("/b/"+h(i.bucket)+"/o/"+h(N),r,s)+tU({alt:"media",token:C})})[0]}(c,a,i.host,i._protocol)}}(i,r),h);return m.errorHandler=nR(n),m}function YG(i,n,r,s){const c=Pp(n.fullServerUrl(),i.host,i._protocol),m=XO(r,s),C=i.maxOperationRetryTime,S=new Ah(c,"PATCH",tR(i,s),C);return S.headers={"Content-Type":"application/json; charset=utf-8"},S.body=m,S.errorHandler=nR(n),S}function QG(i,n){const s=Pp(n.fullServerUrl(),i.host,i._protocol),m=new Ah(s,"DELETE",function(E,C){},i.maxOperationRetryTime);return m.successCodes=[200,204],m.errorHandler=nR(n),m}function cU(i,n,r){const s=Object.assign({},r);return s.fullPath=i.path,s.size=n.size(),s.contentType||(s.contentType=function(i,n){return n&&n.type()||"application/octet-stream"}(0,n)),s}class rR{constructor(n,r,s,a){this.current=n,this.total=r,this.finalized=!!s,this.metadata=a||null}}function ek(i,n){let r=null;try{r=i.getResponseHeader("X-Goog-Upload-Status")}catch(a){Fc(!1)}return Fc(!!r&&-1!==(n||["active"]).indexOf(r)),r}const nq={STATE_CHANGED:"state_changed"},ho={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function tk(i){switch(i){case"running":case"pausing":case"canceling":return ho.RUNNING;case"paused":return ho.PAUSED;case"success":return ho.SUCCESS;case"canceled":return ho.CANCELED;case"error":default:return ho.ERROR}}class rq{constructor(n,r,s){if(function(i){return"function"==typeof i}(n)||null!=r||null!=s)this.next=n,this.error=null!=r?r:void 0,this.complete=null!=s?s:void 0;else{const c=n;this.next=c.next,this.error=c.error,this.complete=c.complete}}}function eE(i){return(...n)=>{Promise.resolve().then(()=>i(...n))}}class fU{constructor(n,r,s=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=n,this._blob=r,this._metadata=s,this._mappings=A0(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=a=>{this._request=void 0,this._chunkMultiplier=1,a._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=a,this._transition("error"))},this._metadataErrorHandler=a=>{this._request=void 0,a._codeEquals("canceled")?this.completeTransitions_():(this._error=a,this._transition("error"))},this._promise=new Promise((a,c)=>{this._resolve=a,this._reject=c,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const n=this._transferred;return r=>this._updateProgress(n+r)}_shouldDoResumable(n){return n.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(n){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([r,s])=>{switch(this._state){case"running":n(r,s);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((n,r)=>{const s=function(i,n,r,s,a){const c=n.bucketOnlyServerUrl(),h=cU(n,s,a),m={name:h.fullPath},E=Pp(c,i.host,i._protocol),S={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${s.size()}`,"X-Goog-Upload-Header-Content-Type":h.contentType,"Content-Type":"application/json; charset=utf-8"},N=XO(h,r),W=new Ah(E,"POST",function(ue){let Pe;ek(ue);try{Pe=ue.getResponseHeader("X-Goog-Upload-URL")}catch(Ze){Fc(!1)}return Fc(JA(Pe)),Pe},i.maxUploadRetryTime);return W.urlParams=m,W.headers=S,W.body=N,W.errorHandler=Xv(n),W}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(s,n,r);this._request=a,a.getPromise().then(c=>{this._request=void 0,this._uploadUrl=c,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const n=this._uploadUrl;this._resolveToken((r,s)=>{const a=function(i,n,r,s){const E=new Ah(r,"POST",function(C){const S=ek(C,["active","final"]);let N=null;try{N=C.getResponseHeader("X-Goog-Upload-Size-Received")}catch(B){Fc(!1)}N||Fc(!1);const O=Number(N);return Fc(!isNaN(O)),new rR(O,s.size(),"final"===S)},i.maxUploadRetryTime);return E.headers={"X-Goog-Upload-Command":"query"},E.errorHandler=Xv(n),E}(this._ref.storage,this._ref._location,n,this._blob),c=this._ref.storage._makeRequest(a,r,s);this._request=c,c.getPromise().then(h=>{h=h,this._request=void 0,this._updateProgress(h.current),this._needToFetchStatus=!1,h.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const n=262144*this._chunkMultiplier,r=new rR(this._transferred,this._blob.size()),s=this._uploadUrl;this._resolveToken((a,c)=>{let h;try{h=function(i,n,r,s,a,c,h,m){const E=new rR(0,0);if(h?(E.current=h.current,E.total=h.total):(E.current=0,E.total=s.size()),s.size()!==E.total)throw new Gr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");const C=E.total-E.current;let S=C;a>0&&(S=Math.min(S,a));const N=E.current,W={"X-Goog-Upload-Command":S===C?"upload, finalize":"upload","X-Goog-Upload-Offset":`${E.current}`},ue=s.slice(N,N+S);if(null===ue)throw QV();const pt=new Ah(r,"POST",function(tt,_n){const Bn=ek(tt,["active","final"]),ui=E.current+S,fo=s.size();let Ma;return Ma="final"===Bn?tR(n,c)(tt,_n):null,new rR(ui,fo,"final"===Bn,Ma)},n.maxUploadRetryTime);return pt.headers=W,pt.body=ue.uploadData(),pt.progressCallback=m||null,pt.errorHandler=Xv(i),pt}(this._ref._location,this._ref.storage,s,this._blob,n,this._mappings,r,this._makeProgressCallback())}catch(E){return this._error=E,void this._transition("error")}const m=this._ref.storage._makeRequest(h,a,c);this._request=m,m.getPromise().then(E=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(E.current),E.finalized?(this._metadata=E.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((n,r)=>{const s=uU(this._ref.storage,this._ref._location,this._mappings),a=this._ref.storage._makeRequest(s,n,r);this._request=a,a.getPromise().then(c=>{this._request=void 0,this._metadata=c,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((n,r)=>{const s=function(i,n,r,s,a){const c=n.bucketOnlyServerUrl(),h={"X-Goog-Upload-Protocol":"multipart"},E=function(){let pt="";for(let tt=0;tt<2;tt++)pt+=Math.random().toString().slice(2);return pt}();h["Content-Type"]="multipart/related; boundary="+E;const C=cU(n,s,a),S=XO(C,r),B=kc.getBlob("--"+E+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+S+"\r\n--"+E+"\r\nContent-Type: "+C.contentType+"\r\n\r\n",s,"\r\n--"+E+"--");if(null===B)throw QV();const W={name:C.fullPath},ue=Pp(c,i.host,i._protocol),Ze=i.maxUploadRetryTime,rt=new Ah(ue,"POST",tR(i,r),Ze);return rt.urlParams=W,rt.headers=h,rt.body=B.uploadData(),rt.errorHandler=Xv(n),rt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(s,n,r);this._request=a,a.getPromise().then(c=>{this._request=void 0,this._metadata=c,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(n){const r=this._transferred;this._transferred=n,this._transferred!==r&&this._notifyObservers()}_transition(n){if(this._state!==n)switch(n){case"canceling":case"pausing":this._state=n,void 0!==this._request&&this._request.cancel();break;case"running":const r="paused"===this._state;this._state=n,r&&(this._notifyObservers(),this._start());break;case"paused":this._state=n,this._notifyObservers();break;case"canceled":this._error=YV(),this._state=n,this._notifyObservers();break;case"error":case"success":this._state=n,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const n=tk(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:n,metadata:this._metadata,task:this,ref:this._ref}}on(n,r,s,a){const c=new rq(r||void 0,s||void 0,a||void 0);return this._addObserver(c),()=>{this._removeObserver(c)}}then(n,r){return this._promise.then(n,r)}catch(n){return this.then(null,n)}_addObserver(n){this._observers.push(n),this._notifyObserver(n)}_removeObserver(n){const r=this._observers.indexOf(n);-1!==r&&this._observers.splice(r,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(r=>{this._notifyObserver(r)})}_finishPromise(){if(void 0!==this._resolve){let n=!0;switch(tk(this._state)){case ho.SUCCESS:eE(this._resolve.bind(null,this.snapshot))();break;case ho.CANCELED:case ho.ERROR:eE(this._reject.bind(null,this._error))();break;default:n=!1}n&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(n){switch(tk(this._state)){case ho.RUNNING:case ho.PAUSED:n.next&&eE(n.next.bind(n,this.snapshot))();break;case ho.SUCCESS:n.complete&&eE(n.complete.bind(n))();break;case ho.CANCELED:case ho.ERROR:n.error&&eE(n.error.bind(n,this._error))();break;default:n.error&&eE(n.error.bind(n,this._error))()}}resume(){const n="paused"===this._state||"pausing"===this._state;return n&&this._transition("running"),n}pause(){const n="running"===this._state;return n&&this._transition("pausing"),n}cancel(){const n="running"===this._state||"pausing"===this._state;return n&&this._transition("canceling"),n}}class Xm{constructor(n,r){this._service=n,this._location=r instanceof Us?r:Us.makeFromUrl(r,n.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(n,r){return new Xm(n,r)}get root(){const n=new Us(this._location.bucket,"");return this._newRef(this._service,n)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return sU(this._location.path)}get storage(){return this._service}get parent(){const n=function(i){if(0===i.length)return null;const n=i.lastIndexOf("/");return-1===n?"":i.slice(0,n)}(this._location.path);if(null===n)return null;const r=new Us(this._location.bucket,n);return new Xm(this._service,r)}_throwIfRoot(n){if(""===this._location.path)throw XV(n)}}function gU(i,n,r){return nk.apply(this,arguments)}function nk(){return(nk=(0,Se.Z)(function*(i,n,r){const a=yield mU(i,{pageToken:r});n.prefixes.push(...a.prefixes),n.items.push(...a.items),null!=a.nextPageToken&&(yield gU(i,n,a.nextPageToken))})).apply(this,arguments)}function mU(i,n){return rk.apply(this,arguments)}function rk(){return(rk=(0,Se.Z)(function*(i,n){null!=n&&"number"==typeof n.maxResults&&ZO("options.maxResults",1,1e3,n.maxResults);const r=n||{},s=KG(i.storage,i._location,"/",r.pageToken,r.maxResults);return(yield i.storage.makeRequestWithTokens(s)).getPromise()})).apply(this,arguments)}function ik(){return(ik=(0,Se.Z)(function*(i){i._throwIfRoot("getMetadata");const n=uU(i.storage,i._location,A0());return(yield i.storage.makeRequestWithTokens(n)).getPromise()})).apply(this,arguments)}function sk(){return(sk=(0,Se.Z)(function*(i,n){i._throwIfRoot("updateMetadata");const r=YG(i.storage,i._location,n,A0());return(yield i.storage.makeRequestWithTokens(r)).getPromise()})).apply(this,arguments)}function ok(){return(ok=(0,Se.Z)(function*(i){i._throwIfRoot("getDownloadURL");const n=ZG(i.storage,i._location,A0());return(yield i.storage.makeRequestWithTokens(n)).getPromise().then(r=>{if(null===r)throw fG();return r})})).apply(this,arguments)}function ak(){return(ak=(0,Se.Z)(function*(i){i._throwIfRoot("deleteObject");const n=QG(i.storage,i._location);return(yield i.storage.makeRequestWithTokens(n)).getPromise()})).apply(this,arguments)}function _U(i,n){const r=function(i,n){const r=n.split("/").filter(s=>s.length>0).join("/");return 0===i.length?r:i+"/"+r}(i._location.path,n),s=new Us(i._location.bucket,r);return new Xm(i.storage,s)}function yU(i,n){if(i instanceof lk){const r=i;if(null==r._bucket)throw new Gr("no-default-bucket","No default bucket found. Did you set the '"+ZV+"' property when initializing the app?");const s=new Xm(r,r._bucket);return null!=n?yU(s,n):s}return void 0!==n?_U(i,n):i}function fq(i,n){if(n&&function(i){return/^[A-Za-z]+:\/\//.test(i)}(n)){if(i instanceof lk)return function(i,n){return new Xm(i,n)}(i,n);throw Jv("To use ref(service, url), the first argument must be a Storage instance.")}return yU(i,n)}function vU(i,n){const r=null==n?void 0:n[ZV];return null==r?null:Us.makeFromBucketSpec(r,i)}class lk{constructor(n,r,s,a,c,h){this.app=n,this._authProvider=r,this._appCheckProvider=s,this._pool=a,this._url=c,this._firebaseVersion=h,this._bucket=null,this._host=KV,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=c?Us.makeFromBucketSpec(c,this._host):vU(this._host,this.app.options)}get host(){return this._host}set host(n){this._host=n,this._bucket=null!=this._url?Us.makeFromBucketSpec(this._url,n):vU(n,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(n){ZO("time",0,Number.POSITIVE_INFINITY,n),this._maxUploadRetryTime=n}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(n){ZO("time",0,Number.POSITIVE_INFINITY,n),this._maxOperationRetryTime=n}_getAuthToken(){var n=this;return(0,Se.Z)(function*(){if(n._overrideAuthToken)return n._overrideAuthToken;const r=n._authProvider.getImmediate({optional:!0});if(r){const s=yield r.getToken();if(null!==s)return s.accessToken}return null})()}_getAppCheckToken(){var n=this;return(0,Se.Z)(function*(){const r=n._appCheckProvider.getImmediate({optional:!0});return r?(yield r.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(n=>n.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(n){return new Xm(this,n)}_makeRequest(n,r,s){if(this._deleted)return new _G(JV());{const a=function(i,n,r,s,a,c){const h=tU(i.urlParams),m=i.url+h,E=Object.assign({},i.headers);return function(i,n){n&&(i["X-Firebase-GMPID"]=n)}(E,n),function(i,n){null!==n&&n.length>0&&(i.Authorization="Firebase "+n)}(E,r),function(i,n){i["X-Firebase-Storage-Version"]="webjs/"+(null!=n?n:"AppManager")}(E,c),function(i,n){null!==n&&(i["X-Firebase-AppCheck"]=n)}(E,s),new CG(m,i.method,E,i.body,i.successCodes,i.additionalRetryCodes,i.handler,i.errorHandler,i.timeout,i.progressCallback,a)}(n,this._appId,r,s,this._pool,this._firebaseVersion);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(n){var r=this;return(0,Se.Z)(function*(){const[s,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(n,s,a)})()}}function wU(i,n){return fq(i=(0,V.m9)(i),n)}(0,as._registerComponent)(new Vi.wA("storage",function(i,{instanceIdentifier:n}){const r=i.getProvider("app").getImmediate(),s=i.getProvider("auth-internal"),a=i.getProvider("app-check-internal");return new lk(r,s,a,new mG,n,as.SDK_VERSION)},"PUBLIC").setMultipleInstances(!0)),(0,as.registerVersion)("@firebase/storage","0.8.3");class iR{constructor(n,r,s){this._delegate=n,this.task=r,this.ref=s}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class bU{constructor(n,r){this._delegate=n,this._ref=r,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new iR(this._delegate.snapshot,this,this._ref)}then(n,r){return this._delegate.then(s=>{if(n)return n(new iR(s,this,this._ref))},r)}on(n,r,s,a){let c;return r&&(c="function"==typeof r?h=>r(new iR(h,this,this._ref)):{next:r.next?h=>r.next(new iR(h,this,this._ref)):void 0,complete:r.complete||void 0,error:r.error||void 0}),this._delegate.on(n,c,s||void 0,a||void 0)}}class CU{constructor(n,r){this._delegate=n,this._service=r}get prefixes(){return this._delegate.prefixes.map(n=>new Rh(n,this._service))}get items(){return this._delegate.items.map(n=>new Rh(n,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Rh{constructor(n,r){this._delegate=n,this.storage=r}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(n){const r=function(i,n){return _U(i,n)}(this._delegate,n);return new Rh(r,this.storage)}get root(){return new Rh(this._delegate.root,this.storage)}get parent(){const n=this._delegate.parent;return null==n?null:new Rh(n,this.storage)}put(n,r){return this._throwIfRoot("put"),new bU(function(i,n,r){return function(i,n,r){return i._throwIfRoot("uploadBytesResumable"),new fU(i,new kc(n),r)}(i=(0,V.m9)(i),n,r)}(this._delegate,n,r),this)}putString(n,r=Na.RAW,s){this._throwIfRoot("putString");const a=QO(r,n),c=Object.assign({},s);return null==c.contentType&&null!=a.contentType&&(c.contentType=a.contentType),new bU(new fU(this._delegate,new kc(a.data,!0),c),this)}listAll(){return function(i){return function(i){const n={prefixes:[],items:[]};return gU(i,n).then(()=>n)}(i=(0,V.m9)(i))}(this._delegate).then(n=>new CU(n,this.storage))}list(n){return function(i,n){return mU(i=(0,V.m9)(i),n)}(this._delegate,n||void 0).then(r=>new CU(r,this.storage))}getMetadata(){return function(i){return function(i){return ik.apply(this,arguments)}(i=(0,V.m9)(i))}(this._delegate)}updateMetadata(n){return function(i,n){return function(i,n){return sk.apply(this,arguments)}(i=(0,V.m9)(i),n)}(this._delegate,n)}getDownloadURL(){return function(i){return function(i){return ok.apply(this,arguments)}(i=(0,V.m9)(i))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function(i){return function(i){return ak.apply(this,arguments)}(i=(0,V.m9)(i))}(this._delegate)}_throwIfRoot(n){if(""===this._delegate._location.path)throw XV(n)}}class TU{constructor(n,r){this.app=n,this._delegate=r}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(n){if(IU(n))throw Jv("ref() expected a child path but got a URL, use refFromURL instead.");return new Rh(wU(this._delegate,n),this)}refFromURL(n){if(!IU(n))throw Jv("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Us.makeFromUrl(n,this._delegate.host)}catch(r){throw Jv("refFromUrl() expected a valid full URL but got an invalid one.")}return new Rh(wU(this._delegate,n),this)}setMaxUploadRetryTime(n){this._delegate.maxUploadRetryTime=n}setMaxOperationRetryTime(n){this._delegate.maxOperationRetryTime=n}useEmulator(n,r,s={}){!function(i,n,r,s={}){!function(i,n,r,s={}){i.host=`${n}:${r}`,i._protocol="http";const{mockUserToken:a}=s;a&&(i._overrideAuthToken="string"==typeof a?a:(0,V.Sg)(a,i.app.options.projectId))}(i,n,r,s)}(this._delegate,n,r,s)}}function IU(i){return/^[A-Za-z]+:\/\//.test(i)}function xq(i,{instanceIdentifier:n}){const r=i.getProvider("app-compat").getImmediate(),s=i.getProvider("storage").getImmediate({identifier:n});return new TU(r,s)}function DU(i){const n=function(i){return new tr.y(n=>{const r=h=>n.next(h);r(i.snapshot);const c=i.on("state_changed",r);return i.then(h=>{r(h),n.complete()},h=>{r(i.snapshot),(h=>{n.error(h)})(h)}),function(){c()}}).pipe(function(i,n=Ro.P){return r=>r.lift(new J3(i,n))}(0))}(i);return{task:i,then:i.then.bind(i),catch:i.catch.bind(i),pause:i.pause.bind(i),cancel:i.cancel.bind(i),resume:i.resume.bind(i),snapshotChanges:()=>n,percentageChanges:()=>n.pipe((0,mt.U)(r=>r.bytesTransferred/r.totalBytes*100))}}function sR(i){return{getDownloadURL:()=>(0,gt.of)(void 0).pipe(Kt.fc,ai(()=>i.getDownloadURL()),Kt.iC),getMetadata:()=>(0,gt.of)(void 0).pipe(Kt.fc,ai(()=>i.getMetadata()),Kt.iC),delete:()=>(0,Rn.D)(i.delete()),child:n=>sR(i.child(n)),updateMetadata:n=>(0,Rn.D)(i.updateMetadata(n)),put:(n,r)=>DU(i.put(n,r)),putString:(n,r,s)=>DU(i.putString(n,r,s)),list:n=>(0,Rn.D)(i.list(n)),listAll:()=>(0,Rn.D)(i.listAll())}}!function(i){const n={TaskState:ho,TaskEvent:nq,StringFormat:Na,Storage:TU,Reference:Rh};i.INTERNAL.registerComponent(new Vi.wA("storage-compat",xq,"PUBLIC").setServiceProps(n).setMultipleInstances(!0)),i.registerVersion("@firebase/storage-compat","0.1.3")}(Qp.Z);const Oq=new _.OlP("angularfire2.storageBucket"),kq=new _.OlP("angularfire2.storage.maxUploadRetryTime"),Fq=new _.OlP("angularfire2.storage.maxOperationRetryTime"),Lq=new _.OlP("angularfire2.storage.use-emulator");let Vq=(()=>{class i{constructor(r,s,a,c,h,m,E,C,S,N){const O=(0,Un.on)(r,h,s);this.storage=(0,Un.cc)(`${O.name}.storage.${a}`,"AngularFireStorage",O.name,()=>{const B=h.runOutsideAngular(()=>O.storage(a||void 0)),W=S;return W&&B.useEmulator(...W),E&&B.setMaxUploadRetryTime(E),C&&B.setMaxOperationRetryTime(C),B},[E,C])}ref(r){return sR(this.storage.ref(r))}refFromURL(r){return sR(this.storage.refFromURL(r))}upload(r,s,a){return sR(this.storage.ref(r)).put(s,a)}}return i.\u0275fac=function(r){return new(r||i)(_.LFG(Un.Dh),_.LFG(Un.xv,8),_.LFG(Oq,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(Kt.HU),_.LFG(kq,8),_.LFG(Fq,8),_.LFG(Lq,8),_.LFG(lp,8))},i.\u0275prov=_.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})();class SU{}const Nh="*";function Bq(i,n){return{type:7,name:i,definitions:n,options:{}}}function AU(i,n=null){return{type:4,styles:n,timings:i}}function RU(i,n=null){return{type:2,steps:i,options:n}}function R0(i){return{type:6,styles:i,offset:null}}function uk(i,n,r){return{type:0,name:i,styles:n,options:r}}function NU(i,n,r=null){return{type:1,expr:i,animation:n,options:r}}function xU(i){Promise.resolve(null).then(i)}class tE{constructor(n=0,r=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=n+r}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}onStart(n){this._onStartFns.push(n)}onDone(n){this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){xU(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(n=>n()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(n){this._position=this.totalTime?n*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(n){const r="start"==n?this._onStartFns:this._onDoneFns;r.forEach(s=>s()),r.length=0}}class PU{constructor(n){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=n;let r=0,s=0,a=0;const c=this.players.length;0==c?xU(()=>this._onFinish()):this.players.forEach(h=>{h.onDone(()=>{++r==c&&this._onFinish()}),h.onDestroy(()=>{++s==c&&this._onDestroy()}),h.onStart(()=>{++a==c&&this._onStart()})}),this.totalTime=this.players.reduce((h,m)=>Math.max(h,m.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this.players.forEach(n=>n.init())}onStart(n){this._onStartFns.push(n)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(n=>n()),this._onStartFns=[])}onDone(n){this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(n=>n.play())}pause(){this.players.forEach(n=>n.pause())}restart(){this.players.forEach(n=>n.restart())}finish(){this._onFinish(),this.players.forEach(n=>n.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(n=>n.destroy()),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this.players.forEach(n=>n.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(n){const r=n*this.totalTime;this.players.forEach(s=>{const a=s.totalTime?Math.min(1,r/s.totalTime):1;s.setPosition(a)})}getPosition(){const n=this.players.reduce((r,s)=>null===r||s.totalTime>r.totalTime?s:r,null);return null!=n?n.getPosition():0}beforeDestroy(){this.players.forEach(n=>{n.beforeDestroy&&n.beforeDestroy()})}triggerCallback(n){const r="start"==n?this._onStartFns:this._onDoneFns;r.forEach(s=>s()),r.length=0}}const MU=["toast-component",""];function jq(i,n){if(1&i){const r=_.EpF();_.TgZ(0,"button",5),_.NdJ("click",function(){return _.CHM(r),_.oxw().remove()}),_.TgZ(1,"span",6),_._uU(2,"\xd7"),_.qZA(),_.qZA()}}function $q(i,n){if(1&i&&(_.ynx(0),_._uU(1),_.BQk()),2&i){const r=_.oxw(2);_.xp6(1),_.hij("[",r.duplicatesCount+1,"]")}}function Hq(i,n){if(1&i&&(_.TgZ(0,"div"),_._uU(1),_.YNc(2,$q,2,1,"ng-container",4),_.qZA()),2&i){const r=_.oxw();_.Tol(r.options.titleClass),_.uIk("aria-label",r.title),_.xp6(1),_.hij(" ",r.title," "),_.xp6(1),_.Q6J("ngIf",r.duplicatesCount)}}function Gq(i,n){if(1&i&&_._UZ(0,"div",7),2&i){const r=_.oxw();_.Tol(r.options.messageClass),_.Q6J("innerHTML",r.message,_.oJD)}}function qq(i,n){if(1&i&&(_.TgZ(0,"div",8),_._uU(1),_.qZA()),2&i){const r=_.oxw();_.Tol(r.options.messageClass),_.uIk("aria-label",r.message),_.xp6(1),_.hij(" ",r.message," ")}}function Wq(i,n){if(1&i&&(_.TgZ(0,"div"),_._UZ(1,"div",9),_.qZA()),2&i){const r=_.oxw();_.xp6(1),_.Udp("width",r.width+"%")}}function zq(i,n){if(1&i){const r=_.EpF();_.TgZ(0,"button",5),_.NdJ("click",function(){return _.CHM(r),_.oxw().remove()}),_.TgZ(1,"span",6),_._uU(2,"\xd7"),_.qZA(),_.qZA()}}function Kq(i,n){if(1&i&&(_.ynx(0),_._uU(1),_.BQk()),2&i){const r=_.oxw(2);_.xp6(1),_.hij("[",r.duplicatesCount+1,"]")}}function Zq(i,n){if(1&i&&(_.TgZ(0,"div"),_._uU(1),_.YNc(2,Kq,2,1,"ng-container",4),_.qZA()),2&i){const r=_.oxw();_.Tol(r.options.titleClass),_.uIk("aria-label",r.title),_.xp6(1),_.hij(" ",r.title," "),_.xp6(1),_.Q6J("ngIf",r.duplicatesCount)}}function Yq(i,n){if(1&i&&_._UZ(0,"div",7),2&i){const r=_.oxw();_.Tol(r.options.messageClass),_.Q6J("innerHTML",r.message,_.oJD)}}function Qq(i,n){if(1&i&&(_.TgZ(0,"div",8),_._uU(1),_.qZA()),2&i){const r=_.oxw();_.Tol(r.options.messageClass),_.uIk("aria-label",r.message),_.xp6(1),_.hij(" ",r.message," ")}}function Jq(i,n){if(1&i&&(_.TgZ(0,"div"),_._UZ(1,"div",9),_.qZA()),2&i){const r=_.oxw();_.xp6(1),_.Udp("width",r.width+"%")}}class oR{constructor(n,r,s,a,c,h){this.toastId=n,this.config=r,this.message=s,this.title=a,this.toastType=c,this.toastRef=h,this._onTap=new Yn.xQ,this._onAction=new Yn.xQ,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(n){this._onAction.next(n)}onAction(){return this._onAction.asObservable()}}const dk={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing"},N0=new _.OlP("ToastConfig");class Xq{constructor(n,r){this.component=n,this.injector=r}attach(n,r){return this._attachedHost=n,n.attach(this,r)}detach(){const n=this._attachedHost;if(n)return this._attachedHost=void 0,n.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(n){this._attachedHost=n}}class tW extends class{attach(n,r){return this._attachedPortal=n,this.attachComponentPortal(n,r)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(n){this._disposeFn=n}}{constructor(n,r,s){super(),this._hostDomElement=n,this._componentFactoryResolver=r,this._appRef=s}attachComponentPortal(n,r){const s=this._componentFactoryResolver.resolveComponentFactory(n.component);let a;return a=s.create(n.injector),this._appRef.attachView(a.hostView),this.setDisposeFn(()=>{this._appRef.detachView(a.hostView),a.destroy()}),r?this._hostDomElement.insertBefore(this._getComponentRootNode(a),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(a)),a}_getComponentRootNode(n){return n.hostView.rootNodes[0]}}let OU=(()=>{class i{constructor(r){this._document=r}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const r=this._document.createElement("div");r.classList.add("overlay-container"),this._document.body.appendChild(r),this._containerElement=r}}return i.\u0275fac=function(r){return new(r||i)(_.LFG(Re))},i.\u0275prov=_.Yz7({factory:function(){return new i(_.LFG(Re))},token:i,providedIn:"root"}),i})();class nW{constructor(n){this._portalHost=n}attach(n,r=!0){return this._portalHost.attach(n,r)}detach(){return this._portalHost.detach()}}let kU=(()=>{class i{constructor(r,s,a,c){this._overlayContainer=r,this._componentFactoryResolver=s,this._appRef=a,this._document=c,this._paneElements=new Map}create(r,s){return this._createOverlayRef(this.getPaneElement(r,s))}getPaneElement(r="",s){return this._paneElements.get(s)||this._paneElements.set(s,{}),this._paneElements.get(s)[r]||(this._paneElements.get(s)[r]=this._createPaneElement(r,s)),this._paneElements.get(s)[r]}_createPaneElement(r,s){const a=this._document.createElement("div");return a.id="toast-container",a.classList.add(r),a.classList.add("toast-container"),s?s.getContainerElement().appendChild(a):this._overlayContainer.getContainerElement().appendChild(a),a}_createPortalHost(r){return new tW(r,this._componentFactoryResolver,this._appRef)}_createOverlayRef(r){return new nW(this._createPortalHost(r))}}return i.\u0275fac=function(r){return new(r||i)(_.LFG(OU),_.LFG(_._Vd),_.LFG(_.z2F),_.LFG(Re))},i.\u0275prov=_.Yz7({factory:function(){return new i(_.LFG(OU),_.LFG(_._Vd),_.LFG(_.z2F),_.LFG(Re))},token:i,providedIn:"root"}),i})();class rW{constructor(n){this._overlayRef=n,this.duplicatesCount=0,this._afterClosed=new Yn.xQ,this._activate=new Yn.xQ,this._manualClose=new Yn.xQ,this._resetTimeout=new Yn.xQ,this._countDuplicate=new Yn.xQ}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(n,r){n&&this._resetTimeout.next(),r&&this._countDuplicate.next(++this.duplicatesCount)}}class iW{constructor(n,r){this._toastPackage=n,this._parentInjector=r}get(n,r,s){return n===oR?this._toastPackage:this._parentInjector.get(n,r,s)}}let hk=(()=>{class i{constructor(r,s,a,c,h){this.overlay=s,this._injector=a,this.sanitizer=c,this.ngZone=h,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig=Object.assign(Object.assign({},r.default),r.config),r.config.iconClasses&&(this.toastrConfig.iconClasses=Object.assign(Object.assign({},r.default.iconClasses),r.config.iconClasses))}show(r,s,a={},c=""){return this._preBuildNotification(c,r,s,this.applyConfig(a))}success(r,s,a={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",r,s,this.applyConfig(a))}error(r,s,a={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",r,s,this.applyConfig(a))}info(r,s,a={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",r,s,this.applyConfig(a))}warning(r,s,a={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",r,s,this.applyConfig(a))}clear(r){for(const s of this.toasts)if(void 0!==r){if(s.toastId===r)return void s.toastRef.manualClose()}else s.toastRef.manualClose()}remove(r){const s=this._findToast(r);if(!s||(s.activeToast.toastRef.close(),this.toasts.splice(s.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const a=this.toasts[this.currentlyActive].toastRef;a.isInactive()||(this.currentlyActive=this.currentlyActive+1,a.activate())}return!0}findDuplicate(r="",s="",a,c){const{includeTitleDuplicates:h}=this.toastrConfig;for(const m of this.toasts){const E=h&&m.title===r;if((!h||E)&&m.message===s)return m.toastRef.onDuplicate(a,c),m}return null}applyConfig(r={}){return Object.assign(Object.assign({},this.toastrConfig),r)}_findToast(r){for(let s=0;s<this.toasts.length;s++)if(this.toasts[s].toastId===r)return{index:s,activeToast:this.toasts[s]};return null}_preBuildNotification(r,s,a,c){return c.onActivateTick?this.ngZone.run(()=>this._buildNotification(r,s,a,c)):this._buildNotification(r,s,a,c)}_buildNotification(r,s,a,c){if(!c.toastComponent)throw new Error("toastComponent required");const h=this.findDuplicate(a,s,this.toastrConfig.resetTimeoutOnDuplicate&&c.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&a||s)&&this.toastrConfig.preventDuplicates&&null!==h)return h;this.previousToastMessage=s;let m=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(m=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const E=this.overlay.create(c.positionClass,this.overlayContainer);this.index=this.index+1;let C=s;s&&c.enableHtml&&(C=this.sanitizer.sanitize(_.q3G.HTML,s));const S=new rW(E),N=new oR(this.index,c,C,a,r,S),O=new iW(N,this._injector),B=new Xq(c.toastComponent,O),W=E.attach(B,this.toastrConfig.newestOnTop);S.componentInstance=W.instance;const ue={toastId:this.index,title:a||"",message:s||"",toastRef:S,onShown:S.afterActivate(),onHidden:S.afterClosed(),onTap:N.onTap(),onAction:N.onAction(),portal:W};return m||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{ue.toastRef.activate()})),this.toasts.push(ue),ue}}return i.\u0275fac=function(r){return new(r||i)(_.LFG(N0),_.LFG(kU),_.LFG(_.zs3),_.LFG(sa),_.LFG(_.R0b))},i.\u0275prov=_.Yz7({factory:function(){return new i(_.LFG(N0),_.LFG(kU),_.LFG(_.gxx),_.LFG(sa),_.LFG(_.R0b))},token:i,providedIn:"root"}),i})(),sW=(()=>{class i{constructor(r,s,a){this.toastrService=r,this.toastPackage=s,this.ngZone=a,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=s.message,this.title=s.title,this.options=s.config,this.originalTimeout=s.config.timeOut,this.toastClasses=`${s.toastType} ${s.config.toastClass}`,this.sub=s.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=s.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=s.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=s.toastRef.countDuplicate().subscribe(c=>{this.duplicatesCount=c})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state=Object.assign(Object.assign({},this.state),{value:"active"}),!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const r=(new Date).getTime();this.width=(this.hideTime-r)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state=Object.assign(Object.assign({},this.state),{value:"active"}),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state=Object.assign(Object.assign({},this.state),{value:"removed"}),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(r,s){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(r),s)):this.timeout=setTimeout(()=>r(),s)}outsideInterval(r,s){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(r),s)):this.intervalId=setInterval(()=>r(),s)}runInsideAngular(r){this.ngZone?this.ngZone.run(()=>r()):r()}}return i.\u0275fac=function(r){return new(r||i)(_.Y36(hk),_.Y36(oR),_.Y36(_.R0b))},i.\u0275cmp=_.Xpm({type:i,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(r,s){1&r&&_.NdJ("click",function(){return s.tapToast()})("mouseenter",function(){return s.stickAround()})("mouseleave",function(){return s.delayedHideToast()}),2&r&&(_.d8E("@flyInOut",s.state),_.Tol(s.toastClasses),_.Udp("display",s.displayStyle))},attrs:MU,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alertdialog","aria-live","polite",3,"class","innerHTML",4,"ngIf"],["role","alertdialog","aria-live","polite",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alertdialog","aria-live","polite",3,"innerHTML"],["role","alertdialog","aria-live","polite"],[1,"toast-progress"]],template:function(r,s){1&r&&(_.YNc(0,jq,3,0,"button",0),_.YNc(1,Hq,3,5,"div",1),_.YNc(2,Gq,1,3,"div",2),_.YNc(3,qq,2,4,"div",3),_.YNc(4,Wq,2,2,"div",4)),2&r&&(_.Q6J("ngIf",s.options.closeButton),_.xp6(1),_.Q6J("ngIf",s.title),_.xp6(1),_.Q6J("ngIf",s.message&&s.options.enableHtml),_.xp6(1),_.Q6J("ngIf",s.message&&!s.options.enableHtml),_.xp6(1),_.Q6J("ngIf",s.options.progressBar))},directives:[ts],encapsulation:2,data:{animation:[Bq("flyInOut",[uk("inactive",R0({opacity:0})),uk("active",R0({opacity:1})),uk("removed",R0({opacity:0})),NU("inactive => active",AU("{{ easeTime }}ms {{ easing }}")),NU("active => removed",AU("{{ easeTime }}ms {{ easing }}"))])]}}),i})();const oW=Object.assign(Object.assign({},dk),{toastComponent:sW});let fk=(()=>{class i{static forRoot(r={}){return{ngModule:i,providers:[{provide:N0,useValue:{default:oW,config:r}}]}}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=_.oAB({type:i}),i.\u0275inj=_.cJS({imports:[[hi]]}),i})(),aW=(()=>{class i{constructor(r,s,a){this.toastrService=r,this.toastPackage=s,this.appRef=a,this.width=-1,this.toastClasses="",this.state="inactive",this.message=s.message,this.title=s.title,this.options=s.config,this.originalTimeout=s.config.timeOut,this.toastClasses=`${s.toastType} ${s.config.toastClass}`,this.sub=s.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=s.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=s.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=s.toastRef.countDuplicate().subscribe(c=>{this.duplicatesCount=c})}get displayStyle(){if("inactive"===this.state)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state="active",!(!0===this.options.disableTimeOut||"timeOut"===this.options.disableTimeOut)&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const r=(new Date).getTime();this.width=(this.hideTime-r)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state="active",this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=(new Date).getTime()+(this.originalTimeout||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){"removed"!==this.state&&(clearTimeout(this.timeout),this.state="removed",this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){"removed"!==this.state&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state||(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}}return i.\u0275fac=function(r){return new(r||i)(_.Y36(hk),_.Y36(oR),_.Y36(_.z2F))},i.\u0275cmp=_.Xpm({type:i,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(r,s){1&r&&_.NdJ("click",function(){return s.tapToast()})("mouseenter",function(){return s.stickAround()})("mouseleave",function(){return s.delayedHideToast()}),2&r&&(_.Tol(s.toastClasses),_.Udp("display",s.displayStyle))},attrs:MU,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert","aria-live","polite",3,"class","innerHTML",4,"ngIf"],["role","alert","aria-live","polite",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert","aria-live","polite",3,"innerHTML"],["role","alert","aria-live","polite"],[1,"toast-progress"]],template:function(r,s){1&r&&(_.YNc(0,zq,3,0,"button",0),_.YNc(1,Zq,3,5,"div",1),_.YNc(2,Yq,1,3,"div",2),_.YNc(3,Qq,2,4,"div",3),_.YNc(4,Jq,2,2,"div",4)),2&r&&(_.Q6J("ngIf",s.options.closeButton),_.xp6(1),_.Q6J("ngIf",s.title),_.xp6(1),_.Q6J("ngIf",s.message&&s.options.enableHtml),_.xp6(1),_.Q6J("ngIf",s.message&&!s.options.enableHtml),_.xp6(1),_.Q6J("ngIf",s.options.progressBar))},directives:[ts],encapsulation:2}),i})();Object.assign(Object.assign({},dk),{toastComponent:aW});let uW=(()=>{class i{constructor(r,s,a,c){this.auth=r,this.notesService=s,this.toastr=c}ngOnInit(){}noteCreation(){const r={authorId:this.auth.currentUserId,title:this.title,description:this.description,date:new Date};this.notesService.createNote(r),this.clearFields(),this.toastr.success("Note ajout\xe9e avec succ\xe8s!")}clearFields(){this.title="",this.description=""}}return i.\u0275fac=function(r){return new(r||i)(_.Y36(Yv),_.Y36(CO),_.Y36(Vq),_.Y36(hk))},i.\u0275cmp=_.Xpm({type:i,selectors:[["app-create-note"]],decls:17,vars:2,consts:[[1,"container","mt-5"],[1,"d-flex","justify-content-center"],[1,"card"],[1,"card-header","text-white","bg-primary","mb-3"],[1,"card-body"],[1,"mb-3"],["for","exampleFormControlInput1",1,"form-label"],["type","text","id","exampleFormControlInput1",1,"form-control",3,"ngModel","ngModelChange"],["for","exampleFormControlTextarea1",1,"form-label"],["id","exampleFormControlTextarea1","rows","3",1,"form-control",3,"ngModel","ngModelChange"],[1,"card-footer"],[1,"btn","btn-primary","float-end",3,"click"]],template:function(r,s){1&r&&(_.TgZ(0,"div",0),_.TgZ(1,"div",1),_.TgZ(2,"div",2),_.TgZ(3,"div",3),_._uU(4,"Ajouter une note"),_.qZA(),_.TgZ(5,"div",4),_.TgZ(6,"div",5),_.TgZ(7,"label",6),_._uU(8,"Titre de la note"),_.qZA(),_.TgZ(9,"input",7),_.NdJ("ngModelChange",function(c){return s.title=c}),_.qZA(),_.qZA(),_.TgZ(10,"div",5),_.TgZ(11,"label",8),_._uU(12,"Description"),_.qZA(),_.TgZ(13,"textarea",9),_.NdJ("ngModelChange",function(c){return s.description=c}),_.qZA(),_.qZA(),_.qZA(),_.TgZ(14,"div",10),_.TgZ(15,"button",11),_.NdJ("click",function(){return s.noteCreation()}),_._uU(16,"Ajouter"),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA()),2&r&&(_.xp6(9),_.Q6J("ngModel",s.title),_.xp6(4),_.Q6J("ngModel",s.description))},directives:[b0,SO,YA],styles:[".card[_ngcontent-%COMP%]{width:700px;font-size:20px}.card-header[_ngcontent-%COMP%]{font-size:20px}"]}),i})(),cW=(()=>{class i{constructor(r,s,a){this.auth=r,this.afAuth=s,this.routes=a,this.afAuth.onAuthStateChanged(c=>{c&&this.routes.navigate(["/notes"])})}ngOnInit(){}}return i.\u0275fac=function(r){return new(r||i)(_.Y36(Yv),_.Y36(ba),_.Y36(Es))},i.\u0275cmp=_.Xpm({type:i,selectors:[["app-sign-in"]],decls:15,vars:0,consts:[[1,"d-flex","justify-content-center"],[1,"card"],[1,"card-header","text-white","bg-primary"],[1,"card-body"],["role"," button",1,"login-btn","btn","btn-outline-dark","float-end",2,"text-transform","none",3,"click"],["width","20px","alt","Google sign-in","src","https://upload.wikimedia.org/wikipedia/commons/thumb/5/53/Google_%22G%22_Logo.svg/512px-Google_%22G%22_Logo.svg.png",2,"margin-bottom","3px","margin-right","5px"],["width","20px","alt","Google sign-in","src","https://upload.wikimedia.org/wikipedia/commons/5/51/Facebook_f_logo_%282019%29.svg",2,"margin-bottom","3px","margin-right","5px"],["width","20px","alt","Google sign-in","src","https://upload.wikimedia.org/wikipedia/commons/9/91/Octicons-mark-github.svg",2,"margin-bottom","3px","margin-right","5px"]],template:function(r,s){1&r&&(_.TgZ(0,"div"),_.TgZ(1,"div",0),_.TgZ(2,"div",1),_.TgZ(3,"div",2),_._uU(4," Connectez-vous avec l'un de ces comptes "),_.qZA(),_.TgZ(5,"div",3),_.TgZ(6,"a",4),_.NdJ("click",function(){return s.auth.loginGoogle()}),_._UZ(7,"img",5),_._uU(8," Se connecter avec Google "),_.qZA(),_.TgZ(9,"a",4),_.NdJ("click",function(){return s.auth.loginFacebook()}),_._UZ(10,"img",6),_._uU(11," Se connecterFacebook "),_.qZA(),_.TgZ(12,"a",4),_.NdJ("click",function(){return s.auth.loginGithub()}),_._UZ(13,"img",7),_._uU(14," Se connecter Github "),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA())},styles:["h1[_ngcontent-%COMP%]{margin:1em auto;width:-moz-fit-content;width:fit-content;font-size:40px}.login-btn[_ngcontent-%COMP%]{margin:15px auto;width:300px}.card[_ngcontent-%COMP%]{margin:100px 0;width:450px}.card-body[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap}@media only screen and (max-width: 767px){.login-btn[_ngcontent-%COMP%]{margin:15px auto;width:300px}.card[_ngcontent-%COMP%]{margin:100px 0;width:320px}}"]}),i})(),pk=(()=>{class i{constructor(r,s,a){this.auth=r,this.route=s,this.afAuth=a}canActivate(r,s){var a=this;return(0,Se.Z)(function*(){const h=!!(yield a.afAuth.currentUser);return h||a.route.navigate(["/sign-in"]),h})()}}return i.\u0275fac=function(r){return new(r||i)(_.LFG(Yv),_.LFG(Es),_.LFG(ba))},i.\u0275prov=_.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const dW=[{path:"",redirectTo:"/notes",pathMatch:"full"},{path:"notes",canActivate:[pk],component:Y3},{path:"notes/create-note",canActivate:[pk],component:uW},{path:"sign-in",component:cW}];let aR=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=_.oAB({type:i}),i.\u0275inj=_.cJS({imports:[[zL.forRoot(dW)],zL]}),i})();function hW(i,n){1&i&&_._UZ(0,"div")}const fW=function(){return["/notes"]};function pW(i,n){if(1&i){const r=_.EpF();_.TgZ(0,"nav",3),_.TgZ(1,"div",4),_.TgZ(2,"a",5),_._uU(3,"Notes App"),_.qZA(),_.TgZ(4,"button",6),_._UZ(5,"span",7),_.qZA(),_.TgZ(6,"div",8),_.TgZ(7,"ul",9),_.TgZ(8,"li",10),_.TgZ(9,"a",11),_._UZ(10,"i",12),_._uU(11," Mes Notes"),_.qZA(),_.qZA(),_.TgZ(12,"li",13),_.TgZ(13,"a",14),_._UZ(14,"i",15),_._uU(15," Ajouter une note"),_.qZA(),_.qZA(),_.qZA(),_.TgZ(16,"ul",16),_.TgZ(17,"li",17),_.TgZ(18,"a",18),_.TgZ(19,"img",19),_.NdJ("error",function(a){return _.CHM(r),_.oxw().errorHandler(a)}),_.qZA(),_._uU(20),_.qZA(),_.TgZ(21,"ul",20),_.TgZ(22,"li",21),_.NdJ("click",function(){return _.CHM(r),_.oxw().auth.logout()}),_.TgZ(23,"a",22),_._uU(24,"Se deconnecter"),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA()}if(2&i){const r=_.oxw();_.xp6(9),_.Q6J("routerLink",_.DdM(3,fW)),_.xp6(10),_.Q6J("src",r.userAvatar,_.LSH),_.xp6(1),_.hij(" ",r.userName," ")}}function gW(i,n){1&i&&(_.TgZ(0,"nav",3),_.TgZ(1,"div",4),_.TgZ(2,"a",23),_._uU(3,"Notes App"),_.qZA(),_.TgZ(4,"button",6),_._UZ(5,"span",7),_.qZA(),_._UZ(6,"div",8),_.qZA(),_.qZA())}let mW=(()=>{class i{constructor(r,s){this.auth=r,this.afAuth=s,this.afAuth.onAuthStateChanged(a=>{a&&(this.userAvatar=a.photoURL,this.userName=a.displayName)})}ngOnInit(){}errorHandler(r){console.debug(r),r.target.src="https://grandimageinc.com/wp-content/uploads/2015/09/icon-user-default.png"}}return i.\u0275fac=function(r){return new(r||i)(_.Y36(Yv),_.Y36(ba))},i.\u0275cmp=_.Xpm({type:i,selectors:[["app-navbar"]],decls:7,vars:5,consts:[[4,"ngIf","ngIfThen","ngIfElse"],["showUserMenu",""],["showLogin",""],[1,"navbar","navbar-expand-lg","navbar-dark","bg-primary"],[1,"container"],["routerLink","/notes",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"cou","navbar-nav","me-auto","mb-2","mb-lg-0"],["routerLink","/notes",1,"nav-item"],["aria-current","page","routerLinkActive","router-link-active",1,"nav-link","active",3,"routerLink"],[1,"far","fa-sticky-note"],[1,"nav-item"],["routerLink","/notes/create-note",1,"nav-link","active"],["routerlin","",1,"far","fa-plus-square"],[1,"navbar-nav","ms-auto"],[1,"nav-item","dropdown"],["href","#","id","navbarDropdown","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","user-down","dropdown-toggle"],["width"," 40","height","40",1,"rounded-circle",3,"src","error"],["aria-labelledby","navbarDropdown",1,"dropdown-menu"],[3,"click"],[1,"dropdown-item"],["href","#",1,"navbar-brand"]],template:function(r,s){if(1&r&&(_.YNc(0,hW,1,0,"div",0),_.ALo(1,"async"),_.YNc(2,pW,25,4,"ng-template",null,1,_.W1O),_.YNc(4,gW,7,0,"ng-template",null,2,_.W1O),_._UZ(6,"router-outlet")),2&r){const a=_.MAs(3),c=_.MAs(5);_.Q6J("ngIf",_.lcZ(1,3,s.auth.afAuth.user))("ngIfThen",a)("ngIfElse",c)}},directives:[ts,UA,VA,LA,$L],pipes:[kh],styles:[".navbar-brand[_ngcontent-%COMP%]{font-size:25px}.nav-link[_ngcontent-%COMP%]{font-size:19px}@media only screen and (max-width: 767px){.cou[_ngcontent-%COMP%]{padding-top:50px}.nav-item[_ngcontent-%COMP%]{margin:10px}.nav-link[_ngcontent-%COMP%]{font-size:25px;padding-left:20px}.user-down[_ngcontent-%COMP%]{background-color:#000;border-radius:2rem}.dropdown-toggle[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;padding-right:20px}.dropdown-item[_ngcontent-%COMP%]{font-size:18px}}"]}),i})(),_W=(()=>{class i{constructor(){this.title="notes-app"}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=_.Xpm({type:i,selectors:[["app-root"]],decls:2,vars:0,template:function(r,s){1&r&&(_._UZ(0,"app-navbar"),_._UZ(1,"router-outlet"))},directives:[mW,UA],styles:[""]}),i})(),yW=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=_.oAB({type:i}),i.\u0275inj=_.cJS({providers:[Yv],imports:[[hi,aR]]}),i})(),FU=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=_.oAB({type:i}),i.\u0275inj=_.cJS({imports:[[hi,aR]]}),i})();function LU(){return"undefined"!=typeof window&&void 0!==window.document}function gk(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Mp(i){switch(i.length){case 0:return new tE;case 1:return i[0];default:return new PU(i)}}function VU(i,n,r,s,a={},c={}){const h=[],m=[];let E=-1,C=null;if(s.forEach(S=>{const N=S.offset,O=N==E,B=O&&C||{};Object.keys(S).forEach(W=>{let ue=W,Pe=S[W];if("offset"!==W)switch(ue=n.normalizePropertyName(ue,h),Pe){case"!":Pe=a[W];break;case Nh:Pe=c[W];break;default:Pe=n.normalizeStyleValue(W,ue,Pe,h)}B[ue]=Pe}),O||m.push(B),C=B,E=N}),h.length){const S="\n - ";throw new Error(`Unable to animate due to the following errors:${S}${h.join(S)}`)}return m}function mk(i,n,r,s){switch(n){case"start":i.onStart(()=>s(r&&_k(r,"start",i)));break;case"done":i.onDone(()=>s(r&&_k(r,"done",i)));break;case"destroy":i.onDestroy(()=>s(r&&_k(r,"destroy",i)))}}function _k(i,n,r){const s=r.totalTime,c=yk(i.element,i.triggerName,i.fromState,i.toState,n||i.phaseName,null==s?i.totalTime:s,!!r.disabled),h=i._data;return null!=h&&(c._data=h),c}function yk(i,n,r,s,a="",c=0,h){return{element:i,triggerName:n,fromState:r,toState:s,phaseName:a,totalTime:c,disabled:!!h}}function xa(i,n,r){let s;return i instanceof Map?(s=i.get(n),s||i.set(n,s=r)):(s=i[n],s||(s=i[n]=r)),s}function UU(i){const n=i.indexOf(":");return[i.substring(1,n),i.substr(n+1)]}let vk=(i,n)=>!1,Ek=(i,n)=>!1,BU=(i,n,r)=>[];const jU=gk();(jU||"undefined"!=typeof Element)&&(vk=LU()?(i,n)=>{for(;n&&n!==document.documentElement;){if(n===i)return!0;n=n.parentNode||n.host}return!1}:(i,n)=>i.contains(n),Ek=(()=>{if(jU||Element.prototype.matches)return(i,n)=>i.matches(n);{const i=Element.prototype,n=i.matchesSelector||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector||i.webkitMatchesSelector;return n?(r,s)=>n.apply(r,[s]):Ek}})(),BU=(i,n,r)=>{let s=[];if(r){const a=i.querySelectorAll(n);for(let c=0;c<a.length;c++)s.push(a[c])}else{const a=i.querySelector(n);a&&s.push(a)}return s});let e_=null,$U=!1;function wk(i){e_||(e_=("undefined"!=typeof document?document.body:null)||{},$U=!!e_.style&&"WebkitAppearance"in e_.style);let n=!0;return e_.style&&!function(i){return"ebkit"==i.substring(1,6)}(i)&&(n=i in e_.style,!n&&$U&&(n="Webkit"+i.charAt(0).toUpperCase()+i.substr(1)in e_.style)),n}const bk=Ek,Ck=vk,Tk=BU;function HU(i){const n={};return Object.keys(i).forEach(r=>{const s=r.replace(/([a-z])([A-Z])/g,"$1-$2");n[s]=i[r]}),n}let GU=(()=>{class i{validateStyleProperty(r){return wk(r)}matchesElement(r,s){return bk(r,s)}containsElement(r,s){return Ck(r,s)}query(r,s,a){return Tk(r,s,a)}computeStyle(r,s,a){return a||""}animate(r,s,a,c,h,m=[],E){return new tE(a,c)}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=_.Yz7({token:i,factory:i.\u0275fac}),i})(),Ik=(()=>{class i{}return i.NOOP=new GU,i})();const Dk="ng-enter",lR="ng-leave",uR="ng-trigger",cR=".ng-trigger",WU="ng-animating",Sk=".ng-animating";function t_(i){if("number"==typeof i)return i;const n=i.match(/^(-?[\.\d]+)(m?s)/);return!n||n.length<2?0:Ak(parseFloat(n[1]),n[2])}function Ak(i,n){switch(n){case"s":return 1e3*i;default:return i}}function dR(i,n,r){return i.hasOwnProperty("duration")?i:function(i,n,r){let a,c=0,h="";if("string"==typeof i){const m=i.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===m)return n.push(`The provided timing value "${i}" is invalid.`),{duration:0,delay:0,easing:""};a=Ak(parseFloat(m[1]),m[2]);const E=m[3];null!=E&&(c=Ak(parseFloat(E),m[4]));const C=m[5];C&&(h=C)}else a=i;if(!r){let m=!1,E=n.length;a<0&&(n.push("Duration values below 0 are not allowed for this animation step."),m=!0),c<0&&(n.push("Delay values below 0 are not allowed for this animation step."),m=!0),m&&n.splice(E,0,`The provided timing value "${i}" is invalid.`)}return{duration:a,delay:c,easing:h}}(i,n,r)}function nE(i,n={}){return Object.keys(i).forEach(r=>{n[r]=i[r]}),n}function Op(i,n,r={}){if(n)for(let s in i)r[s]=i[s];else nE(i,r);return r}function KU(i,n,r){return r?n+":"+r+";":""}function ZU(i){let n="";for(let r=0;r<i.style.length;r++){const s=i.style.item(r);n+=KU(0,s,i.style.getPropertyValue(s))}for(const r in i.style)i.style.hasOwnProperty(r)&&!r.startsWith("_")&&(n+=KU(0,DW(r),i.style[r]));i.setAttribute("style",n)}function Lc(i,n,r){i.style&&(Object.keys(n).forEach(s=>{const a=Nk(s);r&&!r.hasOwnProperty(s)&&(r[s]=i.style[a]),i.style[a]=n[s]}),gk()&&ZU(i))}function n_(i,n){i.style&&(Object.keys(n).forEach(r=>{const s=Nk(r);i.style[s]=""}),gk()&&ZU(i))}function x0(i){return Array.isArray(i)?1==i.length?i[0]:RU(i):i}const Rk=new RegExp("{{\\s*(.+?)\\s*}}","g");function YU(i){let n=[];if("string"==typeof i){let r;for(;r=Rk.exec(i);)n.push(r[1]);Rk.lastIndex=0}return n}function hR(i,n,r){const s=i.toString(),a=s.replace(Rk,(c,h)=>{let m=n[h];return n.hasOwnProperty(h)||(r.push(`Please provide a value for the animation param ${h}`),m=""),m.toString()});return a==s?i:a}function fR(i){const n=[];let r=i.next();for(;!r.done;)n.push(r.value),r=i.next();return n}const IW=/-+([a-z0-9])/g;function Nk(i){return i.replace(IW,(...n)=>n[1].toUpperCase())}function DW(i){return i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function QU(i,n){return 0===i||0===n}function JU(i,n,r){const s=Object.keys(r);if(s.length&&n.length){let c=n[0],h=[];if(s.forEach(m=>{c.hasOwnProperty(m)||h.push(m),c[m]=r[m]}),h.length)for(var a=1;a<n.length;a++){let m=n[a];h.forEach(function(E){m[E]=xk(i,E)})}}return n}function Pa(i,n,r){switch(n.type){case 7:return i.visitTrigger(n,r);case 0:return i.visitState(n,r);case 1:return i.visitTransition(n,r);case 2:return i.visitSequence(n,r);case 3:return i.visitGroup(n,r);case 4:return i.visitAnimate(n,r);case 5:return i.visitKeyframes(n,r);case 6:return i.visitStyle(n,r);case 8:return i.visitReference(n,r);case 9:return i.visitAnimateChild(n,r);case 10:return i.visitAnimateRef(n,r);case 11:return i.visitQuery(n,r);case 12:return i.visitStagger(n,r);default:throw new Error(`Unable to resolve animation metadata node #${n.type}`)}}function xk(i,n){return window.getComputedStyle(i)[n]}function SW(i,n){const r=[];return"string"==typeof i?i.split(/\s*,\s*/).forEach(s=>function(i,n,r){if(":"==i[0]){const E=function(i,n){switch(i){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(r,s)=>parseFloat(s)>parseFloat(r);case":decrement":return(r,s)=>parseFloat(s)<parseFloat(r);default:return n.push(`The transition alias value "${i}" is not supported`),"* => *"}}(i,r);if("function"==typeof E)return void n.push(E);i=E}const s=i.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==s||s.length<4)return r.push(`The provided transition expression "${i}" is not supported`),n;const a=s[1],c=s[2],h=s[3];n.push(XU(a,h));"<"==c[0]&&!("*"==a&&"*"==h)&&n.push(XU(h,a))}(s,r,n)):r.push(i),r}const gR=new Set(["true","1"]),mR=new Set(["false","0"]);function XU(i,n){const r=gR.has(i)||mR.has(i),s=gR.has(n)||mR.has(n);return(a,c)=>{let h="*"==i||i==a,m="*"==n||n==c;return!h&&r&&"boolean"==typeof a&&(h=a?gR.has(i):mR.has(i)),!m&&s&&"boolean"==typeof c&&(m=c?gR.has(n):mR.has(n)),h&&m}}const NW=new RegExp("s*:selfs*,?","g");function Pk(i,n,r){return new xW(i).build(n,r)}class xW{constructor(n){this._driver=n}build(n,r){const s=new OW(r);return this._resetContextStyleTimingState(s),Pa(this,x0(n),s)}_resetContextStyleTimingState(n){n.currentQuerySelector="",n.collectedStyles={},n.collectedStyles[""]={},n.currentTime=0}visitTrigger(n,r){let s=r.queryCount=0,a=r.depCount=0;const c=[],h=[];return"@"==n.name.charAt(0)&&r.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),n.definitions.forEach(m=>{if(this._resetContextStyleTimingState(r),0==m.type){const E=m,C=E.name;C.toString().split(/\s*,\s*/).forEach(S=>{E.name=S,c.push(this.visitState(E,r))}),E.name=C}else if(1==m.type){const E=this.visitTransition(m,r);s+=E.queryCount,a+=E.depCount,h.push(E)}else r.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:n.name,states:c,transitions:h,queryCount:s,depCount:a,options:null}}visitState(n,r){const s=this.visitStyle(n.styles,r),a=n.options&&n.options.params||null;if(s.containsDynamicStyles){const c=new Set,h=a||{};if(s.styles.forEach(m=>{if(_R(m)){const E=m;Object.keys(E).forEach(C=>{YU(E[C]).forEach(S=>{h.hasOwnProperty(S)||c.add(S)})})}}),c.size){const m=fR(c.values());r.errors.push(`state("${n.name}", ...) must define default values for all the following style substitutions: ${m.join(", ")}`)}}return{type:0,name:n.name,style:s,options:a?{params:a}:null}}visitTransition(n,r){r.queryCount=0,r.depCount=0;const s=Pa(this,x0(n.animation),r);return{type:1,matchers:SW(n.expr,r.errors),animation:s,queryCount:r.queryCount,depCount:r.depCount,options:r_(n.options)}}visitSequence(n,r){return{type:2,steps:n.steps.map(s=>Pa(this,s,r)),options:r_(n.options)}}visitGroup(n,r){const s=r.currentTime;let a=0;const c=n.steps.map(h=>{r.currentTime=s;const m=Pa(this,h,r);return a=Math.max(a,r.currentTime),m});return r.currentTime=a,{type:3,steps:c,options:r_(n.options)}}visitAnimate(n,r){const s=function(i,n){let r=null;if(i.hasOwnProperty("duration"))r=i;else if("number"==typeof i)return Mk(dR(i,n).duration,0,"");const s=i;if(s.split(/\s+/).some(c=>"{"==c.charAt(0)&&"{"==c.charAt(1))){const c=Mk(0,0,"");return c.dynamic=!0,c.strValue=s,c}return r=r||dR(s,n),Mk(r.duration,r.delay,r.easing)}(n.timings,r.errors);r.currentAnimateTimings=s;let a,c=n.styles?n.styles:R0({});if(5==c.type)a=this.visitKeyframes(c,r);else{let h=n.styles,m=!1;if(!h){m=!0;const C={};s.easing&&(C.easing=s.easing),h=R0(C)}r.currentTime+=s.duration+s.delay;const E=this.visitStyle(h,r);E.isEmptyStep=m,a=E}return r.currentAnimateTimings=null,{type:4,timings:s,style:a,options:null}}visitStyle(n,r){const s=this._makeStyleAst(n,r);return this._validateStyleAst(s,r),s}_makeStyleAst(n,r){const s=[];Array.isArray(n.styles)?n.styles.forEach(h=>{"string"==typeof h?h==Nh?s.push(h):r.errors.push(`The provided style string value ${h} is not allowed.`):s.push(h)}):s.push(n.styles);let a=!1,c=null;return s.forEach(h=>{if(_R(h)){const m=h,E=m.easing;if(E&&(c=E,delete m.easing),!a)for(let C in m)if(m[C].toString().indexOf("{{")>=0){a=!0;break}}}),{type:6,styles:s,easing:c,offset:n.offset,containsDynamicStyles:a,options:null}}_validateStyleAst(n,r){const s=r.currentAnimateTimings;let a=r.currentTime,c=r.currentTime;s&&c>0&&(c-=s.duration+s.delay),n.styles.forEach(h=>{"string"!=typeof h&&Object.keys(h).forEach(m=>{if(!this._driver.validateStyleProperty(m))return void r.errors.push(`The provided animation property "${m}" is not a supported CSS property for animations`);const E=r.collectedStyles[r.currentQuerySelector],C=E[m];let S=!0;C&&(c!=a&&c>=C.startTime&&a<=C.endTime&&(r.errors.push(`The CSS property "${m}" that exists between the times of "${C.startTime}ms" and "${C.endTime}ms" is also being animated in a parallel animation between the times of "${c}ms" and "${a}ms"`),S=!1),c=C.startTime),S&&(E[m]={startTime:c,endTime:a}),r.options&&function(i,n,r){const s=n.params||{},a=YU(i);a.length&&a.forEach(c=>{s.hasOwnProperty(c)||r.push(`Unable to resolve the local animation param ${c} in the given list of values`)})}(h[m],r.options,r.errors)})})}visitKeyframes(n,r){const s={type:5,styles:[],options:null};if(!r.currentAnimateTimings)return r.errors.push("keyframes() must be placed inside of a call to animate()"),s;let c=0;const h=[];let m=!1,E=!1,C=0;const S=n.steps.map(Ze=>{const rt=this._makeStyleAst(Ze,r);let pt=null!=rt.offset?rt.offset:function(i){if("string"==typeof i)return null;let n=null;if(Array.isArray(i))i.forEach(r=>{if(_R(r)&&r.hasOwnProperty("offset")){const s=r;n=parseFloat(s.offset),delete s.offset}});else if(_R(i)&&i.hasOwnProperty("offset")){const r=i;n=parseFloat(r.offset),delete r.offset}return n}(rt.styles),tt=0;return null!=pt&&(c++,tt=rt.offset=pt),E=E||tt<0||tt>1,m=m||tt<C,C=tt,h.push(tt),rt});E&&r.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),m&&r.errors.push("Please ensure that all keyframe offsets are in order");const N=n.steps.length;let O=0;c>0&&c<N?r.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==c&&(O=1/(N-1));const B=N-1,W=r.currentTime,ue=r.currentAnimateTimings,Pe=ue.duration;return S.forEach((Ze,rt)=>{const pt=O>0?rt==B?1:O*rt:h[rt],tt=pt*Pe;r.currentTime=W+ue.delay+tt,ue.duration=tt,this._validateStyleAst(Ze,r),Ze.offset=pt,s.styles.push(Ze)}),s}visitReference(n,r){return{type:8,animation:Pa(this,x0(n.animation),r),options:r_(n.options)}}visitAnimateChild(n,r){return r.depCount++,{type:9,options:r_(n.options)}}visitAnimateRef(n,r){return{type:10,animation:this.visitReference(n.animation,r),options:r_(n.options)}}visitQuery(n,r){const s=r.currentQuerySelector,a=n.options||{};r.queryCount++,r.currentQuery=n;const[c,h]=function(i){const n=!!i.split(/\s*,\s*/).find(r=>":self"==r);return n&&(i=i.replace(NW,"")),[i=i.replace(/@\*/g,cR).replace(/@\w+/g,r=>cR+"-"+r.substr(1)).replace(/:animating/g,Sk),n]}(n.selector);r.currentQuerySelector=s.length?s+" "+c:c,xa(r.collectedStyles,r.currentQuerySelector,{});const m=Pa(this,x0(n.animation),r);return r.currentQuery=null,r.currentQuerySelector=s,{type:11,selector:c,limit:a.limit||0,optional:!!a.optional,includeSelf:h,animation:m,originalSelector:n.selector,options:r_(n.options)}}visitStagger(n,r){r.currentQuery||r.errors.push("stagger() can only be used inside of query()");const s="full"===n.timings?{duration:0,delay:0,easing:"full"}:dR(n.timings,r.errors,!0);return{type:12,animation:Pa(this,x0(n.animation),r),timings:s,options:null}}}class OW{constructor(n){this.errors=n,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function _R(i){return!Array.isArray(i)&&"object"==typeof i}function r_(i){return i?(i=nE(i)).params&&(i.params=function(i){return i?nE(i):null}(i.params)):i={},i}function Mk(i,n,r){return{duration:i,delay:n,easing:r}}function Ok(i,n,r,s,a,c,h=null,m=!1){return{type:1,element:i,keyframes:n,preStyleProps:r,postStyleProps:s,duration:a,delay:c,totalTime:a+c,easing:h,subTimeline:m}}class yR{constructor(){this._map=new Map}consume(n){let r=this._map.get(n);return r?this._map.delete(n):r=[],r}append(n,r){let s=this._map.get(n);s||this._map.set(n,s=[]),s.push(...r)}has(n){return this._map.has(n)}clear(){this._map.clear()}}const UW=new RegExp(":enter","g"),jW=new RegExp(":leave","g");function kk(i,n,r,s,a,c={},h={},m,E,C=[]){return(new $W).buildKeyframes(i,n,r,s,a,c,h,m,E,C)}class $W{buildKeyframes(n,r,s,a,c,h,m,E,C,S=[]){C=C||new yR;const N=new Fk(n,r,C,a,c,S,[]);N.options=E,N.currentTimeline.setStyles([h],null,N.errors,E),Pa(this,s,N);const O=N.timelines.filter(B=>B.containsAnimation());if(O.length&&Object.keys(m).length){const B=O[O.length-1];B.allowOnlyTimelineStyles()||B.setStyles([m],null,N.errors,E)}return O.length?O.map(B=>B.buildKeyframes()):[Ok(r,[],[],[],0,0,"",!1)]}visitTrigger(n,r){}visitState(n,r){}visitTransition(n,r){}visitAnimateChild(n,r){const s=r.subInstructions.consume(r.element);if(s){const a=r.createSubContext(n.options),c=r.currentTimeline.currentTime,h=this._visitSubInstructions(s,a,a.options);c!=h&&r.transformIntoNewTimeline(h)}r.previousNode=n}visitAnimateRef(n,r){const s=r.createSubContext(n.options);s.transformIntoNewTimeline(),this.visitReference(n.animation,s),r.transformIntoNewTimeline(s.currentTimeline.currentTime),r.previousNode=n}_visitSubInstructions(n,r,s){let c=r.currentTimeline.currentTime;const h=null!=s.duration?t_(s.duration):null,m=null!=s.delay?t_(s.delay):null;return 0!==h&&n.forEach(E=>{const C=r.appendInstructionToTimeline(E,h,m);c=Math.max(c,C.duration+C.delay)}),c}visitReference(n,r){r.updateOptions(n.options,!0),Pa(this,n.animation,r),r.previousNode=n}visitSequence(n,r){const s=r.subContextCount;let a=r;const c=n.options;if(c&&(c.params||c.delay)&&(a=r.createSubContext(c),a.transformIntoNewTimeline(),null!=c.delay)){6==a.previousNode.type&&(a.currentTimeline.snapshotCurrentStyles(),a.previousNode=vR);const h=t_(c.delay);a.delayNextStep(h)}n.steps.length&&(n.steps.forEach(h=>Pa(this,h,a)),a.currentTimeline.applyStylesToKeyframe(),a.subContextCount>s&&a.transformIntoNewTimeline()),r.previousNode=n}visitGroup(n,r){const s=[];let a=r.currentTimeline.currentTime;const c=n.options&&n.options.delay?t_(n.options.delay):0;n.steps.forEach(h=>{const m=r.createSubContext(n.options);c&&m.delayNextStep(c),Pa(this,h,m),a=Math.max(a,m.currentTimeline.currentTime),s.push(m.currentTimeline)}),s.forEach(h=>r.currentTimeline.mergeTimelineCollectedStyles(h)),r.transformIntoNewTimeline(a),r.previousNode=n}_visitTiming(n,r){if(n.dynamic){const s=n.strValue;return dR(r.params?hR(s,r.params,r.errors):s,r.errors)}return{duration:n.duration,delay:n.delay,easing:n.easing}}visitAnimate(n,r){const s=r.currentAnimateTimings=this._visitTiming(n.timings,r),a=r.currentTimeline;s.delay&&(r.incrementTime(s.delay),a.snapshotCurrentStyles());const c=n.style;5==c.type?this.visitKeyframes(c,r):(r.incrementTime(s.duration),this.visitStyle(c,r),a.applyStylesToKeyframe()),r.currentAnimateTimings=null,r.previousNode=n}visitStyle(n,r){const s=r.currentTimeline,a=r.currentAnimateTimings;!a&&s.getCurrentStyleProperties().length&&s.forwardFrame();const c=a&&a.easing||n.easing;n.isEmptyStep?s.applyEmptyStep(c):s.setStyles(n.styles,c,r.errors,r.options),r.previousNode=n}visitKeyframes(n,r){const s=r.currentAnimateTimings,a=r.currentTimeline.duration,c=s.duration,m=r.createSubContext().currentTimeline;m.easing=s.easing,n.styles.forEach(E=>{m.forwardTime((E.offset||0)*c),m.setStyles(E.styles,E.easing,r.errors,r.options),m.applyStylesToKeyframe()}),r.currentTimeline.mergeTimelineCollectedStyles(m),r.transformIntoNewTimeline(a+c),r.previousNode=n}visitQuery(n,r){const s=r.currentTimeline.currentTime,a=n.options||{},c=a.delay?t_(a.delay):0;c&&(6===r.previousNode.type||0==s&&r.currentTimeline.getCurrentStyleProperties().length)&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=vR);let h=s;const m=r.invokeQuery(n.selector,n.originalSelector,n.limit,n.includeSelf,!!a.optional,r.errors);r.currentQueryTotal=m.length;let E=null;m.forEach((C,S)=>{r.currentQueryIndex=S;const N=r.createSubContext(n.options,C);c&&N.delayNextStep(c),C===r.element&&(E=N.currentTimeline),Pa(this,n.animation,N),N.currentTimeline.applyStylesToKeyframe(),h=Math.max(h,N.currentTimeline.currentTime)}),r.currentQueryIndex=0,r.currentQueryTotal=0,r.transformIntoNewTimeline(h),E&&(r.currentTimeline.mergeTimelineCollectedStyles(E),r.currentTimeline.snapshotCurrentStyles()),r.previousNode=n}visitStagger(n,r){const s=r.parentContext,a=r.currentTimeline,c=n.timings,h=Math.abs(c.duration),m=h*(r.currentQueryTotal-1);let E=h*r.currentQueryIndex;switch(c.duration<0?"reverse":c.easing){case"reverse":E=m-E;break;case"full":E=s.currentStaggerTime}const S=r.currentTimeline;E&&S.delayNextStep(E);const N=S.currentTime;Pa(this,n.animation,r),r.previousNode=n,s.currentStaggerTime=a.currentTime-N+(a.startTime-s.currentTimeline.startTime)}}const vR={};class Fk{constructor(n,r,s,a,c,h,m,E){this._driver=n,this.element=r,this.subInstructions=s,this._enterClassName=a,this._leaveClassName=c,this.errors=h,this.timelines=m,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=vR,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=E||new ER(this._driver,r,0),m.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(n,r){if(!n)return;const s=n;let a=this.options;null!=s.duration&&(a.duration=t_(s.duration)),null!=s.delay&&(a.delay=t_(s.delay));const c=s.params;if(c){let h=a.params;h||(h=this.options.params={}),Object.keys(c).forEach(m=>{(!r||!h.hasOwnProperty(m))&&(h[m]=hR(c[m],h,this.errors))})}}_copyOptions(){const n={};if(this.options){const r=this.options.params;if(r){const s=n.params={};Object.keys(r).forEach(a=>{s[a]=r[a]})}}return n}createSubContext(n=null,r,s){const a=r||this.element,c=new Fk(this._driver,a,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(a,s||0));return c.previousNode=this.previousNode,c.currentAnimateTimings=this.currentAnimateTimings,c.options=this._copyOptions(),c.updateOptions(n),c.currentQueryIndex=this.currentQueryIndex,c.currentQueryTotal=this.currentQueryTotal,c.parentContext=this,this.subContextCount++,c}transformIntoNewTimeline(n){return this.previousNode=vR,this.currentTimeline=this.currentTimeline.fork(this.element,n),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(n,r,s){const a={duration:null!=r?r:n.duration,delay:this.currentTimeline.currentTime+(null!=s?s:0)+n.delay,easing:""},c=new HW(this._driver,n.element,n.keyframes,n.preStyleProps,n.postStyleProps,a,n.stretchStartingKeyframe);return this.timelines.push(c),a}incrementTime(n){this.currentTimeline.forwardTime(this.currentTimeline.duration+n)}delayNextStep(n){n>0&&this.currentTimeline.delayNextStep(n)}invokeQuery(n,r,s,a,c,h){let m=[];if(a&&m.push(this.element),n.length>0){n=(n=n.replace(UW,"."+this._enterClassName)).replace(jW,"."+this._leaveClassName);let C=this._driver.query(this.element,n,1!=s);0!==s&&(C=s<0?C.slice(C.length+s,C.length):C.slice(0,s)),m.push(...C)}return!c&&0==m.length&&h.push(`\`query("${r}")\` returned zero elements. (Use \`query("${r}", { optional: true })\` if you wish to allow this.)`),m}}class ER{constructor(n,r,s,a){this._driver=n,this.element=r,this.startTime=s,this._elementTimelineStylesLookup=a,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(r),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(r,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(n){const r=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||r?(this.forwardTime(this.currentTime+n),r&&this.snapshotCurrentStyles()):this.startTime+=n}fork(n,r){return this.applyStylesToKeyframe(),new ER(this._driver,n,r||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(n){this.applyStylesToKeyframe(),this.duration=n,this._loadKeyframe()}_updateStyle(n,r){this._localTimelineStyles[n]=r,this._globalTimelineStyles[n]=r,this._styleSummary[n]={time:this.currentTime,value:r}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(n){n&&(this._previousKeyframe.easing=n),Object.keys(this._globalTimelineStyles).forEach(r=>{this._backFill[r]=this._globalTimelineStyles[r]||Nh,this._currentKeyframe[r]=Nh}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(n,r,s,a){r&&(this._previousKeyframe.easing=r);const c=a&&a.params||{},h=function(i,n){const r={};let s;return i.forEach(a=>{"*"===a?(s=s||Object.keys(n),s.forEach(c=>{r[c]=Nh})):Op(a,!1,r)}),r}(n,this._globalTimelineStyles);Object.keys(h).forEach(m=>{const E=hR(h[m],c,s);this._pendingStyles[m]=E,this._localTimelineStyles.hasOwnProperty(m)||(this._backFill[m]=this._globalTimelineStyles.hasOwnProperty(m)?this._globalTimelineStyles[m]:Nh),this._updateStyle(m,E)})}applyStylesToKeyframe(){const n=this._pendingStyles,r=Object.keys(n);0!=r.length&&(this._pendingStyles={},r.forEach(s=>{this._currentKeyframe[s]=n[s]}),Object.keys(this._localTimelineStyles).forEach(s=>{this._currentKeyframe.hasOwnProperty(s)||(this._currentKeyframe[s]=this._localTimelineStyles[s])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(n=>{const r=this._localTimelineStyles[n];this._pendingStyles[n]=r,this._updateStyle(n,r)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const n=[];for(let r in this._currentKeyframe)n.push(r);return n}mergeTimelineCollectedStyles(n){Object.keys(n._styleSummary).forEach(r=>{const s=this._styleSummary[r],a=n._styleSummary[r];(!s||a.time>s.time)&&this._updateStyle(r,a.value)})}buildKeyframes(){this.applyStylesToKeyframe();const n=new Set,r=new Set,s=1===this._keyframes.size&&0===this.duration;let a=[];this._keyframes.forEach((m,E)=>{const C=Op(m,!0);Object.keys(C).forEach(S=>{const N=C[S];"!"==N?n.add(S):N==Nh&&r.add(S)}),s||(C.offset=E/this.duration),a.push(C)});const c=n.size?fR(n.values()):[],h=r.size?fR(r.values()):[];if(s){const m=a[0],E=nE(m);m.offset=0,E.offset=1,a=[m,E]}return Ok(this.element,a,c,h,this.duration,this.startTime,this.easing,!1)}}class HW extends ER{constructor(n,r,s,a,c,h,m=!1){super(n,r,h.delay),this.keyframes=s,this.preStyleProps=a,this.postStyleProps=c,this._stretchStartingKeyframe=m,this.timings={duration:h.duration,delay:h.delay,easing:h.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let n=this.keyframes,{delay:r,duration:s,easing:a}=this.timings;if(this._stretchStartingKeyframe&&r){const c=[],h=s+r,m=r/h,E=Op(n[0],!1);E.offset=0,c.push(E);const C=Op(n[0],!1);C.offset=n2(m),c.push(C);const S=n.length-1;for(let N=1;N<=S;N++){let O=Op(n[N],!1);O.offset=n2((r+O.offset*s)/h),c.push(O)}s=h,r=0,a="",n=c}return Ok(this.element,n,this.preStyleProps,this.postStyleProps,s,r,a,!0)}}function n2(i,n=3){const r=Math.pow(10,n-1);return Math.round(i*r)/r}class Lk{}class qW extends Lk{normalizePropertyName(n,r){return Nk(n)}normalizeStyleValue(n,r,s,a){let c="";const h=s.toString().trim();if(WW[r]&&0!==s&&"0"!==s)if("number"==typeof s)c="px";else{const m=s.match(/^[+-]?[\d\.]+([a-z]*)$/);m&&0==m[1].length&&a.push(`Please provide a CSS unit value for ${n}:${s}`)}return h+c}}const WW=(()=>function(i){const n={};return i.forEach(r=>n[r]=!0),n}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function r2(i,n,r,s,a,c,h,m,E,C,S,N,O){return{type:0,element:i,triggerName:n,isRemovalTransition:a,fromState:r,fromStyles:c,toState:s,toStyles:h,timelines:m,queriedElements:E,preStyleProps:C,postStyleProps:S,totalTime:N,errors:O}}const Vk={};class i2{constructor(n,r,s){this._triggerName=n,this.ast=r,this._stateStyles=s}match(n,r,s,a){return function(i,n,r,s,a){return i.some(c=>c(n,r,s,a))}(this.ast.matchers,n,r,s,a)}buildStyles(n,r,s){const a=this._stateStyles["*"],c=this._stateStyles[n],h=a?a.buildStyles(r,s):{};return c?c.buildStyles(r,s):h}build(n,r,s,a,c,h,m,E,C,S){const N=[],O=this.ast.options&&this.ast.options.params||Vk,W=this.buildStyles(s,m&&m.params||Vk,N),ue=E&&E.params||Vk,Pe=this.buildStyles(a,ue,N),Ze=new Set,rt=new Map,pt=new Map,tt="void"===a,_n={params:Object.assign(Object.assign({},O),ue)},Bn=S?[]:kk(n,r,this.ast.animation,c,h,W,Pe,_n,C,N);let ui=0;if(Bn.forEach(Ma=>{ui=Math.max(Ma.duration+Ma.delay,ui)}),N.length)return r2(r,this._triggerName,s,a,tt,W,Pe,[],[],rt,pt,ui,N);Bn.forEach(Ma=>{const xh=Ma.element,L2=xa(rt,xh,{});Ma.preStyleProps.forEach(i_=>L2[i_]=!0);const M0=xa(pt,xh,{});Ma.postStyleProps.forEach(i_=>M0[i_]=!0),xh!==r&&Ze.add(xh)});const fo=fR(Ze.values());return r2(r,this._triggerName,s,a,tt,W,Pe,Bn,fo,rt,pt,ui)}}class ZW{constructor(n,r,s){this.styles=n,this.defaultParams=r,this.normalizer=s}buildStyles(n,r){const s={},a=nE(this.defaultParams);return Object.keys(n).forEach(c=>{const h=n[c];null!=h&&(a[c]=h)}),this.styles.styles.forEach(c=>{if("string"!=typeof c){const h=c;Object.keys(h).forEach(m=>{let E=h[m];E.length>1&&(E=hR(E,a,r));const C=this.normalizer.normalizePropertyName(m,r);E=this.normalizer.normalizeStyleValue(m,C,E,r),s[C]=E})}}),s}}class QW{constructor(n,r,s){this.name=n,this.ast=r,this._normalizer=s,this.transitionFactories=[],this.states={},r.states.forEach(a=>{this.states[a.name]=new ZW(a.style,a.options&&a.options.params||{},s)}),s2(this.states,"true","1"),s2(this.states,"false","0"),r.transitions.forEach(a=>{this.transitionFactories.push(new i2(n,a,this.states))}),this.fallbackTransition=function(i,n,r){return new i2(i,{type:1,animation:{type:2,steps:[],options:null},matchers:[(h,m)=>!0],options:null,queryCount:0,depCount:0},n)}(n,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(n,r,s,a){return this.transitionFactories.find(h=>h.match(n,r,s,a))||null}matchStyles(n,r,s){return this.fallbackTransition.buildStyles(n,r,s)}}function s2(i,n,r){i.hasOwnProperty(n)?i.hasOwnProperty(r)||(i[r]=i[n]):i.hasOwnProperty(r)&&(i[n]=i[r])}const XW=new yR;class ez{constructor(n,r,s){this.bodyNode=n,this._driver=r,this._normalizer=s,this._animations={},this._playersById={},this.players=[]}register(n,r){const s=[],a=Pk(this._driver,r,s);if(s.length)throw new Error(`Unable to build the animation due to the following errors: ${s.join("\n")}`);this._animations[n]=a}_buildPlayer(n,r,s){const a=n.element,c=VU(0,this._normalizer,0,n.keyframes,r,s);return this._driver.animate(a,c,n.duration,n.delay,n.easing,[],!0)}create(n,r,s={}){const a=[],c=this._animations[n];let h;const m=new Map;if(c?(h=kk(this._driver,r,c,Dk,lR,{},{},s,XW,a),h.forEach(S=>{const N=xa(m,S.element,{});S.postStyleProps.forEach(O=>N[O]=null)})):(a.push("The requested animation doesn't exist or has already been destroyed"),h=[]),a.length)throw new Error(`Unable to create the animation due to the following errors: ${a.join("\n")}`);m.forEach((S,N)=>{Object.keys(S).forEach(O=>{S[O]=this._driver.computeStyle(N,O,Nh)})});const C=Mp(h.map(S=>{const N=m.get(S.element);return this._buildPlayer(S,{},N)}));return this._playersById[n]=C,C.onDestroy(()=>this.destroy(n)),this.players.push(C),C}destroy(n){const r=this._getPlayer(n);r.destroy(),delete this._playersById[n];const s=this.players.indexOf(r);s>=0&&this.players.splice(s,1)}_getPlayer(n){const r=this._playersById[n];if(!r)throw new Error(`Unable to find the timeline player referenced by ${n}`);return r}listen(n,r,s,a){const c=yk(r,"","","");return mk(this._getPlayer(n),s,c,a),()=>{}}command(n,r,s,a){if("register"==s)return void this.register(n,a[0]);if("create"==s)return void this.create(n,r,a[0]||{});const c=this._getPlayer(n);switch(s){case"play":c.play();break;case"pause":c.pause();break;case"reset":c.reset();break;case"restart":c.restart();break;case"finish":c.finish();break;case"init":c.init();break;case"setPosition":c.setPosition(parseFloat(a[0]));break;case"destroy":this.destroy(n)}}}const o2="ng-animate-queued",a2="ng-animate-disabled",l2=".ng-animate-disabled",iz=[],u2={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},sz={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Il="__ng_removed";class Uk{constructor(n,r=""){this.namespaceId=r;const s=n&&n.hasOwnProperty("value");if(this.value=function(i){return null!=i?i:null}(s?n.value:n),s){const c=nE(n);delete c.value,this.options=c}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(n){const r=n.params;if(r){const s=this.options.params;Object.keys(r).forEach(a=>{null==s[a]&&(s[a]=r[a])})}}}const P0="void",Bk=new Uk(P0);class oz{constructor(n,r,s){this.id=n,this.hostElement=r,this._engine=s,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+n,Dl(r,this._hostClassName)}listen(n,r,s,a){if(!this._triggers.hasOwnProperty(r))throw new Error(`Unable to listen on the animation trigger event "${s}" because the animation trigger "${r}" doesn't exist!`);if(null==s||0==s.length)throw new Error(`Unable to listen on the animation trigger "${r}" because the provided event is undefined!`);if(!function(i){return"start"==i||"done"==i}(s))throw new Error(`The provided animation trigger event "${s}" for the animation trigger "${r}" is not supported!`);const c=xa(this._elementListeners,n,[]),h={name:r,phase:s,callback:a};c.push(h);const m=xa(this._engine.statesByElement,n,{});return m.hasOwnProperty(r)||(Dl(n,uR),Dl(n,uR+"-"+r),m[r]=Bk),()=>{this._engine.afterFlush(()=>{const E=c.indexOf(h);E>=0&&c.splice(E,1),this._triggers[r]||delete m[r]})}}register(n,r){return!this._triggers[n]&&(this._triggers[n]=r,!0)}_getTrigger(n){const r=this._triggers[n];if(!r)throw new Error(`The provided animation trigger "${n}" has not been registered!`);return r}trigger(n,r,s,a=!0){const c=this._getTrigger(r),h=new jk(this.id,r,n);let m=this._engine.statesByElement.get(n);m||(Dl(n,uR),Dl(n,uR+"-"+r),this._engine.statesByElement.set(n,m={}));let E=m[r];const C=new Uk(s,this.id);if(!(s&&s.hasOwnProperty("value"))&&E&&C.absorbOptions(E.options),m[r]=C,E||(E=Bk),C.value!==P0&&E.value===C.value){if(!function(i,n){const r=Object.keys(i),s=Object.keys(n);if(r.length!=s.length)return!1;for(let a=0;a<r.length;a++){const c=r[a];if(!n.hasOwnProperty(c)||i[c]!==n[c])return!1}return!0}(E.params,C.params)){const ue=[],Pe=c.matchStyles(E.value,E.params,ue),Ze=c.matchStyles(C.value,C.params,ue);ue.length?this._engine.reportError(ue):this._engine.afterFlush(()=>{n_(n,Pe),Lc(n,Ze)})}return}const O=xa(this._engine.playersByElement,n,[]);O.forEach(ue=>{ue.namespaceId==this.id&&ue.triggerName==r&&ue.queued&&ue.destroy()});let B=c.matchTransition(E.value,C.value,n,C.params),W=!1;if(!B){if(!a)return;B=c.fallbackTransition,W=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:r,transition:B,fromState:E,toState:C,player:h,isFallbackTransition:W}),W||(Dl(n,o2),h.onStart(()=>{rE(n,o2)})),h.onDone(()=>{let ue=this.players.indexOf(h);ue>=0&&this.players.splice(ue,1);const Pe=this._engine.playersByElement.get(n);if(Pe){let Ze=Pe.indexOf(h);Ze>=0&&Pe.splice(Ze,1)}}),this.players.push(h),O.push(h),h}deregister(n){delete this._triggers[n],this._engine.statesByElement.forEach((r,s)=>{delete r[n]}),this._elementListeners.forEach((r,s)=>{this._elementListeners.set(s,r.filter(a=>a.name!=n))})}clearElementCache(n){this._engine.statesByElement.delete(n),this._elementListeners.delete(n);const r=this._engine.playersByElement.get(n);r&&(r.forEach(s=>s.destroy()),this._engine.playersByElement.delete(n))}_signalRemovalForInnerTriggers(n,r){const s=this._engine.driver.query(n,cR,!0);s.forEach(a=>{if(a[Il])return;const c=this._engine.fetchNamespacesByElement(a);c.size?c.forEach(h=>h.triggerLeaveAnimation(a,r,!1,!0)):this.clearElementCache(a)}),this._engine.afterFlushAnimationsDone(()=>s.forEach(a=>this.clearElementCache(a)))}triggerLeaveAnimation(n,r,s,a){const c=this._engine.statesByElement.get(n);if(c){const h=[];if(Object.keys(c).forEach(m=>{if(this._triggers[m]){const E=this.trigger(n,m,P0,a);E&&h.push(E)}}),h.length)return this._engine.markElementAsRemoved(this.id,n,!0,r),s&&Mp(h).onDone(()=>this._engine.processLeaveNode(n)),!0}return!1}prepareLeaveAnimationListeners(n){const r=this._elementListeners.get(n),s=this._engine.statesByElement.get(n);if(r&&s){const a=new Set;r.forEach(c=>{const h=c.name;if(a.has(h))return;a.add(h);const E=this._triggers[h].fallbackTransition,C=s[h]||Bk,S=new Uk(P0),N=new jk(this.id,h,n);this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:h,transition:E,fromState:C,toState:S,player:N,isFallbackTransition:!0})})}}removeNode(n,r){const s=this._engine;if(n.childElementCount&&this._signalRemovalForInnerTriggers(n,r),this.triggerLeaveAnimation(n,r,!0))return;let a=!1;if(s.totalAnimations){const c=s.players.length?s.playersByQueriedElement.get(n):[];if(c&&c.length)a=!0;else{let h=n;for(;h=h.parentNode;)if(s.statesByElement.get(h)){a=!0;break}}}if(this.prepareLeaveAnimationListeners(n),a)s.markElementAsRemoved(this.id,n,!1,r);else{const c=n[Il];(!c||c===u2)&&(s.afterFlush(()=>this.clearElementCache(n)),s.destroyInnerAnimations(n),s._onRemovalComplete(n,r))}}insertNode(n,r){Dl(n,this._hostClassName)}drainQueuedTransitions(n){const r=[];return this._queue.forEach(s=>{const a=s.player;if(a.destroyed)return;const c=s.element,h=this._elementListeners.get(c);h&&h.forEach(m=>{if(m.name==s.triggerName){const E=yk(c,s.triggerName,s.fromState.value,s.toState.value);E._data=n,mk(s.player,m.phase,E,m.callback)}}),a.markedForDestroy?this._engine.afterFlush(()=>{a.destroy()}):r.push(s)}),this._queue=[],r.sort((s,a)=>{const c=s.transition.ast.depCount,h=a.transition.ast.depCount;return 0==c||0==h?c-h:this._engine.driver.containsElement(s.element,a.element)?1:-1})}destroy(n){this.players.forEach(r=>r.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,n)}elementContainsData(n){let r=!1;return this._elementListeners.has(n)&&(r=!0),r=!!this._queue.find(s=>s.element===n)||r,r}}class az{constructor(n,r,s){this.bodyNode=n,this.driver=r,this._normalizer=s,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(a,c)=>{}}_onRemovalComplete(n,r){this.onRemovalComplete(n,r)}get queuedPlayers(){const n=[];return this._namespaceList.forEach(r=>{r.players.forEach(s=>{s.queued&&n.push(s)})}),n}createNamespace(n,r){const s=new oz(n,r,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,r)?this._balanceNamespaceList(s,r):(this.newHostElements.set(r,s),this.collectEnterElement(r)),this._namespaceLookup[n]=s}_balanceNamespaceList(n,r){const s=this._namespaceList.length-1;if(s>=0){let a=!1;for(let c=s;c>=0;c--)if(this.driver.containsElement(this._namespaceList[c].hostElement,r)){this._namespaceList.splice(c+1,0,n),a=!0;break}a||this._namespaceList.splice(0,0,n)}else this._namespaceList.push(n);return this.namespacesByHostElement.set(r,n),n}register(n,r){let s=this._namespaceLookup[n];return s||(s=this.createNamespace(n,r)),s}registerTrigger(n,r,s){let a=this._namespaceLookup[n];a&&a.register(r,s)&&this.totalAnimations++}destroy(n,r){if(!n)return;const s=this._fetchNamespace(n);this.afterFlush(()=>{this.namespacesByHostElement.delete(s.hostElement),delete this._namespaceLookup[n];const a=this._namespaceList.indexOf(s);a>=0&&this._namespaceList.splice(a,1)}),this.afterFlushAnimationsDone(()=>s.destroy(r))}_fetchNamespace(n){return this._namespaceLookup[n]}fetchNamespacesByElement(n){const r=new Set,s=this.statesByElement.get(n);if(s){const a=Object.keys(s);for(let c=0;c<a.length;c++){const h=s[a[c]].namespaceId;if(h){const m=this._fetchNamespace(h);m&&r.add(m)}}}return r}trigger(n,r,s,a){if(wR(r)){const c=this._fetchNamespace(n);if(c)return c.trigger(r,s,a),!0}return!1}insertNode(n,r,s,a){if(!wR(r))return;const c=r[Il];if(c&&c.setForRemoval){c.setForRemoval=!1,c.setForMove=!0;const h=this.collectedLeaveElements.indexOf(r);h>=0&&this.collectedLeaveElements.splice(h,1)}if(n){const h=this._fetchNamespace(n);h&&h.insertNode(r,s)}a&&this.collectEnterElement(r)}collectEnterElement(n){this.collectedEnterElements.push(n)}markElementAsDisabled(n,r){r?this.disabledNodes.has(n)||(this.disabledNodes.add(n),Dl(n,a2)):this.disabledNodes.has(n)&&(this.disabledNodes.delete(n),rE(n,a2))}removeNode(n,r,s,a){if(wR(r)){const c=n?this._fetchNamespace(n):null;if(c?c.removeNode(r,a):this.markElementAsRemoved(n,r,!1,a),s){const h=this.namespacesByHostElement.get(r);h&&h.id!==n&&h.removeNode(r,a)}}else this._onRemovalComplete(r,a)}markElementAsRemoved(n,r,s,a){this.collectedLeaveElements.push(r),r[Il]={namespaceId:n,setForRemoval:a,hasAnimation:s,removedBeforeQueried:!1}}listen(n,r,s,a,c){return wR(r)?this._fetchNamespace(n).listen(r,s,a,c):()=>{}}_buildInstruction(n,r,s,a,c){return n.transition.build(this.driver,n.element,n.fromState.value,n.toState.value,s,a,n.fromState.options,n.toState.options,r,c)}destroyInnerAnimations(n){let r=this.driver.query(n,cR,!0);r.forEach(s=>this.destroyActiveAnimationsForElement(s)),0!=this.playersByQueriedElement.size&&(r=this.driver.query(n,Sk,!0),r.forEach(s=>this.finishActiveQueriedAnimationOnElement(s)))}destroyActiveAnimationsForElement(n){const r=this.playersByElement.get(n);r&&r.forEach(s=>{s.queued?s.markedForDestroy=!0:s.destroy()})}finishActiveQueriedAnimationOnElement(n){const r=this.playersByQueriedElement.get(n);r&&r.forEach(s=>s.finish())}whenRenderingDone(){return new Promise(n=>{if(this.players.length)return Mp(this.players).onDone(()=>n());n()})}processLeaveNode(n){const r=n[Il];if(r&&r.setForRemoval){if(n[Il]=u2,r.namespaceId){this.destroyInnerAnimations(n);const s=this._fetchNamespace(r.namespaceId);s&&s.clearElementCache(n)}this._onRemovalComplete(n,r.setForRemoval)}this.driver.matchesElement(n,l2)&&this.markElementAsDisabled(n,!1),this.driver.query(n,l2,!0).forEach(s=>{this.markElementAsDisabled(s,!1)})}flush(n=-1){let r=[];if(this.newHostElements.size&&(this.newHostElements.forEach((s,a)=>this._balanceNamespaceList(s,a)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let s=0;s<this.collectedEnterElements.length;s++)Dl(this.collectedEnterElements[s],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const s=[];try{r=this._flushAnimations(s,n)}finally{for(let a=0;a<s.length;a++)s[a]()}}else for(let s=0;s<this.collectedLeaveElements.length;s++)this.processLeaveNode(this.collectedLeaveElements[s]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(s=>s()),this._flushFns=[],this._whenQuietFns.length){const s=this._whenQuietFns;this._whenQuietFns=[],r.length?Mp(r).onDone(()=>{s.forEach(a=>a())}):s.forEach(a=>a())}}reportError(n){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${n.join("\n")}`)}_flushAnimations(n,r){const s=new yR,a=[],c=new Map,h=[],m=new Map,E=new Map,C=new Map,S=new Set;this.disabledNodes.forEach(dt=>{S.add(dt);const At=this.driver.query(dt,".ng-animate-queued",!0);for(let qt=0;qt<At.length;qt++)S.add(At[qt])});const N=this.bodyNode,O=Array.from(this.statesByElement.keys()),B=h2(O,this.collectedEnterElements),W=new Map;let ue=0;B.forEach((dt,At)=>{const qt=Dk+ue++;W.set(At,qt),dt.forEach(xn=>Dl(xn,qt))});const Pe=[],Ze=new Set,rt=new Set;for(let dt=0;dt<this.collectedLeaveElements.length;dt++){const At=this.collectedLeaveElements[dt],qt=At[Il];qt&&qt.setForRemoval&&(Pe.push(At),Ze.add(At),qt.hasAnimation?this.driver.query(At,".ng-star-inserted",!0).forEach(xn=>Ze.add(xn)):rt.add(At))}const pt=new Map,tt=h2(O,Array.from(Ze));tt.forEach((dt,At)=>{const qt=lR+ue++;pt.set(At,qt),dt.forEach(xn=>Dl(xn,qt))}),n.push(()=>{B.forEach((dt,At)=>{const qt=W.get(At);dt.forEach(xn=>rE(xn,qt))}),tt.forEach((dt,At)=>{const qt=pt.get(At);dt.forEach(xn=>rE(xn,qt))}),Pe.forEach(dt=>{this.processLeaveNode(dt)})});const _n=[],Bn=[];for(let dt=this._namespaceList.length-1;dt>=0;dt--)this._namespaceList[dt].drainQueuedTransitions(r).forEach(qt=>{const xn=qt.player,Xi=qt.element;if(_n.push(xn),this.collectedEnterElements.length){const Uc=Xi[Il];if(Uc&&Uc.setForMove)return void xn.destroy()}const Vc=!N||!this.driver.containsElement(N,Xi),Oa=pt.get(Xi),kp=W.get(Xi),qr=this._buildInstruction(qt,s,kp,Oa,Vc);if(qr.errors&&qr.errors.length)Bn.push(qr);else{if(Vc)return xn.onStart(()=>n_(Xi,qr.fromStyles)),xn.onDestroy(()=>Lc(Xi,qr.toStyles)),void a.push(xn);if(qt.isFallbackTransition)return xn.onStart(()=>n_(Xi,qr.fromStyles)),xn.onDestroy(()=>Lc(Xi,qr.toStyles)),void a.push(xn);qr.timelines.forEach(Uc=>Uc.stretchStartingKeyframe=!0),s.append(Xi,qr.timelines),h.push({instruction:qr,player:xn,element:Xi}),qr.queriedElements.forEach(Uc=>xa(m,Uc,[]).push(xn)),qr.preStyleProps.forEach((Uc,O0)=>{const DR=Object.keys(Uc);if(DR.length){let s_=E.get(O0);s_||E.set(O0,s_=new Set),DR.forEach(qk=>s_.add(qk))}}),qr.postStyleProps.forEach((Uc,O0)=>{const DR=Object.keys(Uc);let s_=C.get(O0);s_||C.set(O0,s_=new Set),DR.forEach(qk=>s_.add(qk))})}});if(Bn.length){const dt=[];Bn.forEach(At=>{dt.push(`@${At.triggerName} has failed due to:\n`),At.errors.forEach(qt=>dt.push(`- ${qt}\n`))}),_n.forEach(At=>At.destroy()),this.reportError(dt)}const ui=new Map,fo=new Map;h.forEach(dt=>{const At=dt.element;s.has(At)&&(fo.set(At,At),this._beforeAnimationBuild(dt.player.namespaceId,dt.instruction,ui))}),a.forEach(dt=>{const At=dt.element;this._getPreviousPlayers(At,!1,dt.namespaceId,dt.triggerName,null).forEach(xn=>{xa(ui,At,[]).push(xn),xn.destroy()})});const Ma=Pe.filter(dt=>p2(dt,E,C)),xh=new Map;d2(xh,this.driver,rt,C,Nh).forEach(dt=>{p2(dt,E,C)&&Ma.push(dt)});const M0=new Map;B.forEach((dt,At)=>{d2(M0,this.driver,new Set(dt),E,"!")}),Ma.forEach(dt=>{const At=xh.get(dt),qt=M0.get(dt);xh.set(dt,Object.assign(Object.assign({},At),qt))});const i_=[],V2=[],U2={};h.forEach(dt=>{const{element:At,player:qt,instruction:xn}=dt;if(s.has(At)){if(S.has(At))return qt.onDestroy(()=>Lc(At,xn.toStyles)),qt.disabled=!0,qt.overrideTotalTime(xn.totalTime),void a.push(qt);let Xi=U2;if(fo.size>1){let Oa=At;const kp=[];for(;Oa=Oa.parentNode;){const qr=fo.get(Oa);if(qr){Xi=qr;break}kp.push(Oa)}kp.forEach(qr=>fo.set(qr,Xi))}const Vc=this._buildAnimation(qt.namespaceId,xn,ui,c,M0,xh);if(qt.setRealPlayer(Vc),Xi===U2)i_.push(qt);else{const Oa=this.playersByElement.get(Xi);Oa&&Oa.length&&(qt.parentPlayer=Mp(Oa)),a.push(qt)}}else n_(At,xn.fromStyles),qt.onDestroy(()=>Lc(At,xn.toStyles)),V2.push(qt),S.has(At)&&a.push(qt)}),V2.forEach(dt=>{const At=c.get(dt.element);if(At&&At.length){const qt=Mp(At);dt.setRealPlayer(qt)}}),a.forEach(dt=>{dt.parentPlayer?dt.syncPlayerEvents(dt.parentPlayer):dt.destroy()});for(let dt=0;dt<Pe.length;dt++){const At=Pe[dt],qt=At[Il];if(rE(At,lR),qt&&qt.hasAnimation)continue;let xn=[];if(m.size){let Vc=m.get(At);Vc&&Vc.length&&xn.push(...Vc);let Oa=this.driver.query(At,Sk,!0);for(let kp=0;kp<Oa.length;kp++){let qr=m.get(Oa[kp]);qr&&qr.length&&xn.push(...qr)}}const Xi=xn.filter(Vc=>!Vc.destroyed);Xi.length?dz(this,At,Xi):this.processLeaveNode(At)}return Pe.length=0,i_.forEach(dt=>{this.players.push(dt),dt.onDone(()=>{dt.destroy();const At=this.players.indexOf(dt);this.players.splice(At,1)}),dt.play()}),i_}elementContainsData(n,r){let s=!1;const a=r[Il];return a&&a.setForRemoval&&(s=!0),this.playersByElement.has(r)&&(s=!0),this.playersByQueriedElement.has(r)&&(s=!0),this.statesByElement.has(r)&&(s=!0),this._fetchNamespace(n).elementContainsData(r)||s}afterFlush(n){this._flushFns.push(n)}afterFlushAnimationsDone(n){this._whenQuietFns.push(n)}_getPreviousPlayers(n,r,s,a,c){let h=[];if(r){const m=this.playersByQueriedElement.get(n);m&&(h=m)}else{const m=this.playersByElement.get(n);if(m){const E=!c||c==P0;m.forEach(C=>{C.queued||!E&&C.triggerName!=a||h.push(C)})}}return(s||a)&&(h=h.filter(m=>!(s&&s!=m.namespaceId||a&&a!=m.triggerName))),h}_beforeAnimationBuild(n,r,s){const c=r.element,h=r.isRemovalTransition?void 0:n,m=r.isRemovalTransition?void 0:r.triggerName;for(const E of r.timelines){const C=E.element,S=C!==c,N=xa(s,C,[]);this._getPreviousPlayers(C,S,h,m,r.toState).forEach(B=>{const W=B.getRealPlayer();W.beforeDestroy&&W.beforeDestroy(),B.destroy(),N.push(B)})}n_(c,r.fromStyles)}_buildAnimation(n,r,s,a,c,h){const m=r.triggerName,E=r.element,C=[],S=new Set,N=new Set,O=r.timelines.map(W=>{const ue=W.element;S.add(ue);const Pe=ue[Il];if(Pe&&Pe.removedBeforeQueried)return new tE(W.duration,W.delay);const Ze=ue!==E,rt=function(i){const n=[];return f2(i,n),n}((s.get(ue)||iz).map(ui=>ui.getRealPlayer())).filter(ui=>!!ui.element&&ui.element===ue),pt=c.get(ue),tt=h.get(ue),_n=VU(0,this._normalizer,0,W.keyframes,pt,tt),Bn=this._buildPlayer(W,_n,rt);if(W.subTimeline&&a&&N.add(ue),Ze){const ui=new jk(n,m,ue);ui.setRealPlayer(Bn),C.push(ui)}return Bn});C.forEach(W=>{xa(this.playersByQueriedElement,W.element,[]).push(W),W.onDone(()=>function(i,n,r){let s;if(i instanceof Map){if(s=i.get(n),s){if(s.length){const a=s.indexOf(r);s.splice(a,1)}0==s.length&&i.delete(n)}}else if(s=i[n],s){if(s.length){const a=s.indexOf(r);s.splice(a,1)}0==s.length&&delete i[n]}return s}(this.playersByQueriedElement,W.element,W))}),S.forEach(W=>Dl(W,WU));const B=Mp(O);return B.onDestroy(()=>{S.forEach(W=>rE(W,WU)),Lc(E,r.toStyles)}),N.forEach(W=>{xa(a,W,[]).push(B)}),B}_buildPlayer(n,r,s){return r.length>0?this.driver.animate(n.element,r,n.duration,n.delay,n.easing,s):new tE(n.duration,n.delay)}}class jk{constructor(n,r,s){this.namespaceId=n,this.triggerName=r,this.element=s,this._player=new tE,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(n){this._containsRealPlayer||(this._player=n,Object.keys(this._queuedCallbacks).forEach(r=>{this._queuedCallbacks[r].forEach(s=>mk(n,r,void 0,s))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(n.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(n){this.totalTime=n}syncPlayerEvents(n){const r=this._player;r.triggerCallback&&n.onStart(()=>r.triggerCallback("start")),n.onDone(()=>this.finish()),n.onDestroy(()=>this.destroy())}_queueEvent(n,r){xa(this._queuedCallbacks,n,[]).push(r)}onDone(n){this.queued&&this._queueEvent("done",n),this._player.onDone(n)}onStart(n){this.queued&&this._queueEvent("start",n),this._player.onStart(n)}onDestroy(n){this.queued&&this._queueEvent("destroy",n),this._player.onDestroy(n)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(n){this.queued||this._player.setPosition(n)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(n){const r=this._player;r.triggerCallback&&r.triggerCallback(n)}}function wR(i){return i&&1===i.nodeType}function c2(i,n){const r=i.style.display;return i.style.display=null!=n?n:"none",r}function d2(i,n,r,s,a){const c=[];r.forEach(E=>c.push(c2(E)));const h=[];s.forEach((E,C)=>{const S={};E.forEach(N=>{const O=S[N]=n.computeStyle(C,N,a);(!O||0==O.length)&&(C[Il]=sz,h.push(C))}),i.set(C,S)});let m=0;return r.forEach(E=>c2(E,c[m++])),h}function h2(i,n){const r=new Map;if(i.forEach(m=>r.set(m,[])),0==n.length)return r;const a=new Set(n),c=new Map;function h(m){if(!m)return 1;let E=c.get(m);if(E)return E;const C=m.parentNode;return E=r.has(C)?C:a.has(C)?1:h(C),c.set(m,E),E}return n.forEach(m=>{const E=h(m);1!==E&&r.get(E).push(m)}),r}const bR="$$classes";function Dl(i,n){if(i.classList)i.classList.add(n);else{let r=i[bR];r||(r=i[bR]={}),r[n]=!0}}function rE(i,n){if(i.classList)i.classList.remove(n);else{let r=i[bR];r&&delete r[n]}}function dz(i,n,r){Mp(r).onDone(()=>i.processLeaveNode(n))}function f2(i,n){for(let r=0;r<i.length;r++){const s=i[r];s instanceof PU?f2(s.players,n):n.push(s)}}function p2(i,n,r){const s=r.get(i);if(!s)return!1;let a=n.get(i);return a?s.forEach(c=>a.add(c)):n.set(i,s),r.delete(i),!0}class CR{constructor(n,r,s){this.bodyNode=n,this._driver=r,this._normalizer=s,this._triggerCache={},this.onRemovalComplete=(a,c)=>{},this._transitionEngine=new az(n,r,s),this._timelineEngine=new ez(n,r,s),this._transitionEngine.onRemovalComplete=(a,c)=>this.onRemovalComplete(a,c)}registerTrigger(n,r,s,a,c){const h=n+"-"+a;let m=this._triggerCache[h];if(!m){const E=[],C=Pk(this._driver,c,E);if(E.length)throw new Error(`The animation trigger "${a}" has failed to build due to the following errors:\n - ${E.join("\n - ")}`);m=function(i,n,r){return new QW(i,n,r)}(a,C,this._normalizer),this._triggerCache[h]=m}this._transitionEngine.registerTrigger(r,a,m)}register(n,r){this._transitionEngine.register(n,r)}destroy(n,r){this._transitionEngine.destroy(n,r)}onInsert(n,r,s,a){this._transitionEngine.insertNode(n,r,s,a)}onRemove(n,r,s,a){this._transitionEngine.removeNode(n,r,a||!1,s)}disableAnimations(n,r){this._transitionEngine.markElementAsDisabled(n,r)}process(n,r,s,a){if("@"==s.charAt(0)){const[c,h]=UU(s);this._timelineEngine.command(c,r,h,a)}else this._transitionEngine.trigger(n,r,s,a)}listen(n,r,s,a,c){if("@"==s.charAt(0)){const[h,m]=UU(s);return this._timelineEngine.listen(h,r,m,c)}return this._transitionEngine.listen(n,r,s,a,c)}flush(n=-1){this._transitionEngine.flush(n)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function g2(i,n){let r=null,s=null;return Array.isArray(n)&&n.length?(r=$k(n[0]),n.length>1&&(s=$k(n[n.length-1]))):n&&(r=$k(n)),r||s?new pz(i,r,s):null}let pz=(()=>{class i{constructor(r,s,a){this._element=r,this._startStyles=s,this._endStyles=a,this._state=0;let c=i.initialStylesByElement.get(r);c||i.initialStylesByElement.set(r,c={}),this._initialStyles=c}start(){this._state<1&&(this._startStyles&&Lc(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Lc(this._element,this._initialStyles),this._endStyles&&(Lc(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(i.initialStylesByElement.delete(this._element),this._startStyles&&(n_(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(n_(this._element,this._endStyles),this._endStyles=null),Lc(this._element,this._initialStyles),this._state=3)}}return i.initialStylesByElement=new WeakMap,i})();function $k(i){let n=null;const r=Object.keys(i);for(let s=0;s<r.length;s++){const a=r[s];gz(a)&&(n=n||{},n[a]=i[a])}return n}function gz(i){return"display"===i||"position"===i}const m2="animation",_2="animationend";class yz{constructor(n,r,s,a,c,h,m){this._element=n,this._name=r,this._duration=s,this._delay=a,this._easing=c,this._fillMode=h,this._onDoneFn=m,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=E=>this._handleCallback(E)}apply(){(function(i,n){const r=Gk(i,"").trim();let s=0;r.length&&(function(i,n){let r=0;for(let s=0;s<i.length;s++)","===i.charAt(s)&&r++;return r}(r)+1,n=`${r}, ${n}`),TR(i,"",n)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),E2(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){y2(this._element,this._name,"paused")}resume(){y2(this._element,this._name,"running")}setPosition(n){const r=v2(this._element,this._name);this._position=n*this._duration,TR(this._element,"Delay",`-${this._position}ms`,r)}getPosition(){return this._position}_handleCallback(n){const r=n._ngTestManualTimestamp||Date.now(),s=1e3*parseFloat(n.elapsedTime.toFixed(3));n.animationName==this._name&&Math.max(r-this._startTime,0)>=this._delay&&s>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),E2(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(i,n){const s=Gk(i,"").split(","),a=Hk(s,n);a>=0&&(s.splice(a,1),TR(i,"",s.join(",")))}(this._element,this._name))}}function y2(i,n,r){TR(i,"PlayState",r,v2(i,n))}function v2(i,n){const r=Gk(i,"");return r.indexOf(",")>0?Hk(r.split(","),n):Hk([r],n)}function Hk(i,n){for(let r=0;r<i.length;r++)if(i[r].indexOf(n)>=0)return r;return-1}function E2(i,n,r){r?i.removeEventListener(_2,n):i.addEventListener(_2,n)}function TR(i,n,r,s){const a=m2+n;if(null!=s){const c=i.style[a];if(c.length){const h=c.split(",");h[s]=r,r=h.join(",")}}i.style[a]=r}function Gk(i,n){return i.style[m2+n]||""}class w2{constructor(n,r,s,a,c,h,m,E){this.element=n,this.keyframes=r,this.animationName=s,this._duration=a,this._delay=c,this._finalStyles=m,this._specialStyles=E,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=h||"linear",this.totalTime=a+c,this._buildStyler()}onStart(n){this._onStartFns.push(n)}onDone(n){this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(n=>n()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(n=>n()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(n){this._styler.setPosition(n)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new yz(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(n){const r="start"==n?this._onStartFns:this._onDoneFns;r.forEach(s=>s()),r.length=0}beforeDestroy(){this.init();const n={};if(this.hasStarted()){const r=this._state>=3;Object.keys(this._finalStyles).forEach(s=>{"offset"!=s&&(n[s]=r?this._finalStyles[s]:xk(this.element,s))})}this.currentSnapshot=n}}class Tz extends tE{constructor(n,r){super(),this.element=n,this._startingStyles={},this.__initialized=!1,this._styles=HU(r)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(n=>{this._startingStyles[n]=this.element.style[n]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(n=>this.element.style.setProperty(n,this._styles[n])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(n=>{const r=this._startingStyles[n];r?this.element.style.setProperty(n,r):this.element.style.removeProperty(n)}),this._startingStyles=null,super.destroy())}}class C2{constructor(){this._count=0}validateStyleProperty(n){return wk(n)}matchesElement(n,r){return bk(n,r)}containsElement(n,r){return Ck(n,r)}query(n,r,s){return Tk(n,r,s)}computeStyle(n,r,s){return window.getComputedStyle(n)[r]}buildKeyframeElement(n,r,s){s=s.map(m=>HU(m));let a=`@keyframes ${r} {\n`,c="";s.forEach(m=>{c=" ";const E=parseFloat(m.offset);a+=`${c}${100*E}% {\n`,c+=" ",Object.keys(m).forEach(C=>{const S=m[C];switch(C){case"offset":return;case"easing":return void(S&&(a+=`${c}animation-timing-function: ${S};\n`));default:return void(a+=`${c}${C}: ${S};\n`)}}),a+=`${c}}\n`}),a+="}\n";const h=document.createElement("style");return h.textContent=a,h}animate(n,r,s,a,c,h=[],m){const E=h.filter(Pe=>Pe instanceof w2),C={};QU(s,a)&&E.forEach(Pe=>{let Ze=Pe.currentSnapshot;Object.keys(Ze).forEach(rt=>C[rt]=Ze[rt])});const S=function(i){let n={};return i&&(Array.isArray(i)?i:[i]).forEach(s=>{Object.keys(s).forEach(a=>{"offset"==a||"easing"==a||(n[a]=s[a])})}),n}(r=JU(n,r,C));if(0==s)return new Tz(n,S);const N="gen_css_kf_"+this._count++,O=this.buildKeyframeElement(n,N,r);(function(i){var n;const r=null===(n=i.getRootNode)||void 0===n?void 0:n.call(i);return"undefined"!=typeof ShadowRoot&&r instanceof ShadowRoot?r:document.head})(n).appendChild(O);const W=g2(n,r),ue=new w2(n,r,N,s,a,c,S,W);return ue.onDestroy(()=>function(i){i.parentNode.removeChild(i)}(O)),ue}}class I2{constructor(n,r,s,a){this.element=n,this.keyframes=r,this.options=s,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=s.duration,this._delay=s.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const n=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,n,this.options),this._finalKeyframe=n.length?n[n.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(n,r,s){return n.animate(r,s)}onStart(n){this._onStartFns.push(n)}onDone(n){this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(n=>n()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}setPosition(n){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=n*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const n={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(r=>{"offset"!=r&&(n[r]=this._finished?this._finalKeyframe[r]:xk(this.element,r))}),this.currentSnapshot=n}triggerCallback(n){const r="start"==n?this._onStartFns:this._onDoneFns;r.forEach(s=>s()),r.length=0}}class Rz{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(D2().toString()),this._cssKeyframesDriver=new C2}validateStyleProperty(n){return wk(n)}matchesElement(n,r){return bk(n,r)}containsElement(n,r){return Ck(n,r)}query(n,r,s){return Tk(n,r,s)}computeStyle(n,r,s){return window.getComputedStyle(n)[r]}overrideWebAnimationsSupport(n){this._isNativeImpl=n}animate(n,r,s,a,c,h=[],m){if(!m&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(n,r,s,a,c,h);const S={duration:s,delay:a,fill:0==a?"both":"forwards"};c&&(S.easing=c);const N={},O=h.filter(W=>W instanceof I2);QU(s,a)&&O.forEach(W=>{let ue=W.currentSnapshot;Object.keys(ue).forEach(Pe=>N[Pe]=ue[Pe])});const B=g2(n,r=JU(n,r=r.map(W=>Op(W,!1)),N));return new I2(n,r,S,B)}}function D2(){return LU()&&Element.prototype.animate||{}}let xz=(()=>{class i extends SU{constructor(r,s){super(),this._nextAnimationId=0,this._renderer=r.createRenderer(s.body,{id:"0",encapsulation:_.ifc.None,styles:[],data:{animation:[]}})}build(r){const s=this._nextAnimationId.toString();this._nextAnimationId++;const a=Array.isArray(r)?RU(r):r;return S2(this._renderer,null,s,"register",[a]),new Pz(s,this._renderer)}}return i.\u0275fac=function(r){return new(r||i)(_.LFG(_.FYo),_.LFG(Re))},i.\u0275prov=_.Yz7({token:i,factory:i.\u0275fac}),i})();class Pz extends class{}{constructor(n,r){super(),this._id=n,this._renderer=r}create(n,r){return new Mz(this._id,n,r||{},this._renderer)}}class Mz{constructor(n,r,s,a){this.id=n,this.element=r,this._renderer=a,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",s)}_listen(n,r){return this._renderer.listen(this.element,`@@${this.id}:${n}`,r)}_command(n,...r){return S2(this._renderer,this.element,this.id,n,r)}onDone(n){this._listen("done",n)}onStart(n){this._listen("start",n)}onDestroy(n){this._listen("destroy",n)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(n){this._command("setPosition",n)}getPosition(){var n,r;return null!==(r=null===(n=this._renderer.engine.players[+this.id])||void 0===n?void 0:n.getPosition())&&void 0!==r?r:0}}function S2(i,n,r,s,a){return i.setProperty(n,`@@${r}:${s}`,a)}const A2="@.disabled";let Oz=(()=>{class i{constructor(r,s,a){this.delegate=r,this.engine=s,this._zone=a,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),s.onRemovalComplete=(c,h)=>{h&&h.parentNode(c)&&h.removeChild(c.parentNode,c)}}createRenderer(r,s){const c=this.delegate.createRenderer(r,s);if(!(r&&s&&s.data&&s.data.animation)){let S=this._rendererCache.get(c);return S||(S=new R2("",c,this.engine),this._rendererCache.set(c,S)),S}const h=s.id,m=s.id+"-"+this._currentId;this._currentId++,this.engine.register(m,r);const E=S=>{Array.isArray(S)?S.forEach(E):this.engine.registerTrigger(h,m,r,S.name,S)};return s.data.animation.forEach(E),new kz(this,m,c,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(r,s,a){r>=0&&r<this._microtaskId?this._zone.run(()=>s(a)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(c=>{const[h,m]=c;h(m)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([s,a]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return i.\u0275fac=function(r){return new(r||i)(_.LFG(_.FYo),_.LFG(CR),_.LFG(_.R0b))},i.\u0275prov=_.Yz7({token:i,factory:i.\u0275fac}),i})();class R2{constructor(n,r,s){this.namespaceId=n,this.delegate=r,this.engine=s,this.destroyNode=this.delegate.destroyNode?a=>r.destroyNode(a):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(n,r){return this.delegate.createElement(n,r)}createComment(n){return this.delegate.createComment(n)}createText(n){return this.delegate.createText(n)}appendChild(n,r){this.delegate.appendChild(n,r),this.engine.onInsert(this.namespaceId,r,n,!1)}insertBefore(n,r,s,a=!0){this.delegate.insertBefore(n,r,s),this.engine.onInsert(this.namespaceId,r,n,a)}removeChild(n,r,s){this.engine.onRemove(this.namespaceId,r,this.delegate,s)}selectRootElement(n,r){return this.delegate.selectRootElement(n,r)}parentNode(n){return this.delegate.parentNode(n)}nextSibling(n){return this.delegate.nextSibling(n)}setAttribute(n,r,s,a){this.delegate.setAttribute(n,r,s,a)}removeAttribute(n,r,s){this.delegate.removeAttribute(n,r,s)}addClass(n,r){this.delegate.addClass(n,r)}removeClass(n,r){this.delegate.removeClass(n,r)}setStyle(n,r,s,a){this.delegate.setStyle(n,r,s,a)}removeStyle(n,r,s){this.delegate.removeStyle(n,r,s)}setProperty(n,r,s){"@"==r.charAt(0)&&r==A2?this.disableAnimations(n,!!s):this.delegate.setProperty(n,r,s)}setValue(n,r){this.delegate.setValue(n,r)}listen(n,r,s){return this.delegate.listen(n,r,s)}disableAnimations(n,r){this.engine.disableAnimations(n,r)}}class kz extends R2{constructor(n,r,s,a){super(r,s,a),this.factory=n,this.namespaceId=r}setProperty(n,r,s){"@"==r.charAt(0)?"."==r.charAt(1)&&r==A2?this.disableAnimations(n,s=void 0===s||!!s):this.engine.process(this.namespaceId,n,r.substr(1),s):this.delegate.setProperty(n,r,s)}listen(n,r,s){if("@"==r.charAt(0)){const a=function(i){switch(i){case"body":return document.body;case"document":return document;case"window":return window;default:return i}}(n);let c=r.substr(1),h="";return"@"!=c.charAt(0)&&([c,h]=function(i){const n=i.indexOf(".");return[i.substring(0,n),i.substr(n+1)]}(c)),this.engine.listen(this.namespaceId,a,c,h,m=>{this.factory.scheduleListenerCallback(m._data||-1,s,m)})}return this.delegate.listen(n,r,s)}}let Vz=(()=>{class i extends CR{constructor(r,s,a){super(r.body,s,a)}ngOnDestroy(){this.flush()}}return i.\u0275fac=function(r){return new(r||i)(_.LFG(Re),_.LFG(Ik),_.LFG(Lk))},i.\u0275prov=_.Yz7({token:i,factory:i.\u0275fac}),i})();const N2=new _.OlP("AnimationModuleType"),x2=[{provide:SU,useClass:xz},{provide:Lk,useFactory:function(){return new qW}},{provide:CR,useClass:Vz},{provide:_.FYo,useFactory:function(i,n,r){return new Oz(i,n,r)},deps:[ss,CR,_.R0b]}],P2=[{provide:Ik,useFactory:function(){return"function"==typeof D2()?new Rz:new C2}},{provide:N2,useValue:"BrowserAnimations"},...x2],M2=[{provide:Ik,useClass:GU},{provide:N2,useValue:"NoopAnimations"},...x2];let O2=(()=>{class i{static withConfig(r){return{ngModule:i,providers:r.disableAnimations?M2:P2}}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=_.oAB({type:i}),i.\u0275inj=_.cJS({providers:P2,imports:[Wh]}),i})(),k2=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=_.oAB({type:i}),i.\u0275inj=_.cJS({providers:[CO],imports:[[hi,aR,FU,K3,O2,fk.forRoot()]]}),i})();const F2_firebase={apiKey:"AIzaSyBxEr3kfkRaUHf6cRYYEtmthNfWwET_0bA",authDomain:"notes-app-2d51b.firebaseapp.com",projectId:"notes-app-2d51b",storageBucket:"notes-app-2d51b.appspot.com",messagingSenderId:"784578920873",appId:"1:784578920873:web:4cd9082e61b1a9e17f84b8"};let $z=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=_.oAB({type:i,bootstrap:[_W]}),i.\u0275inj=_.cJS({providers:[pk],imports:[[Wh,aR,yW,k2,rS,Un.hO.initializeApp(F2_firebase),kj,JD,k2,FU,O2,fk.forRoot()]]}),i})();(0,_.G48)(),Vl().bootstrapModule($z).catch(i=>console.error(i))},4762:(lt,ke,$)=>{"use strict";function _e(he,we){var Te={};for(var Ae in he)Object.prototype.hasOwnProperty.call(he,Ae)&&we.indexOf(Ae)<0&&(Te[Ae]=he[Ae]);if(null!=he&&"function"==typeof Object.getOwnPropertySymbols){var He=0;for(Ae=Object.getOwnPropertySymbols(he);He<Ae.length;He++)we.indexOf(Ae[He])<0&&Object.prototype.propertyIsEnumerable.call(he,Ae[He])&&(Te[Ae[He]]=he[Ae[He]])}return Te}function re(he,we,Te,Ae){return new(Te||(Te=Promise))(function(be,Tt){function gn(Dt){try{xt(Ae.next(Dt))}catch(Ot){Tt(Ot)}}function Hn(Dt){try{xt(Ae.throw(Dt))}catch(Ot){Tt(Ot)}}function xt(Dt){Dt.done?be(Dt.value):function(be){return be instanceof Te?be:new Te(function(Tt){Tt(be)})}(Dt.value).then(gn,Hn)}xt((Ae=Ae.apply(he,we||[])).next())})}function ne(he,we){var Ae,He,be,Tt,Te={label:0,sent:function(){if(1&be[0])throw be[1];return be[1]},trys:[],ops:[]};return Tt={next:gn(0),throw:gn(1),return:gn(2)},"function"==typeof Symbol&&(Tt[Symbol.iterator]=function(){return this}),Tt;function gn(xt){return function(Dt){return function(xt){if(Ae)throw new TypeError("Generator is already executing.");for(;Te;)try{if(Ae=1,He&&(be=2&xt[0]?He.return:xt[0]?He.throw||((be=He.return)&&be.call(He),0):He.next)&&!(be=be.call(He,xt[1])).done)return be;switch(He=0,be&&(xt=[2&xt[0],be.value]),xt[0]){case 0:case 1:be=xt;break;case 4:return Te.label++,{value:xt[1],done:!1};case 5:Te.label++,He=xt[1],xt=[0];continue;case 7:xt=Te.ops.pop(),Te.trys.pop();continue;default:if(!(be=(be=Te.trys).length>0&&be[be.length-1])&&(6===xt[0]||2===xt[0])){Te=0;continue}if(3===xt[0]&&(!be||xt[1]>be[0]&&xt[1]<be[3])){Te.label=xt[1];break}if(6===xt[0]&&Te.label<be[1]){Te.label=be[1],be=xt;break}if(be&&Te.label<be[2]){Te.label=be[2],Te.ops.push(xt);break}be[2]&&Te.ops.pop(),Te.trys.pop();continue}xt=we.call(he,Te)}catch(Dt){xt=[6,Dt],He=0}finally{Ae=be=0}if(5&xt[0])throw xt[1];return{value:xt[0]?xt[1]:void 0,done:!0}}([xt,Dt])}}}function K(he){var we="function"==typeof Symbol&&Symbol.iterator,Te=we&&he[we],Ae=0;if(Te)return Te.call(he);if(he&&"number"==typeof he.length)return{next:function(){return he&&Ae>=he.length&&(he=void 0),{value:he&&he[Ae++],done:!he}}};throw new TypeError(we?"Object is not iterable.":"Symbol.iterator is not defined.")}function ce(he,we){var Te="function"==typeof Symbol&&he[Symbol.iterator];if(!Te)return he;var He,Tt,Ae=Te.call(he),be=[];try{for(;(void 0===we||we-- >0)&&!(He=Ae.next()).done;)be.push(He.value)}catch(gn){Tt={error:gn}}finally{try{He&&!He.done&&(Te=Ae.return)&&Te.call(Ae)}finally{if(Tt)throw Tt.error}}return be}function Ce(he,we,Te){if(Te||2===arguments.length)for(var be,Ae=0,He=we.length;Ae<He;Ae++)(be||!(Ae in we))&&(be||(be=Array.prototype.slice.call(we,0,Ae)),be[Ae]=we[Ae]);return he.concat(be||Array.prototype.slice.call(we))}$.d(ke,{_T:()=>_e,mG:()=>re,Jh:()=>ne,XA:()=>K,CR:()=>ce,ev:()=>Ce})},8239:(lt,ke,$)=>{"use strict";function _(L,_e,de,ie,Re,re,ne){try{var j=L[re](ne),G=j.value}catch(K){return void de(K)}j.done?_e(G):Promise.resolve(G).then(ie,Re)}function z(L){return function(){var _e=this,de=arguments;return new Promise(function(ie,Re){var re=L.apply(_e,de);function ne(G){_(re,ie,Re,ne,j,"next",G)}function j(G){_(re,ie,Re,ne,j,"throw",G)}ne(void 0)})}}$.d(ke,{Z:()=>z})}},lt=>{lt(lt.s=228)}]);